/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.ts");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/@excaliburjs/excalibur-tiled/dist/excalibur-tiled.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@excaliburjs/excalibur-tiled/dist/excalibur-tiled.js ***!
  \***************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory(__webpack_require__(/*! excalibur */ \"./node_modules/excalibur/dist/excalibur.min.js\"));\n\telse {}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_8__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 7);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n\nvar TYPED_OK =  (typeof Uint8Array !== 'undefined') &&\n                (typeof Uint16Array !== 'undefined') &&\n                (typeof Int32Array !== 'undefined');\n\nfunction _has(obj, key) {\n  return Object.prototype.hasOwnProperty.call(obj, key);\n}\n\nexports.assign = function (obj /*from1, from2, from3, ...*/) {\n  var sources = Array.prototype.slice.call(arguments, 1);\n  while (sources.length) {\n    var source = sources.shift();\n    if (!source) { continue; }\n\n    if (typeof source !== 'object') {\n      throw new TypeError(source + 'must be non-object');\n    }\n\n    for (var p in source) {\n      if (_has(source, p)) {\n        obj[p] = source[p];\n      }\n    }\n  }\n\n  return obj;\n};\n\n\n// reduce buffer size, avoiding mem copy\nexports.shrinkBuf = function (buf, size) {\n  if (buf.length === size) { return buf; }\n  if (buf.subarray) { return buf.subarray(0, size); }\n  buf.length = size;\n  return buf;\n};\n\n\nvar fnTyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    if (src.subarray && dest.subarray) {\n      dest.set(src.subarray(src_offs, src_offs + len), dest_offs);\n      return;\n    }\n    // Fallback to ordinary array\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    var i, l, len, pos, chunk, result;\n\n    // calculate data length\n    len = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      len += chunks[i].length;\n    }\n\n    // join chunks\n    result = new Uint8Array(len);\n    pos = 0;\n    for (i = 0, l = chunks.length; i < l; i++) {\n      chunk = chunks[i];\n      result.set(chunk, pos);\n      pos += chunk.length;\n    }\n\n    return result;\n  }\n};\n\nvar fnUntyped = {\n  arraySet: function (dest, src, src_offs, len, dest_offs) {\n    for (var i = 0; i < len; i++) {\n      dest[dest_offs + i] = src[src_offs + i];\n    }\n  },\n  // Join array of chunks to single array.\n  flattenChunks: function (chunks) {\n    return [].concat.apply([], chunks);\n  }\n};\n\n\n// Enable/Disable typed arrays use, for testing\n//\nexports.setTyped = function (on) {\n  if (on) {\n    exports.Buf8  = Uint8Array;\n    exports.Buf16 = Uint16Array;\n    exports.Buf32 = Int32Array;\n    exports.assign(exports, fnTyped);\n  } else {\n    exports.Buf8  = Array;\n    exports.Buf16 = Array;\n    exports.Buf32 = Array;\n    exports.assign(exports, fnUntyped);\n  }\n};\n\nexports.setTyped(TYPED_OK);\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n  2:      'need dictionary',     /* Z_NEED_DICT       2  */\n  1:      'stream end',          /* Z_STREAM_END      1  */\n  0:      '',                    /* Z_OK              0  */\n  '-1':   'file error',          /* Z_ERRNO         (-1) */\n  '-2':   'stream error',        /* Z_STREAM_ERROR  (-2) */\n  '-3':   'data error',          /* Z_DATA_ERROR    (-3) */\n  '-4':   'insufficient memory', /* Z_MEM_ERROR     (-4) */\n  '-5':   'buffer error',        /* Z_BUF_ERROR     (-5) */\n  '-6':   'incompatible version' /* Z_VERSION_ERROR (-6) */\n};\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// Note: adler32 takes 12% for level 0 and 2% for level 6.\n// It isn't worth it to make additional optimizations as in original.\n// Small size is preferable.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction adler32(adler, buf, len, pos) {\n  var s1 = (adler & 0xffff) |0,\n      s2 = ((adler >>> 16) & 0xffff) |0,\n      n = 0;\n\n  while (len !== 0) {\n    // Set limit ~ twice less than 5552, to keep\n    // s2 in 31-bits, because we force signed ints.\n    // in other case %= will fail.\n    n = len > 2000 ? 2000 : len;\n    len -= n;\n\n    do {\n      s1 = (s1 + buf[pos++]) |0;\n      s2 = (s2 + s1) |0;\n    } while (--n);\n\n    s1 %= 65521;\n    s2 %= 65521;\n  }\n\n  return (s1 | (s2 << 16)) |0;\n}\n\n\nmodule.exports = adler32;\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// Note: we can't get significant speed boost here.\n// So write code to minimize size - no pregenerated tables\n// and array tools dependencies.\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// Use ordinary array, since untyped makes no boost here\nfunction makeTable() {\n  var c, table = [];\n\n  for (var n = 0; n < 256; n++) {\n    c = n;\n    for (var k = 0; k < 8; k++) {\n      c = ((c & 1) ? (0xEDB88320 ^ (c >>> 1)) : (c >>> 1));\n    }\n    table[n] = c;\n  }\n\n  return table;\n}\n\n// Create table on load. Just 255 signed longs. Not a problem.\nvar crcTable = makeTable();\n\n\nfunction crc32(crc, buf, len, pos) {\n  var t = crcTable,\n      end = pos + len;\n\n  crc ^= -1;\n\n  for (var i = pos; i < end; i++) {\n    crc = (crc >>> 8) ^ t[(crc ^ buf[i]) & 0xFF];\n  }\n\n  return (crc ^ (-1)); // >>> 0;\n}\n\n\nmodule.exports = crc32;\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// String encode/decode helpers\n\n\n\nvar utils = __webpack_require__(0);\n\n\n// Quick check if we can use fast array to bin string conversion\n//\n// - apply(Array) can fail on Android 2.2\n// - apply(Uint8Array) can fail on iOS 5.1 Safari\n//\nvar STR_APPLY_OK = true;\nvar STR_APPLY_UIA_OK = true;\n\ntry { String.fromCharCode.apply(null, [ 0 ]); } catch (__) { STR_APPLY_OK = false; }\ntry { String.fromCharCode.apply(null, new Uint8Array(1)); } catch (__) { STR_APPLY_UIA_OK = false; }\n\n\n// Table with utf8 lengths (calculated by first byte of sequence)\n// Note, that 5 & 6-byte values and some 4-byte values can not be represented in JS,\n// because max possible codepoint is 0x10ffff\nvar _utf8len = new utils.Buf8(256);\nfor (var q = 0; q < 256; q++) {\n  _utf8len[q] = (q >= 252 ? 6 : q >= 248 ? 5 : q >= 240 ? 4 : q >= 224 ? 3 : q >= 192 ? 2 : 1);\n}\n_utf8len[254] = _utf8len[254] = 1; // Invalid sequence start\n\n\n// convert string to array (typed, when possible)\nexports.string2buf = function (str) {\n  var buf, c, c2, m_pos, i, str_len = str.length, buf_len = 0;\n\n  // count binary size\n  for (m_pos = 0; m_pos < str_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    buf_len += c < 0x80 ? 1 : c < 0x800 ? 2 : c < 0x10000 ? 3 : 4;\n  }\n\n  // allocate buffer\n  buf = new utils.Buf8(buf_len);\n\n  // convert\n  for (i = 0, m_pos = 0; i < buf_len; m_pos++) {\n    c = str.charCodeAt(m_pos);\n    if ((c & 0xfc00) === 0xd800 && (m_pos + 1 < str_len)) {\n      c2 = str.charCodeAt(m_pos + 1);\n      if ((c2 & 0xfc00) === 0xdc00) {\n        c = 0x10000 + ((c - 0xd800) << 10) + (c2 - 0xdc00);\n        m_pos++;\n      }\n    }\n    if (c < 0x80) {\n      /* one byte */\n      buf[i++] = c;\n    } else if (c < 0x800) {\n      /* two bytes */\n      buf[i++] = 0xC0 | (c >>> 6);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else if (c < 0x10000) {\n      /* three bytes */\n      buf[i++] = 0xE0 | (c >>> 12);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    } else {\n      /* four bytes */\n      buf[i++] = 0xf0 | (c >>> 18);\n      buf[i++] = 0x80 | (c >>> 12 & 0x3f);\n      buf[i++] = 0x80 | (c >>> 6 & 0x3f);\n      buf[i++] = 0x80 | (c & 0x3f);\n    }\n  }\n\n  return buf;\n};\n\n// Helper (used in 2 places)\nfunction buf2binstring(buf, len) {\n  // use fallback for big arrays to avoid stack overflow\n  if (len < 65537) {\n    if ((buf.subarray && STR_APPLY_UIA_OK) || (!buf.subarray && STR_APPLY_OK)) {\n      return String.fromCharCode.apply(null, utils.shrinkBuf(buf, len));\n    }\n  }\n\n  var result = '';\n  for (var i = 0; i < len; i++) {\n    result += String.fromCharCode(buf[i]);\n  }\n  return result;\n}\n\n\n// Convert byte array to binary string\nexports.buf2binstring = function (buf) {\n  return buf2binstring(buf, buf.length);\n};\n\n\n// Convert binary string (typed, when possible)\nexports.binstring2buf = function (str) {\n  var buf = new utils.Buf8(str.length);\n  for (var i = 0, len = buf.length; i < len; i++) {\n    buf[i] = str.charCodeAt(i);\n  }\n  return buf;\n};\n\n\n// convert array to string\nexports.buf2string = function (buf, max) {\n  var i, out, c, c_len;\n  var len = max || buf.length;\n\n  // Reserve max possible length (2 words per char)\n  // NB: by unknown reasons, Array is significantly faster for\n  //     String.fromCharCode.apply than Uint16Array.\n  var utf16buf = new Array(len * 2);\n\n  for (out = 0, i = 0; i < len;) {\n    c = buf[i++];\n    // quick process ascii\n    if (c < 0x80) { utf16buf[out++] = c; continue; }\n\n    c_len = _utf8len[c];\n    // skip 5 & 6 byte codes\n    if (c_len > 4) { utf16buf[out++] = 0xfffd; i += c_len - 1; continue; }\n\n    // apply mask on first byte\n    c &= c_len === 2 ? 0x1f : c_len === 3 ? 0x0f : 0x07;\n    // join the rest\n    while (c_len > 1 && i < len) {\n      c = (c << 6) | (buf[i++] & 0x3f);\n      c_len--;\n    }\n\n    // terminated by end of string?\n    if (c_len > 1) { utf16buf[out++] = 0xfffd; continue; }\n\n    if (c < 0x10000) {\n      utf16buf[out++] = c;\n    } else {\n      c -= 0x10000;\n      utf16buf[out++] = 0xd800 | ((c >> 10) & 0x3ff);\n      utf16buf[out++] = 0xdc00 | (c & 0x3ff);\n    }\n  }\n\n  return buf2binstring(utf16buf, out);\n};\n\n\n// Calculate max possible position in utf8 buffer,\n// that will not break sequence. If that's not possible\n// - (very small limits) return max size as is.\n//\n// buf[] - utf8 bytes array\n// max   - length limit (mandatory);\nexports.utf8border = function (buf, max) {\n  var pos;\n\n  max = max || buf.length;\n  if (max > buf.length) { max = buf.length; }\n\n  // go back from last position, until start of sequence found\n  pos = max - 1;\n  while (pos >= 0 && (buf[pos] & 0xC0) === 0x80) { pos--; }\n\n  // Very small and broken sequence,\n  // return max, because we should return something anyway.\n  if (pos < 0) { return max; }\n\n  // If we came to start of buffer - that means buffer is too small,\n  // return max too.\n  if (pos === 0) { return max; }\n\n  return (pos + _utf8len[buf[pos]] > max) ? pos : max;\n};\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction ZStream() {\n  /* next input byte */\n  this.input = null; // JS specific, because we have no pointers\n  this.next_in = 0;\n  /* number of bytes available at input */\n  this.avail_in = 0;\n  /* total number of input bytes read so far */\n  this.total_in = 0;\n  /* next output byte should be put there */\n  this.output = null; // JS specific, because we have no pointers\n  this.next_out = 0;\n  /* remaining free space at output */\n  this.avail_out = 0;\n  /* total number of bytes output so far */\n  this.total_out = 0;\n  /* last error message, NULL if no error */\n  this.msg = ''/*Z_NULL*/;\n  /* not visible by applications */\n  this.state = null;\n  /* best guess about the data type: binary or text */\n  this.data_type = 2/*Z_UNKNOWN*/;\n  /* adler32 value of the uncompressed data */\n  this.adler = 0;\n}\n\nmodule.exports = ZStream;\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nmodule.exports = {\n\n  /* Allowed flush values; see deflate() and inflate() below for details */\n  Z_NO_FLUSH:         0,\n  Z_PARTIAL_FLUSH:    1,\n  Z_SYNC_FLUSH:       2,\n  Z_FULL_FLUSH:       3,\n  Z_FINISH:           4,\n  Z_BLOCK:            5,\n  Z_TREES:            6,\n\n  /* Return codes for the compression/decompression functions. Negative values\n  * are errors, positive values are used for special but normal events.\n  */\n  Z_OK:               0,\n  Z_STREAM_END:       1,\n  Z_NEED_DICT:        2,\n  Z_ERRNO:           -1,\n  Z_STREAM_ERROR:    -2,\n  Z_DATA_ERROR:      -3,\n  //Z_MEM_ERROR:     -4,\n  Z_BUF_ERROR:       -5,\n  //Z_VERSION_ERROR: -6,\n\n  /* compression levels */\n  Z_NO_COMPRESSION:         0,\n  Z_BEST_SPEED:             1,\n  Z_BEST_COMPRESSION:       9,\n  Z_DEFAULT_COMPRESSION:   -1,\n\n\n  Z_FILTERED:               1,\n  Z_HUFFMAN_ONLY:           2,\n  Z_RLE:                    3,\n  Z_FIXED:                  4,\n  Z_DEFAULT_STRATEGY:       0,\n\n  /* Possible values of the data_type field (though see inflate()) */\n  Z_BINARY:                 0,\n  Z_TEXT:                   1,\n  //Z_ASCII:                1, // = Z_TEXT (deprecated)\n  Z_UNKNOWN:                2,\n\n  /* The deflate compression method */\n  Z_DEFLATED:               8\n  //Z_NULL:                 null // Use -1 or null inline, depending on var type\n};\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar excalibur_1 = __webpack_require__(8);\nvar pako = __webpack_require__(9);\nvar TiledMapFormat;\n(function (TiledMapFormat) {\n    /**\n     * TMX map layer format\n     * @unsupported\n     */\n    TiledMapFormat[TiledMapFormat[\"TMX\"] = 0] = \"TMX\";\n    /**\n     * JSON map layer format\n     */\n    TiledMapFormat[TiledMapFormat[\"JSON\"] = 1] = \"JSON\";\n})(TiledMapFormat = exports.TiledMapFormat || (exports.TiledMapFormat = {}));\nvar TiledResource = /** @class */ (function (_super) {\n    __extends(TiledResource, _super);\n    function TiledResource(path, mapFormat) {\n        if (mapFormat === void 0) { mapFormat = TiledMapFormat.JSON; }\n        var _this = this;\n        switch (mapFormat) {\n            case TiledMapFormat.JSON:\n                _this = _super.call(this, path, \"json\") || this;\n                break;\n            default:\n                throw \"The format \" + mapFormat + \" is not currently supported. Please export Tiled map as JSON.\";\n        }\n        _this.mapFormat = mapFormat;\n        _this.imagePathAccessor = _this.externalTilesetPathAccessor = function (p, tileset) {\n            // Use absolute path if specified\n            if (p.indexOf('/') === 0) {\n                return p;\n            }\n            // Load relative to map path\n            var pp = path.split('/');\n            var relPath = pp.concat([]);\n            if (pp.length > 0) {\n                // remove file part of path\n                relPath.splice(-1);\n            }\n            relPath.push(p);\n            return relPath.join('/');\n        };\n        return _this;\n    }\n    TiledResource.prototype.load = function () {\n        var _this = this;\n        var p = new excalibur_1.Promise();\n        _super.prototype.load.call(this).then(function (map) {\n            var promises = [];\n            // Loop through loaded tileset data\n            // If we find an image property, then\n            // load the image and sprite\n            // If we find a source property, then\n            // load the tileset data, merge it with\n            // existing data, and load the image and sprite\n            _this.data.tilesets.forEach(function (ts) {\n                if (ts.source) {\n                    var tileset = new excalibur_1.Resource(_this.externalTilesetPathAccessor(ts.source, ts), \"json\");\n                    promises.push(tileset.load().then(function (external) {\n                        Object.assign(ts, external);\n                    }));\n                }\n            });\n            // wait or immediately resolve pending promises\n            // for external tilesets\n            excalibur_1.Promise.join.apply(_this, promises).then(function () {\n                // clear pending promises\n                promises = [];\n                // retrieve images from tilesets and create textures\n                _this.data.tilesets.forEach(function (ts) {\n                    var tx = new excalibur_1.Texture(_this.imagePathAccessor(ts.image, ts));\n                    ts.imageTexture = tx;\n                    promises.push(tx.load());\n                    excalibur_1.Logger.getInstance().debug(\"[Tiled] Loading associated tileset: \" + ts.image);\n                });\n                excalibur_1.Promise.join.apply(_this, promises).then(function () {\n                    p.resolve(map);\n                }, function (value) {\n                    p.reject(value);\n                });\n            }, function (value) {\n                p.reject(value);\n            });\n        });\n        return p;\n    };\n    TiledResource.prototype.processData = function (data) {\n        if (typeof data !== \"object\") {\n            throw \"Tiled map resource \" + this.path + \" is not the correct content type\";\n        }\n        if (data === void 0) {\n            throw \"Tiled map resource \" + this.path + \" is empty\";\n        }\n        switch (this.mapFormat) {\n            case TiledMapFormat.JSON:\n                return parseJsonMap(data);\n        }\n    };\n    TiledResource.prototype.getTilesetForTile = function (gid) {\n        for (var i = this.data.tilesets.length - 1; i >= 0; i--) {\n            var ts = this.data.tilesets[i];\n            if (ts.firstgid <= gid) {\n                return ts;\n            }\n        }\n        return null;\n    };\n    TiledResource.prototype.getTileMap = function () {\n        var map = new excalibur_1.TileMap(0, 0, this.data.tilewidth, this.data.tileheight, this.data.height, this.data.width);\n        // register sprite sheets for each tileset in map\n        for (var _i = 0, _a = this.data.tilesets; _i < _a.length; _i++) {\n            var ts = _a[_i];\n            var cols = Math.floor(ts.imagewidth / ts.tilewidth);\n            var rows = Math.floor(ts.imageheight / ts.tileheight);\n            var ss = new excalibur_1.SpriteSheet(ts.imageTexture, cols, rows, ts.tilewidth, ts.tileheight);\n            map.registerSpriteSheet(ts.firstgid.toString(), ss);\n        }\n        for (var _b = 0, _c = this.data.layers; _b < _c.length; _b++) {\n            var layer = _c[_b];\n            if (layer.type === \"tilelayer\") {\n                for (var i = 0; i < layer.data.length; i++) {\n                    var gid = layer.data[i];\n                    if (gid !== 0) {\n                        var ts = this.getTilesetForTile(gid);\n                        map.data[i].sprites.push(new excalibur_1.TileSprite(ts.firstgid.toString(), gid - ts.firstgid));\n                    }\n                }\n            }\n        }\n        return map;\n    };\n    return TiledResource;\n}(excalibur_1.Resource));\nexports.default = TiledResource;\n/**\n * Handles parsing of JSON tiled data\n */\nvar parseJsonMap = function (data) {\n    // Decompress layers\n    if (data.layers) {\n        for (var _i = 0, _a = data.layers; _i < _a.length; _i++) {\n            var layer = _a[_i];\n            if (typeof layer.data === \"string\") {\n                if (layer.encoding === \"base64\") {\n                    layer.data = decompressors.decompressBase64(layer.data, layer.encoding, layer.compression || \"\");\n                }\n            }\n            else {\n                layer.data = decompressors.decompressCsv(layer.data);\n            }\n        }\n    }\n    return data;\n};\n/**\n * Decompression implementations\n */\nvar decompressors = {\n    /**\n     * Simplest (passes data through since it's uncompressed)\n     */\n    decompressCsv: function (data) {\n        return data;\n    },\n    /**\n     * Uses base64.js implementation to decode string into byte array\n     * and then converts (with/without compression) to array of numbers\n     */\n    decompressBase64: function (b64, encoding, compression) {\n        var i, j, l, tmp, placeHolders, arr;\n        if (b64.length % 4 > 0) {\n            throw new Error('Invalid string. Length must be a multiple of 4');\n        }\n        var Arr = (typeof Uint8Array !== 'undefined')\n            ? Uint8Array\n            : Array;\n        var PLUS = '+'.charCodeAt(0);\n        var SLASH = '/'.charCodeAt(0);\n        var NUMBER = '0'.charCodeAt(0);\n        var LOWER = 'a'.charCodeAt(0);\n        var UPPER = 'A'.charCodeAt(0);\n        var PLUS_URL_SAFE = '-'.charCodeAt(0);\n        var SLASH_URL_SAFE = '_'.charCodeAt(0);\n        function decode(elt) {\n            var code = elt.charCodeAt(0);\n            if (code === PLUS || code === PLUS_URL_SAFE)\n                return 62; // '+'\n            if (code === SLASH || code === SLASH_URL_SAFE)\n                return 63; // '/'\n            if (code < NUMBER)\n                return -1; // no match\n            if (code < NUMBER + 10)\n                return code - NUMBER + 26 + 26;\n            if (code < UPPER + 26)\n                return code - UPPER;\n            if (code < LOWER + 26)\n                return code - LOWER + 26;\n        }\n        // the number of equal signs (place holders)\n        // if there are two placeholders, than the two characters before it\n        // represent one byte\n        // if there is only one, then the three characters before it represent 2 bytes\n        // this is just a cheap hack to not do indexOf twice\n        var len = b64.length;\n        placeHolders = b64.charAt(len - 2) === '=' ? 2 : b64.charAt(len - 1) === '=' ? 1 : 0;\n        // base64 is 4/3 + up to two characters of the original data\n        arr = new Arr(b64.length * 3 / 4 - placeHolders);\n        // if there are placeholders, only get up to the last complete 4 chars\n        l = placeHolders > 0 ? b64.length - 4 : b64.length;\n        var L = 0;\n        function push(v) {\n            arr[L++] = v;\n        }\n        for (i = 0, j = 0; i < l; i += 4, j += 3) {\n            tmp = (decode(b64.charAt(i)) << 18) | (decode(b64.charAt(i + 1)) << 12) | (decode(b64.charAt(i + 2)) << 6) | decode(b64.charAt(i + 3));\n            push((tmp & 0xFF0000) >> 16);\n            push((tmp & 0xFF00) >> 8);\n            push(tmp & 0xFF);\n        }\n        if (placeHolders === 2) {\n            tmp = (decode(b64.charAt(i)) << 2) | (decode(b64.charAt(i + 1)) >> 4);\n            push(tmp & 0xFF);\n        }\n        else if (placeHolders === 1) {\n            tmp = (decode(b64.charAt(i)) << 10) | (decode(b64.charAt(i + 1)) << 4) | (decode(b64.charAt(i + 2)) >> 2);\n            push((tmp >> 8) & 0xFF);\n            push(tmp & 0xFF);\n        }\n        // Byte array\n        // handle compression\n        if (\"zlib\" === compression || \"gzip\" === compression) {\n            arr = pako.inflate(arr);\n        }\n        var toNumber = function (byteArray) {\n            var value = 0;\n            for (var i = byteArray.length - 1; i >= 0; i--) {\n                value = (value * 256) + byteArray[i] * 1;\n            }\n            return value;\n        };\n        var resultLen = arr.length / 4;\n        var result = new Array(resultLen);\n        for (i = 0; i < resultLen; i++) {\n            result[i] = toNumber(arr.slice(i * 4, i * 4 + 3));\n        }\n        return result;\n    }\n};\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n// Top level file is just a mixin of submodules & constants\n\n\nvar assign    = __webpack_require__(0).assign;\n\nvar deflate   = __webpack_require__(10);\nvar inflate   = __webpack_require__(13);\nvar constants = __webpack_require__(6);\n\nvar pako = {};\n\nassign(pako, deflate, inflate, constants);\n\nmodule.exports = pako;\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n\nvar zlib_deflate = __webpack_require__(11);\nvar utils        = __webpack_require__(0);\nvar strings      = __webpack_require__(4);\nvar msg          = __webpack_require__(1);\nvar ZStream      = __webpack_require__(5);\n\nvar toString = Object.prototype.toString;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\nvar Z_NO_FLUSH      = 0;\nvar Z_FINISH        = 4;\n\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_SYNC_FLUSH    = 2;\n\nvar Z_DEFAULT_COMPRESSION = -1;\n\nvar Z_DEFAULT_STRATEGY    = 0;\n\nvar Z_DEFLATED  = 8;\n\n/* ===========================================================================*/\n\n\n/**\n * class Deflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[deflate]],\n * [[deflateRaw]] and [[gzip]].\n **/\n\n/* internal\n * Deflate.chunks -> Array\n *\n * Chunks of output data, if [[Deflate#onData]] not overridden.\n **/\n\n/**\n * Deflate.result -> Uint8Array|Array\n *\n * Compressed result, generated by default [[Deflate#onData]]\n * and [[Deflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Deflate#push]] with `Z_FINISH` / `true` param)  or if you\n * push a chunk with explicit flush (call [[Deflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Deflate.err -> Number\n *\n * Error code after deflate finished. 0 (Z_OK) on success.\n * You will not need it in real life, because deflate errors\n * are possible only on wrong options or bad `onData` / `onEnd`\n * custom handlers.\n **/\n\n/**\n * Deflate.msg -> String\n *\n * Error message, if [[Deflate.err]] != 0\n **/\n\n\n/**\n * new Deflate(options)\n * - options (Object): zlib deflate options.\n *\n * Creates new deflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `level`\n * - `windowBits`\n * - `memLevel`\n * - `strategy`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw deflate\n * - `gzip` (Boolean) - create gzip wrapper\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n * - `header` (Object) - custom header for gzip\n *   - `text` (Boolean) - true if compressed data believed to be text\n *   - `time` (Number) - modification time, unix timestamp\n *   - `os` (Number) - operation system code\n *   - `extra` (Array) - array of bytes with extra data (max 65536)\n *   - `name` (String) - file name (binary string)\n *   - `comment` (String) - comment (binary string)\n *   - `hcrc` (Boolean) - true if header crc should be added\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var deflate = new pako.Deflate({ level: 3});\n *\n * deflate.push(chunk1, false);\n * deflate.push(chunk2, true);  // true -> last chunk\n *\n * if (deflate.err) { throw new Error(deflate.err); }\n *\n * console.log(deflate.result);\n * ```\n **/\nfunction Deflate(options) {\n  if (!(this instanceof Deflate)) return new Deflate(options);\n\n  this.options = utils.assign({\n    level: Z_DEFAULT_COMPRESSION,\n    method: Z_DEFLATED,\n    chunkSize: 16384,\n    windowBits: 15,\n    memLevel: 8,\n    strategy: Z_DEFAULT_STRATEGY,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  if (opt.raw && (opt.windowBits > 0)) {\n    opt.windowBits = -opt.windowBits;\n  }\n\n  else if (opt.gzip && (opt.windowBits > 0) && (opt.windowBits < 16)) {\n    opt.windowBits += 16;\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status = zlib_deflate.deflateInit2(\n    this.strm,\n    opt.level,\n    opt.method,\n    opt.windowBits,\n    opt.memLevel,\n    opt.strategy\n  );\n\n  if (status !== Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  if (opt.header) {\n    zlib_deflate.deflateSetHeader(this.strm, opt.header);\n  }\n\n  if (opt.dictionary) {\n    var dict;\n    // Convert data if needed\n    if (typeof opt.dictionary === 'string') {\n      // If we need to compress text, change encoding to utf8.\n      dict = strings.string2buf(opt.dictionary);\n    } else if (toString.call(opt.dictionary) === '[object ArrayBuffer]') {\n      dict = new Uint8Array(opt.dictionary);\n    } else {\n      dict = opt.dictionary;\n    }\n\n    status = zlib_deflate.deflateSetDictionary(this.strm, dict);\n\n    if (status !== Z_OK) {\n      throw new Error(msg[status]);\n    }\n\n    this._dict_set = true;\n  }\n}\n\n/**\n * Deflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data. Strings will be\n *   converted to utf8 byte sequence.\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to deflate pipe, generating [[Deflate#onData]] calls with\n * new compressed chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Deflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the compression context.\n *\n * On fail call [[Deflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * array format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nDeflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var status, _mode;\n\n  if (this.ended) { return false; }\n\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? Z_FINISH : Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // If we need to compress text, change encoding to utf8.\n    strm.input = strings.string2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n    status = zlib_deflate.deflate(strm, _mode);    /* no bad return value */\n\n    if (status !== Z_STREAM_END && status !== Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n    if (strm.avail_out === 0 || (strm.avail_in === 0 && (_mode === Z_FINISH || _mode === Z_SYNC_FLUSH))) {\n      if (this.options.to === 'string') {\n        this.onData(strings.buf2binstring(utils.shrinkBuf(strm.output, strm.next_out)));\n      } else {\n        this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n      }\n    }\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== Z_STREAM_END);\n\n  // Finalize on the last chunk.\n  if (_mode === Z_FINISH) {\n    status = zlib_deflate.deflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === Z_SYNC_FLUSH) {\n    this.onEnd(Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Deflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nDeflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Deflate#onEnd(status) -> Void\n * - status (Number): deflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called once after you tell deflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nDeflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === Z_OK) {\n    if (this.options.to === 'string') {\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * deflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * Compress `data` with deflate algorithm and `options`.\n *\n * Supported options are:\n *\n * - level\n * - windowBits\n * - memLevel\n * - strategy\n * - dictionary\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be \"binary string\"\n *    (each char code [0..255])\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , data = Uint8Array([1,2,3,4,5,6,7,8,9]);\n *\n * console.log(pako.deflate(data));\n * ```\n **/\nfunction deflate(input, options) {\n  var deflator = new Deflate(options);\n\n  deflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (deflator.err) { throw deflator.msg || msg[deflator.err]; }\n\n  return deflator.result;\n}\n\n\n/**\n * deflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction deflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return deflate(input, options);\n}\n\n\n/**\n * gzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to compress.\n * - options (Object): zlib deflate options.\n *\n * The same as [[deflate]], but create gzip wrapper instead of\n * deflate one.\n **/\nfunction gzip(input, options) {\n  options = options || {};\n  options.gzip = true;\n  return deflate(input, options);\n}\n\n\nexports.Deflate = Deflate;\nexports.deflate = deflate;\nexports.deflateRaw = deflateRaw;\nexports.gzip = gzip;\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils   = __webpack_require__(0);\nvar trees   = __webpack_require__(12);\nvar adler32 = __webpack_require__(2);\nvar crc32   = __webpack_require__(3);\nvar msg     = __webpack_require__(1);\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\nvar Z_NO_FLUSH      = 0;\nvar Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\nvar Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\n//var Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\n//var Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\n//var Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n\n/* compression levels */\n//var Z_NO_COMPRESSION      = 0;\n//var Z_BEST_SPEED          = 1;\n//var Z_BEST_COMPRESSION    = 9;\nvar Z_DEFAULT_COMPRESSION = -1;\n\n\nvar Z_FILTERED            = 1;\nvar Z_HUFFMAN_ONLY        = 2;\nvar Z_RLE                 = 3;\nvar Z_FIXED               = 4;\nvar Z_DEFAULT_STRATEGY    = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\n//var Z_BINARY              = 0;\n//var Z_TEXT                = 1;\n//var Z_ASCII               = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n/*============================================================================*/\n\n\nvar MAX_MEM_LEVEL = 9;\n/* Maximum value for memLevel in deflateInit2 */\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_MEM_LEVEL = 8;\n\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\nvar D_CODES       = 30;\n/* number of distance codes */\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\nvar MAX_BITS  = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar MIN_MATCH = 3;\nvar MAX_MATCH = 258;\nvar MIN_LOOKAHEAD = (MAX_MATCH + MIN_MATCH + 1);\n\nvar PRESET_DICT = 0x20;\n\nvar INIT_STATE = 42;\nvar EXTRA_STATE = 69;\nvar NAME_STATE = 73;\nvar COMMENT_STATE = 91;\nvar HCRC_STATE = 103;\nvar BUSY_STATE = 113;\nvar FINISH_STATE = 666;\n\nvar BS_NEED_MORE      = 1; /* block not completed, need more input or more output */\nvar BS_BLOCK_DONE     = 2; /* block flush performed */\nvar BS_FINISH_STARTED = 3; /* finish started, need only more output at next deflate */\nvar BS_FINISH_DONE    = 4; /* finish done, accept no more input or output */\n\nvar OS_CODE = 0x03; // Unix :) . Don't detect, use this default.\n\nfunction err(strm, errorCode) {\n  strm.msg = msg[errorCode];\n  return errorCode;\n}\n\nfunction rank(f) {\n  return ((f) << 1) - ((f) > 4 ? 9 : 0);\n}\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n\n/* =========================================================================\n * Flush as much pending output as possible. All deflate() output goes\n * through this function so some applications may wish to modify it\n * to avoid allocating a large strm->output buffer and copying into it.\n * (See also read_buf()).\n */\nfunction flush_pending(strm) {\n  var s = strm.state;\n\n  //_tr_flush_bits(s);\n  var len = s.pending;\n  if (len > strm.avail_out) {\n    len = strm.avail_out;\n  }\n  if (len === 0) { return; }\n\n  utils.arraySet(strm.output, s.pending_buf, s.pending_out, len, strm.next_out);\n  strm.next_out += len;\n  s.pending_out += len;\n  strm.total_out += len;\n  strm.avail_out -= len;\n  s.pending -= len;\n  if (s.pending === 0) {\n    s.pending_out = 0;\n  }\n}\n\n\nfunction flush_block_only(s, last) {\n  trees._tr_flush_block(s, (s.block_start >= 0 ? s.block_start : -1), s.strstart - s.block_start, last);\n  s.block_start = s.strstart;\n  flush_pending(s.strm);\n}\n\n\nfunction put_byte(s, b) {\n  s.pending_buf[s.pending++] = b;\n}\n\n\n/* =========================================================================\n * Put a short in the pending buffer. The 16-bit value is put in MSB order.\n * IN assertion: the stream state is correct and there is enough room in\n * pending_buf.\n */\nfunction putShortMSB(s, b) {\n//  put_byte(s, (Byte)(b >> 8));\n//  put_byte(s, (Byte)(b & 0xff));\n  s.pending_buf[s.pending++] = (b >>> 8) & 0xff;\n  s.pending_buf[s.pending++] = b & 0xff;\n}\n\n\n/* ===========================================================================\n * Read a new buffer from the current input stream, update the adler32\n * and total number of bytes read.  All deflate() input goes through\n * this function so some applications may wish to modify it to avoid\n * allocating a large strm->input buffer and copying from it.\n * (See also flush_pending()).\n */\nfunction read_buf(strm, buf, start, size) {\n  var len = strm.avail_in;\n\n  if (len > size) { len = size; }\n  if (len === 0) { return 0; }\n\n  strm.avail_in -= len;\n\n  // zmemcpy(buf, strm->next_in, len);\n  utils.arraySet(buf, strm.input, strm.next_in, len, start);\n  if (strm.state.wrap === 1) {\n    strm.adler = adler32(strm.adler, buf, len, start);\n  }\n\n  else if (strm.state.wrap === 2) {\n    strm.adler = crc32(strm.adler, buf, len, start);\n  }\n\n  strm.next_in += len;\n  strm.total_in += len;\n\n  return len;\n}\n\n\n/* ===========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n * OUT assertion: the match length is not greater than s->lookahead.\n */\nfunction longest_match(s, cur_match) {\n  var chain_length = s.max_chain_length;      /* max hash chain length */\n  var scan = s.strstart; /* current string */\n  var match;                       /* matched string */\n  var len;                           /* length of current match */\n  var best_len = s.prev_length;              /* best match length so far */\n  var nice_match = s.nice_match;             /* stop if match long enough */\n  var limit = (s.strstart > (s.w_size - MIN_LOOKAHEAD)) ?\n      s.strstart - (s.w_size - MIN_LOOKAHEAD) : 0/*NIL*/;\n\n  var _win = s.window; // shortcut\n\n  var wmask = s.w_mask;\n  var prev  = s.prev;\n\n  /* Stop when cur_match becomes <= limit. To simplify the code,\n   * we prevent matches with the string of window index 0.\n   */\n\n  var strend = s.strstart + MAX_MATCH;\n  var scan_end1  = _win[scan + best_len - 1];\n  var scan_end   = _win[scan + best_len];\n\n  /* The code is optimized for HASH_BITS >= 8 and MAX_MATCH-2 multiple of 16.\n   * It is easy to get rid of this optimization if necessary.\n   */\n  // Assert(s->hash_bits >= 8 && MAX_MATCH == 258, \"Code too clever\");\n\n  /* Do not waste too much time if we already have a good match: */\n  if (s.prev_length >= s.good_match) {\n    chain_length >>= 2;\n  }\n  /* Do not look for matches beyond the end of the input. This is necessary\n   * to make deflate deterministic.\n   */\n  if (nice_match > s.lookahead) { nice_match = s.lookahead; }\n\n  // Assert((ulg)s->strstart <= s->window_size-MIN_LOOKAHEAD, \"need lookahead\");\n\n  do {\n    // Assert(cur_match < s->strstart, \"no future\");\n    match = cur_match;\n\n    /* Skip to next match if the match length cannot increase\n     * or if the match length is less than 2.  Note that the checks below\n     * for insufficient lookahead only occur occasionally for performance\n     * reasons.  Therefore uninitialized memory will be accessed, and\n     * conditional jumps will be made that depend on those values.\n     * However the length of the match is limited to the lookahead, so\n     * the output of deflate is not affected by the uninitialized values.\n     */\n\n    if (_win[match + best_len]     !== scan_end  ||\n        _win[match + best_len - 1] !== scan_end1 ||\n        _win[match]                !== _win[scan] ||\n        _win[++match]              !== _win[scan + 1]) {\n      continue;\n    }\n\n    /* The check at best_len-1 can be removed because it will be made\n     * again later. (This heuristic is not always a win.)\n     * It is not necessary to compare scan[2] and match[2] since they\n     * are always equal when the other bytes match, given that\n     * the hash keys are equal and that HASH_BITS >= 8.\n     */\n    scan += 2;\n    match++;\n    // Assert(*scan == *match, \"match[2]?\");\n\n    /* We check for insufficient lookahead only every 8th comparison;\n     * the 256th check will be made at strstart+258.\n     */\n    do {\n      /*jshint noempty:false*/\n    } while (_win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             _win[++scan] === _win[++match] && _win[++scan] === _win[++match] &&\n             scan < strend);\n\n    // Assert(scan <= s->window+(unsigned)(s->window_size-1), \"wild scan\");\n\n    len = MAX_MATCH - (strend - scan);\n    scan = strend - MAX_MATCH;\n\n    if (len > best_len) {\n      s.match_start = cur_match;\n      best_len = len;\n      if (len >= nice_match) {\n        break;\n      }\n      scan_end1  = _win[scan + best_len - 1];\n      scan_end   = _win[scan + best_len];\n    }\n  } while ((cur_match = prev[cur_match & wmask]) > limit && --chain_length !== 0);\n\n  if (best_len <= s.lookahead) {\n    return best_len;\n  }\n  return s.lookahead;\n}\n\n\n/* ===========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead.\n *\n * IN assertion: lookahead < MIN_LOOKAHEAD\n * OUT assertions: strstart <= window_size-MIN_LOOKAHEAD\n *    At least one byte has been read, or avail_in == 0; reads are\n *    performed for at least two bytes (required for the zip translate_eol\n *    option -- not supported here).\n */\nfunction fill_window(s) {\n  var _w_size = s.w_size;\n  var p, n, m, more, str;\n\n  //Assert(s->lookahead < MIN_LOOKAHEAD, \"already enough lookahead\");\n\n  do {\n    more = s.window_size - s.lookahead - s.strstart;\n\n    // JS ints have 32 bit, block below not needed\n    /* Deal with !@#$% 64K limit: */\n    //if (sizeof(int) <= 2) {\n    //    if (more == 0 && s->strstart == 0 && s->lookahead == 0) {\n    //        more = wsize;\n    //\n    //  } else if (more == (unsigned)(-1)) {\n    //        /* Very unlikely, but possible on 16 bit machine if\n    //         * strstart == 0 && lookahead == 1 (input done a byte at time)\n    //         */\n    //        more--;\n    //    }\n    //}\n\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if (s.strstart >= _w_size + (_w_size - MIN_LOOKAHEAD)) {\n\n      utils.arraySet(s.window, s.window, _w_size, _w_size, 0);\n      s.match_start -= _w_size;\n      s.strstart -= _w_size;\n      /* we now have strstart >= MAX_DIST */\n      s.block_start -= _w_size;\n\n      /* Slide the hash table (could be avoided with 32 bit values\n       at the expense of memory usage). We slide even when level == 0\n       to keep the hash table consistent if we switch back to level > 0\n       later. (Using level 0 permanently is not an optimal usage of\n       zlib, so we don't care about this pathological case.)\n       */\n\n      n = s.hash_size;\n      p = n;\n      do {\n        m = s.head[--p];\n        s.head[p] = (m >= _w_size ? m - _w_size : 0);\n      } while (--n);\n\n      n = _w_size;\n      p = n;\n      do {\n        m = s.prev[--p];\n        s.prev[p] = (m >= _w_size ? m - _w_size : 0);\n        /* If n is not on any hash chain, prev[n] is garbage but\n         * its value will never be used.\n         */\n      } while (--n);\n\n      more += _w_size;\n    }\n    if (s.strm.avail_in === 0) {\n      break;\n    }\n\n    /* If there was no sliding:\n     *    strstart <= WSIZE+MAX_DIST-1 && lookahead <= MIN_LOOKAHEAD - 1 &&\n     *    more == window_size - lookahead - strstart\n     * => more >= window_size - (MIN_LOOKAHEAD-1 + WSIZE + MAX_DIST-1)\n     * => more >= window_size - 2*WSIZE + 2\n     * In the BIG_MEM or MMAP case (not yet supported),\n     *   window_size == input_size + MIN_LOOKAHEAD  &&\n     *   strstart + s->lookahead <= input_size => more >= MIN_LOOKAHEAD.\n     * Otherwise, window_size == 2*WSIZE so more >= 2.\n     * If there was sliding, more >= WSIZE. So in all cases, more >= 2.\n     */\n    //Assert(more >= 2, \"more < 2\");\n    n = read_buf(s.strm, s.window, s.strstart + s.lookahead, more);\n    s.lookahead += n;\n\n    /* Initialize the hash value now that we have some input: */\n    if (s.lookahead + s.insert >= MIN_MATCH) {\n      str = s.strstart - s.insert;\n      s.ins_h = s.window[str];\n\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + 1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + 1]) & s.hash_mask;\n//#if MIN_MATCH != 3\n//        Call update_hash() MIN_MATCH-3 more times\n//#endif\n      while (s.insert) {\n        /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n        s.prev[str & s.w_mask] = s.head[s.ins_h];\n        s.head[s.ins_h] = str;\n        str++;\n        s.insert--;\n        if (s.lookahead + s.insert < MIN_MATCH) {\n          break;\n        }\n      }\n    }\n    /* If the whole input has less than MIN_MATCH bytes, ins_h is garbage,\n     * but this is not important since only literal bytes will be emitted.\n     */\n\n  } while (s.lookahead < MIN_LOOKAHEAD && s.strm.avail_in !== 0);\n\n  /* If the WIN_INIT bytes after the end of the current data have never been\n   * written, then zero those bytes in order to avoid memory check reports of\n   * the use of uninitialized (or uninitialised as Julian writes) bytes by\n   * the longest match routines.  Update the high water mark for the next\n   * time through here.  WIN_INIT is set to MAX_MATCH since the longest match\n   * routines allow scanning to strstart + MAX_MATCH, ignoring lookahead.\n   */\n//  if (s.high_water < s.window_size) {\n//    var curr = s.strstart + s.lookahead;\n//    var init = 0;\n//\n//    if (s.high_water < curr) {\n//      /* Previous high water mark below current data -- zero WIN_INIT\n//       * bytes or up to end of window, whichever is less.\n//       */\n//      init = s.window_size - curr;\n//      if (init > WIN_INIT)\n//        init = WIN_INIT;\n//      zmemzero(s->window + curr, (unsigned)init);\n//      s->high_water = curr + init;\n//    }\n//    else if (s->high_water < (ulg)curr + WIN_INIT) {\n//      /* High water mark at or above current data, but below current data\n//       * plus WIN_INIT -- zero out to current data plus WIN_INIT, or up\n//       * to end of window, whichever is less.\n//       */\n//      init = (ulg)curr + WIN_INIT - s->high_water;\n//      if (init > s->window_size - s->high_water)\n//        init = s->window_size - s->high_water;\n//      zmemzero(s->window + s->high_water, (unsigned)init);\n//      s->high_water += init;\n//    }\n//  }\n//\n//  Assert((ulg)s->strstart <= s->window_size - MIN_LOOKAHEAD,\n//    \"not enough room for search\");\n}\n\n/* ===========================================================================\n * Copy without compression as much as possible from the input stream, return\n * the current block state.\n * This function does not insert new strings in the dictionary since\n * uncompressible data is probably not useful. This function is used\n * only for the level=0 compression option.\n * NOTE: this function should be optimized to avoid extra copying from\n * window to pending_buf.\n */\nfunction deflate_stored(s, flush) {\n  /* Stored blocks are limited to 0xffff bytes, pending_buf is limited\n   * to pending_buf_size, and each stored block has a 5 byte header:\n   */\n  var max_block_size = 0xffff;\n\n  if (max_block_size > s.pending_buf_size - 5) {\n    max_block_size = s.pending_buf_size - 5;\n  }\n\n  /* Copy as much as possible from input to output: */\n  for (;;) {\n    /* Fill the window as much as possible: */\n    if (s.lookahead <= 1) {\n\n      //Assert(s->strstart < s->w_size+MAX_DIST(s) ||\n      //  s->block_start >= (long)s->w_size, \"slide too late\");\n//      if (!(s.strstart < s.w_size + (s.w_size - MIN_LOOKAHEAD) ||\n//        s.block_start >= s.w_size)) {\n//        throw  new Error(\"slide too late\");\n//      }\n\n      fill_window(s);\n      if (s.lookahead === 0 && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n\n      if (s.lookahead === 0) {\n        break;\n      }\n      /* flush the current block */\n    }\n    //Assert(s->block_start >= 0L, \"block gone\");\n//    if (s.block_start < 0) throw new Error(\"block gone\");\n\n    s.strstart += s.lookahead;\n    s.lookahead = 0;\n\n    /* Emit a stored block if pending_buf will be full: */\n    var max_start = s.block_start + max_block_size;\n\n    if (s.strstart === 0 || s.strstart >= max_start) {\n      /* strstart == 0 is possible when wraparound on 16-bit machine */\n      s.lookahead = s.strstart - max_start;\n      s.strstart = max_start;\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n\n\n    }\n    /* Flush if we may have to slide, otherwise block_start may become\n     * negative and the data will be gone:\n     */\n    if (s.strstart - s.block_start >= (s.w_size - MIN_LOOKAHEAD)) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n\n  s.insert = 0;\n\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n\n  if (s.strstart > s.block_start) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_NEED_MORE;\n}\n\n/* ===========================================================================\n * Compress as much as possible from the input stream, return the current\n * block state.\n * This function does not perform lazy evaluation of matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nfunction deflate_fast(s, flush) {\n  var hash_head;        /* head of the hash chain */\n  var bflush;           /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) {\n        break; /* flush the current block */\n      }\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     * At this point we have always match_length < MIN_MATCH\n     */\n    if (hash_head !== 0/*NIL*/ && ((s.strstart - hash_head) <= (s.w_size - MIN_LOOKAHEAD))) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n    }\n    if (s.match_length >= MIN_MATCH) {\n      // check_match(s, s.strstart, s.match_start, s.match_length); // for debug only\n\n      /*** _tr_tally_dist(s, s.strstart - s.match_start,\n                     s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, s.strstart - s.match_start, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n\n      /* Insert new strings in the hash table only if the match length\n       * is not too large. This saves time but degrades compression.\n       */\n      if (s.match_length <= s.max_lazy_match/*max_insert_length*/ && s.lookahead >= MIN_MATCH) {\n        s.match_length--; /* string at strstart already in table */\n        do {\n          s.strstart++;\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n          /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n           * always MIN_MATCH bytes ahead.\n           */\n        } while (--s.match_length !== 0);\n        s.strstart++;\n      } else\n      {\n        s.strstart += s.match_length;\n        s.match_length = 0;\n        s.ins_h = s.window[s.strstart];\n        /* UPDATE_HASH(s, s.ins_h, s.window[s.strstart+1]); */\n        s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + 1]) & s.hash_mask;\n\n//#if MIN_MATCH != 3\n//                Call UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n        /* If lookahead < MIN_MATCH, ins_h is garbage, but it does not\n         * matter since it will be recomputed at next deflate call.\n         */\n      }\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s.window[s.strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = ((s.strstart < (MIN_MATCH - 1)) ? s.strstart : MIN_MATCH - 1);\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nfunction deflate_slow(s, flush) {\n  var hash_head;          /* head of hash chain */\n  var bflush;              /* set if current block must be flushed */\n\n  var max_insert;\n\n  /* Process the input block. */\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the next match, plus MIN_MATCH bytes to insert the\n     * string following the next match.\n     */\n    if (s.lookahead < MIN_LOOKAHEAD) {\n      fill_window(s);\n      if (s.lookahead < MIN_LOOKAHEAD && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* Insert the string window[strstart .. strstart+2] in the\n     * dictionary, and set hash_head to the head of the hash chain:\n     */\n    hash_head = 0/*NIL*/;\n    if (s.lookahead >= MIN_MATCH) {\n      /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n      hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n      s.head[s.ins_h] = s.strstart;\n      /***/\n    }\n\n    /* Find the longest match, discarding those <= prev_length.\n     */\n    s.prev_length = s.match_length;\n    s.prev_match = s.match_start;\n    s.match_length = MIN_MATCH - 1;\n\n    if (hash_head !== 0/*NIL*/ && s.prev_length < s.max_lazy_match &&\n        s.strstart - hash_head <= (s.w_size - MIN_LOOKAHEAD)/*MAX_DIST(s)*/) {\n      /* To simplify the code, we prevent matches with the string\n       * of window index 0 (in particular we have to avoid a match\n       * of the string with itself at the start of the input file).\n       */\n      s.match_length = longest_match(s, hash_head);\n      /* longest_match() sets match_start */\n\n      if (s.match_length <= 5 &&\n         (s.strategy === Z_FILTERED || (s.match_length === MIN_MATCH && s.strstart - s.match_start > 4096/*TOO_FAR*/))) {\n\n        /* If prev_match is also MIN_MATCH, match_start is garbage\n         * but we will ignore the current match anyway.\n         */\n        s.match_length = MIN_MATCH - 1;\n      }\n    }\n    /* If there was a match at the previous step and the current\n     * match is not better, output the previous match:\n     */\n    if (s.prev_length >= MIN_MATCH && s.match_length <= s.prev_length) {\n      max_insert = s.strstart + s.lookahead - MIN_MATCH;\n      /* Do not insert strings in hash table beyond this. */\n\n      //check_match(s, s.strstart-1, s.prev_match, s.prev_length);\n\n      /***_tr_tally_dist(s, s.strstart - 1 - s.prev_match,\n                     s.prev_length - MIN_MATCH, bflush);***/\n      bflush = trees._tr_tally(s, s.strstart - 1 - s.prev_match, s.prev_length - MIN_MATCH);\n      /* Insert in hash table all strings up to the end of the match.\n       * strstart-1 and strstart are already inserted. If there is not\n       * enough lookahead, the last two strings are not inserted in\n       * the hash table.\n       */\n      s.lookahead -= s.prev_length - 1;\n      s.prev_length -= 2;\n      do {\n        if (++s.strstart <= max_insert) {\n          /*** INSERT_STRING(s, s.strstart, hash_head); ***/\n          s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[s.strstart + MIN_MATCH - 1]) & s.hash_mask;\n          hash_head = s.prev[s.strstart & s.w_mask] = s.head[s.ins_h];\n          s.head[s.ins_h] = s.strstart;\n          /***/\n        }\n      } while (--s.prev_length !== 0);\n      s.match_available = 0;\n      s.match_length = MIN_MATCH - 1;\n      s.strstart++;\n\n      if (bflush) {\n        /*** FLUSH_BLOCK(s, 0); ***/\n        flush_block_only(s, false);\n        if (s.strm.avail_out === 0) {\n          return BS_NEED_MORE;\n        }\n        /***/\n      }\n\n    } else if (s.match_available) {\n      /* If there was no match at the previous position, output a\n       * single literal. If there was a match but the current match\n       * is longer, truncate the previous match to a single literal.\n       */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n      /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n      if (bflush) {\n        /*** FLUSH_BLOCK_ONLY(s, 0) ***/\n        flush_block_only(s, false);\n        /***/\n      }\n      s.strstart++;\n      s.lookahead--;\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n    } else {\n      /* There is no previous match to compare with, wait for\n       * the next step to decide.\n       */\n      s.match_available = 1;\n      s.strstart++;\n      s.lookahead--;\n    }\n  }\n  //Assert (flush != Z_NO_FLUSH, \"no flush?\");\n  if (s.match_available) {\n    //Tracevv((stderr,\"%c\", s->window[s->strstart-1]));\n    /*** _tr_tally_lit(s, s.window[s.strstart-1], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart - 1]);\n\n    s.match_available = 0;\n  }\n  s.insert = s.strstart < MIN_MATCH - 1 ? s.strstart : MIN_MATCH - 1;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n\n  return BS_BLOCK_DONE;\n}\n\n\n/* ===========================================================================\n * For Z_RLE, simply look for runs of bytes, generate matches only of distance\n * one.  Do not maintain a hash table.  (It will be regenerated if this run of\n * deflate switches away from Z_RLE.)\n */\nfunction deflate_rle(s, flush) {\n  var bflush;            /* set if current block must be flushed */\n  var prev;              /* byte at distance one to match */\n  var scan, strend;      /* scan goes up to strend for length of run */\n\n  var _win = s.window;\n\n  for (;;) {\n    /* Make sure that we always have enough lookahead, except\n     * at the end of the input file. We need MAX_MATCH bytes\n     * for the longest run, plus one for the unrolled loop.\n     */\n    if (s.lookahead <= MAX_MATCH) {\n      fill_window(s);\n      if (s.lookahead <= MAX_MATCH && flush === Z_NO_FLUSH) {\n        return BS_NEED_MORE;\n      }\n      if (s.lookahead === 0) { break; } /* flush the current block */\n    }\n\n    /* See how many times the previous byte repeats */\n    s.match_length = 0;\n    if (s.lookahead >= MIN_MATCH && s.strstart > 0) {\n      scan = s.strstart - 1;\n      prev = _win[scan];\n      if (prev === _win[++scan] && prev === _win[++scan] && prev === _win[++scan]) {\n        strend = s.strstart + MAX_MATCH;\n        do {\n          /*jshint noempty:false*/\n        } while (prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 prev === _win[++scan] && prev === _win[++scan] &&\n                 scan < strend);\n        s.match_length = MAX_MATCH - (strend - scan);\n        if (s.match_length > s.lookahead) {\n          s.match_length = s.lookahead;\n        }\n      }\n      //Assert(scan <= s->window+(uInt)(s->window_size-1), \"wild scan\");\n    }\n\n    /* Emit match if have run of MIN_MATCH or longer, else emit literal */\n    if (s.match_length >= MIN_MATCH) {\n      //check_match(s, s.strstart, s.strstart - 1, s.match_length);\n\n      /*** _tr_tally_dist(s, 1, s.match_length - MIN_MATCH, bflush); ***/\n      bflush = trees._tr_tally(s, 1, s.match_length - MIN_MATCH);\n\n      s.lookahead -= s.match_length;\n      s.strstart += s.match_length;\n      s.match_length = 0;\n    } else {\n      /* No match, output a literal byte */\n      //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n      /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n      bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n\n      s.lookahead--;\n      s.strstart++;\n    }\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* ===========================================================================\n * For Z_HUFFMAN_ONLY, do not look for matches.  Do not maintain a hash table.\n * (It will be regenerated if this run of deflate switches away from Huffman.)\n */\nfunction deflate_huff(s, flush) {\n  var bflush;             /* set if current block must be flushed */\n\n  for (;;) {\n    /* Make sure that we have a literal to write. */\n    if (s.lookahead === 0) {\n      fill_window(s);\n      if (s.lookahead === 0) {\n        if (flush === Z_NO_FLUSH) {\n          return BS_NEED_MORE;\n        }\n        break;      /* flush the current block */\n      }\n    }\n\n    /* Output a literal byte */\n    s.match_length = 0;\n    //Tracevv((stderr,\"%c\", s->window[s->strstart]));\n    /*** _tr_tally_lit(s, s.window[s.strstart], bflush); ***/\n    bflush = trees._tr_tally(s, 0, s.window[s.strstart]);\n    s.lookahead--;\n    s.strstart++;\n    if (bflush) {\n      /*** FLUSH_BLOCK(s, 0); ***/\n      flush_block_only(s, false);\n      if (s.strm.avail_out === 0) {\n        return BS_NEED_MORE;\n      }\n      /***/\n    }\n  }\n  s.insert = 0;\n  if (flush === Z_FINISH) {\n    /*** FLUSH_BLOCK(s, 1); ***/\n    flush_block_only(s, true);\n    if (s.strm.avail_out === 0) {\n      return BS_FINISH_STARTED;\n    }\n    /***/\n    return BS_FINISH_DONE;\n  }\n  if (s.last_lit) {\n    /*** FLUSH_BLOCK(s, 0); ***/\n    flush_block_only(s, false);\n    if (s.strm.avail_out === 0) {\n      return BS_NEED_MORE;\n    }\n    /***/\n  }\n  return BS_BLOCK_DONE;\n}\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nfunction Config(good_length, max_lazy, nice_length, max_chain, func) {\n  this.good_length = good_length;\n  this.max_lazy = max_lazy;\n  this.nice_length = nice_length;\n  this.max_chain = max_chain;\n  this.func = func;\n}\n\nvar configuration_table;\n\nconfiguration_table = [\n  /*      good lazy nice chain */\n  new Config(0, 0, 0, 0, deflate_stored),          /* 0 store only */\n  new Config(4, 4, 8, 4, deflate_fast),            /* 1 max speed, no lazy matches */\n  new Config(4, 5, 16, 8, deflate_fast),           /* 2 */\n  new Config(4, 6, 32, 32, deflate_fast),          /* 3 */\n\n  new Config(4, 4, 16, 16, deflate_slow),          /* 4 lazy matches */\n  new Config(8, 16, 32, 32, deflate_slow),         /* 5 */\n  new Config(8, 16, 128, 128, deflate_slow),       /* 6 */\n  new Config(8, 32, 128, 256, deflate_slow),       /* 7 */\n  new Config(32, 128, 258, 1024, deflate_slow),    /* 8 */\n  new Config(32, 258, 258, 4096, deflate_slow)     /* 9 max compression */\n];\n\n\n/* ===========================================================================\n * Initialize the \"longest match\" routines for a new zlib stream\n */\nfunction lm_init(s) {\n  s.window_size = 2 * s.w_size;\n\n  /*** CLEAR_HASH(s); ***/\n  zero(s.head); // Fill with NIL (= 0);\n\n  /* Set the default configuration parameters:\n   */\n  s.max_lazy_match = configuration_table[s.level].max_lazy;\n  s.good_match = configuration_table[s.level].good_length;\n  s.nice_match = configuration_table[s.level].nice_length;\n  s.max_chain_length = configuration_table[s.level].max_chain;\n\n  s.strstart = 0;\n  s.block_start = 0;\n  s.lookahead = 0;\n  s.insert = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  s.ins_h = 0;\n}\n\n\nfunction DeflateState() {\n  this.strm = null;            /* pointer back to this zlib stream */\n  this.status = 0;            /* as the name implies */\n  this.pending_buf = null;      /* output still pending */\n  this.pending_buf_size = 0;  /* size of pending_buf */\n  this.pending_out = 0;       /* next pending byte to output to the stream */\n  this.pending = 0;           /* nb of bytes in the pending buffer */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.gzhead = null;         /* gzip header information to write */\n  this.gzindex = 0;           /* where in extra, name, or comment */\n  this.method = Z_DEFLATED; /* can only be DEFLATED */\n  this.last_flush = -1;   /* value of flush param for previous deflate call */\n\n  this.w_size = 0;  /* LZ77 window size (32K by default) */\n  this.w_bits = 0;  /* log2(w_size)  (8..16) */\n  this.w_mask = 0;  /* w_size - 1 */\n\n  this.window = null;\n  /* Sliding window. Input bytes are read into the second half of the window,\n   * and move to the first half later to keep a dictionary of at least wSize\n   * bytes. With this organization, matches are limited to a distance of\n   * wSize-MAX_MATCH bytes, but this ensures that IO is always\n   * performed with a length multiple of the block size.\n   */\n\n  this.window_size = 0;\n  /* Actual size of window: 2*wSize, except when the user input buffer\n   * is directly used as sliding window.\n   */\n\n  this.prev = null;\n  /* Link to older string with same hash index. To limit the size of this\n   * array to 64K, this link is maintained only for the last 32K strings.\n   * An index in this array is thus a window index modulo 32K.\n   */\n\n  this.head = null;   /* Heads of the hash chains or NIL. */\n\n  this.ins_h = 0;       /* hash index of string to be inserted */\n  this.hash_size = 0;   /* number of elements in hash table */\n  this.hash_bits = 0;   /* log2(hash_size) */\n  this.hash_mask = 0;   /* hash_size-1 */\n\n  this.hash_shift = 0;\n  /* Number of bits by which ins_h must be shifted at each input\n   * step. It must be such that after MIN_MATCH steps, the oldest\n   * byte no longer takes part in the hash key, that is:\n   *   hash_shift * MIN_MATCH >= hash_bits\n   */\n\n  this.block_start = 0;\n  /* Window position at the beginning of the current output block. Gets\n   * negative when the window is moved backwards.\n   */\n\n  this.match_length = 0;      /* length of best match */\n  this.prev_match = 0;        /* previous match */\n  this.match_available = 0;   /* set if previous match exists */\n  this.strstart = 0;          /* start of string to insert */\n  this.match_start = 0;       /* start of matching string */\n  this.lookahead = 0;         /* number of valid bytes ahead in window */\n\n  this.prev_length = 0;\n  /* Length of the best match at previous step. Matches not greater than this\n   * are discarded. This is used in the lazy match evaluation.\n   */\n\n  this.max_chain_length = 0;\n  /* To speed up deflation, hash chains are never searched beyond this\n   * length.  A higher limit improves compression ratio but degrades the\n   * speed.\n   */\n\n  this.max_lazy_match = 0;\n  /* Attempt to find a better match only when the current match is strictly\n   * smaller than this value. This mechanism is used only for compression\n   * levels >= 4.\n   */\n  // That's alias to max_lazy_match, don't use directly\n  //this.max_insert_length = 0;\n  /* Insert new strings in the hash table only if the match length is not\n   * greater than this length. This saves time but degrades compression.\n   * max_insert_length is used only for compression levels <= 3.\n   */\n\n  this.level = 0;     /* compression level (1..9) */\n  this.strategy = 0;  /* favor or force Huffman coding*/\n\n  this.good_match = 0;\n  /* Use a faster search when the previous match is longer than this */\n\n  this.nice_match = 0; /* Stop searching when current match exceeds this */\n\n              /* used by trees.c: */\n\n  /* Didn't use ct_data typedef below to suppress compiler warning */\n\n  // struct ct_data_s dyn_ltree[HEAP_SIZE];   /* literal and length tree */\n  // struct ct_data_s dyn_dtree[2*D_CODES+1]; /* distance tree */\n  // struct ct_data_s bl_tree[2*BL_CODES+1];  /* Huffman tree for bit lengths */\n\n  // Use flat array of DOUBLE size, with interleaved fata,\n  // because JS does not support effective\n  this.dyn_ltree  = new utils.Buf16(HEAP_SIZE * 2);\n  this.dyn_dtree  = new utils.Buf16((2 * D_CODES + 1) * 2);\n  this.bl_tree    = new utils.Buf16((2 * BL_CODES + 1) * 2);\n  zero(this.dyn_ltree);\n  zero(this.dyn_dtree);\n  zero(this.bl_tree);\n\n  this.l_desc   = null;         /* desc. for literal tree */\n  this.d_desc   = null;         /* desc. for distance tree */\n  this.bl_desc  = null;         /* desc. for bit length tree */\n\n  //ush bl_count[MAX_BITS+1];\n  this.bl_count = new utils.Buf16(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  //int heap[2*L_CODES+1];      /* heap used to build the Huffman trees */\n  this.heap = new utils.Buf16(2 * L_CODES + 1);  /* heap used to build the Huffman trees */\n  zero(this.heap);\n\n  this.heap_len = 0;               /* number of elements in the heap */\n  this.heap_max = 0;               /* element of largest frequency */\n  /* The sons of heap[n] are heap[2*n] and heap[2*n+1]. heap[0] is not used.\n   * The same heap array is used to build all trees.\n   */\n\n  this.depth = new utils.Buf16(2 * L_CODES + 1); //uch depth[2*L_CODES+1];\n  zero(this.depth);\n  /* Depth of each subtree used as tie breaker for trees of equal frequency\n   */\n\n  this.l_buf = 0;          /* buffer index for literals or lengths */\n\n  this.lit_bufsize = 0;\n  /* Size of match buffer for literals/lengths.  There are 4 reasons for\n   * limiting lit_bufsize to 64K:\n   *   - frequencies can be kept in 16 bit counters\n   *   - if compression is not successful for the first block, all input\n   *     data is still in the window so we can still emit a stored block even\n   *     when input comes from standard input.  (This can also be done for\n   *     all blocks if lit_bufsize is not greater than 32K.)\n   *   - if compression is not successful for a file smaller than 64K, we can\n   *     even emit a stored file instead of a stored block (saving 5 bytes).\n   *     This is applicable only for zip (not gzip or zlib).\n   *   - creating new Huffman trees less frequently may not provide fast\n   *     adaptation to changes in the input data statistics. (Take for\n   *     example a binary file with poorly compressible code followed by\n   *     a highly compressible string table.) Smaller buffer sizes give\n   *     fast adaptation but have of course the overhead of transmitting\n   *     trees more frequently.\n   *   - I can't count above 4\n   */\n\n  this.last_lit = 0;      /* running index in l_buf */\n\n  this.d_buf = 0;\n  /* Buffer index for distances. To simplify the code, d_buf and l_buf have\n   * the same number of elements. To use different lengths, an extra flag\n   * array would be necessary.\n   */\n\n  this.opt_len = 0;       /* bit length of current block with optimal trees */\n  this.static_len = 0;    /* bit length of current block with static trees */\n  this.matches = 0;       /* number of string matches in current block */\n  this.insert = 0;        /* bytes at end of window left to insert */\n\n\n  this.bi_buf = 0;\n  /* Output buffer. bits are inserted starting at the bottom (least\n   * significant bits).\n   */\n  this.bi_valid = 0;\n  /* Number of valid bits in bi_buf.  All bits above the last valid bit\n   * are always zero.\n   */\n\n  // Used for window memory init. We safely ignore it for JS. That makes\n  // sense only for pointers and memory check tools.\n  //this.high_water = 0;\n  /* High water mark offset in window for initialized bytes -- bytes above\n   * this are set to zero in order to avoid memory check warnings when\n   * longest match routines access bytes past the input.  This is then\n   * updated to the new high water mark.\n   */\n}\n\n\nfunction deflateResetKeep(strm) {\n  var s;\n\n  if (!strm || !strm.state) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.total_in = strm.total_out = 0;\n  strm.data_type = Z_UNKNOWN;\n\n  s = strm.state;\n  s.pending = 0;\n  s.pending_out = 0;\n\n  if (s.wrap < 0) {\n    s.wrap = -s.wrap;\n    /* was made negative by deflate(..., Z_FINISH); */\n  }\n  s.status = (s.wrap ? INIT_STATE : BUSY_STATE);\n  strm.adler = (s.wrap === 2) ?\n    0  // crc32(0, Z_NULL, 0)\n  :\n    1; // adler32(0, Z_NULL, 0)\n  s.last_flush = Z_NO_FLUSH;\n  trees._tr_init(s);\n  return Z_OK;\n}\n\n\nfunction deflateReset(strm) {\n  var ret = deflateResetKeep(strm);\n  if (ret === Z_OK) {\n    lm_init(strm.state);\n  }\n  return ret;\n}\n\n\nfunction deflateSetHeader(strm, head) {\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  if (strm.state.wrap !== 2) { return Z_STREAM_ERROR; }\n  strm.state.gzhead = head;\n  return Z_OK;\n}\n\n\nfunction deflateInit2(strm, level, method, windowBits, memLevel, strategy) {\n  if (!strm) { // === Z_NULL\n    return Z_STREAM_ERROR;\n  }\n  var wrap = 1;\n\n  if (level === Z_DEFAULT_COMPRESSION) {\n    level = 6;\n  }\n\n  if (windowBits < 0) { /* suppress zlib wrapper */\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n\n  else if (windowBits > 15) {\n    wrap = 2;           /* write gzip wrapper instead */\n    windowBits -= 16;\n  }\n\n\n  if (memLevel < 1 || memLevel > MAX_MEM_LEVEL || method !== Z_DEFLATED ||\n    windowBits < 8 || windowBits > 15 || level < 0 || level > 9 ||\n    strategy < 0 || strategy > Z_FIXED) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n\n  if (windowBits === 8) {\n    windowBits = 9;\n  }\n  /* until 256-byte window bug fixed */\n\n  var s = new DeflateState();\n\n  strm.state = s;\n  s.strm = strm;\n\n  s.wrap = wrap;\n  s.gzhead = null;\n  s.w_bits = windowBits;\n  s.w_size = 1 << s.w_bits;\n  s.w_mask = s.w_size - 1;\n\n  s.hash_bits = memLevel + 7;\n  s.hash_size = 1 << s.hash_bits;\n  s.hash_mask = s.hash_size - 1;\n  s.hash_shift = ~~((s.hash_bits + MIN_MATCH - 1) / MIN_MATCH);\n\n  s.window = new utils.Buf8(s.w_size * 2);\n  s.head = new utils.Buf16(s.hash_size);\n  s.prev = new utils.Buf16(s.w_size);\n\n  // Don't need mem init magic for JS.\n  //s.high_water = 0;  /* nothing written to s->window yet */\n\n  s.lit_bufsize = 1 << (memLevel + 6); /* 16K elements by default */\n\n  s.pending_buf_size = s.lit_bufsize * 4;\n\n  //overlay = (ushf *) ZALLOC(strm, s->lit_bufsize, sizeof(ush)+2);\n  //s->pending_buf = (uchf *) overlay;\n  s.pending_buf = new utils.Buf8(s.pending_buf_size);\n\n  // It is offset from `s.pending_buf` (size is `s.lit_bufsize * 2`)\n  //s->d_buf = overlay + s->lit_bufsize/sizeof(ush);\n  s.d_buf = 1 * s.lit_bufsize;\n\n  //s->l_buf = s->pending_buf + (1+sizeof(ush))*s->lit_bufsize;\n  s.l_buf = (1 + 2) * s.lit_bufsize;\n\n  s.level = level;\n  s.strategy = strategy;\n  s.method = method;\n\n  return deflateReset(strm);\n}\n\nfunction deflateInit(strm, level) {\n  return deflateInit2(strm, level, Z_DEFLATED, MAX_WBITS, DEF_MEM_LEVEL, Z_DEFAULT_STRATEGY);\n}\n\n\nfunction deflate(strm, flush) {\n  var old_flush, s;\n  var beg, val; // for gzip header write only\n\n  if (!strm || !strm.state ||\n    flush > Z_BLOCK || flush < 0) {\n    return strm ? err(strm, Z_STREAM_ERROR) : Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n\n  if (!strm.output ||\n      (!strm.input && strm.avail_in !== 0) ||\n      (s.status === FINISH_STATE && flush !== Z_FINISH)) {\n    return err(strm, (strm.avail_out === 0) ? Z_BUF_ERROR : Z_STREAM_ERROR);\n  }\n\n  s.strm = strm; /* just in case */\n  old_flush = s.last_flush;\n  s.last_flush = flush;\n\n  /* Write the header */\n  if (s.status === INIT_STATE) {\n\n    if (s.wrap === 2) { // GZIP header\n      strm.adler = 0;  //crc32(0L, Z_NULL, 0);\n      put_byte(s, 31);\n      put_byte(s, 139);\n      put_byte(s, 8);\n      if (!s.gzhead) { // s->gzhead == Z_NULL\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, 0);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, OS_CODE);\n        s.status = BUSY_STATE;\n      }\n      else {\n        put_byte(s, (s.gzhead.text ? 1 : 0) +\n                    (s.gzhead.hcrc ? 2 : 0) +\n                    (!s.gzhead.extra ? 0 : 4) +\n                    (!s.gzhead.name ? 0 : 8) +\n                    (!s.gzhead.comment ? 0 : 16)\n                );\n        put_byte(s, s.gzhead.time & 0xff);\n        put_byte(s, (s.gzhead.time >> 8) & 0xff);\n        put_byte(s, (s.gzhead.time >> 16) & 0xff);\n        put_byte(s, (s.gzhead.time >> 24) & 0xff);\n        put_byte(s, s.level === 9 ? 2 :\n                    (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2 ?\n                     4 : 0));\n        put_byte(s, s.gzhead.os & 0xff);\n        if (s.gzhead.extra && s.gzhead.extra.length) {\n          put_byte(s, s.gzhead.extra.length & 0xff);\n          put_byte(s, (s.gzhead.extra.length >> 8) & 0xff);\n        }\n        if (s.gzhead.hcrc) {\n          strm.adler = crc32(strm.adler, s.pending_buf, s.pending, 0);\n        }\n        s.gzindex = 0;\n        s.status = EXTRA_STATE;\n      }\n    }\n    else // DEFLATE header\n    {\n      var header = (Z_DEFLATED + ((s.w_bits - 8) << 4)) << 8;\n      var level_flags = -1;\n\n      if (s.strategy >= Z_HUFFMAN_ONLY || s.level < 2) {\n        level_flags = 0;\n      } else if (s.level < 6) {\n        level_flags = 1;\n      } else if (s.level === 6) {\n        level_flags = 2;\n      } else {\n        level_flags = 3;\n      }\n      header |= (level_flags << 6);\n      if (s.strstart !== 0) { header |= PRESET_DICT; }\n      header += 31 - (header % 31);\n\n      s.status = BUSY_STATE;\n      putShortMSB(s, header);\n\n      /* Save the adler32 of the preset dictionary: */\n      if (s.strstart !== 0) {\n        putShortMSB(s, strm.adler >>> 16);\n        putShortMSB(s, strm.adler & 0xffff);\n      }\n      strm.adler = 1; // adler32(0L, Z_NULL, 0);\n    }\n  }\n\n//#ifdef GZIP\n  if (s.status === EXTRA_STATE) {\n    if (s.gzhead.extra/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n\n      while (s.gzindex < (s.gzhead.extra.length & 0xffff)) {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            break;\n          }\n        }\n        put_byte(s, s.gzhead.extra[s.gzindex] & 0xff);\n        s.gzindex++;\n      }\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (s.gzindex === s.gzhead.extra.length) {\n        s.gzindex = 0;\n        s.status = NAME_STATE;\n      }\n    }\n    else {\n      s.status = NAME_STATE;\n    }\n  }\n  if (s.status === NAME_STATE) {\n    if (s.gzhead.name/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.name.length) {\n          val = s.gzhead.name.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.gzindex = 0;\n        s.status = COMMENT_STATE;\n      }\n    }\n    else {\n      s.status = COMMENT_STATE;\n    }\n  }\n  if (s.status === COMMENT_STATE) {\n    if (s.gzhead.comment/* != Z_NULL*/) {\n      beg = s.pending;  /* start of bytes to update crc */\n      //int val;\n\n      do {\n        if (s.pending === s.pending_buf_size) {\n          if (s.gzhead.hcrc && s.pending > beg) {\n            strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n          }\n          flush_pending(strm);\n          beg = s.pending;\n          if (s.pending === s.pending_buf_size) {\n            val = 1;\n            break;\n          }\n        }\n        // JS specific: little magic to add zero terminator to end of string\n        if (s.gzindex < s.gzhead.comment.length) {\n          val = s.gzhead.comment.charCodeAt(s.gzindex++) & 0xff;\n        } else {\n          val = 0;\n        }\n        put_byte(s, val);\n      } while (val !== 0);\n\n      if (s.gzhead.hcrc && s.pending > beg) {\n        strm.adler = crc32(strm.adler, s.pending_buf, s.pending - beg, beg);\n      }\n      if (val === 0) {\n        s.status = HCRC_STATE;\n      }\n    }\n    else {\n      s.status = HCRC_STATE;\n    }\n  }\n  if (s.status === HCRC_STATE) {\n    if (s.gzhead.hcrc) {\n      if (s.pending + 2 > s.pending_buf_size) {\n        flush_pending(strm);\n      }\n      if (s.pending + 2 <= s.pending_buf_size) {\n        put_byte(s, strm.adler & 0xff);\n        put_byte(s, (strm.adler >> 8) & 0xff);\n        strm.adler = 0; //crc32(0L, Z_NULL, 0);\n        s.status = BUSY_STATE;\n      }\n    }\n    else {\n      s.status = BUSY_STATE;\n    }\n  }\n//#endif\n\n  /* Flush as much pending output as possible */\n  if (s.pending !== 0) {\n    flush_pending(strm);\n    if (strm.avail_out === 0) {\n      /* Since avail_out is 0, deflate will be called again with\n       * more output space, but possibly with both pending and\n       * avail_in equal to zero. There won't be anything to do,\n       * but this is not an error situation so make sure we\n       * return OK instead of BUF_ERROR at next call of deflate:\n       */\n      s.last_flush = -1;\n      return Z_OK;\n    }\n\n    /* Make sure there is something to do and avoid duplicate consecutive\n     * flushes. For repeated and useless calls with Z_FINISH, we keep\n     * returning Z_STREAM_END instead of Z_BUF_ERROR.\n     */\n  } else if (strm.avail_in === 0 && rank(flush) <= rank(old_flush) &&\n    flush !== Z_FINISH) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* User must not provide more input after the first FINISH: */\n  if (s.status === FINISH_STATE && strm.avail_in !== 0) {\n    return err(strm, Z_BUF_ERROR);\n  }\n\n  /* Start a new block or continue the current one.\n   */\n  if (strm.avail_in !== 0 || s.lookahead !== 0 ||\n    (flush !== Z_NO_FLUSH && s.status !== FINISH_STATE)) {\n    var bstate = (s.strategy === Z_HUFFMAN_ONLY) ? deflate_huff(s, flush) :\n      (s.strategy === Z_RLE ? deflate_rle(s, flush) :\n        configuration_table[s.level].func(s, flush));\n\n    if (bstate === BS_FINISH_STARTED || bstate === BS_FINISH_DONE) {\n      s.status = FINISH_STATE;\n    }\n    if (bstate === BS_NEED_MORE || bstate === BS_FINISH_STARTED) {\n      if (strm.avail_out === 0) {\n        s.last_flush = -1;\n        /* avoid BUF_ERROR next call, see above */\n      }\n      return Z_OK;\n      /* If flush != Z_NO_FLUSH && avail_out == 0, the next call\n       * of deflate should use the same flush parameter to make sure\n       * that the flush is complete. So we don't have to output an\n       * empty block here, this will be done at next call. This also\n       * ensures that for a very small output buffer, we emit at most\n       * one empty block.\n       */\n    }\n    if (bstate === BS_BLOCK_DONE) {\n      if (flush === Z_PARTIAL_FLUSH) {\n        trees._tr_align(s);\n      }\n      else if (flush !== Z_BLOCK) { /* FULL_FLUSH or SYNC_FLUSH */\n\n        trees._tr_stored_block(s, 0, 0, false);\n        /* For a full flush, this empty block will be recognized\n         * as a special marker by inflate_sync().\n         */\n        if (flush === Z_FULL_FLUSH) {\n          /*** CLEAR_HASH(s); ***/             /* forget history */\n          zero(s.head); // Fill with NIL (= 0);\n\n          if (s.lookahead === 0) {\n            s.strstart = 0;\n            s.block_start = 0;\n            s.insert = 0;\n          }\n        }\n      }\n      flush_pending(strm);\n      if (strm.avail_out === 0) {\n        s.last_flush = -1; /* avoid BUF_ERROR at next call, see above */\n        return Z_OK;\n      }\n    }\n  }\n  //Assert(strm->avail_out > 0, \"bug2\");\n  //if (strm.avail_out <= 0) { throw new Error(\"bug2\");}\n\n  if (flush !== Z_FINISH) { return Z_OK; }\n  if (s.wrap <= 0) { return Z_STREAM_END; }\n\n  /* Write the trailer */\n  if (s.wrap === 2) {\n    put_byte(s, strm.adler & 0xff);\n    put_byte(s, (strm.adler >> 8) & 0xff);\n    put_byte(s, (strm.adler >> 16) & 0xff);\n    put_byte(s, (strm.adler >> 24) & 0xff);\n    put_byte(s, strm.total_in & 0xff);\n    put_byte(s, (strm.total_in >> 8) & 0xff);\n    put_byte(s, (strm.total_in >> 16) & 0xff);\n    put_byte(s, (strm.total_in >> 24) & 0xff);\n  }\n  else\n  {\n    putShortMSB(s, strm.adler >>> 16);\n    putShortMSB(s, strm.adler & 0xffff);\n  }\n\n  flush_pending(strm);\n  /* If avail_out is zero, the application will call deflate again\n   * to flush the rest.\n   */\n  if (s.wrap > 0) { s.wrap = -s.wrap; }\n  /* write the trailer only once! */\n  return s.pending !== 0 ? Z_OK : Z_STREAM_END;\n}\n\nfunction deflateEnd(strm) {\n  var status;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  status = strm.state.status;\n  if (status !== INIT_STATE &&\n    status !== EXTRA_STATE &&\n    status !== NAME_STATE &&\n    status !== COMMENT_STATE &&\n    status !== HCRC_STATE &&\n    status !== BUSY_STATE &&\n    status !== FINISH_STATE\n  ) {\n    return err(strm, Z_STREAM_ERROR);\n  }\n\n  strm.state = null;\n\n  return status === BUSY_STATE ? err(strm, Z_DATA_ERROR) : Z_OK;\n}\n\n\n/* =========================================================================\n * Initializes the compression dictionary from the given byte\n * sequence without producing any compressed output.\n */\nfunction deflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var s;\n  var str, n;\n  var wrap;\n  var avail;\n  var next;\n  var input;\n  var tmpDict;\n\n  if (!strm/*== Z_NULL*/ || !strm.state/*== Z_NULL*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  s = strm.state;\n  wrap = s.wrap;\n\n  if (wrap === 2 || (wrap === 1 && s.status !== INIT_STATE) || s.lookahead) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* when using zlib wrappers, compute Adler-32 for provided dictionary */\n  if (wrap === 1) {\n    /* adler32(strm->adler, dictionary, dictLength); */\n    strm.adler = adler32(strm.adler, dictionary, dictLength, 0);\n  }\n\n  s.wrap = 0;   /* avoid computing Adler-32 in read_buf */\n\n  /* if dictionary would fill window, just replace the history */\n  if (dictLength >= s.w_size) {\n    if (wrap === 0) {            /* already empty otherwise */\n      /*** CLEAR_HASH(s); ***/\n      zero(s.head); // Fill with NIL (= 0);\n      s.strstart = 0;\n      s.block_start = 0;\n      s.insert = 0;\n    }\n    /* use the tail */\n    // dictionary = dictionary.slice(dictLength - s.w_size);\n    tmpDict = new utils.Buf8(s.w_size);\n    utils.arraySet(tmpDict, dictionary, dictLength - s.w_size, s.w_size, 0);\n    dictionary = tmpDict;\n    dictLength = s.w_size;\n  }\n  /* insert dictionary into window and hash */\n  avail = strm.avail_in;\n  next = strm.next_in;\n  input = strm.input;\n  strm.avail_in = dictLength;\n  strm.next_in = 0;\n  strm.input = dictionary;\n  fill_window(s);\n  while (s.lookahead >= MIN_MATCH) {\n    str = s.strstart;\n    n = s.lookahead - (MIN_MATCH - 1);\n    do {\n      /* UPDATE_HASH(s, s->ins_h, s->window[str + MIN_MATCH-1]); */\n      s.ins_h = ((s.ins_h << s.hash_shift) ^ s.window[str + MIN_MATCH - 1]) & s.hash_mask;\n\n      s.prev[str & s.w_mask] = s.head[s.ins_h];\n\n      s.head[s.ins_h] = str;\n      str++;\n    } while (--n);\n    s.strstart = str;\n    s.lookahead = MIN_MATCH - 1;\n    fill_window(s);\n  }\n  s.strstart += s.lookahead;\n  s.block_start = s.strstart;\n  s.insert = s.lookahead;\n  s.lookahead = 0;\n  s.match_length = s.prev_length = MIN_MATCH - 1;\n  s.match_available = 0;\n  strm.next_in = next;\n  strm.input = input;\n  strm.avail_in = avail;\n  s.wrap = wrap;\n  return Z_OK;\n}\n\n\nexports.deflateInit = deflateInit;\nexports.deflateInit2 = deflateInit2;\nexports.deflateReset = deflateReset;\nexports.deflateResetKeep = deflateResetKeep;\nexports.deflateSetHeader = deflateSetHeader;\nexports.deflate = deflate;\nexports.deflateEnd = deflateEnd;\nexports.deflateSetDictionary = deflateSetDictionary;\nexports.deflateInfo = 'pako deflate (from Nodeca project)';\n\n/* Not implemented\nexports.deflateBound = deflateBound;\nexports.deflateCopy = deflateCopy;\nexports.deflateParams = deflateParams;\nexports.deflatePending = deflatePending;\nexports.deflatePrime = deflatePrime;\nexports.deflateTune = deflateTune;\n*/\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils = __webpack_require__(0);\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n//var Z_FILTERED          = 1;\n//var Z_HUFFMAN_ONLY      = 2;\n//var Z_RLE               = 3;\nvar Z_FIXED               = 4;\n//var Z_DEFAULT_STRATEGY  = 0;\n\n/* Possible values of the data_type field (though see inflate()) */\nvar Z_BINARY              = 0;\nvar Z_TEXT                = 1;\n//var Z_ASCII             = 1; // = Z_TEXT\nvar Z_UNKNOWN             = 2;\n\n/*============================================================================*/\n\n\nfunction zero(buf) { var len = buf.length; while (--len >= 0) { buf[len] = 0; } }\n\n// From zutil.h\n\nvar STORED_BLOCK = 0;\nvar STATIC_TREES = 1;\nvar DYN_TREES    = 2;\n/* The three kinds of block type */\n\nvar MIN_MATCH    = 3;\nvar MAX_MATCH    = 258;\n/* The minimum and maximum match lengths */\n\n// From deflate.h\n/* ===========================================================================\n * Internal compression state.\n */\n\nvar LENGTH_CODES  = 29;\n/* number of length codes, not counting the special END_BLOCK code */\n\nvar LITERALS      = 256;\n/* number of literal bytes 0..255 */\n\nvar L_CODES       = LITERALS + 1 + LENGTH_CODES;\n/* number of Literal or Length codes, including the END_BLOCK code */\n\nvar D_CODES       = 30;\n/* number of distance codes */\n\nvar BL_CODES      = 19;\n/* number of codes used to transfer the bit lengths */\n\nvar HEAP_SIZE     = 2 * L_CODES + 1;\n/* maximum heap size */\n\nvar MAX_BITS      = 15;\n/* All codes must not exceed MAX_BITS bits */\n\nvar Buf_size      = 16;\n/* size of bit buffer in bi_buf */\n\n\n/* ===========================================================================\n * Constants\n */\n\nvar MAX_BL_BITS = 7;\n/* Bit length codes must not exceed MAX_BL_BITS bits */\n\nvar END_BLOCK   = 256;\n/* end of block literal code */\n\nvar REP_3_6     = 16;\n/* repeat previous bit length 3-6 times (2 bits of repeat count) */\n\nvar REPZ_3_10   = 17;\n/* repeat a zero length 3-10 times  (3 bits of repeat count) */\n\nvar REPZ_11_138 = 18;\n/* repeat a zero length 11-138 times  (7 bits of repeat count) */\n\n/* eslint-disable comma-spacing,array-bracket-spacing */\nvar extra_lbits =   /* extra bits for each length code */\n  [0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];\n\nvar extra_dbits =   /* extra bits for each distance code */\n  [0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];\n\nvar extra_blbits =  /* extra bits for each bit length code */\n  [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];\n\nvar bl_order =\n  [16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];\n/* eslint-enable comma-spacing,array-bracket-spacing */\n\n/* The lengths of the bit length codes are sent in order of decreasing\n * probability, to avoid transmitting the lengths for unused bit length codes.\n */\n\n/* ===========================================================================\n * Local data. These are initialized only once.\n */\n\n// We pre-fill arrays with 0 to avoid uninitialized gaps\n\nvar DIST_CODE_LEN = 512; /* see definition of array dist_code below */\n\n// !!!! Use flat array instead of structure, Freq = i*2, Len = i*2+1\nvar static_ltree  = new Array((L_CODES + 2) * 2);\nzero(static_ltree);\n/* The static literal tree. Since the bit lengths are imposed, there is no\n * need for the L_CODES extra codes used during heap construction. However\n * The codes 286 and 287 are needed to build a canonical tree (see _tr_init\n * below).\n */\n\nvar static_dtree  = new Array(D_CODES * 2);\nzero(static_dtree);\n/* The static distance tree. (Actually a trivial tree since all codes use\n * 5 bits.)\n */\n\nvar _dist_code    = new Array(DIST_CODE_LEN);\nzero(_dist_code);\n/* Distance codes. The first 256 values correspond to the distances\n * 3 .. 258, the last 256 values correspond to the top 8 bits of\n * the 15 bit distances.\n */\n\nvar _length_code  = new Array(MAX_MATCH - MIN_MATCH + 1);\nzero(_length_code);\n/* length code for each normalized match length (0 == MIN_MATCH) */\n\nvar base_length   = new Array(LENGTH_CODES);\nzero(base_length);\n/* First normalized length for each code (0 = MIN_MATCH) */\n\nvar base_dist     = new Array(D_CODES);\nzero(base_dist);\n/* First normalized distance for each code (0 = distance of 1) */\n\n\nfunction StaticTreeDesc(static_tree, extra_bits, extra_base, elems, max_length) {\n\n  this.static_tree  = static_tree;  /* static tree or NULL */\n  this.extra_bits   = extra_bits;   /* extra bits for each code or NULL */\n  this.extra_base   = extra_base;   /* base index for extra_bits */\n  this.elems        = elems;        /* max number of elements in the tree */\n  this.max_length   = max_length;   /* max bit length for the codes */\n\n  // show if `static_tree` has data or dummy - needed for monomorphic objects\n  this.has_stree    = static_tree && static_tree.length;\n}\n\n\nvar static_l_desc;\nvar static_d_desc;\nvar static_bl_desc;\n\n\nfunction TreeDesc(dyn_tree, stat_desc) {\n  this.dyn_tree = dyn_tree;     /* the dynamic tree */\n  this.max_code = 0;            /* largest code with non zero frequency */\n  this.stat_desc = stat_desc;   /* the corresponding static tree */\n}\n\n\n\nfunction d_code(dist) {\n  return dist < 256 ? _dist_code[dist] : _dist_code[256 + (dist >>> 7)];\n}\n\n\n/* ===========================================================================\n * Output a short LSB first on the stream.\n * IN assertion: there is enough room in pendingBuf.\n */\nfunction put_short(s, w) {\n//    put_byte(s, (uch)((w) & 0xff));\n//    put_byte(s, (uch)((ush)(w) >> 8));\n  s.pending_buf[s.pending++] = (w) & 0xff;\n  s.pending_buf[s.pending++] = (w >>> 8) & 0xff;\n}\n\n\n/* ===========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nfunction send_bits(s, value, length) {\n  if (s.bi_valid > (Buf_size - length)) {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    put_short(s, s.bi_buf);\n    s.bi_buf = value >> (Buf_size - s.bi_valid);\n    s.bi_valid += length - Buf_size;\n  } else {\n    s.bi_buf |= (value << s.bi_valid) & 0xffff;\n    s.bi_valid += length;\n  }\n}\n\n\nfunction send_code(s, c, tree) {\n  send_bits(s, tree[c * 2]/*.Code*/, tree[c * 2 + 1]/*.Len*/);\n}\n\n\n/* ===========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nfunction bi_reverse(code, len) {\n  var res = 0;\n  do {\n    res |= code & 1;\n    code >>>= 1;\n    res <<= 1;\n  } while (--len > 0);\n  return res >>> 1;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer, keeping at most 7 bits in it.\n */\nfunction bi_flush(s) {\n  if (s.bi_valid === 16) {\n    put_short(s, s.bi_buf);\n    s.bi_buf = 0;\n    s.bi_valid = 0;\n\n  } else if (s.bi_valid >= 8) {\n    s.pending_buf[s.pending++] = s.bi_buf & 0xff;\n    s.bi_buf >>= 8;\n    s.bi_valid -= 8;\n  }\n}\n\n\n/* ===========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nfunction gen_bitlen(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc;    /* the tree descriptor */\n{\n  var tree            = desc.dyn_tree;\n  var max_code        = desc.max_code;\n  var stree           = desc.stat_desc.static_tree;\n  var has_stree       = desc.stat_desc.has_stree;\n  var extra           = desc.stat_desc.extra_bits;\n  var base            = desc.stat_desc.extra_base;\n  var max_length      = desc.stat_desc.max_length;\n  var h;              /* heap index */\n  var n, m;           /* iterate over the tree elements */\n  var bits;           /* bit length */\n  var xbits;          /* extra bits */\n  var f;              /* frequency */\n  var overflow = 0;   /* number of elements with bit length too large */\n\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    s.bl_count[bits] = 0;\n  }\n\n  /* In a first pass, compute the optimal bit lengths (which may\n   * overflow in the case of the bit length tree).\n   */\n  tree[s.heap[s.heap_max] * 2 + 1]/*.Len*/ = 0; /* root of the heap */\n\n  for (h = s.heap_max + 1; h < HEAP_SIZE; h++) {\n    n = s.heap[h];\n    bits = tree[tree[n * 2 + 1]/*.Dad*/ * 2 + 1]/*.Len*/ + 1;\n    if (bits > max_length) {\n      bits = max_length;\n      overflow++;\n    }\n    tree[n * 2 + 1]/*.Len*/ = bits;\n    /* We overwrite tree[n].Dad which is no longer needed */\n\n    if (n > max_code) { continue; } /* not a leaf node */\n\n    s.bl_count[bits]++;\n    xbits = 0;\n    if (n >= base) {\n      xbits = extra[n - base];\n    }\n    f = tree[n * 2]/*.Freq*/;\n    s.opt_len += f * (bits + xbits);\n    if (has_stree) {\n      s.static_len += f * (stree[n * 2 + 1]/*.Len*/ + xbits);\n    }\n  }\n  if (overflow === 0) { return; }\n\n  // Trace((stderr,\"\\nbit length overflow\\n\"));\n  /* This happens for example on obj2 and pic of the Calgary corpus */\n\n  /* Find the first bit length which could increase: */\n  do {\n    bits = max_length - 1;\n    while (s.bl_count[bits] === 0) { bits--; }\n    s.bl_count[bits]--;      /* move one leaf down the tree */\n    s.bl_count[bits + 1] += 2; /* move one overflow item as its brother */\n    s.bl_count[max_length]--;\n    /* The brother of the overflow item also moves one step up,\n     * but this does not affect bl_count[max_length]\n     */\n    overflow -= 2;\n  } while (overflow > 0);\n\n  /* Now recompute all bit lengths, scanning in increasing frequency.\n   * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n   * lengths instead of fixing only the wrong ones. This idea is taken\n   * from 'ar' written by Haruhiko Okumura.)\n   */\n  for (bits = max_length; bits !== 0; bits--) {\n    n = s.bl_count[bits];\n    while (n !== 0) {\n      m = s.heap[--h];\n      if (m > max_code) { continue; }\n      if (tree[m * 2 + 1]/*.Len*/ !== bits) {\n        // Trace((stderr,\"code %d bits %d->%d\\n\", m, tree[m].Len, bits));\n        s.opt_len += (bits - tree[m * 2 + 1]/*.Len*/) * tree[m * 2]/*.Freq*/;\n        tree[m * 2 + 1]/*.Len*/ = bits;\n      }\n      n--;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Generate the codes for a given tree and bit counts (which need not be\n * optimal).\n * IN assertion: the array bl_count contains the bit length statistics for\n * the given tree and the field len is set for all tree elements.\n * OUT assertion: the field code is set for all tree elements of non\n *     zero code length.\n */\nfunction gen_codes(tree, max_code, bl_count)\n//    ct_data *tree;             /* the tree to decorate */\n//    int max_code;              /* largest code with non zero frequency */\n//    ushf *bl_count;            /* number of codes at each bit length */\n{\n  var next_code = new Array(MAX_BITS + 1); /* next code value for each bit length */\n  var code = 0;              /* running code value */\n  var bits;                  /* bit index */\n  var n;                     /* code index */\n\n  /* The distribution counts are first used to generate the code values\n   * without bit reversal.\n   */\n  for (bits = 1; bits <= MAX_BITS; bits++) {\n    next_code[bits] = code = (code + bl_count[bits - 1]) << 1;\n  }\n  /* Check that the bit counts in bl_count are consistent. The last code\n   * must be all ones.\n   */\n  //Assert (code + bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n  //        \"inconsistent bit counts\");\n  //Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n  for (n = 0;  n <= max_code; n++) {\n    var len = tree[n * 2 + 1]/*.Len*/;\n    if (len === 0) { continue; }\n    /* Now reverse the bits */\n    tree[n * 2]/*.Code*/ = bi_reverse(next_code[len]++, len);\n\n    //Tracecv(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n    //     n, (isgraph(n) ? n : ' '), len, tree[n].Code, next_code[len]-1));\n  }\n}\n\n\n/* ===========================================================================\n * Initialize the various 'constant' tables.\n */\nfunction tr_static_init() {\n  var n;        /* iterates over tree elements */\n  var bits;     /* bit counter */\n  var length;   /* length value */\n  var code;     /* code value */\n  var dist;     /* distance index */\n  var bl_count = new Array(MAX_BITS + 1);\n  /* number of codes at each bit length for an optimal tree */\n\n  // do check in _tr_init()\n  //if (static_init_done) return;\n\n  /* For some embedded targets, global variables are not initialized: */\n/*#ifdef NO_INIT_GLOBAL_POINTERS\n  static_l_desc.static_tree = static_ltree;\n  static_l_desc.extra_bits = extra_lbits;\n  static_d_desc.static_tree = static_dtree;\n  static_d_desc.extra_bits = extra_dbits;\n  static_bl_desc.extra_bits = extra_blbits;\n#endif*/\n\n  /* Initialize the mapping length (0..255) -> length code (0..28) */\n  length = 0;\n  for (code = 0; code < LENGTH_CODES - 1; code++) {\n    base_length[code] = length;\n    for (n = 0; n < (1 << extra_lbits[code]); n++) {\n      _length_code[length++] = code;\n    }\n  }\n  //Assert (length == 256, \"tr_static_init: length != 256\");\n  /* Note that the length 255 (match length 258) can be represented\n   * in two different ways: code 284 + 5 bits or code 285, so we\n   * overwrite length_code[255] to use the best encoding:\n   */\n  _length_code[length - 1] = code;\n\n  /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n  dist = 0;\n  for (code = 0; code < 16; code++) {\n    base_dist[code] = dist;\n    for (n = 0; n < (1 << extra_dbits[code]); n++) {\n      _dist_code[dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: dist != 256\");\n  dist >>= 7; /* from now on, all distances are divided by 128 */\n  for (; code < D_CODES; code++) {\n    base_dist[code] = dist << 7;\n    for (n = 0; n < (1 << (extra_dbits[code] - 7)); n++) {\n      _dist_code[256 + dist++] = code;\n    }\n  }\n  //Assert (dist == 256, \"tr_static_init: 256+dist != 512\");\n\n  /* Construct the codes of the static literal tree */\n  for (bits = 0; bits <= MAX_BITS; bits++) {\n    bl_count[bits] = 0;\n  }\n\n  n = 0;\n  while (n <= 143) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  while (n <= 255) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 9;\n    n++;\n    bl_count[9]++;\n  }\n  while (n <= 279) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 7;\n    n++;\n    bl_count[7]++;\n  }\n  while (n <= 287) {\n    static_ltree[n * 2 + 1]/*.Len*/ = 8;\n    n++;\n    bl_count[8]++;\n  }\n  /* Codes 286 and 287 do not exist, but we must include them in the\n   * tree construction to get a canonical Huffman tree (longest code\n   * all ones)\n   */\n  gen_codes(static_ltree, L_CODES + 1, bl_count);\n\n  /* The static distance tree is trivial: */\n  for (n = 0; n < D_CODES; n++) {\n    static_dtree[n * 2 + 1]/*.Len*/ = 5;\n    static_dtree[n * 2]/*.Code*/ = bi_reverse(n, 5);\n  }\n\n  // Now data ready and we can init static trees\n  static_l_desc = new StaticTreeDesc(static_ltree, extra_lbits, LITERALS + 1, L_CODES, MAX_BITS);\n  static_d_desc = new StaticTreeDesc(static_dtree, extra_dbits, 0,          D_CODES, MAX_BITS);\n  static_bl_desc = new StaticTreeDesc(new Array(0), extra_blbits, 0,         BL_CODES, MAX_BL_BITS);\n\n  //static_init_done = true;\n}\n\n\n/* ===========================================================================\n * Initialize a new block.\n */\nfunction init_block(s) {\n  var n; /* iterates over tree elements */\n\n  /* Initialize the trees. */\n  for (n = 0; n < L_CODES;  n++) { s.dyn_ltree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < D_CODES;  n++) { s.dyn_dtree[n * 2]/*.Freq*/ = 0; }\n  for (n = 0; n < BL_CODES; n++) { s.bl_tree[n * 2]/*.Freq*/ = 0; }\n\n  s.dyn_ltree[END_BLOCK * 2]/*.Freq*/ = 1;\n  s.opt_len = s.static_len = 0;\n  s.last_lit = s.matches = 0;\n}\n\n\n/* ===========================================================================\n * Flush the bit buffer and align the output on a byte boundary\n */\nfunction bi_windup(s)\n{\n  if (s.bi_valid > 8) {\n    put_short(s, s.bi_buf);\n  } else if (s.bi_valid > 0) {\n    //put_byte(s, (Byte)s->bi_buf);\n    s.pending_buf[s.pending++] = s.bi_buf;\n  }\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n}\n\n/* ===========================================================================\n * Copy a stored block, storing first the length and its\n * one's complement if requested.\n */\nfunction copy_block(s, buf, len, header)\n//DeflateState *s;\n//charf    *buf;    /* the input data */\n//unsigned len;     /* its length */\n//int      header;  /* true if block header must be written */\n{\n  bi_windup(s);        /* align on byte boundary */\n\n  if (header) {\n    put_short(s, len);\n    put_short(s, ~len);\n  }\n//  while (len--) {\n//    put_byte(s, *buf++);\n//  }\n  utils.arraySet(s.pending_buf, s.window, buf, len, s.pending);\n  s.pending += len;\n}\n\n/* ===========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nfunction smaller(tree, n, m, depth) {\n  var _n2 = n * 2;\n  var _m2 = m * 2;\n  return (tree[_n2]/*.Freq*/ < tree[_m2]/*.Freq*/ ||\n         (tree[_n2]/*.Freq*/ === tree[_m2]/*.Freq*/ && depth[n] <= depth[m]));\n}\n\n/* ===========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nfunction pqdownheap(s, tree, k)\n//    deflate_state *s;\n//    ct_data *tree;  /* the tree to restore */\n//    int k;               /* node to move down */\n{\n  var v = s.heap[k];\n  var j = k << 1;  /* left son of k */\n  while (j <= s.heap_len) {\n    /* Set j to the smallest of the two sons: */\n    if (j < s.heap_len &&\n      smaller(tree, s.heap[j + 1], s.heap[j], s.depth)) {\n      j++;\n    }\n    /* Exit if v is smaller than both sons */\n    if (smaller(tree, v, s.heap[j], s.depth)) { break; }\n\n    /* Exchange v with the smallest son */\n    s.heap[k] = s.heap[j];\n    k = j;\n\n    /* And continue down the tree, setting j to the left son of k */\n    j <<= 1;\n  }\n  s.heap[k] = v;\n}\n\n\n// inlined manually\n// var SMALLEST = 1;\n\n/* ===========================================================================\n * Send the block data compressed using the given Huffman trees\n */\nfunction compress_block(s, ltree, dtree)\n//    deflate_state *s;\n//    const ct_data *ltree; /* literal tree */\n//    const ct_data *dtree; /* distance tree */\n{\n  var dist;           /* distance of matched string */\n  var lc;             /* match length or unmatched char (if dist == 0) */\n  var lx = 0;         /* running index in l_buf */\n  var code;           /* the code to send */\n  var extra;          /* number of extra bits to send */\n\n  if (s.last_lit !== 0) {\n    do {\n      dist = (s.pending_buf[s.d_buf + lx * 2] << 8) | (s.pending_buf[s.d_buf + lx * 2 + 1]);\n      lc = s.pending_buf[s.l_buf + lx];\n      lx++;\n\n      if (dist === 0) {\n        send_code(s, lc, ltree); /* send a literal byte */\n        //Tracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n      } else {\n        /* Here, lc is the match length - MIN_MATCH */\n        code = _length_code[lc];\n        send_code(s, code + LITERALS + 1, ltree); /* send the length code */\n        extra = extra_lbits[code];\n        if (extra !== 0) {\n          lc -= base_length[code];\n          send_bits(s, lc, extra);       /* send the extra length bits */\n        }\n        dist--; /* dist is now the match distance - 1 */\n        code = d_code(dist);\n        //Assert (code < D_CODES, \"bad d_code\");\n\n        send_code(s, code, dtree);       /* send the distance code */\n        extra = extra_dbits[code];\n        if (extra !== 0) {\n          dist -= base_dist[code];\n          send_bits(s, dist, extra);   /* send the extra distance bits */\n        }\n      } /* literal or match pair ? */\n\n      /* Check that the overlay between pending_buf and d_buf+l_buf is ok: */\n      //Assert((uInt)(s->pending) < s->lit_bufsize + 2*lx,\n      //       \"pendingBuf overflow\");\n\n    } while (lx < s.last_lit);\n  }\n\n  send_code(s, END_BLOCK, ltree);\n}\n\n\n/* ===========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nfunction build_tree(s, desc)\n//    deflate_state *s;\n//    tree_desc *desc; /* the tree descriptor */\n{\n  var tree     = desc.dyn_tree;\n  var stree    = desc.stat_desc.static_tree;\n  var has_stree = desc.stat_desc.has_stree;\n  var elems    = desc.stat_desc.elems;\n  var n, m;          /* iterate over heap elements */\n  var max_code = -1; /* largest code with non zero frequency */\n  var node;          /* new node being created */\n\n  /* Construct the initial heap, with least frequent element in\n   * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n   * heap[0] is not used.\n   */\n  s.heap_len = 0;\n  s.heap_max = HEAP_SIZE;\n\n  for (n = 0; n < elems; n++) {\n    if (tree[n * 2]/*.Freq*/ !== 0) {\n      s.heap[++s.heap_len] = max_code = n;\n      s.depth[n] = 0;\n\n    } else {\n      tree[n * 2 + 1]/*.Len*/ = 0;\n    }\n  }\n\n  /* The pkzip format requires that at least one distance code exists,\n   * and that at least one bit should be sent even if there is only one\n   * possible code. So to avoid special checks later on we force at least\n   * two codes of non zero frequency.\n   */\n  while (s.heap_len < 2) {\n    node = s.heap[++s.heap_len] = (max_code < 2 ? ++max_code : 0);\n    tree[node * 2]/*.Freq*/ = 1;\n    s.depth[node] = 0;\n    s.opt_len--;\n\n    if (has_stree) {\n      s.static_len -= stree[node * 2 + 1]/*.Len*/;\n    }\n    /* node is 0 or 1 so it does not have extra bits */\n  }\n  desc.max_code = max_code;\n\n  /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n   * establish sub-heaps of increasing lengths:\n   */\n  for (n = (s.heap_len >> 1/*int /2*/); n >= 1; n--) { pqdownheap(s, tree, n); }\n\n  /* Construct the Huffman tree by repeatedly combining the least two\n   * frequent nodes.\n   */\n  node = elems;              /* next internal node of the tree */\n  do {\n    //pqremove(s, tree, n);  /* n = node of least frequency */\n    /*** pqremove ***/\n    n = s.heap[1/*SMALLEST*/];\n    s.heap[1/*SMALLEST*/] = s.heap[s.heap_len--];\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n    /***/\n\n    m = s.heap[1/*SMALLEST*/]; /* m = node of next least frequency */\n\n    s.heap[--s.heap_max] = n; /* keep the nodes sorted by frequency */\n    s.heap[--s.heap_max] = m;\n\n    /* Create a new node father of n and m */\n    tree[node * 2]/*.Freq*/ = tree[n * 2]/*.Freq*/ + tree[m * 2]/*.Freq*/;\n    s.depth[node] = (s.depth[n] >= s.depth[m] ? s.depth[n] : s.depth[m]) + 1;\n    tree[n * 2 + 1]/*.Dad*/ = tree[m * 2 + 1]/*.Dad*/ = node;\n\n    /* and insert the new node in the heap */\n    s.heap[1/*SMALLEST*/] = node++;\n    pqdownheap(s, tree, 1/*SMALLEST*/);\n\n  } while (s.heap_len >= 2);\n\n  s.heap[--s.heap_max] = s.heap[1/*SMALLEST*/];\n\n  /* At this point, the fields freq and dad are set. We can now\n   * generate the bit lengths.\n   */\n  gen_bitlen(s, desc);\n\n  /* The field len is now set, we can generate the bit codes */\n  gen_codes(tree, max_code, s.bl_count);\n}\n\n\n/* ===========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree.\n */\nfunction scan_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree;   /* the tree to be scanned */\n//    int max_code;    /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n  tree[(max_code + 1) * 2 + 1]/*.Len*/ = 0xffff; /* guard */\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      s.bl_tree[curlen * 2]/*.Freq*/ += count;\n\n    } else if (curlen !== 0) {\n\n      if (curlen !== prevlen) { s.bl_tree[curlen * 2]/*.Freq*/++; }\n      s.bl_tree[REP_3_6 * 2]/*.Freq*/++;\n\n    } else if (count <= 10) {\n      s.bl_tree[REPZ_3_10 * 2]/*.Freq*/++;\n\n    } else {\n      s.bl_tree[REPZ_11_138 * 2]/*.Freq*/++;\n    }\n\n    count = 0;\n    prevlen = curlen;\n\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Send a literal or distance tree in compressed form, using the codes in\n * bl_tree.\n */\nfunction send_tree(s, tree, max_code)\n//    deflate_state *s;\n//    ct_data *tree; /* the tree to be scanned */\n//    int max_code;       /* and its largest code of non zero frequency */\n{\n  var n;                     /* iterates over all tree elements */\n  var prevlen = -1;          /* last emitted length */\n  var curlen;                /* length of current code */\n\n  var nextlen = tree[0 * 2 + 1]/*.Len*/; /* length of next code */\n\n  var count = 0;             /* repeat count of the current code */\n  var max_count = 7;         /* max repeat count */\n  var min_count = 4;         /* min repeat count */\n\n  /* tree[max_code+1].Len = -1; */  /* guard already set */\n  if (nextlen === 0) {\n    max_count = 138;\n    min_count = 3;\n  }\n\n  for (n = 0; n <= max_code; n++) {\n    curlen = nextlen;\n    nextlen = tree[(n + 1) * 2 + 1]/*.Len*/;\n\n    if (++count < max_count && curlen === nextlen) {\n      continue;\n\n    } else if (count < min_count) {\n      do { send_code(s, curlen, s.bl_tree); } while (--count !== 0);\n\n    } else if (curlen !== 0) {\n      if (curlen !== prevlen) {\n        send_code(s, curlen, s.bl_tree);\n        count--;\n      }\n      //Assert(count >= 3 && count <= 6, \" 3_6?\");\n      send_code(s, REP_3_6, s.bl_tree);\n      send_bits(s, count - 3, 2);\n\n    } else if (count <= 10) {\n      send_code(s, REPZ_3_10, s.bl_tree);\n      send_bits(s, count - 3, 3);\n\n    } else {\n      send_code(s, REPZ_11_138, s.bl_tree);\n      send_bits(s, count - 11, 7);\n    }\n\n    count = 0;\n    prevlen = curlen;\n    if (nextlen === 0) {\n      max_count = 138;\n      min_count = 3;\n\n    } else if (curlen === nextlen) {\n      max_count = 6;\n      min_count = 3;\n\n    } else {\n      max_count = 7;\n      min_count = 4;\n    }\n  }\n}\n\n\n/* ===========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nfunction build_bl_tree(s) {\n  var max_blindex;  /* index of last bit length code of non zero freq */\n\n  /* Determine the bit length frequencies for literal and distance trees */\n  scan_tree(s, s.dyn_ltree, s.l_desc.max_code);\n  scan_tree(s, s.dyn_dtree, s.d_desc.max_code);\n\n  /* Build the bit length tree: */\n  build_tree(s, s.bl_desc);\n  /* opt_len now includes the length of the tree representations, except\n   * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n   */\n\n  /* Determine the number of bit length codes to send. The pkzip format\n   * requires that at least 4 bit length codes be sent. (appnote.txt says\n   * 3 but the actual value used is 4.)\n   */\n  for (max_blindex = BL_CODES - 1; max_blindex >= 3; max_blindex--) {\n    if (s.bl_tree[bl_order[max_blindex] * 2 + 1]/*.Len*/ !== 0) {\n      break;\n    }\n  }\n  /* Update opt_len to include the bit length tree and counts */\n  s.opt_len += 3 * (max_blindex + 1) + 5 + 5 + 4;\n  //Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n  //        s->opt_len, s->static_len));\n\n  return max_blindex;\n}\n\n\n/* ===========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nfunction send_all_trees(s, lcodes, dcodes, blcodes)\n//    deflate_state *s;\n//    int lcodes, dcodes, blcodes; /* number of codes for each tree */\n{\n  var rank;                    /* index in bl_order */\n\n  //Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n  //Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n  //        \"too many codes\");\n  //Tracev((stderr, \"\\nbl counts: \"));\n  send_bits(s, lcodes - 257, 5); /* not +255 as stated in appnote.txt */\n  send_bits(s, dcodes - 1,   5);\n  send_bits(s, blcodes - 4,  4); /* not -3 as stated in appnote.txt */\n  for (rank = 0; rank < blcodes; rank++) {\n    //Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n    send_bits(s, s.bl_tree[bl_order[rank] * 2 + 1]/*.Len*/, 3);\n  }\n  //Tracev((stderr, \"\\nbl tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_ltree, lcodes - 1); /* literal tree */\n  //Tracev((stderr, \"\\nlit tree: sent %ld\", s->bits_sent));\n\n  send_tree(s, s.dyn_dtree, dcodes - 1); /* distance tree */\n  //Tracev((stderr, \"\\ndist tree: sent %ld\", s->bits_sent));\n}\n\n\n/* ===========================================================================\n * Check if the data type is TEXT or BINARY, using the following algorithm:\n * - TEXT if the two conditions below are satisfied:\n *    a) There are no non-portable control characters belonging to the\n *       \"black list\" (0..6, 14..25, 28..31).\n *    b) There is at least one printable character belonging to the\n *       \"white list\" (9 {TAB}, 10 {LF}, 13 {CR}, 32..255).\n * - BINARY otherwise.\n * - The following partially-portable control characters form a\n *   \"gray list\" that is ignored in this detection algorithm:\n *   (7 {BEL}, 8 {BS}, 11 {VT}, 12 {FF}, 26 {SUB}, 27 {ESC}).\n * IN assertion: the fields Freq of dyn_ltree are set.\n */\nfunction detect_data_type(s) {\n  /* black_mask is the bit mask of black-listed bytes\n   * set bits 0..6, 14..25, and 28..31\n   * 0xf3ffc07f = binary 11110011111111111100000001111111\n   */\n  var black_mask = 0xf3ffc07f;\n  var n;\n\n  /* Check for non-textual (\"black-listed\") bytes. */\n  for (n = 0; n <= 31; n++, black_mask >>>= 1) {\n    if ((black_mask & 1) && (s.dyn_ltree[n * 2]/*.Freq*/ !== 0)) {\n      return Z_BINARY;\n    }\n  }\n\n  /* Check for textual (\"white-listed\") bytes. */\n  if (s.dyn_ltree[9 * 2]/*.Freq*/ !== 0 || s.dyn_ltree[10 * 2]/*.Freq*/ !== 0 ||\n      s.dyn_ltree[13 * 2]/*.Freq*/ !== 0) {\n    return Z_TEXT;\n  }\n  for (n = 32; n < LITERALS; n++) {\n    if (s.dyn_ltree[n * 2]/*.Freq*/ !== 0) {\n      return Z_TEXT;\n    }\n  }\n\n  /* There are no \"black-listed\" or \"white-listed\" bytes:\n   * this stream either is empty or has tolerated (\"gray-listed\") bytes only.\n   */\n  return Z_BINARY;\n}\n\n\nvar static_init_done = false;\n\n/* ===========================================================================\n * Initialize the tree data structures for a new zlib stream.\n */\nfunction _tr_init(s)\n{\n\n  if (!static_init_done) {\n    tr_static_init();\n    static_init_done = true;\n  }\n\n  s.l_desc  = new TreeDesc(s.dyn_ltree, static_l_desc);\n  s.d_desc  = new TreeDesc(s.dyn_dtree, static_d_desc);\n  s.bl_desc = new TreeDesc(s.bl_tree, static_bl_desc);\n\n  s.bi_buf = 0;\n  s.bi_valid = 0;\n\n  /* Initialize the first block of the first file: */\n  init_block(s);\n}\n\n\n/* ===========================================================================\n * Send a stored block\n */\nfunction _tr_stored_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  send_bits(s, (STORED_BLOCK << 1) + (last ? 1 : 0), 3);    /* send block type */\n  copy_block(s, buf, stored_len, true); /* with header */\n}\n\n\n/* ===========================================================================\n * Send one empty static block to give enough lookahead for inflate.\n * This takes 10 bits, of which 7 may remain in the bit buffer.\n */\nfunction _tr_align(s) {\n  send_bits(s, STATIC_TREES << 1, 3);\n  send_code(s, END_BLOCK, static_ltree);\n  bi_flush(s);\n}\n\n\n/* ===========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and output the encoded block to the zip file.\n */\nfunction _tr_flush_block(s, buf, stored_len, last)\n//DeflateState *s;\n//charf *buf;       /* input block, or NULL if too old */\n//ulg stored_len;   /* length of input block */\n//int last;         /* one if this is the last block for a file */\n{\n  var opt_lenb, static_lenb;  /* opt_len and static_len in bytes */\n  var max_blindex = 0;        /* index of last bit length code of non zero freq */\n\n  /* Build the Huffman trees unless a stored block is forced */\n  if (s.level > 0) {\n\n    /* Check if the file is binary or text */\n    if (s.strm.data_type === Z_UNKNOWN) {\n      s.strm.data_type = detect_data_type(s);\n    }\n\n    /* Construct the literal and distance trees */\n    build_tree(s, s.l_desc);\n    // Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n\n    build_tree(s, s.d_desc);\n    // Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\", s->opt_len,\n    //        s->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = build_bl_tree(s);\n\n    /* Determine the best encoding. Compute the block lengths in bytes. */\n    opt_lenb = (s.opt_len + 3 + 7) >>> 3;\n    static_lenb = (s.static_len + 3 + 7) >>> 3;\n\n    // Tracev((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u \",\n    //        opt_lenb, s->opt_len, static_lenb, s->static_len, stored_len,\n    //        s->last_lit));\n\n    if (static_lenb <= opt_lenb) { opt_lenb = static_lenb; }\n\n  } else {\n    // Assert(buf != (char*)0, \"lost buf\");\n    opt_lenb = static_lenb = stored_len + 5; /* force a stored block */\n  }\n\n  if ((stored_len + 4 <= opt_lenb) && (buf !== -1)) {\n    /* 4: two words for the lengths */\n\n    /* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n     * Otherwise we can't have processed more than WSIZE input bytes since\n     * the last block flush, because compression would have been\n     * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n     * transform a block into a stored block.\n     */\n    _tr_stored_block(s, buf, stored_len, last);\n\n  } else if (s.strategy === Z_FIXED || static_lenb === opt_lenb) {\n\n    send_bits(s, (STATIC_TREES << 1) + (last ? 1 : 0), 3);\n    compress_block(s, static_ltree, static_dtree);\n\n  } else {\n    send_bits(s, (DYN_TREES << 1) + (last ? 1 : 0), 3);\n    send_all_trees(s, s.l_desc.max_code + 1, s.d_desc.max_code + 1, max_blindex + 1);\n    compress_block(s, s.dyn_ltree, s.dyn_dtree);\n  }\n  // Assert (s->compressed_len == s->bits_sent, \"bad compressed size\");\n  /* The above check is made mod 2^32, for files larger than 512 MB\n   * and uLong implemented on 32 bits.\n   */\n  init_block(s);\n\n  if (last) {\n    bi_windup(s);\n  }\n  // Tracev((stderr,\"\\ncomprlen %lu(%lu) \", s->compressed_len>>3,\n  //       s->compressed_len-7*last));\n}\n\n/* ===========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nfunction _tr_tally(s, dist, lc)\n//    deflate_state *s;\n//    unsigned dist;  /* distance of matched string */\n//    unsigned lc;    /* match length-MIN_MATCH or unmatched char (if dist==0) */\n{\n  //var out_length, in_length, dcode;\n\n  s.pending_buf[s.d_buf + s.last_lit * 2]     = (dist >>> 8) & 0xff;\n  s.pending_buf[s.d_buf + s.last_lit * 2 + 1] = dist & 0xff;\n\n  s.pending_buf[s.l_buf + s.last_lit] = lc & 0xff;\n  s.last_lit++;\n\n  if (dist === 0) {\n    /* lc is the unmatched char */\n    s.dyn_ltree[lc * 2]/*.Freq*/++;\n  } else {\n    s.matches++;\n    /* Here, lc is the match length - MIN_MATCH */\n    dist--;             /* dist = match distance - 1 */\n    //Assert((ush)dist < (ush)MAX_DIST(s) &&\n    //       (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n    //       (ush)d_code(dist) < (ush)D_CODES,  \"_tr_tally: bad match\");\n\n    s.dyn_ltree[(_length_code[lc] + LITERALS + 1) * 2]/*.Freq*/++;\n    s.dyn_dtree[d_code(dist) * 2]/*.Freq*/++;\n  }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n\n//#ifdef TRUNCATE_BLOCK\n//  /* Try to guess if it is profitable to stop the current block here */\n//  if ((s.last_lit & 0x1fff) === 0 && s.level > 2) {\n//    /* Compute an upper bound for the compressed length */\n//    out_length = s.last_lit*8;\n//    in_length = s.strstart - s.block_start;\n//\n//    for (dcode = 0; dcode < D_CODES; dcode++) {\n//      out_length += s.dyn_dtree[dcode*2]/*.Freq*/ * (5 + extra_dbits[dcode]);\n//    }\n//    out_length >>>= 3;\n//    //Tracev((stderr,\"\\nlast_lit %u, in %ld, out ~%ld(%ld%%) \",\n//    //       s->last_lit, in_length, out_length,\n//    //       100L - out_length*100L/in_length));\n//    if (s.matches < (s.last_lit>>1)/*int /2*/ && out_length < (in_length>>1)/*int /2*/) {\n//      return true;\n//    }\n//  }\n//#endif\n\n  return (s.last_lit === s.lit_bufsize - 1);\n  /* We avoid equality with lit_bufsize because of wraparound at 64K\n   * on 16 bit machines and because stored blocks are restricted to\n   * 64K-1 bytes.\n   */\n}\n\nexports._tr_init  = _tr_init;\nexports._tr_stored_block = _tr_stored_block;\nexports._tr_flush_block  = _tr_flush_block;\nexports._tr_tally = _tr_tally;\nexports._tr_align = _tr_align;\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n\nvar zlib_inflate = __webpack_require__(14);\nvar utils        = __webpack_require__(0);\nvar strings      = __webpack_require__(4);\nvar c            = __webpack_require__(6);\nvar msg          = __webpack_require__(1);\nvar ZStream      = __webpack_require__(5);\nvar GZheader     = __webpack_require__(17);\n\nvar toString = Object.prototype.toString;\n\n/**\n * class Inflate\n *\n * Generic JS-style wrapper for zlib calls. If you don't need\n * streaming behaviour - use more simple functions: [[inflate]]\n * and [[inflateRaw]].\n **/\n\n/* internal\n * inflate.chunks -> Array\n *\n * Chunks of output data, if [[Inflate#onData]] not overridden.\n **/\n\n/**\n * Inflate.result -> Uint8Array|Array|String\n *\n * Uncompressed result, generated by default [[Inflate#onData]]\n * and [[Inflate#onEnd]] handlers. Filled after you push last chunk\n * (call [[Inflate#push]] with `Z_FINISH` / `true` param) or if you\n * push a chunk with explicit flush (call [[Inflate#push]] with\n * `Z_SYNC_FLUSH` param).\n **/\n\n/**\n * Inflate.err -> Number\n *\n * Error code after inflate finished. 0 (Z_OK) on success.\n * Should be checked if broken data possible.\n **/\n\n/**\n * Inflate.msg -> String\n *\n * Error message, if [[Inflate.err]] != 0\n **/\n\n\n/**\n * new Inflate(options)\n * - options (Object): zlib inflate options.\n *\n * Creates new inflator instance with specified params. Throws exception\n * on bad params. Supported options:\n *\n * - `windowBits`\n * - `dictionary`\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information on these.\n *\n * Additional options, for internal needs:\n *\n * - `chunkSize` - size of generated data chunks (16K by default)\n * - `raw` (Boolean) - do raw inflate\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n * By default, when no options set, autodetect deflate/gzip data format via\n * wrapper header.\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , chunk1 = Uint8Array([1,2,3,4,5,6,7,8,9])\n *   , chunk2 = Uint8Array([10,11,12,13,14,15,16,17,18,19]);\n *\n * var inflate = new pako.Inflate({ level: 3});\n *\n * inflate.push(chunk1, false);\n * inflate.push(chunk2, true);  // true -> last chunk\n *\n * if (inflate.err) { throw new Error(inflate.err); }\n *\n * console.log(inflate.result);\n * ```\n **/\nfunction Inflate(options) {\n  if (!(this instanceof Inflate)) return new Inflate(options);\n\n  this.options = utils.assign({\n    chunkSize: 16384,\n    windowBits: 0,\n    to: ''\n  }, options || {});\n\n  var opt = this.options;\n\n  // Force window size for `raw` data, if not set directly,\n  // because we have no header for autodetect.\n  if (opt.raw && (opt.windowBits >= 0) && (opt.windowBits < 16)) {\n    opt.windowBits = -opt.windowBits;\n    if (opt.windowBits === 0) { opt.windowBits = -15; }\n  }\n\n  // If `windowBits` not defined (and mode not raw) - set autodetect flag for gzip/deflate\n  if ((opt.windowBits >= 0) && (opt.windowBits < 16) &&\n      !(options && options.windowBits)) {\n    opt.windowBits += 32;\n  }\n\n  // Gzip header has no info about windows size, we can do autodetect only\n  // for deflate. So, if window size not set, force it to max when gzip possible\n  if ((opt.windowBits > 15) && (opt.windowBits < 48)) {\n    // bit 3 (16) -> gzipped data\n    // bit 4 (32) -> autodetect gzip/deflate\n    if ((opt.windowBits & 15) === 0) {\n      opt.windowBits |= 15;\n    }\n  }\n\n  this.err    = 0;      // error code, if happens (0 = Z_OK)\n  this.msg    = '';     // error message\n  this.ended  = false;  // used to avoid multiple onEnd() calls\n  this.chunks = [];     // chunks of compressed data\n\n  this.strm   = new ZStream();\n  this.strm.avail_out = 0;\n\n  var status  = zlib_inflate.inflateInit2(\n    this.strm,\n    opt.windowBits\n  );\n\n  if (status !== c.Z_OK) {\n    throw new Error(msg[status]);\n  }\n\n  this.header = new GZheader();\n\n  zlib_inflate.inflateGetHeader(this.strm, this.header);\n}\n\n/**\n * Inflate#push(data[, mode]) -> Boolean\n * - data (Uint8Array|Array|ArrayBuffer|String): input data\n * - mode (Number|Boolean): 0..6 for corresponding Z_NO_FLUSH..Z_TREE modes.\n *   See constants. Skipped or `false` means Z_NO_FLUSH, `true` means Z_FINISH.\n *\n * Sends input data to inflate pipe, generating [[Inflate#onData]] calls with\n * new output chunks. Returns `true` on success. The last data block must have\n * mode Z_FINISH (or `true`). That will flush internal pending buffers and call\n * [[Inflate#onEnd]]. For interim explicit flushes (without ending the stream) you\n * can use mode Z_SYNC_FLUSH, keeping the decompression context.\n *\n * On fail call [[Inflate#onEnd]] with error code and return false.\n *\n * We strongly recommend to use `Uint8Array` on input for best speed (output\n * format is detected automatically). Also, don't skip last param and always\n * use the same type in your code (boolean or number). That will improve JS speed.\n *\n * For regular `Array`-s make sure all elements are [0..255].\n *\n * ##### Example\n *\n * ```javascript\n * push(chunk, false); // push one of data chunks\n * ...\n * push(chunk, true);  // push last chunk\n * ```\n **/\nInflate.prototype.push = function (data, mode) {\n  var strm = this.strm;\n  var chunkSize = this.options.chunkSize;\n  var dictionary = this.options.dictionary;\n  var status, _mode;\n  var next_out_utf8, tail, utf8str;\n  var dict;\n\n  // Flag to properly process Z_BUF_ERROR on testing inflate call\n  // when we check that all output data was flushed.\n  var allowBufError = false;\n\n  if (this.ended) { return false; }\n  _mode = (mode === ~~mode) ? mode : ((mode === true) ? c.Z_FINISH : c.Z_NO_FLUSH);\n\n  // Convert data if needed\n  if (typeof data === 'string') {\n    // Only binary strings can be decompressed on practice\n    strm.input = strings.binstring2buf(data);\n  } else if (toString.call(data) === '[object ArrayBuffer]') {\n    strm.input = new Uint8Array(data);\n  } else {\n    strm.input = data;\n  }\n\n  strm.next_in = 0;\n  strm.avail_in = strm.input.length;\n\n  do {\n    if (strm.avail_out === 0) {\n      strm.output = new utils.Buf8(chunkSize);\n      strm.next_out = 0;\n      strm.avail_out = chunkSize;\n    }\n\n    status = zlib_inflate.inflate(strm, c.Z_NO_FLUSH);    /* no bad return value */\n\n    if (status === c.Z_NEED_DICT && dictionary) {\n      // Convert data if needed\n      if (typeof dictionary === 'string') {\n        dict = strings.string2buf(dictionary);\n      } else if (toString.call(dictionary) === '[object ArrayBuffer]') {\n        dict = new Uint8Array(dictionary);\n      } else {\n        dict = dictionary;\n      }\n\n      status = zlib_inflate.inflateSetDictionary(this.strm, dict);\n\n    }\n\n    if (status === c.Z_BUF_ERROR && allowBufError === true) {\n      status = c.Z_OK;\n      allowBufError = false;\n    }\n\n    if (status !== c.Z_STREAM_END && status !== c.Z_OK) {\n      this.onEnd(status);\n      this.ended = true;\n      return false;\n    }\n\n    if (strm.next_out) {\n      if (strm.avail_out === 0 || status === c.Z_STREAM_END || (strm.avail_in === 0 && (_mode === c.Z_FINISH || _mode === c.Z_SYNC_FLUSH))) {\n\n        if (this.options.to === 'string') {\n\n          next_out_utf8 = strings.utf8border(strm.output, strm.next_out);\n\n          tail = strm.next_out - next_out_utf8;\n          utf8str = strings.buf2string(strm.output, next_out_utf8);\n\n          // move tail\n          strm.next_out = tail;\n          strm.avail_out = chunkSize - tail;\n          if (tail) { utils.arraySet(strm.output, strm.output, next_out_utf8, tail, 0); }\n\n          this.onData(utf8str);\n\n        } else {\n          this.onData(utils.shrinkBuf(strm.output, strm.next_out));\n        }\n      }\n    }\n\n    // When no more input data, we should check that internal inflate buffers\n    // are flushed. The only way to do it when avail_out = 0 - run one more\n    // inflate pass. But if output data not exists, inflate return Z_BUF_ERROR.\n    // Here we set flag to process this error properly.\n    //\n    // NOTE. Deflate does not return error in this case and does not needs such\n    // logic.\n    if (strm.avail_in === 0 && strm.avail_out === 0) {\n      allowBufError = true;\n    }\n\n  } while ((strm.avail_in > 0 || strm.avail_out === 0) && status !== c.Z_STREAM_END);\n\n  if (status === c.Z_STREAM_END) {\n    _mode = c.Z_FINISH;\n  }\n\n  // Finalize on the last chunk.\n  if (_mode === c.Z_FINISH) {\n    status = zlib_inflate.inflateEnd(this.strm);\n    this.onEnd(status);\n    this.ended = true;\n    return status === c.Z_OK;\n  }\n\n  // callback interim results if Z_SYNC_FLUSH.\n  if (_mode === c.Z_SYNC_FLUSH) {\n    this.onEnd(c.Z_OK);\n    strm.avail_out = 0;\n    return true;\n  }\n\n  return true;\n};\n\n\n/**\n * Inflate#onData(chunk) -> Void\n * - chunk (Uint8Array|Array|String): output data. Type of array depends\n *   on js engine support. When string output requested, each chunk\n *   will be string.\n *\n * By default, stores data blocks in `chunks[]` property and glue\n * those in `onEnd`. Override this handler, if you need another behaviour.\n **/\nInflate.prototype.onData = function (chunk) {\n  this.chunks.push(chunk);\n};\n\n\n/**\n * Inflate#onEnd(status) -> Void\n * - status (Number): inflate status. 0 (Z_OK) on success,\n *   other if not.\n *\n * Called either after you tell inflate that the input stream is\n * complete (Z_FINISH) or should be flushed (Z_SYNC_FLUSH)\n * or if an error happened. By default - join collected chunks,\n * free memory and fill `results` / `err` properties.\n **/\nInflate.prototype.onEnd = function (status) {\n  // On success - join\n  if (status === c.Z_OK) {\n    if (this.options.to === 'string') {\n      // Glue & convert here, until we teach pako to send\n      // utf8 aligned strings to onData\n      this.result = this.chunks.join('');\n    } else {\n      this.result = utils.flattenChunks(this.chunks);\n    }\n  }\n  this.chunks = [];\n  this.err = status;\n  this.msg = this.strm.msg;\n};\n\n\n/**\n * inflate(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Decompress `data` with inflate/ungzip and `options`. Autodetect\n * format via wrapper header by default. That's why we don't provide\n * separate `ungzip` method.\n *\n * Supported options are:\n *\n * - windowBits\n *\n * [http://zlib.net/manual.html#Advanced](http://zlib.net/manual.html#Advanced)\n * for more information.\n *\n * Sugar (options):\n *\n * - `raw` (Boolean) - say that we work with raw stream, if you don't wish to specify\n *   negative windowBits implicitly.\n * - `to` (String) - if equal to 'string', then result will be converted\n *   from utf8 to utf16 (javascript) string. When string output requested,\n *   chunk length can differ from `chunkSize`, depending on content.\n *\n *\n * ##### Example:\n *\n * ```javascript\n * var pako = require('pako')\n *   , input = pako.deflate([1,2,3,4,5,6,7,8,9])\n *   , output;\n *\n * try {\n *   output = pako.inflate(input);\n * } catch (err)\n *   console.log(err);\n * }\n * ```\n **/\nfunction inflate(input, options) {\n  var inflator = new Inflate(options);\n\n  inflator.push(input, true);\n\n  // That will never happens, if you don't cheat with options :)\n  if (inflator.err) { throw inflator.msg || msg[inflator.err]; }\n\n  return inflator.result;\n}\n\n\n/**\n * inflateRaw(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * The same as [[inflate]], but creates raw data, without wrapper\n * (header and adler32 crc).\n **/\nfunction inflateRaw(input, options) {\n  options = options || {};\n  options.raw = true;\n  return inflate(input, options);\n}\n\n\n/**\n * ungzip(data[, options]) -> Uint8Array|Array|String\n * - data (Uint8Array|Array|String): input data to decompress.\n * - options (Object): zlib inflate options.\n *\n * Just shortcut to [[inflate]], because it autodetects format\n * by header.content. Done for convenience.\n **/\n\n\nexports.Inflate = Inflate;\nexports.inflate = inflate;\nexports.inflateRaw = inflateRaw;\nexports.ungzip  = inflate;\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils         = __webpack_require__(0);\nvar adler32       = __webpack_require__(2);\nvar crc32         = __webpack_require__(3);\nvar inflate_fast  = __webpack_require__(15);\nvar inflate_table = __webpack_require__(16);\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\n/* Public constants ==========================================================*/\n/* ===========================================================================*/\n\n\n/* Allowed flush values; see deflate() and inflate() below for details */\n//var Z_NO_FLUSH      = 0;\n//var Z_PARTIAL_FLUSH = 1;\n//var Z_SYNC_FLUSH    = 2;\n//var Z_FULL_FLUSH    = 3;\nvar Z_FINISH        = 4;\nvar Z_BLOCK         = 5;\nvar Z_TREES         = 6;\n\n\n/* Return codes for the compression/decompression functions. Negative values\n * are errors, positive values are used for special but normal events.\n */\nvar Z_OK            = 0;\nvar Z_STREAM_END    = 1;\nvar Z_NEED_DICT     = 2;\n//var Z_ERRNO         = -1;\nvar Z_STREAM_ERROR  = -2;\nvar Z_DATA_ERROR    = -3;\nvar Z_MEM_ERROR     = -4;\nvar Z_BUF_ERROR     = -5;\n//var Z_VERSION_ERROR = -6;\n\n/* The deflate compression method */\nvar Z_DEFLATED  = 8;\n\n\n/* STATES ====================================================================*/\n/* ===========================================================================*/\n\n\nvar    HEAD = 1;       /* i: waiting for magic header */\nvar    FLAGS = 2;      /* i: waiting for method and flags (gzip) */\nvar    TIME = 3;       /* i: waiting for modification time (gzip) */\nvar    OS = 4;         /* i: waiting for extra flags and operating system (gzip) */\nvar    EXLEN = 5;      /* i: waiting for extra length (gzip) */\nvar    EXTRA = 6;      /* i: waiting for extra bytes (gzip) */\nvar    NAME = 7;       /* i: waiting for end of file name (gzip) */\nvar    COMMENT = 8;    /* i: waiting for end of comment (gzip) */\nvar    HCRC = 9;       /* i: waiting for header crc (gzip) */\nvar    DICTID = 10;    /* i: waiting for dictionary check value */\nvar    DICT = 11;      /* waiting for inflateSetDictionary() call */\nvar        TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\nvar        TYPEDO = 13;    /* i: same, but skip check to exit inflate on new block */\nvar        STORED = 14;    /* i: waiting for stored size (length and complement) */\nvar        COPY_ = 15;     /* i/o: same as COPY below, but only first time in */\nvar        COPY = 16;      /* i/o: waiting for input or output to copy stored block */\nvar        TABLE = 17;     /* i: waiting for dynamic block table lengths */\nvar        LENLENS = 18;   /* i: waiting for code length code lengths */\nvar        CODELENS = 19;  /* i: waiting for length/lit and distance code lengths */\nvar            LEN_ = 20;      /* i: same as LEN below, but only first time in */\nvar            LEN = 21;       /* i: waiting for length/lit/eob code */\nvar            LENEXT = 22;    /* i: waiting for length extra bits */\nvar            DIST = 23;      /* i: waiting for distance code */\nvar            DISTEXT = 24;   /* i: waiting for distance extra bits */\nvar            MATCH = 25;     /* o: waiting for output space to copy string */\nvar            LIT = 26;       /* o: waiting for output space to write literal */\nvar    CHECK = 27;     /* i: waiting for 32-bit check value */\nvar    LENGTH = 28;    /* i: waiting for 32-bit length (gzip) */\nvar    DONE = 29;      /* finished check, done -- remain here until reset */\nvar    BAD = 30;       /* got a data error -- remain here until reset */\nvar    MEM = 31;       /* got an inflate() memory error -- remain here until reset */\nvar    SYNC = 32;      /* looking for synchronization bytes to restart inflate() */\n\n/* ===========================================================================*/\n\n\n\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH =  (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar MAX_WBITS = 15;\n/* 32K LZ77 window */\nvar DEF_WBITS = MAX_WBITS;\n\n\nfunction zswap32(q) {\n  return  (((q >>> 24) & 0xff) +\n          ((q >>> 8) & 0xff00) +\n          ((q & 0xff00) << 8) +\n          ((q & 0xff) << 24));\n}\n\n\nfunction InflateState() {\n  this.mode = 0;             /* current inflate mode */\n  this.last = false;          /* true if processing last block */\n  this.wrap = 0;              /* bit 0 true for zlib, bit 1 true for gzip */\n  this.havedict = false;      /* true if dictionary provided */\n  this.flags = 0;             /* gzip header method and flags (0 if zlib) */\n  this.dmax = 0;              /* zlib header max distance (INFLATE_STRICT) */\n  this.check = 0;             /* protected copy of check value */\n  this.total = 0;             /* protected copy of output count */\n  // TODO: may be {}\n  this.head = null;           /* where to save gzip header information */\n\n  /* sliding window */\n  this.wbits = 0;             /* log base 2 of requested window size */\n  this.wsize = 0;             /* window size or zero if not using window */\n  this.whave = 0;             /* valid bytes in the window */\n  this.wnext = 0;             /* window write index */\n  this.window = null;         /* allocated sliding window, if needed */\n\n  /* bit accumulator */\n  this.hold = 0;              /* input bit accumulator */\n  this.bits = 0;              /* number of bits in \"in\" */\n\n  /* for string and stored block copying */\n  this.length = 0;            /* literal or length of data to copy */\n  this.offset = 0;            /* distance back to copy string from */\n\n  /* for table and code decoding */\n  this.extra = 0;             /* extra bits needed */\n\n  /* fixed and dynamic code tables */\n  this.lencode = null;          /* starting table for length/literal codes */\n  this.distcode = null;         /* starting table for distance codes */\n  this.lenbits = 0;           /* index bits for lencode */\n  this.distbits = 0;          /* index bits for distcode */\n\n  /* dynamic table building */\n  this.ncode = 0;             /* number of code length code lengths */\n  this.nlen = 0;              /* number of length code lengths */\n  this.ndist = 0;             /* number of distance code lengths */\n  this.have = 0;              /* number of code lengths in lens[] */\n  this.next = null;              /* next available space in codes[] */\n\n  this.lens = new utils.Buf16(320); /* temporary storage for code lengths */\n  this.work = new utils.Buf16(288); /* work area for code table building */\n\n  /*\n   because we don't have pointers in js, we use lencode and distcode directly\n   as buffers so we don't need codes\n  */\n  //this.codes = new utils.Buf32(ENOUGH);       /* space for code tables */\n  this.lendyn = null;              /* dynamic table for length/literal codes (JS specific) */\n  this.distdyn = null;             /* dynamic table for distance codes (JS specific) */\n  this.sane = 0;                   /* if false, allow invalid distance too far */\n  this.back = 0;                   /* bits back of last unprocessed length/lit */\n  this.was = 0;                    /* initial length of match */\n}\n\nfunction inflateResetKeep(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  strm.total_in = strm.total_out = state.total = 0;\n  strm.msg = ''; /*Z_NULL*/\n  if (state.wrap) {       /* to support ill-conceived Java test suite */\n    strm.adler = state.wrap & 1;\n  }\n  state.mode = HEAD;\n  state.last = 0;\n  state.havedict = 0;\n  state.dmax = 32768;\n  state.head = null/*Z_NULL*/;\n  state.hold = 0;\n  state.bits = 0;\n  //state.lencode = state.distcode = state.next = state.codes;\n  state.lencode = state.lendyn = new utils.Buf32(ENOUGH_LENS);\n  state.distcode = state.distdyn = new utils.Buf32(ENOUGH_DISTS);\n\n  state.sane = 1;\n  state.back = -1;\n  //Tracev((stderr, \"inflate: reset\\n\"));\n  return Z_OK;\n}\n\nfunction inflateReset(strm) {\n  var state;\n\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  state.wsize = 0;\n  state.whave = 0;\n  state.wnext = 0;\n  return inflateResetKeep(strm);\n\n}\n\nfunction inflateReset2(strm, windowBits) {\n  var wrap;\n  var state;\n\n  /* get the state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  /* extract wrap request from windowBits parameter */\n  if (windowBits < 0) {\n    wrap = 0;\n    windowBits = -windowBits;\n  }\n  else {\n    wrap = (windowBits >> 4) + 1;\n    if (windowBits < 48) {\n      windowBits &= 15;\n    }\n  }\n\n  /* set number of window bits, free window if different */\n  if (windowBits && (windowBits < 8 || windowBits > 15)) {\n    return Z_STREAM_ERROR;\n  }\n  if (state.window !== null && state.wbits !== windowBits) {\n    state.window = null;\n  }\n\n  /* update state and reset the rest of it */\n  state.wrap = wrap;\n  state.wbits = windowBits;\n  return inflateReset(strm);\n}\n\nfunction inflateInit2(strm, windowBits) {\n  var ret;\n  var state;\n\n  if (!strm) { return Z_STREAM_ERROR; }\n  //strm.msg = Z_NULL;                 /* in case we return an error */\n\n  state = new InflateState();\n\n  //if (state === Z_NULL) return Z_MEM_ERROR;\n  //Tracev((stderr, \"inflate: allocated\\n\"));\n  strm.state = state;\n  state.window = null/*Z_NULL*/;\n  ret = inflateReset2(strm, windowBits);\n  if (ret !== Z_OK) {\n    strm.state = null/*Z_NULL*/;\n  }\n  return ret;\n}\n\nfunction inflateInit(strm) {\n  return inflateInit2(strm, DEF_WBITS);\n}\n\n\n/*\n Return state with length and distance decoding tables and index sizes set to\n fixed code decoding.  Normally this returns fixed tables from inffixed.h.\n If BUILDFIXED is defined, then instead this routine builds the tables the\n first time it's called, and returns those tables the first time and\n thereafter.  This reduces the size of the code by about 2K bytes, in\n exchange for a little execution time.  However, BUILDFIXED should not be\n used for threaded applications, since the rewriting of the tables and virgin\n may not be thread-safe.\n */\nvar virgin = true;\n\nvar lenfix, distfix; // We have no pointers in JS, so keep tables separate\n\nfunction fixedtables(state) {\n  /* build fixed huffman tables if first call (may not be thread safe) */\n  if (virgin) {\n    var sym;\n\n    lenfix = new utils.Buf32(512);\n    distfix = new utils.Buf32(32);\n\n    /* literal/length table */\n    sym = 0;\n    while (sym < 144) { state.lens[sym++] = 8; }\n    while (sym < 256) { state.lens[sym++] = 9; }\n    while (sym < 280) { state.lens[sym++] = 7; }\n    while (sym < 288) { state.lens[sym++] = 8; }\n\n    inflate_table(LENS,  state.lens, 0, 288, lenfix,   0, state.work, { bits: 9 });\n\n    /* distance table */\n    sym = 0;\n    while (sym < 32) { state.lens[sym++] = 5; }\n\n    inflate_table(DISTS, state.lens, 0, 32,   distfix, 0, state.work, { bits: 5 });\n\n    /* do this just once */\n    virgin = false;\n  }\n\n  state.lencode = lenfix;\n  state.lenbits = 9;\n  state.distcode = distfix;\n  state.distbits = 5;\n}\n\n\n/*\n Update the window with the last wsize (normally 32K) bytes written before\n returning.  If window does not exist yet, create it.  This is only called\n when a window is already in use, or when output has been written during this\n inflate call, but the end of the deflate stream has not been reached yet.\n It is also called to create a window for dictionary data when a dictionary\n is loaded.\n\n Providing output buffers larger than 32K to inflate() should provide a speed\n advantage, since only the last 32K of output is copied to the sliding window\n upon return from inflate(), and since all distances after the first 32K of\n output will fall in the output data, making match copies simpler and faster.\n The advantage may be dependent on the size of the processor's data caches.\n */\nfunction updatewindow(strm, src, end, copy) {\n  var dist;\n  var state = strm.state;\n\n  /* if it hasn't been done already, allocate space for the window */\n  if (state.window === null) {\n    state.wsize = 1 << state.wbits;\n    state.wnext = 0;\n    state.whave = 0;\n\n    state.window = new utils.Buf8(state.wsize);\n  }\n\n  /* copy state->wsize or less output bytes into the circular window */\n  if (copy >= state.wsize) {\n    utils.arraySet(state.window, src, end - state.wsize, state.wsize, 0);\n    state.wnext = 0;\n    state.whave = state.wsize;\n  }\n  else {\n    dist = state.wsize - state.wnext;\n    if (dist > copy) {\n      dist = copy;\n    }\n    //zmemcpy(state->window + state->wnext, end - copy, dist);\n    utils.arraySet(state.window, src, end - copy, dist, state.wnext);\n    copy -= dist;\n    if (copy) {\n      //zmemcpy(state->window, end - copy, copy);\n      utils.arraySet(state.window, src, end - copy, copy, 0);\n      state.wnext = copy;\n      state.whave = state.wsize;\n    }\n    else {\n      state.wnext += dist;\n      if (state.wnext === state.wsize) { state.wnext = 0; }\n      if (state.whave < state.wsize) { state.whave += dist; }\n    }\n  }\n  return 0;\n}\n\nfunction inflate(strm, flush) {\n  var state;\n  var input, output;          // input/output buffers\n  var next;                   /* next input INDEX */\n  var put;                    /* next output INDEX */\n  var have, left;             /* available input and output */\n  var hold;                   /* bit buffer */\n  var bits;                   /* bits in bit buffer */\n  var _in, _out;              /* save starting available input and output */\n  var copy;                   /* number of stored or match bytes to copy */\n  var from;                   /* where to copy match bytes from */\n  var from_source;\n  var here = 0;               /* current decoding table entry */\n  var here_bits, here_op, here_val; // paked \"here\" denormalized (JS specific)\n  //var last;                   /* parent table entry */\n  var last_bits, last_op, last_val; // paked \"last\" denormalized (JS specific)\n  var len;                    /* length to copy for repeats, bits to drop */\n  var ret;                    /* return code */\n  var hbuf = new utils.Buf8(4);    /* buffer for gzip header crc calculation */\n  var opts;\n\n  var n; // temporary var for NEED_BITS\n\n  var order = /* permutation of code lengths */\n    [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ];\n\n\n  if (!strm || !strm.state || !strm.output ||\n      (!strm.input && strm.avail_in !== 0)) {\n    return Z_STREAM_ERROR;\n  }\n\n  state = strm.state;\n  if (state.mode === TYPE) { state.mode = TYPEDO; }    /* skip check */\n\n\n  //--- LOAD() ---\n  put = strm.next_out;\n  output = strm.output;\n  left = strm.avail_out;\n  next = strm.next_in;\n  input = strm.input;\n  have = strm.avail_in;\n  hold = state.hold;\n  bits = state.bits;\n  //---\n\n  _in = have;\n  _out = left;\n  ret = Z_OK;\n\n  inf_leave: // goto emulation\n  for (;;) {\n    switch (state.mode) {\n      case HEAD:\n        if (state.wrap === 0) {\n          state.mode = TYPEDO;\n          break;\n        }\n        //=== NEEDBITS(16);\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((state.wrap & 2) && hold === 0x8b1f) {  /* gzip header */\n          state.check = 0/*crc32(0L, Z_NULL, 0)*/;\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          state.mode = FLAGS;\n          break;\n        }\n        state.flags = 0;           /* expect zlib header */\n        if (state.head) {\n          state.head.done = false;\n        }\n        if (!(state.wrap & 1) ||   /* check if zlib header allowed */\n          (((hold & 0xff)/*BITS(8)*/ << 8) + (hold >> 8)) % 31) {\n          strm.msg = 'incorrect header check';\n          state.mode = BAD;\n          break;\n        }\n        if ((hold & 0x0f)/*BITS(4)*/ !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n        len = (hold & 0x0f)/*BITS(4)*/ + 8;\n        if (state.wbits === 0) {\n          state.wbits = len;\n        }\n        else if (len > state.wbits) {\n          strm.msg = 'invalid window size';\n          state.mode = BAD;\n          break;\n        }\n        state.dmax = 1 << len;\n        //Tracev((stderr, \"inflate:   zlib header ok\\n\"));\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = hold & 0x200 ? DICTID : TYPE;\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        break;\n      case FLAGS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.flags = hold;\n        if ((state.flags & 0xff) !== Z_DEFLATED) {\n          strm.msg = 'unknown compression method';\n          state.mode = BAD;\n          break;\n        }\n        if (state.flags & 0xe000) {\n          strm.msg = 'unknown header flags set';\n          state.mode = BAD;\n          break;\n        }\n        if (state.head) {\n          state.head.text = ((hold >> 8) & 1);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = TIME;\n        /* falls through */\n      case TIME:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.time = hold;\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC4(state.check, hold)\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          hbuf[2] = (hold >>> 16) & 0xff;\n          hbuf[3] = (hold >>> 24) & 0xff;\n          state.check = crc32(state.check, hbuf, 4, 0);\n          //===\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = OS;\n        /* falls through */\n      case OS:\n        //=== NEEDBITS(16); */\n        while (bits < 16) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if (state.head) {\n          state.head.xflags = (hold & 0xff);\n          state.head.os = (hold >> 8);\n        }\n        if (state.flags & 0x0200) {\n          //=== CRC2(state.check, hold);\n          hbuf[0] = hold & 0xff;\n          hbuf[1] = (hold >>> 8) & 0xff;\n          state.check = crc32(state.check, hbuf, 2, 0);\n          //===//\n        }\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = EXLEN;\n        /* falls through */\n      case EXLEN:\n        if (state.flags & 0x0400) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length = hold;\n          if (state.head) {\n            state.head.extra_len = hold;\n          }\n          if (state.flags & 0x0200) {\n            //=== CRC2(state.check, hold);\n            hbuf[0] = hold & 0xff;\n            hbuf[1] = (hold >>> 8) & 0xff;\n            state.check = crc32(state.check, hbuf, 2, 0);\n            //===//\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        else if (state.head) {\n          state.head.extra = null/*Z_NULL*/;\n        }\n        state.mode = EXTRA;\n        /* falls through */\n      case EXTRA:\n        if (state.flags & 0x0400) {\n          copy = state.length;\n          if (copy > have) { copy = have; }\n          if (copy) {\n            if (state.head) {\n              len = state.head.extra_len - state.length;\n              if (!state.head.extra) {\n                // Use untyped array for more convenient processing later\n                state.head.extra = new Array(state.head.extra_len);\n              }\n              utils.arraySet(\n                state.head.extra,\n                input,\n                next,\n                // extra field is limited to 65536 bytes\n                // - no need for additional size check\n                copy,\n                /*len + copy > state.head.extra_max - len ? state.head.extra_max : copy,*/\n                len\n              );\n              //zmemcpy(state.head.extra + len, next,\n              //        len + copy > state.head.extra_max ?\n              //        state.head.extra_max - len : copy);\n            }\n            if (state.flags & 0x0200) {\n              state.check = crc32(state.check, input, copy, next);\n            }\n            have -= copy;\n            next += copy;\n            state.length -= copy;\n          }\n          if (state.length) { break inf_leave; }\n        }\n        state.length = 0;\n        state.mode = NAME;\n        /* falls through */\n      case NAME:\n        if (state.flags & 0x0800) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            // TODO: 2 or 1 bytes?\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.name_max*/)) {\n              state.head.name += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.name = null;\n        }\n        state.length = 0;\n        state.mode = COMMENT;\n        /* falls through */\n      case COMMENT:\n        if (state.flags & 0x1000) {\n          if (have === 0) { break inf_leave; }\n          copy = 0;\n          do {\n            len = input[next + copy++];\n            /* use constant limit because in js we should not preallocate memory */\n            if (state.head && len &&\n                (state.length < 65536 /*state.head.comm_max*/)) {\n              state.head.comment += String.fromCharCode(len);\n            }\n          } while (len && copy < have);\n          if (state.flags & 0x0200) {\n            state.check = crc32(state.check, input, copy, next);\n          }\n          have -= copy;\n          next += copy;\n          if (len) { break inf_leave; }\n        }\n        else if (state.head) {\n          state.head.comment = null;\n        }\n        state.mode = HCRC;\n        /* falls through */\n      case HCRC:\n        if (state.flags & 0x0200) {\n          //=== NEEDBITS(16); */\n          while (bits < 16) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.check & 0xffff)) {\n            strm.msg = 'header crc mismatch';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n        }\n        if (state.head) {\n          state.head.hcrc = ((state.flags >> 9) & 1);\n          state.head.done = true;\n        }\n        strm.adler = state.check = 0;\n        state.mode = TYPE;\n        break;\n      case DICTID:\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        strm.adler = state.check = zswap32(hold);\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = DICT;\n        /* falls through */\n      case DICT:\n        if (state.havedict === 0) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          return Z_NEED_DICT;\n        }\n        strm.adler = state.check = 1/*adler32(0L, Z_NULL, 0)*/;\n        state.mode = TYPE;\n        /* falls through */\n      case TYPE:\n        if (flush === Z_BLOCK || flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case TYPEDO:\n        if (state.last) {\n          //--- BYTEBITS() ---//\n          hold >>>= bits & 7;\n          bits -= bits & 7;\n          //---//\n          state.mode = CHECK;\n          break;\n        }\n        //=== NEEDBITS(3); */\n        while (bits < 3) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.last = (hold & 0x01)/*BITS(1)*/;\n        //--- DROPBITS(1) ---//\n        hold >>>= 1;\n        bits -= 1;\n        //---//\n\n        switch ((hold & 0x03)/*BITS(2)*/) {\n          case 0:                             /* stored block */\n            //Tracev((stderr, \"inflate:     stored block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = STORED;\n            break;\n          case 1:                             /* fixed block */\n            fixedtables(state);\n            //Tracev((stderr, \"inflate:     fixed codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = LEN_;             /* decode codes */\n            if (flush === Z_TREES) {\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n              break inf_leave;\n            }\n            break;\n          case 2:                             /* dynamic block */\n            //Tracev((stderr, \"inflate:     dynamic codes block%s\\n\",\n            //        state.last ? \" (last)\" : \"\"));\n            state.mode = TABLE;\n            break;\n          case 3:\n            strm.msg = 'invalid block type';\n            state.mode = BAD;\n        }\n        //--- DROPBITS(2) ---//\n        hold >>>= 2;\n        bits -= 2;\n        //---//\n        break;\n      case STORED:\n        //--- BYTEBITS() ---// /* go to byte boundary */\n        hold >>>= bits & 7;\n        bits -= bits & 7;\n        //---//\n        //=== NEEDBITS(32); */\n        while (bits < 32) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        if ((hold & 0xffff) !== ((hold >>> 16) ^ 0xffff)) {\n          strm.msg = 'invalid stored block lengths';\n          state.mode = BAD;\n          break;\n        }\n        state.length = hold & 0xffff;\n        //Tracev((stderr, \"inflate:       stored length %u\\n\",\n        //        state.length));\n        //=== INITBITS();\n        hold = 0;\n        bits = 0;\n        //===//\n        state.mode = COPY_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case COPY_:\n        state.mode = COPY;\n        /* falls through */\n      case COPY:\n        copy = state.length;\n        if (copy) {\n          if (copy > have) { copy = have; }\n          if (copy > left) { copy = left; }\n          if (copy === 0) { break inf_leave; }\n          //--- zmemcpy(put, next, copy); ---\n          utils.arraySet(output, input, next, copy, put);\n          //---//\n          have -= copy;\n          next += copy;\n          left -= copy;\n          put += copy;\n          state.length -= copy;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       stored end\\n\"));\n        state.mode = TYPE;\n        break;\n      case TABLE:\n        //=== NEEDBITS(14); */\n        while (bits < 14) {\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n        }\n        //===//\n        state.nlen = (hold & 0x1f)/*BITS(5)*/ + 257;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ndist = (hold & 0x1f)/*BITS(5)*/ + 1;\n        //--- DROPBITS(5) ---//\n        hold >>>= 5;\n        bits -= 5;\n        //---//\n        state.ncode = (hold & 0x0f)/*BITS(4)*/ + 4;\n        //--- DROPBITS(4) ---//\n        hold >>>= 4;\n        bits -= 4;\n        //---//\n//#ifndef PKZIP_BUG_WORKAROUND\n        if (state.nlen > 286 || state.ndist > 30) {\n          strm.msg = 'too many length or distance symbols';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracev((stderr, \"inflate:       table sizes ok\\n\"));\n        state.have = 0;\n        state.mode = LENLENS;\n        /* falls through */\n      case LENLENS:\n        while (state.have < state.ncode) {\n          //=== NEEDBITS(3);\n          while (bits < 3) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.lens[order[state.have++]] = (hold & 0x07);//BITS(3);\n          //--- DROPBITS(3) ---//\n          hold >>>= 3;\n          bits -= 3;\n          //---//\n        }\n        while (state.have < 19) {\n          state.lens[order[state.have++]] = 0;\n        }\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        //state.next = state.codes;\n        //state.lencode = state.next;\n        // Switch to use dynamic table\n        state.lencode = state.lendyn;\n        state.lenbits = 7;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(CODES, state.lens, 0, 19, state.lencode, 0, state.work, opts);\n        state.lenbits = opts.bits;\n\n        if (ret) {\n          strm.msg = 'invalid code lengths set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, \"inflate:       code lengths ok\\n\"));\n        state.have = 0;\n        state.mode = CODELENS;\n        /* falls through */\n      case CODELENS:\n        while (state.have < state.nlen + state.ndist) {\n          for (;;) {\n            here = state.lencode[hold & ((1 << state.lenbits) - 1)];/*BITS(state.lenbits)*/\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          if (here_val < 16) {\n            //--- DROPBITS(here.bits) ---//\n            hold >>>= here_bits;\n            bits -= here_bits;\n            //---//\n            state.lens[state.have++] = here_val;\n          }\n          else {\n            if (here_val === 16) {\n              //=== NEEDBITS(here.bits + 2);\n              n = here_bits + 2;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              if (state.have === 0) {\n                strm.msg = 'invalid bit length repeat';\n                state.mode = BAD;\n                break;\n              }\n              len = state.lens[state.have - 1];\n              copy = 3 + (hold & 0x03);//BITS(2);\n              //--- DROPBITS(2) ---//\n              hold >>>= 2;\n              bits -= 2;\n              //---//\n            }\n            else if (here_val === 17) {\n              //=== NEEDBITS(here.bits + 3);\n              n = here_bits + 3;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 3 + (hold & 0x07);//BITS(3);\n              //--- DROPBITS(3) ---//\n              hold >>>= 3;\n              bits -= 3;\n              //---//\n            }\n            else {\n              //=== NEEDBITS(here.bits + 7);\n              n = here_bits + 7;\n              while (bits < n) {\n                if (have === 0) { break inf_leave; }\n                have--;\n                hold += input[next++] << bits;\n                bits += 8;\n              }\n              //===//\n              //--- DROPBITS(here.bits) ---//\n              hold >>>= here_bits;\n              bits -= here_bits;\n              //---//\n              len = 0;\n              copy = 11 + (hold & 0x7f);//BITS(7);\n              //--- DROPBITS(7) ---//\n              hold >>>= 7;\n              bits -= 7;\n              //---//\n            }\n            if (state.have + copy > state.nlen + state.ndist) {\n              strm.msg = 'invalid bit length repeat';\n              state.mode = BAD;\n              break;\n            }\n            while (copy--) {\n              state.lens[state.have++] = len;\n            }\n          }\n        }\n\n        /* handle error breaks in while */\n        if (state.mode === BAD) { break; }\n\n        /* check for end-of-block code (better have one) */\n        if (state.lens[256] === 0) {\n          strm.msg = 'invalid code -- missing end-of-block';\n          state.mode = BAD;\n          break;\n        }\n\n        /* build code tables -- note: do not change the lenbits or distbits\n           values here (9 and 6) without reading the comments in inftrees.h\n           concerning the ENOUGH constants, which depend on those values */\n        state.lenbits = 9;\n\n        opts = { bits: state.lenbits };\n        ret = inflate_table(LENS, state.lens, 0, state.nlen, state.lencode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.lenbits = opts.bits;\n        // state.lencode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid literal/lengths set';\n          state.mode = BAD;\n          break;\n        }\n\n        state.distbits = 6;\n        //state.distcode.copy(state.codes);\n        // Switch to use dynamic table\n        state.distcode = state.distdyn;\n        opts = { bits: state.distbits };\n        ret = inflate_table(DISTS, state.lens, state.nlen, state.ndist, state.distcode, 0, state.work, opts);\n        // We have separate tables & no pointers. 2 commented lines below not needed.\n        // state.next_index = opts.table_index;\n        state.distbits = opts.bits;\n        // state.distcode = state.next;\n\n        if (ret) {\n          strm.msg = 'invalid distances set';\n          state.mode = BAD;\n          break;\n        }\n        //Tracev((stderr, 'inflate:       codes ok\\n'));\n        state.mode = LEN_;\n        if (flush === Z_TREES) { break inf_leave; }\n        /* falls through */\n      case LEN_:\n        state.mode = LEN;\n        /* falls through */\n      case LEN:\n        if (have >= 6 && left >= 258) {\n          //--- RESTORE() ---\n          strm.next_out = put;\n          strm.avail_out = left;\n          strm.next_in = next;\n          strm.avail_in = have;\n          state.hold = hold;\n          state.bits = bits;\n          //---\n          inflate_fast(strm, _out);\n          //--- LOAD() ---\n          put = strm.next_out;\n          output = strm.output;\n          left = strm.avail_out;\n          next = strm.next_in;\n          input = strm.input;\n          have = strm.avail_in;\n          hold = state.hold;\n          bits = state.bits;\n          //---\n\n          if (state.mode === TYPE) {\n            state.back = -1;\n          }\n          break;\n        }\n        state.back = 0;\n        for (;;) {\n          here = state.lencode[hold & ((1 << state.lenbits) - 1)];  /*BITS(state.lenbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if (here_bits <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if (here_op && (here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.lencode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        state.length = here_val;\n        if (here_op === 0) {\n          //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n          //        \"inflate:         literal '%c'\\n\" :\n          //        \"inflate:         literal 0x%02x\\n\", here.val));\n          state.mode = LIT;\n          break;\n        }\n        if (here_op & 32) {\n          //Tracevv((stderr, \"inflate:         end of block\\n\"));\n          state.back = -1;\n          state.mode = TYPE;\n          break;\n        }\n        if (here_op & 64) {\n          strm.msg = 'invalid literal/length code';\n          state.mode = BAD;\n          break;\n        }\n        state.extra = here_op & 15;\n        state.mode = LENEXT;\n        /* falls through */\n      case LENEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.length += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", state.length));\n        state.was = state.length;\n        state.mode = DIST;\n        /* falls through */\n      case DIST:\n        for (;;) {\n          here = state.distcode[hold & ((1 << state.distbits) - 1)];/*BITS(state.distbits)*/\n          here_bits = here >>> 24;\n          here_op = (here >>> 16) & 0xff;\n          here_val = here & 0xffff;\n\n          if ((here_bits) <= bits) { break; }\n          //--- PULLBYTE() ---//\n          if (have === 0) { break inf_leave; }\n          have--;\n          hold += input[next++] << bits;\n          bits += 8;\n          //---//\n        }\n        if ((here_op & 0xf0) === 0) {\n          last_bits = here_bits;\n          last_op = here_op;\n          last_val = here_val;\n          for (;;) {\n            here = state.distcode[last_val +\n                    ((hold & ((1 << (last_bits + last_op)) - 1))/*BITS(last.bits + last.op)*/ >> last_bits)];\n            here_bits = here >>> 24;\n            here_op = (here >>> 16) & 0xff;\n            here_val = here & 0xffff;\n\n            if ((last_bits + here_bits) <= bits) { break; }\n            //--- PULLBYTE() ---//\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n            //---//\n          }\n          //--- DROPBITS(last.bits) ---//\n          hold >>>= last_bits;\n          bits -= last_bits;\n          //---//\n          state.back += last_bits;\n        }\n        //--- DROPBITS(here.bits) ---//\n        hold >>>= here_bits;\n        bits -= here_bits;\n        //---//\n        state.back += here_bits;\n        if (here_op & 64) {\n          strm.msg = 'invalid distance code';\n          state.mode = BAD;\n          break;\n        }\n        state.offset = here_val;\n        state.extra = (here_op) & 15;\n        state.mode = DISTEXT;\n        /* falls through */\n      case DISTEXT:\n        if (state.extra) {\n          //=== NEEDBITS(state.extra);\n          n = state.extra;\n          while (bits < n) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          state.offset += hold & ((1 << state.extra) - 1)/*BITS(state.extra)*/;\n          //--- DROPBITS(state.extra) ---//\n          hold >>>= state.extra;\n          bits -= state.extra;\n          //---//\n          state.back += state.extra;\n        }\n//#ifdef INFLATE_STRICT\n        if (state.offset > state.dmax) {\n          strm.msg = 'invalid distance too far back';\n          state.mode = BAD;\n          break;\n        }\n//#endif\n        //Tracevv((stderr, \"inflate:         distance %u\\n\", state.offset));\n        state.mode = MATCH;\n        /* falls through */\n      case MATCH:\n        if (left === 0) { break inf_leave; }\n        copy = _out - left;\n        if (state.offset > copy) {         /* copy from window */\n          copy = state.offset - copy;\n          if (copy > state.whave) {\n            if (state.sane) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break;\n            }\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//          Trace((stderr, \"inflate.c too far\\n\"));\n//          copy -= state.whave;\n//          if (copy > state.length) { copy = state.length; }\n//          if (copy > left) { copy = left; }\n//          left -= copy;\n//          state.length -= copy;\n//          do {\n//            output[put++] = 0;\n//          } while (--copy);\n//          if (state.length === 0) { state.mode = LEN; }\n//          break;\n//#endif\n          }\n          if (copy > state.wnext) {\n            copy -= state.wnext;\n            from = state.wsize - copy;\n          }\n          else {\n            from = state.wnext - copy;\n          }\n          if (copy > state.length) { copy = state.length; }\n          from_source = state.window;\n        }\n        else {                              /* copy from output */\n          from_source = output;\n          from = put - state.offset;\n          copy = state.length;\n        }\n        if (copy > left) { copy = left; }\n        left -= copy;\n        state.length -= copy;\n        do {\n          output[put++] = from_source[from++];\n        } while (--copy);\n        if (state.length === 0) { state.mode = LEN; }\n        break;\n      case LIT:\n        if (left === 0) { break inf_leave; }\n        output[put++] = state.length;\n        left--;\n        state.mode = LEN;\n        break;\n      case CHECK:\n        if (state.wrap) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            // Use '|' instead of '+' to make sure that result is signed\n            hold |= input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          _out -= left;\n          strm.total_out += _out;\n          state.total += _out;\n          if (_out) {\n            strm.adler = state.check =\n                /*UPDATE(state.check, put - _out, _out);*/\n                (state.flags ? crc32(state.check, output, _out, put - _out) : adler32(state.check, output, _out, put - _out));\n\n          }\n          _out = left;\n          // NB: crc32 stored as signed 32-bit int, zswap32 returns signed too\n          if ((state.flags ? hold : zswap32(hold)) !== state.check) {\n            strm.msg = 'incorrect data check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   check matches trailer\\n\"));\n        }\n        state.mode = LENGTH;\n        /* falls through */\n      case LENGTH:\n        if (state.wrap && state.flags) {\n          //=== NEEDBITS(32);\n          while (bits < 32) {\n            if (have === 0) { break inf_leave; }\n            have--;\n            hold += input[next++] << bits;\n            bits += 8;\n          }\n          //===//\n          if (hold !== (state.total & 0xffffffff)) {\n            strm.msg = 'incorrect length check';\n            state.mode = BAD;\n            break;\n          }\n          //=== INITBITS();\n          hold = 0;\n          bits = 0;\n          //===//\n          //Tracev((stderr, \"inflate:   length matches trailer\\n\"));\n        }\n        state.mode = DONE;\n        /* falls through */\n      case DONE:\n        ret = Z_STREAM_END;\n        break inf_leave;\n      case BAD:\n        ret = Z_DATA_ERROR;\n        break inf_leave;\n      case MEM:\n        return Z_MEM_ERROR;\n      case SYNC:\n        /* falls through */\n      default:\n        return Z_STREAM_ERROR;\n    }\n  }\n\n  // inf_leave <- here is real place for \"goto inf_leave\", emulated via \"break inf_leave\"\n\n  /*\n     Return from inflate(), updating the total counts and the check value.\n     If there was no progress during the inflate() call, return a buffer\n     error.  Call updatewindow() to create and/or update the window state.\n     Note: a memory error from inflate() is non-recoverable.\n   */\n\n  //--- RESTORE() ---\n  strm.next_out = put;\n  strm.avail_out = left;\n  strm.next_in = next;\n  strm.avail_in = have;\n  state.hold = hold;\n  state.bits = bits;\n  //---\n\n  if (state.wsize || (_out !== strm.avail_out && state.mode < BAD &&\n                      (state.mode < CHECK || flush !== Z_FINISH))) {\n    if (updatewindow(strm, strm.output, strm.next_out, _out - strm.avail_out)) {\n      state.mode = MEM;\n      return Z_MEM_ERROR;\n    }\n  }\n  _in -= strm.avail_in;\n  _out -= strm.avail_out;\n  strm.total_in += _in;\n  strm.total_out += _out;\n  state.total += _out;\n  if (state.wrap && _out) {\n    strm.adler = state.check = /*UPDATE(state.check, strm.next_out - _out, _out);*/\n      (state.flags ? crc32(state.check, output, _out, strm.next_out - _out) : adler32(state.check, output, _out, strm.next_out - _out));\n  }\n  strm.data_type = state.bits + (state.last ? 64 : 0) +\n                    (state.mode === TYPE ? 128 : 0) +\n                    (state.mode === LEN_ || state.mode === COPY_ ? 256 : 0);\n  if (((_in === 0 && _out === 0) || flush === Z_FINISH) && ret === Z_OK) {\n    ret = Z_BUF_ERROR;\n  }\n  return ret;\n}\n\nfunction inflateEnd(strm) {\n\n  if (!strm || !strm.state /*|| strm->zfree == (free_func)0*/) {\n    return Z_STREAM_ERROR;\n  }\n\n  var state = strm.state;\n  if (state.window) {\n    state.window = null;\n  }\n  strm.state = null;\n  return Z_OK;\n}\n\nfunction inflateGetHeader(strm, head) {\n  var state;\n\n  /* check state */\n  if (!strm || !strm.state) { return Z_STREAM_ERROR; }\n  state = strm.state;\n  if ((state.wrap & 2) === 0) { return Z_STREAM_ERROR; }\n\n  /* save header structure */\n  state.head = head;\n  head.done = false;\n  return Z_OK;\n}\n\nfunction inflateSetDictionary(strm, dictionary) {\n  var dictLength = dictionary.length;\n\n  var state;\n  var dictid;\n  var ret;\n\n  /* check state */\n  if (!strm /* == Z_NULL */ || !strm.state /* == Z_NULL */) { return Z_STREAM_ERROR; }\n  state = strm.state;\n\n  if (state.wrap !== 0 && state.mode !== DICT) {\n    return Z_STREAM_ERROR;\n  }\n\n  /* check for correct dictionary identifier */\n  if (state.mode === DICT) {\n    dictid = 1; /* adler32(0, null, 0)*/\n    /* dictid = adler32(dictid, dictionary, dictLength); */\n    dictid = adler32(dictid, dictionary, dictLength, 0);\n    if (dictid !== state.check) {\n      return Z_DATA_ERROR;\n    }\n  }\n  /* copy dictionary to window using updatewindow(), which will amend the\n   existing dictionary if appropriate */\n  ret = updatewindow(strm, dictionary, dictLength, dictLength);\n  if (ret) {\n    state.mode = MEM;\n    return Z_MEM_ERROR;\n  }\n  state.havedict = 1;\n  // Tracev((stderr, \"inflate:   dictionary set\\n\"));\n  return Z_OK;\n}\n\nexports.inflateReset = inflateReset;\nexports.inflateReset2 = inflateReset2;\nexports.inflateResetKeep = inflateResetKeep;\nexports.inflateInit = inflateInit;\nexports.inflateInit2 = inflateInit2;\nexports.inflate = inflate;\nexports.inflateEnd = inflateEnd;\nexports.inflateGetHeader = inflateGetHeader;\nexports.inflateSetDictionary = inflateSetDictionary;\nexports.inflateInfo = 'pako inflate (from Nodeca project)';\n\n/* Not implemented\nexports.inflateCopy = inflateCopy;\nexports.inflateGetDictionary = inflateGetDictionary;\nexports.inflateMark = inflateMark;\nexports.inflatePrime = inflatePrime;\nexports.inflateSync = inflateSync;\nexports.inflateSyncPoint = inflateSyncPoint;\nexports.inflateUndermine = inflateUndermine;\n*/\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\n// See state defs from inflate.js\nvar BAD = 30;       /* got a data error -- remain here until reset */\nvar TYPE = 12;      /* i: waiting for type bits, including last-flag bit */\n\n/*\n   Decode literal, length, and distance codes and write out the resulting\n   literal and match bytes until either not enough input or output is\n   available, an end-of-block is encountered, or a data error is encountered.\n   When large enough input and output buffers are supplied to inflate(), for\n   example, a 16K input buffer and a 64K output buffer, more than 95% of the\n   inflate execution time is spent in this routine.\n\n   Entry assumptions:\n\n        state.mode === LEN\n        strm.avail_in >= 6\n        strm.avail_out >= 258\n        start >= strm.avail_out\n        state.bits < 8\n\n   On return, state.mode is one of:\n\n        LEN -- ran out of enough output space or enough available input\n        TYPE -- reached end of block code, inflate() to interpret next block\n        BAD -- error in block data\n\n   Notes:\n\n    - The maximum input bits used by a length/distance pair is 15 bits for the\n      length code, 5 bits for the length extra, 15 bits for the distance code,\n      and 13 bits for the distance extra.  This totals 48 bits, or six bytes.\n      Therefore if strm.avail_in >= 6, then there is enough input to avoid\n      checking for available input while decoding.\n\n    - The maximum bytes that a single length/distance pair can output is 258\n      bytes, which is the maximum length that can be coded.  inflate_fast()\n      requires strm.avail_out >= 258 for each loop to avoid checking for\n      output space.\n */\nmodule.exports = function inflate_fast(strm, start) {\n  var state;\n  var _in;                    /* local strm.input */\n  var last;                   /* have enough input while in < last */\n  var _out;                   /* local strm.output */\n  var beg;                    /* inflate()'s initial strm.output */\n  var end;                    /* while out < end, enough space available */\n//#ifdef INFLATE_STRICT\n  var dmax;                   /* maximum distance from zlib header */\n//#endif\n  var wsize;                  /* window size or zero if not using window */\n  var whave;                  /* valid bytes in the window */\n  var wnext;                  /* window write index */\n  // Use `s_window` instead `window`, avoid conflict with instrumentation tools\n  var s_window;               /* allocated sliding window, if wsize != 0 */\n  var hold;                   /* local strm.hold */\n  var bits;                   /* local strm.bits */\n  var lcode;                  /* local strm.lencode */\n  var dcode;                  /* local strm.distcode */\n  var lmask;                  /* mask for first level of length codes */\n  var dmask;                  /* mask for first level of distance codes */\n  var here;                   /* retrieved table entry */\n  var op;                     /* code bits, operation, extra bits, or */\n                              /*  window position, window bytes to copy */\n  var len;                    /* match length, unused bytes */\n  var dist;                   /* match distance */\n  var from;                   /* where to copy match from */\n  var from_source;\n\n\n  var input, output; // JS specific, because we have no pointers\n\n  /* copy state to local variables */\n  state = strm.state;\n  //here = state.here;\n  _in = strm.next_in;\n  input = strm.input;\n  last = _in + (strm.avail_in - 5);\n  _out = strm.next_out;\n  output = strm.output;\n  beg = _out - (start - strm.avail_out);\n  end = _out + (strm.avail_out - 257);\n//#ifdef INFLATE_STRICT\n  dmax = state.dmax;\n//#endif\n  wsize = state.wsize;\n  whave = state.whave;\n  wnext = state.wnext;\n  s_window = state.window;\n  hold = state.hold;\n  bits = state.bits;\n  lcode = state.lencode;\n  dcode = state.distcode;\n  lmask = (1 << state.lenbits) - 1;\n  dmask = (1 << state.distbits) - 1;\n\n\n  /* decode literals and length/distances until end-of-block or not enough\n     input data or output space */\n\n  top:\n  do {\n    if (bits < 15) {\n      hold += input[_in++] << bits;\n      bits += 8;\n      hold += input[_in++] << bits;\n      bits += 8;\n    }\n\n    here = lcode[hold & lmask];\n\n    dolen:\n    for (;;) { // Goto emulation\n      op = here >>> 24/*here.bits*/;\n      hold >>>= op;\n      bits -= op;\n      op = (here >>> 16) & 0xff/*here.op*/;\n      if (op === 0) {                          /* literal */\n        //Tracevv((stderr, here.val >= 0x20 && here.val < 0x7f ?\n        //        \"inflate:         literal '%c'\\n\" :\n        //        \"inflate:         literal 0x%02x\\n\", here.val));\n        output[_out++] = here & 0xffff/*here.val*/;\n      }\n      else if (op & 16) {                     /* length base */\n        len = here & 0xffff/*here.val*/;\n        op &= 15;                           /* number of extra bits */\n        if (op) {\n          if (bits < op) {\n            hold += input[_in++] << bits;\n            bits += 8;\n          }\n          len += hold & ((1 << op) - 1);\n          hold >>>= op;\n          bits -= op;\n        }\n        //Tracevv((stderr, \"inflate:         length %u\\n\", len));\n        if (bits < 15) {\n          hold += input[_in++] << bits;\n          bits += 8;\n          hold += input[_in++] << bits;\n          bits += 8;\n        }\n        here = dcode[hold & dmask];\n\n        dodist:\n        for (;;) { // goto emulation\n          op = here >>> 24/*here.bits*/;\n          hold >>>= op;\n          bits -= op;\n          op = (here >>> 16) & 0xff/*here.op*/;\n\n          if (op & 16) {                      /* distance base */\n            dist = here & 0xffff/*here.val*/;\n            op &= 15;                       /* number of extra bits */\n            if (bits < op) {\n              hold += input[_in++] << bits;\n              bits += 8;\n              if (bits < op) {\n                hold += input[_in++] << bits;\n                bits += 8;\n              }\n            }\n            dist += hold & ((1 << op) - 1);\n//#ifdef INFLATE_STRICT\n            if (dist > dmax) {\n              strm.msg = 'invalid distance too far back';\n              state.mode = BAD;\n              break top;\n            }\n//#endif\n            hold >>>= op;\n            bits -= op;\n            //Tracevv((stderr, \"inflate:         distance %u\\n\", dist));\n            op = _out - beg;                /* max distance in output */\n            if (dist > op) {                /* see if copy from window */\n              op = dist - op;               /* distance back in window */\n              if (op > whave) {\n                if (state.sane) {\n                  strm.msg = 'invalid distance too far back';\n                  state.mode = BAD;\n                  break top;\n                }\n\n// (!) This block is disabled in zlib defaults,\n// don't enable it for binary compatibility\n//#ifdef INFLATE_ALLOW_INVALID_DISTANCE_TOOFAR_ARRR\n//                if (len <= op - whave) {\n//                  do {\n//                    output[_out++] = 0;\n//                  } while (--len);\n//                  continue top;\n//                }\n//                len -= op - whave;\n//                do {\n//                  output[_out++] = 0;\n//                } while (--op > whave);\n//                if (op === 0) {\n//                  from = _out - dist;\n//                  do {\n//                    output[_out++] = output[from++];\n//                  } while (--len);\n//                  continue top;\n//                }\n//#endif\n              }\n              from = 0; // window index\n              from_source = s_window;\n              if (wnext === 0) {           /* very common case */\n                from += wsize - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              else if (wnext < op) {      /* wrap around window */\n                from += wsize + wnext - op;\n                op -= wnext;\n                if (op < len) {         /* some from end of window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = 0;\n                  if (wnext < len) {  /* some from start of window */\n                    op = wnext;\n                    len -= op;\n                    do {\n                      output[_out++] = s_window[from++];\n                    } while (--op);\n                    from = _out - dist;      /* rest from output */\n                    from_source = output;\n                  }\n                }\n              }\n              else {                      /* contiguous in window */\n                from += wnext - op;\n                if (op < len) {         /* some from window */\n                  len -= op;\n                  do {\n                    output[_out++] = s_window[from++];\n                  } while (--op);\n                  from = _out - dist;  /* rest from output */\n                  from_source = output;\n                }\n              }\n              while (len > 2) {\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                output[_out++] = from_source[from++];\n                len -= 3;\n              }\n              if (len) {\n                output[_out++] = from_source[from++];\n                if (len > 1) {\n                  output[_out++] = from_source[from++];\n                }\n              }\n            }\n            else {\n              from = _out - dist;          /* copy direct from output */\n              do {                        /* minimum length is three */\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                output[_out++] = output[from++];\n                len -= 3;\n              } while (len > 2);\n              if (len) {\n                output[_out++] = output[from++];\n                if (len > 1) {\n                  output[_out++] = output[from++];\n                }\n              }\n            }\n          }\n          else if ((op & 64) === 0) {          /* 2nd level distance code */\n            here = dcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n            continue dodist;\n          }\n          else {\n            strm.msg = 'invalid distance code';\n            state.mode = BAD;\n            break top;\n          }\n\n          break; // need to emulate goto via \"continue\"\n        }\n      }\n      else if ((op & 64) === 0) {              /* 2nd level length code */\n        here = lcode[(here & 0xffff)/*here.val*/ + (hold & ((1 << op) - 1))];\n        continue dolen;\n      }\n      else if (op & 32) {                     /* end-of-block */\n        //Tracevv((stderr, \"inflate:         end of block\\n\"));\n        state.mode = TYPE;\n        break top;\n      }\n      else {\n        strm.msg = 'invalid literal/length code';\n        state.mode = BAD;\n        break top;\n      }\n\n      break; // need to emulate goto via \"continue\"\n    }\n  } while (_in < last && _out < end);\n\n  /* return unused bytes (on entry, bits < 8, so in won't go too far back) */\n  len = bits >> 3;\n  _in -= len;\n  bits -= len << 3;\n  hold &= (1 << bits) - 1;\n\n  /* update state and return */\n  strm.next_in = _in;\n  strm.next_out = _out;\n  strm.avail_in = (_in < last ? 5 + (last - _in) : 5 - (_in - last));\n  strm.avail_out = (_out < end ? 257 + (end - _out) : 257 - (_out - end));\n  state.hold = hold;\n  state.bits = bits;\n  return;\n};\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nvar utils = __webpack_require__(0);\n\nvar MAXBITS = 15;\nvar ENOUGH_LENS = 852;\nvar ENOUGH_DISTS = 592;\n//var ENOUGH = (ENOUGH_LENS+ENOUGH_DISTS);\n\nvar CODES = 0;\nvar LENS = 1;\nvar DISTS = 2;\n\nvar lbase = [ /* Length codes 257..285 base */\n  3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n  35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0\n];\n\nvar lext = [ /* Length codes 257..285 extra */\n  16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 18, 18, 18, 18,\n  19, 19, 19, 19, 20, 20, 20, 20, 21, 21, 21, 21, 16, 72, 78\n];\n\nvar dbase = [ /* Distance codes 0..29 base */\n  1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n  257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n  8193, 12289, 16385, 24577, 0, 0\n];\n\nvar dext = [ /* Distance codes 0..29 extra */\n  16, 16, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22,\n  23, 23, 24, 24, 25, 25, 26, 26, 27, 27,\n  28, 28, 29, 29, 64, 64\n];\n\nmodule.exports = function inflate_table(type, lens, lens_index, codes, table, table_index, work, opts)\n{\n  var bits = opts.bits;\n      //here = opts.here; /* table entry for duplication */\n\n  var len = 0;               /* a code's length in bits */\n  var sym = 0;               /* index of code symbols */\n  var min = 0, max = 0;          /* minimum and maximum code lengths */\n  var root = 0;              /* number of index bits for root table */\n  var curr = 0;              /* number of index bits for current table */\n  var drop = 0;              /* code bits to drop for sub-table */\n  var left = 0;                   /* number of prefix codes available */\n  var used = 0;              /* code entries in table used */\n  var huff = 0;              /* Huffman code */\n  var incr;              /* for incrementing code, index */\n  var fill;              /* index for replicating entries */\n  var low;               /* low bits for current root entry */\n  var mask;              /* mask for low root bits */\n  var next;             /* next available space in table */\n  var base = null;     /* base value table to use */\n  var base_index = 0;\n//  var shoextra;    /* extra bits table to use */\n  var end;                    /* use base and extra for symbol > end */\n  var count = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];    /* number of codes of each length */\n  var offs = new utils.Buf16(MAXBITS + 1); //[MAXBITS+1];     /* offsets in table for each length */\n  var extra = null;\n  var extra_index = 0;\n\n  var here_bits, here_op, here_val;\n\n  /*\n   Process a set of code lengths to create a canonical Huffman code.  The\n   code lengths are lens[0..codes-1].  Each length corresponds to the\n   symbols 0..codes-1.  The Huffman code is generated by first sorting the\n   symbols by length from short to long, and retaining the symbol order\n   for codes with equal lengths.  Then the code starts with all zero bits\n   for the first code of the shortest length, and the codes are integer\n   increments for the same length, and zeros are appended as the length\n   increases.  For the deflate format, these bits are stored backwards\n   from their more natural integer increment ordering, and so when the\n   decoding tables are built in the large loop below, the integer codes\n   are incremented backwards.\n\n   This routine assumes, but does not check, that all of the entries in\n   lens[] are in the range 0..MAXBITS.  The caller must assure this.\n   1..MAXBITS is interpreted as that code length.  zero means that that\n   symbol does not occur in this code.\n\n   The codes are sorted by computing a count of codes for each length,\n   creating from that a table of starting indices for each length in the\n   sorted table, and then entering the symbols in order in the sorted\n   table.  The sorted table is work[], with that space being provided by\n   the caller.\n\n   The length counts are used for other purposes as well, i.e. finding\n   the minimum and maximum length codes, determining if there are any\n   codes at all, checking for a valid set of lengths, and looking ahead\n   at length counts to determine sub-table sizes when building the\n   decoding tables.\n   */\n\n  /* accumulate lengths for codes (assumes lens[] all in 0..MAXBITS) */\n  for (len = 0; len <= MAXBITS; len++) {\n    count[len] = 0;\n  }\n  for (sym = 0; sym < codes; sym++) {\n    count[lens[lens_index + sym]]++;\n  }\n\n  /* bound code lengths, force root to be within code lengths */\n  root = bits;\n  for (max = MAXBITS; max >= 1; max--) {\n    if (count[max] !== 0) { break; }\n  }\n  if (root > max) {\n    root = max;\n  }\n  if (max === 0) {                     /* no symbols to code at all */\n    //table.op[opts.table_index] = 64;  //here.op = (var char)64;    /* invalid code marker */\n    //table.bits[opts.table_index] = 1;   //here.bits = (var char)1;\n    //table.val[opts.table_index++] = 0;   //here.val = (var short)0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n\n    //table.op[opts.table_index] = 64;\n    //table.bits[opts.table_index] = 1;\n    //table.val[opts.table_index++] = 0;\n    table[table_index++] = (1 << 24) | (64 << 16) | 0;\n\n    opts.bits = 1;\n    return 0;     /* no symbols, but wait for decoding to report error */\n  }\n  for (min = 1; min < max; min++) {\n    if (count[min] !== 0) { break; }\n  }\n  if (root < min) {\n    root = min;\n  }\n\n  /* check for an over-subscribed or incomplete set of lengths */\n  left = 1;\n  for (len = 1; len <= MAXBITS; len++) {\n    left <<= 1;\n    left -= count[len];\n    if (left < 0) {\n      return -1;\n    }        /* over-subscribed */\n  }\n  if (left > 0 && (type === CODES || max !== 1)) {\n    return -1;                      /* incomplete set */\n  }\n\n  /* generate offsets into symbol table for each length for sorting */\n  offs[1] = 0;\n  for (len = 1; len < MAXBITS; len++) {\n    offs[len + 1] = offs[len] + count[len];\n  }\n\n  /* sort symbols by length, by symbol order within each length */\n  for (sym = 0; sym < codes; sym++) {\n    if (lens[lens_index + sym] !== 0) {\n      work[offs[lens[lens_index + sym]]++] = sym;\n    }\n  }\n\n  /*\n   Create and fill in decoding tables.  In this loop, the table being\n   filled is at next and has curr index bits.  The code being used is huff\n   with length len.  That code is converted to an index by dropping drop\n   bits off of the bottom.  For codes where len is less than drop + curr,\n   those top drop + curr - len bits are incremented through all values to\n   fill the table with replicated entries.\n\n   root is the number of index bits for the root table.  When len exceeds\n   root, sub-tables are created pointed to by the root entry with an index\n   of the low root bits of huff.  This is saved in low to check for when a\n   new sub-table should be started.  drop is zero when the root table is\n   being filled, and drop is root when sub-tables are being filled.\n\n   When a new sub-table is needed, it is necessary to look ahead in the\n   code lengths to determine what size sub-table is needed.  The length\n   counts are used for this, and so count[] is decremented as codes are\n   entered in the tables.\n\n   used keeps track of how many table entries have been allocated from the\n   provided *table space.  It is checked for LENS and DIST tables against\n   the constants ENOUGH_LENS and ENOUGH_DISTS to guard against changes in\n   the initial root table size constants.  See the comments in inftrees.h\n   for more information.\n\n   sym increments through all symbols, and the loop terminates when\n   all codes of length max, i.e. all codes, have been processed.  This\n   routine permits incomplete codes, so another loop after this one fills\n   in the rest of the decoding tables with invalid code markers.\n   */\n\n  /* set up for code type */\n  // poor man optimization - use if-else instead of switch,\n  // to avoid deopts in old v8\n  if (type === CODES) {\n    base = extra = work;    /* dummy value--not used */\n    end = 19;\n\n  } else if (type === LENS) {\n    base = lbase;\n    base_index -= 257;\n    extra = lext;\n    extra_index -= 257;\n    end = 256;\n\n  } else {                    /* DISTS */\n    base = dbase;\n    extra = dext;\n    end = -1;\n  }\n\n  /* initialize opts for loop */\n  huff = 0;                   /* starting code */\n  sym = 0;                    /* starting code symbol */\n  len = min;                  /* starting code length */\n  next = table_index;              /* current table to fill in */\n  curr = root;                /* current table index bits */\n  drop = 0;                   /* current bits to drop from code for index */\n  low = -1;                   /* trigger new sub-table when len > root */\n  used = 1 << root;          /* use root table entries */\n  mask = used - 1;            /* mask for comparing low */\n\n  /* check available table space */\n  if ((type === LENS && used > ENOUGH_LENS) ||\n    (type === DISTS && used > ENOUGH_DISTS)) {\n    return 1;\n  }\n\n  /* process all codes and make table entries */\n  for (;;) {\n    /* create table entry */\n    here_bits = len - drop;\n    if (work[sym] < end) {\n      here_op = 0;\n      here_val = work[sym];\n    }\n    else if (work[sym] > end) {\n      here_op = extra[extra_index + work[sym]];\n      here_val = base[base_index + work[sym]];\n    }\n    else {\n      here_op = 32 + 64;         /* end of block */\n      here_val = 0;\n    }\n\n    /* replicate for those indices with low len bits equal to huff */\n    incr = 1 << (len - drop);\n    fill = 1 << curr;\n    min = fill;                 /* save offset to next table */\n    do {\n      fill -= incr;\n      table[next + (huff >> drop) + fill] = (here_bits << 24) | (here_op << 16) | here_val |0;\n    } while (fill !== 0);\n\n    /* backwards increment the len-bit code huff */\n    incr = 1 << (len - 1);\n    while (huff & incr) {\n      incr >>= 1;\n    }\n    if (incr !== 0) {\n      huff &= incr - 1;\n      huff += incr;\n    } else {\n      huff = 0;\n    }\n\n    /* go to next symbol, update count, len */\n    sym++;\n    if (--count[len] === 0) {\n      if (len === max) { break; }\n      len = lens[lens_index + work[sym]];\n    }\n\n    /* create new sub-table if needed */\n    if (len > root && (huff & mask) !== low) {\n      /* if first time, transition to sub-tables */\n      if (drop === 0) {\n        drop = root;\n      }\n\n      /* increment past last table */\n      next += min;            /* here min is 1 << curr */\n\n      /* determine length of next table */\n      curr = len - drop;\n      left = 1 << curr;\n      while (curr + drop < max) {\n        left -= count[curr + drop];\n        if (left <= 0) { break; }\n        curr++;\n        left <<= 1;\n      }\n\n      /* check for enough space */\n      used += 1 << curr;\n      if ((type === LENS && used > ENOUGH_LENS) ||\n        (type === DISTS && used > ENOUGH_DISTS)) {\n        return 1;\n      }\n\n      /* point entry in root table to sub-table */\n      low = huff & mask;\n      /*table.op[low] = curr;\n      table.bits[low] = root;\n      table.val[low] = next - opts.table_index;*/\n      table[low] = (root << 24) | (curr << 16) | (next - table_index) |0;\n    }\n  }\n\n  /* fill in remaining table entry if code is incomplete (guaranteed to have\n   at most one remaining entry, since if the code is incomplete, the\n   maximum code length that was allowed to get this far is one bit) */\n  if (huff !== 0) {\n    //table.op[next + huff] = 64;            /* invalid code marker */\n    //table.bits[next + huff] = len - drop;\n    //table.val[next + huff] = 0;\n    table[next + huff] = ((len - drop) << 24) | (64 << 16) |0;\n  }\n\n  /* set return parameters */\n  //opts.table_index += used;\n  opts.bits = root;\n  return 0;\n};\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// (C) 1995-2013 Jean-loup Gailly and Mark Adler\n// (C) 2014-2017 Vitaly Puzrin and Andrey Tupitsin\n//\n// This software is provided 'as-is', without any express or implied\n// warranty. In no event will the authors be held liable for any damages\n// arising from the use of this software.\n//\n// Permission is granted to anyone to use this software for any purpose,\n// including commercial applications, and to alter it and redistribute it\n// freely, subject to the following restrictions:\n//\n// 1. The origin of this software must not be misrepresented; you must not\n//   claim that you wrote the original software. If you use this software\n//   in a product, an acknowledgment in the product documentation would be\n//   appreciated but is not required.\n// 2. Altered source versions must be plainly marked as such, and must not be\n//   misrepresented as being the original software.\n// 3. This notice may not be removed or altered from any source distribution.\n\nfunction GZheader() {\n  /* true if compressed data believed to be text */\n  this.text       = 0;\n  /* modification time */\n  this.time       = 0;\n  /* extra flags (not used when writing a gzip file) */\n  this.xflags     = 0;\n  /* operating system */\n  this.os         = 0;\n  /* pointer to extra field or Z_NULL if none */\n  this.extra      = null;\n  /* extra field length (valid if extra != Z_NULL) */\n  this.extra_len  = 0; // Actually, we don't need it in JS,\n                       // but leave for few code modifications\n\n  //\n  // Setup limits is not necessary because in js we should not preallocate memory\n  // for inflate use constant limit in 65536 bytes\n  //\n\n  /* space at extra (only when reading header) */\n  // this.extra_max  = 0;\n  /* pointer to zero-terminated file name or Z_NULL */\n  this.name       = '';\n  /* space at name (only when reading header) */\n  // this.name_max   = 0;\n  /* pointer to zero-terminated comment or Z_NULL */\n  this.comment    = '';\n  /* space at comment (only when reading header) */\n  // this.comm_max   = 0;\n  /* true if there was or will be a header crc */\n  this.hcrc       = 0;\n  /* true when done reading gzip header (not used when writing a gzip file) */\n  this.done       = false;\n}\n\nmodule.exports = GZheader;\n\n\n/***/ })\n/******/ ]);\n});\n//# sourceMappingURL=excalibur-tiled.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGV4Y2FsaWJ1cmpzL2V4Y2FsaWJ1ci10aWxlZC9kaXN0L2V4Y2FsaWJ1ci10aWxlZC5qcz84OTcyIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsSUFBSSxJQUF5RDtBQUM3RCwyQkFBMkIsbUJBQU8sQ0FBQyxpRUFBVztBQUM5QyxNQUFNLEVBSzJDO0FBQ2pELENBQUM7QUFDRCxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsMEJBQTBCLEVBQUU7QUFDL0QseUNBQXlDLGVBQWU7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RCwrREFBK0Q7QUFDN0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBOztBQUVBOzs7O0FBSUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixVQUFVOztBQUU1QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQSw0QkFBNEIsWUFBWTtBQUN4QyxxQkFBcUIsOEJBQThCO0FBQ25EO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsU0FBUztBQUM1QjtBQUNBO0FBQ0EsR0FBRztBQUNI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QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsY0FBYzs7QUFFakM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQzs7QUFFL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EscUJBQXFCLHlDQUF5Qzs7QUFFOUQ7QUFDQTs7O0FB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0Q7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNEQUFzRDtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0VBQWtFO0FBQ2xFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUI7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DOztBQUVuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLHVCQUF1Qjs7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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCLGtCQUFrQjtBQUNsQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaUJBQWlCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBLE9BQU87QUFDUDtBQUNBOztBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLFVBQVU7QUFDN0M7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBLHFCQUFxQiw4QkFBOEI7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxlQUFlOztBQUVsQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixzQkFBc0I7QUFDckQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCO0FBQ2xCLG1CQUFtQjtBQUNuQixzQkFBc0I7QUFDdEIsbUJBQW1COztBQUVuQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsY0FBYztBQUNqQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNEQUFzRDs7QUFFdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsa0VBQWtFOztBQUV2Rjs7QUFFQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EscUJBQXFCLHlDQUF5Qzs7QUFFOUQ7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQSxPQUFPO0FBQ1A7QUFDQTs7QUFFQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7O0FBR0EsT0FBTztBQUNQO0FBQ0EsQ0FBQztBQUNEIiwiZmlsZSI6Ii4vbm9kZV9tb2R1bGVzL0BleGNhbGlidXJqcy9leGNhbGlidXItdGlsZWQvZGlzdC9leGNhbGlidXItdGlsZWQuanMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJleGNhbGlidXJcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoW1wiZXhjYWxpYnVyXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcIkV4dGVuc2lvbnMuVGlsZWRcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJleGNhbGlidXJcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcIkV4dGVuc2lvbnMuVGlsZWRcIl0gPSBmYWN0b3J5KHJvb3RbXCJleFwiXSk7XG59KSh0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFXzhfXykge1xucmV0dXJuIC8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbi8qKioqKiovIFx0XHRcdFx0Y29uZmlndXJhYmxlOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcbi8qKioqKiovIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbi8qKioqKiovIFx0XHRcdH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSA3KTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuXG52YXIgVFlQRURfT0sgPSAgKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJykgJiZcbiAgICAgICAgICAgICAgICAodHlwZW9mIFVpbnQxNkFycmF5ICE9PSAndW5kZWZpbmVkJykgJiZcbiAgICAgICAgICAgICAgICAodHlwZW9mIEludDMyQXJyYXkgIT09ICd1bmRlZmluZWQnKTtcblxuZnVuY3Rpb24gX2hhcyhvYmosIGtleSkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cblxuZXhwb3J0cy5hc3NpZ24gPSBmdW5jdGlvbiAob2JqIC8qZnJvbTEsIGZyb20yLCBmcm9tMywgLi4uKi8pIHtcbiAgdmFyIHNvdXJjZXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICB3aGlsZSAoc291cmNlcy5sZW5ndGgpIHtcbiAgICB2YXIgc291cmNlID0gc291cmNlcy5zaGlmdCgpO1xuICAgIGlmICghc291cmNlKSB7IGNvbnRpbnVlOyB9XG5cbiAgICBpZiAodHlwZW9mIHNvdXJjZSAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3Ioc291cmNlICsgJ211c3QgYmUgbm9uLW9iamVjdCcpO1xuICAgIH1cblxuICAgIGZvciAodmFyIHAgaW4gc291cmNlKSB7XG4gICAgICBpZiAoX2hhcyhzb3VyY2UsIHApKSB7XG4gICAgICAgIG9ialtwXSA9IHNvdXJjZVtwXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gb2JqO1xufTtcblxuXG4vLyByZWR1Y2UgYnVmZmVyIHNpemUsIGF2b2lkaW5nIG1lbSBjb3B5XG5leHBvcnRzLnNocmlua0J1ZiA9IGZ1bmN0aW9uIChidWYsIHNpemUpIHtcbiAgaWYgKGJ1Zi5sZW5ndGggPT09IHNpemUpIHsgcmV0dXJuIGJ1ZjsgfVxuICBpZiAoYnVmLnN1YmFycmF5KSB7IHJldHVybiBidWYuc3ViYXJyYXkoMCwgc2l6ZSk7IH1cbiAgYnVmLmxlbmd0aCA9IHNpemU7XG4gIHJldHVybiBidWY7XG59O1xuXG5cbnZhciBmblR5cGVkID0ge1xuICBhcnJheVNldDogZnVuY3Rpb24gKGRlc3QsIHNyYywgc3JjX29mZnMsIGxlbiwgZGVzdF9vZmZzKSB7XG4gICAgaWYgKHNyYy5zdWJhcnJheSAmJiBkZXN0LnN1YmFycmF5KSB7XG4gICAgICBkZXN0LnNldChzcmMuc3ViYXJyYXkoc3JjX29mZnMsIHNyY19vZmZzICsgbGVuKSwgZGVzdF9vZmZzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gRmFsbGJhY2sgdG8gb3JkaW5hcnkgYXJyYXlcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBkZXN0W2Rlc3Rfb2ZmcyArIGldID0gc3JjW3NyY19vZmZzICsgaV07XG4gICAgfVxuICB9LFxuICAvLyBKb2luIGFycmF5IG9mIGNodW5rcyB0byBzaW5nbGUgYXJyYXkuXG4gIGZsYXR0ZW5DaHVua3M6IGZ1bmN0aW9uIChjaHVua3MpIHtcbiAgICB2YXIgaSwgbCwgbGVuLCBwb3MsIGNodW5rLCByZXN1bHQ7XG5cbiAgICAvLyBjYWxjdWxhdGUgZGF0YSBsZW5ndGhcbiAgICBsZW4gPSAwO1xuICAgIGZvciAoaSA9IDAsIGwgPSBjaHVua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBsZW4gKz0gY2h1bmtzW2ldLmxlbmd0aDtcbiAgICB9XG5cbiAgICAvLyBqb2luIGNodW5rc1xuICAgIHJlc3VsdCA9IG5ldyBVaW50OEFycmF5KGxlbik7XG4gICAgcG9zID0gMDtcbiAgICBmb3IgKGkgPSAwLCBsID0gY2h1bmtzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgY2h1bmsgPSBjaHVua3NbaV07XG4gICAgICByZXN1bHQuc2V0KGNodW5rLCBwb3MpO1xuICAgICAgcG9zICs9IGNodW5rLmxlbmd0aDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59O1xuXG52YXIgZm5VbnR5cGVkID0ge1xuICBhcnJheVNldDogZnVuY3Rpb24gKGRlc3QsIHNyYywgc3JjX29mZnMsIGxlbiwgZGVzdF9vZmZzKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgZGVzdFtkZXN0X29mZnMgKyBpXSA9IHNyY1tzcmNfb2ZmcyArIGldO1xuICAgIH1cbiAgfSxcbiAgLy8gSm9pbiBhcnJheSBvZiBjaHVua3MgdG8gc2luZ2xlIGFycmF5LlxuICBmbGF0dGVuQ2h1bmtzOiBmdW5jdGlvbiAoY2h1bmtzKSB7XG4gICAgcmV0dXJuIFtdLmNvbmNhdC5hcHBseShbXSwgY2h1bmtzKTtcbiAgfVxufTtcblxuXG4vLyBFbmFibGUvRGlzYWJsZSB0eXBlZCBhcnJheXMgdXNlLCBmb3IgdGVzdGluZ1xuLy9cbmV4cG9ydHMuc2V0VHlwZWQgPSBmdW5jdGlvbiAob24pIHtcbiAgaWYgKG9uKSB7XG4gICAgZXhwb3J0cy5CdWY4ICA9IFVpbnQ4QXJyYXk7XG4gICAgZXhwb3J0cy5CdWYxNiA9IFVpbnQxNkFycmF5O1xuICAgIGV4cG9ydHMuQnVmMzIgPSBJbnQzMkFycmF5O1xuICAgIGV4cG9ydHMuYXNzaWduKGV4cG9ydHMsIGZuVHlwZWQpO1xuICB9IGVsc2Uge1xuICAgIGV4cG9ydHMuQnVmOCAgPSBBcnJheTtcbiAgICBleHBvcnRzLkJ1ZjE2ID0gQXJyYXk7XG4gICAgZXhwb3J0cy5CdWYzMiA9IEFycmF5O1xuICAgIGV4cG9ydHMuYXNzaWduKGV4cG9ydHMsIGZuVW50eXBlZCk7XG4gIH1cbn07XG5cbmV4cG9ydHMuc2V0VHlwZWQoVFlQRURfT0spO1xuXG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG4vLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXJcbi8vIChDKSAyMDE0LTIwMTcgVml0YWx5IFB1enJpbiBhbmQgQW5kcmV5IFR1cGl0c2luXG4vL1xuLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbi8vIHdhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuLy8gYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbi8vIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbi8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcbi8vXG4vLyAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuLy8gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbi8vICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbi8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG4vLyAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cbi8vIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICAyOiAgICAgICduZWVkIGRpY3Rpb25hcnknLCAgICAgLyogWl9ORUVEX0RJQ1QgICAgICAgMiAgKi9cbiAgMTogICAgICAnc3RyZWFtIGVuZCcsICAgICAgICAgIC8qIFpfU1RSRUFNX0VORCAgICAgIDEgICovXG4gIDA6ICAgICAgJycsICAgICAgICAgICAgICAgICAgICAvKiBaX09LICAgICAgICAgICAgICAwICAqL1xuICAnLTEnOiAgICdmaWxlIGVycm9yJywgICAgICAgICAgLyogWl9FUlJOTyAgICAgICAgICgtMSkgKi9cbiAgJy0yJzogICAnc3RyZWFtIGVycm9yJywgICAgICAgIC8qIFpfU1RSRUFNX0VSUk9SICAoLTIpICovXG4gICctMyc6ICAgJ2RhdGEgZXJyb3InLCAgICAgICAgICAvKiBaX0RBVEFfRVJST1IgICAgKC0zKSAqL1xuICAnLTQnOiAgICdpbnN1ZmZpY2llbnQgbWVtb3J5JywgLyogWl9NRU1fRVJST1IgICAgICgtNCkgKi9cbiAgJy01JzogICAnYnVmZmVyIGVycm9yJywgICAgICAgIC8qIFpfQlVGX0VSUk9SICAgICAoLTUpICovXG4gICctNic6ICAgJ2luY29tcGF0aWJsZSB2ZXJzaW9uJyAvKiBaX1ZFUlNJT05fRVJST1IgKC02KSAqL1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuLy8gTm90ZTogYWRsZXIzMiB0YWtlcyAxMiUgZm9yIGxldmVsIDAgYW5kIDIlIGZvciBsZXZlbCA2LlxuLy8gSXQgaXNuJ3Qgd29ydGggaXQgdG8gbWFrZSBhZGRpdGlvbmFsIG9wdGltaXphdGlvbnMgYXMgaW4gb3JpZ2luYWwuXG4vLyBTbWFsbCBzaXplIGlzIHByZWZlcmFibGUuXG5cbi8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlclxuLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW5cbi8vXG4vLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxuLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4vLyBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuLy8gaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuLy9cbi8vIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4vLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4vLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuLy8gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbi8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuLy8gMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cblxuZnVuY3Rpb24gYWRsZXIzMihhZGxlciwgYnVmLCBsZW4sIHBvcykge1xuICB2YXIgczEgPSAoYWRsZXIgJiAweGZmZmYpIHwwLFxuICAgICAgczIgPSAoKGFkbGVyID4+PiAxNikgJiAweGZmZmYpIHwwLFxuICAgICAgbiA9IDA7XG5cbiAgd2hpbGUgKGxlbiAhPT0gMCkge1xuICAgIC8vIFNldCBsaW1pdCB+IHR3aWNlIGxlc3MgdGhhbiA1NTUyLCB0byBrZWVwXG4gICAgLy8gczIgaW4gMzEtYml0cywgYmVjYXVzZSB3ZSBmb3JjZSBzaWduZWQgaW50cy5cbiAgICAvLyBpbiBvdGhlciBjYXNlICU9IHdpbGwgZmFpbC5cbiAgICBuID0gbGVuID4gMjAwMCA/IDIwMDAgOiBsZW47XG4gICAgbGVuIC09IG47XG5cbiAgICBkbyB7XG4gICAgICBzMSA9IChzMSArIGJ1Zltwb3MrK10pIHwwO1xuICAgICAgczIgPSAoczIgKyBzMSkgfDA7XG4gICAgfSB3aGlsZSAoLS1uKTtcblxuICAgIHMxICU9IDY1NTIxO1xuICAgIHMyICU9IDY1NTIxO1xuICB9XG5cbiAgcmV0dXJuIChzMSB8IChzMiA8PCAxNikpIHwwO1xufVxuXG5cbm1vZHVsZS5leHBvcnRzID0gYWRsZXIzMjtcblxuXG4vKioqLyB9KSxcbi8qIDMgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuLy8gTm90ZTogd2UgY2FuJ3QgZ2V0IHNpZ25pZmljYW50IHNwZWVkIGJvb3N0IGhlcmUuXG4vLyBTbyB3cml0ZSBjb2RlIHRvIG1pbmltaXplIHNpemUgLSBubyBwcmVnZW5lcmF0ZWQgdGFibGVzXG4vLyBhbmQgYXJyYXkgdG9vbHMgZGVwZW5kZW5jaWVzLlxuXG4vLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXJcbi8vIChDKSAyMDE0LTIwMTcgVml0YWx5IFB1enJpbiBhbmQgQW5kcmV5IFR1cGl0c2luXG4vL1xuLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbi8vIHdhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuLy8gYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbi8vIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbi8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcbi8vXG4vLyAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuLy8gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbi8vICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbi8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG4vLyAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cbi8vIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG5cbi8vIFVzZSBvcmRpbmFyeSBhcnJheSwgc2luY2UgdW50eXBlZCBtYWtlcyBubyBib29zdCBoZXJlXG5mdW5jdGlvbiBtYWtlVGFibGUoKSB7XG4gIHZhciBjLCB0YWJsZSA9IFtdO1xuXG4gIGZvciAodmFyIG4gPSAwOyBuIDwgMjU2OyBuKyspIHtcbiAgICBjID0gbjtcbiAgICBmb3IgKHZhciBrID0gMDsgayA8IDg7IGsrKykge1xuICAgICAgYyA9ICgoYyAmIDEpID8gKDB4RURCODgzMjAgXiAoYyA+Pj4gMSkpIDogKGMgPj4+IDEpKTtcbiAgICB9XG4gICAgdGFibGVbbl0gPSBjO1xuICB9XG5cbiAgcmV0dXJuIHRhYmxlO1xufVxuXG4vLyBDcmVhdGUgdGFibGUgb24gbG9hZC4gSnVzdCAyNTUgc2lnbmVkIGxvbmdzLiBOb3QgYSBwcm9ibGVtLlxudmFyIGNyY1RhYmxlID0gbWFrZVRhYmxlKCk7XG5cblxuZnVuY3Rpb24gY3JjMzIoY3JjLCBidWYsIGxlbiwgcG9zKSB7XG4gIHZhciB0ID0gY3JjVGFibGUsXG4gICAgICBlbmQgPSBwb3MgKyBsZW47XG5cbiAgY3JjIF49IC0xO1xuXG4gIGZvciAodmFyIGkgPSBwb3M7IGkgPCBlbmQ7IGkrKykge1xuICAgIGNyYyA9IChjcmMgPj4+IDgpIF4gdFsoY3JjIF4gYnVmW2ldKSAmIDB4RkZdO1xuICB9XG5cbiAgcmV0dXJuIChjcmMgXiAoLTEpKTsgLy8gPj4+IDA7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSBjcmMzMjtcblxuXG4vKioqLyB9KSxcbi8qIDQgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG4vLyBTdHJpbmcgZW5jb2RlL2RlY29kZSBoZWxwZXJzXG5cblxuXG52YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cbi8vIFF1aWNrIGNoZWNrIGlmIHdlIGNhbiB1c2UgZmFzdCBhcnJheSB0byBiaW4gc3RyaW5nIGNvbnZlcnNpb25cbi8vXG4vLyAtIGFwcGx5KEFycmF5KSBjYW4gZmFpbCBvbiBBbmRyb2lkIDIuMlxuLy8gLSBhcHBseShVaW50OEFycmF5KSBjYW4gZmFpbCBvbiBpT1MgNS4xIFNhZmFyaVxuLy9cbnZhciBTVFJfQVBQTFlfT0sgPSB0cnVlO1xudmFyIFNUUl9BUFBMWV9VSUFfT0sgPSB0cnVlO1xuXG50cnkgeyBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIFsgMCBdKTsgfSBjYXRjaCAoX18pIHsgU1RSX0FQUExZX09LID0gZmFsc2U7IH1cbnRyeSB7IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQ4QXJyYXkoMSkpOyB9IGNhdGNoIChfXykgeyBTVFJfQVBQTFlfVUlBX09LID0gZmFsc2U7IH1cblxuXG4vLyBUYWJsZSB3aXRoIHV0ZjggbGVuZ3RocyAoY2FsY3VsYXRlZCBieSBmaXJzdCBieXRlIG9mIHNlcXVlbmNlKVxuLy8gTm90ZSwgdGhhdCA1ICYgNi1ieXRlIHZhbHVlcyBhbmQgc29tZSA0LWJ5dGUgdmFsdWVzIGNhbiBub3QgYmUgcmVwcmVzZW50ZWQgaW4gSlMsXG4vLyBiZWNhdXNlIG1heCBwb3NzaWJsZSBjb2RlcG9pbnQgaXMgMHgxMGZmZmZcbnZhciBfdXRmOGxlbiA9IG5ldyB1dGlscy5CdWY4KDI1Nik7XG5mb3IgKHZhciBxID0gMDsgcSA8IDI1NjsgcSsrKSB7XG4gIF91dGY4bGVuW3FdID0gKHEgPj0gMjUyID8gNiA6IHEgPj0gMjQ4ID8gNSA6IHEgPj0gMjQwID8gNCA6IHEgPj0gMjI0ID8gMyA6IHEgPj0gMTkyID8gMiA6IDEpO1xufVxuX3V0ZjhsZW5bMjU0XSA9IF91dGY4bGVuWzI1NF0gPSAxOyAvLyBJbnZhbGlkIHNlcXVlbmNlIHN0YXJ0XG5cblxuLy8gY29udmVydCBzdHJpbmcgdG8gYXJyYXkgKHR5cGVkLCB3aGVuIHBvc3NpYmxlKVxuZXhwb3J0cy5zdHJpbmcyYnVmID0gZnVuY3Rpb24gKHN0cikge1xuICB2YXIgYnVmLCBjLCBjMiwgbV9wb3MsIGksIHN0cl9sZW4gPSBzdHIubGVuZ3RoLCBidWZfbGVuID0gMDtcblxuICAvLyBjb3VudCBiaW5hcnkgc2l6ZVxuICBmb3IgKG1fcG9zID0gMDsgbV9wb3MgPCBzdHJfbGVuOyBtX3BvcysrKSB7XG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KG1fcG9zKTtcbiAgICBpZiAoKGMgJiAweGZjMDApID09PSAweGQ4MDAgJiYgKG1fcG9zICsgMSA8IHN0cl9sZW4pKSB7XG4gICAgICBjMiA9IHN0ci5jaGFyQ29kZUF0KG1fcG9zICsgMSk7XG4gICAgICBpZiAoKGMyICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XG4gICAgICAgIGMgPSAweDEwMDAwICsgKChjIC0gMHhkODAwKSA8PCAxMCkgKyAoYzIgLSAweGRjMDApO1xuICAgICAgICBtX3BvcysrO1xuICAgICAgfVxuICAgIH1cbiAgICBidWZfbGVuICs9IGMgPCAweDgwID8gMSA6IGMgPCAweDgwMCA/IDIgOiBjIDwgMHgxMDAwMCA/IDMgOiA0O1xuICB9XG5cbiAgLy8gYWxsb2NhdGUgYnVmZmVyXG4gIGJ1ZiA9IG5ldyB1dGlscy5CdWY4KGJ1Zl9sZW4pO1xuXG4gIC8vIGNvbnZlcnRcbiAgZm9yIChpID0gMCwgbV9wb3MgPSAwOyBpIDwgYnVmX2xlbjsgbV9wb3MrKykge1xuICAgIGMgPSBzdHIuY2hhckNvZGVBdChtX3Bvcyk7XG4gICAgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmIChtX3BvcyArIDEgPCBzdHJfbGVuKSkge1xuICAgICAgYzIgPSBzdHIuY2hhckNvZGVBdChtX3BvcyArIDEpO1xuICAgICAgaWYgKChjMiAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xuICAgICAgICBjID0gMHgxMDAwMCArICgoYyAtIDB4ZDgwMCkgPDwgMTApICsgKGMyIC0gMHhkYzAwKTtcbiAgICAgICAgbV9wb3MrKztcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGMgPCAweDgwKSB7XG4gICAgICAvKiBvbmUgYnl0ZSAqL1xuICAgICAgYnVmW2krK10gPSBjO1xuICAgIH0gZWxzZSBpZiAoYyA8IDB4ODAwKSB7XG4gICAgICAvKiB0d28gYnl0ZXMgKi9cbiAgICAgIGJ1ZltpKytdID0gMHhDMCB8IChjID4+PiA2KTtcbiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjICYgMHgzZik7XG4gICAgfSBlbHNlIGlmIChjIDwgMHgxMDAwMCkge1xuICAgICAgLyogdGhyZWUgYnl0ZXMgKi9cbiAgICAgIGJ1ZltpKytdID0gMHhFMCB8IChjID4+PiAxMik7XG4gICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyA+Pj4gNiAmIDB4M2YpO1xuICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgJiAweDNmKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLyogZm91ciBieXRlcyAqL1xuICAgICAgYnVmW2krK10gPSAweGYwIHwgKGMgPj4+IDE4KTtcbiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjID4+PiAxMiAmIDB4M2YpO1xuICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgPj4+IDYgJiAweDNmKTtcbiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjICYgMHgzZik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ1Zjtcbn07XG5cbi8vIEhlbHBlciAodXNlZCBpbiAyIHBsYWNlcylcbmZ1bmN0aW9uIGJ1ZjJiaW5zdHJpbmcoYnVmLCBsZW4pIHtcbiAgLy8gdXNlIGZhbGxiYWNrIGZvciBiaWcgYXJyYXlzIHRvIGF2b2lkIHN0YWNrIG92ZXJmbG93XG4gIGlmIChsZW4gPCA2NTUzNykge1xuICAgIGlmICgoYnVmLnN1YmFycmF5ICYmIFNUUl9BUFBMWV9VSUFfT0spIHx8ICghYnVmLnN1YmFycmF5ICYmIFNUUl9BUFBMWV9PSykpIHtcbiAgICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIHV0aWxzLnNocmlua0J1ZihidWYsIGxlbikpO1xuICAgIH1cbiAgfVxuXG4gIHZhciByZXN1bHQgPSAnJztcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgIHJlc3VsdCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG4vLyBDb252ZXJ0IGJ5dGUgYXJyYXkgdG8gYmluYXJ5IHN0cmluZ1xuZXhwb3J0cy5idWYyYmluc3RyaW5nID0gZnVuY3Rpb24gKGJ1Zikge1xuICByZXR1cm4gYnVmMmJpbnN0cmluZyhidWYsIGJ1Zi5sZW5ndGgpO1xufTtcblxuXG4vLyBDb252ZXJ0IGJpbmFyeSBzdHJpbmcgKHR5cGVkLCB3aGVuIHBvc3NpYmxlKVxuZXhwb3J0cy5iaW5zdHJpbmcyYnVmID0gZnVuY3Rpb24gKHN0cikge1xuICB2YXIgYnVmID0gbmV3IHV0aWxzLkJ1Zjgoc3RyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBidWYubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICBidWZbaV0gPSBzdHIuY2hhckNvZGVBdChpKTtcbiAgfVxuICByZXR1cm4gYnVmO1xufTtcblxuXG4vLyBjb252ZXJ0IGFycmF5IHRvIHN0cmluZ1xuZXhwb3J0cy5idWYyc3RyaW5nID0gZnVuY3Rpb24gKGJ1ZiwgbWF4KSB7XG4gIHZhciBpLCBvdXQsIGMsIGNfbGVuO1xuICB2YXIgbGVuID0gbWF4IHx8IGJ1Zi5sZW5ndGg7XG5cbiAgLy8gUmVzZXJ2ZSBtYXggcG9zc2libGUgbGVuZ3RoICgyIHdvcmRzIHBlciBjaGFyKVxuICAvLyBOQjogYnkgdW5rbm93biByZWFzb25zLCBBcnJheSBpcyBzaWduaWZpY2FudGx5IGZhc3RlciBmb3JcbiAgLy8gICAgIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkgdGhhbiBVaW50MTZBcnJheS5cbiAgdmFyIHV0ZjE2YnVmID0gbmV3IEFycmF5KGxlbiAqIDIpO1xuXG4gIGZvciAob3V0ID0gMCwgaSA9IDA7IGkgPCBsZW47KSB7XG4gICAgYyA9IGJ1ZltpKytdO1xuICAgIC8vIHF1aWNrIHByb2Nlc3MgYXNjaWlcbiAgICBpZiAoYyA8IDB4ODApIHsgdXRmMTZidWZbb3V0KytdID0gYzsgY29udGludWU7IH1cblxuICAgIGNfbGVuID0gX3V0ZjhsZW5bY107XG4gICAgLy8gc2tpcCA1ICYgNiBieXRlIGNvZGVzXG4gICAgaWYgKGNfbGVuID4gNCkgeyB1dGYxNmJ1ZltvdXQrK10gPSAweGZmZmQ7IGkgKz0gY19sZW4gLSAxOyBjb250aW51ZTsgfVxuXG4gICAgLy8gYXBwbHkgbWFzayBvbiBmaXJzdCBieXRlXG4gICAgYyAmPSBjX2xlbiA9PT0gMiA/IDB4MWYgOiBjX2xlbiA9PT0gMyA/IDB4MGYgOiAweDA3O1xuICAgIC8vIGpvaW4gdGhlIHJlc3RcbiAgICB3aGlsZSAoY19sZW4gPiAxICYmIGkgPCBsZW4pIHtcbiAgICAgIGMgPSAoYyA8PCA2KSB8IChidWZbaSsrXSAmIDB4M2YpO1xuICAgICAgY19sZW4tLTtcbiAgICB9XG5cbiAgICAvLyB0ZXJtaW5hdGVkIGJ5IGVuZCBvZiBzdHJpbmc/XG4gICAgaWYgKGNfbGVuID4gMSkgeyB1dGYxNmJ1ZltvdXQrK10gPSAweGZmZmQ7IGNvbnRpbnVlOyB9XG5cbiAgICBpZiAoYyA8IDB4MTAwMDApIHtcbiAgICAgIHV0ZjE2YnVmW291dCsrXSA9IGM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGMgLT0gMHgxMDAwMDtcbiAgICAgIHV0ZjE2YnVmW291dCsrXSA9IDB4ZDgwMCB8ICgoYyA+PiAxMCkgJiAweDNmZik7XG4gICAgICB1dGYxNmJ1ZltvdXQrK10gPSAweGRjMDAgfCAoYyAmIDB4M2ZmKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYnVmMmJpbnN0cmluZyh1dGYxNmJ1Ziwgb3V0KTtcbn07XG5cblxuLy8gQ2FsY3VsYXRlIG1heCBwb3NzaWJsZSBwb3NpdGlvbiBpbiB1dGY4IGJ1ZmZlcixcbi8vIHRoYXQgd2lsbCBub3QgYnJlYWsgc2VxdWVuY2UuIElmIHRoYXQncyBub3QgcG9zc2libGVcbi8vIC0gKHZlcnkgc21hbGwgbGltaXRzKSByZXR1cm4gbWF4IHNpemUgYXMgaXMuXG4vL1xuLy8gYnVmW10gLSB1dGY4IGJ5dGVzIGFycmF5XG4vLyBtYXggICAtIGxlbmd0aCBsaW1pdCAobWFuZGF0b3J5KTtcbmV4cG9ydHMudXRmOGJvcmRlciA9IGZ1bmN0aW9uIChidWYsIG1heCkge1xuICB2YXIgcG9zO1xuXG4gIG1heCA9IG1heCB8fCBidWYubGVuZ3RoO1xuICBpZiAobWF4ID4gYnVmLmxlbmd0aCkgeyBtYXggPSBidWYubGVuZ3RoOyB9XG5cbiAgLy8gZ28gYmFjayBmcm9tIGxhc3QgcG9zaXRpb24sIHVudGlsIHN0YXJ0IG9mIHNlcXVlbmNlIGZvdW5kXG4gIHBvcyA9IG1heCAtIDE7XG4gIHdoaWxlIChwb3MgPj0gMCAmJiAoYnVmW3Bvc10gJiAweEMwKSA9PT0gMHg4MCkgeyBwb3MtLTsgfVxuXG4gIC8vIFZlcnkgc21hbGwgYW5kIGJyb2tlbiBzZXF1ZW5jZSxcbiAgLy8gcmV0dXJuIG1heCwgYmVjYXVzZSB3ZSBzaG91bGQgcmV0dXJuIHNvbWV0aGluZyBhbnl3YXkuXG4gIGlmIChwb3MgPCAwKSB7IHJldHVybiBtYXg7IH1cblxuICAvLyBJZiB3ZSBjYW1lIHRvIHN0YXJ0IG9mIGJ1ZmZlciAtIHRoYXQgbWVhbnMgYnVmZmVyIGlzIHRvbyBzbWFsbCxcbiAgLy8gcmV0dXJuIG1heCB0b28uXG4gIGlmIChwb3MgPT09IDApIHsgcmV0dXJuIG1heDsgfVxuXG4gIHJldHVybiAocG9zICsgX3V0ZjhsZW5bYnVmW3Bvc11dID4gbWF4KSA/IHBvcyA6IG1heDtcbn07XG5cblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbi8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlclxuLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW5cbi8vXG4vLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxuLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4vLyBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuLy8gaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuLy9cbi8vIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4vLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4vLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuLy8gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbi8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuLy8gMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cblxuZnVuY3Rpb24gWlN0cmVhbSgpIHtcbiAgLyogbmV4dCBpbnB1dCBieXRlICovXG4gIHRoaXMuaW5wdXQgPSBudWxsOyAvLyBKUyBzcGVjaWZpYywgYmVjYXVzZSB3ZSBoYXZlIG5vIHBvaW50ZXJzXG4gIHRoaXMubmV4dF9pbiA9IDA7XG4gIC8qIG51bWJlciBvZiBieXRlcyBhdmFpbGFibGUgYXQgaW5wdXQgKi9cbiAgdGhpcy5hdmFpbF9pbiA9IDA7XG4gIC8qIHRvdGFsIG51bWJlciBvZiBpbnB1dCBieXRlcyByZWFkIHNvIGZhciAqL1xuICB0aGlzLnRvdGFsX2luID0gMDtcbiAgLyogbmV4dCBvdXRwdXQgYnl0ZSBzaG91bGQgYmUgcHV0IHRoZXJlICovXG4gIHRoaXMub3V0cHV0ID0gbnVsbDsgLy8gSlMgc3BlY2lmaWMsIGJlY2F1c2Ugd2UgaGF2ZSBubyBwb2ludGVyc1xuICB0aGlzLm5leHRfb3V0ID0gMDtcbiAgLyogcmVtYWluaW5nIGZyZWUgc3BhY2UgYXQgb3V0cHV0ICovXG4gIHRoaXMuYXZhaWxfb3V0ID0gMDtcbiAgLyogdG90YWwgbnVtYmVyIG9mIGJ5dGVzIG91dHB1dCBzbyBmYXIgKi9cbiAgdGhpcy50b3RhbF9vdXQgPSAwO1xuICAvKiBsYXN0IGVycm9yIG1lc3NhZ2UsIE5VTEwgaWYgbm8gZXJyb3IgKi9cbiAgdGhpcy5tc2cgPSAnJy8qWl9OVUxMKi87XG4gIC8qIG5vdCB2aXNpYmxlIGJ5IGFwcGxpY2F0aW9ucyAqL1xuICB0aGlzLnN0YXRlID0gbnVsbDtcbiAgLyogYmVzdCBndWVzcyBhYm91dCB0aGUgZGF0YSB0eXBlOiBiaW5hcnkgb3IgdGV4dCAqL1xuICB0aGlzLmRhdGFfdHlwZSA9IDIvKlpfVU5LTk9XTiovO1xuICAvKiBhZGxlcjMyIHZhbHVlIG9mIHRoZSB1bmNvbXByZXNzZWQgZGF0YSAqL1xuICB0aGlzLmFkbGVyID0gMDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBaU3RyZWFtO1xuXG5cbi8qKiovIH0pLFxuLyogNiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG4vLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXJcbi8vIChDKSAyMDE0LTIwMTcgVml0YWx5IFB1enJpbiBhbmQgQW5kcmV5IFR1cGl0c2luXG4vL1xuLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbi8vIHdhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuLy8gYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbi8vIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbi8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcbi8vXG4vLyAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuLy8gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbi8vICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbi8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG4vLyAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cbi8vIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIC8qIEFsbG93ZWQgZmx1c2ggdmFsdWVzOyBzZWUgZGVmbGF0ZSgpIGFuZCBpbmZsYXRlKCkgYmVsb3cgZm9yIGRldGFpbHMgKi9cbiAgWl9OT19GTFVTSDogICAgICAgICAwLFxuICBaX1BBUlRJQUxfRkxVU0g6ICAgIDEsXG4gIFpfU1lOQ19GTFVTSDogICAgICAgMixcbiAgWl9GVUxMX0ZMVVNIOiAgICAgICAzLFxuICBaX0ZJTklTSDogICAgICAgICAgIDQsXG4gIFpfQkxPQ0s6ICAgICAgICAgICAgNSxcbiAgWl9UUkVFUzogICAgICAgICAgICA2LFxuXG4gIC8qIFJldHVybiBjb2RlcyBmb3IgdGhlIGNvbXByZXNzaW9uL2RlY29tcHJlc3Npb24gZnVuY3Rpb25zLiBOZWdhdGl2ZSB2YWx1ZXNcbiAgKiBhcmUgZXJyb3JzLCBwb3NpdGl2ZSB2YWx1ZXMgYXJlIHVzZWQgZm9yIHNwZWNpYWwgYnV0IG5vcm1hbCBldmVudHMuXG4gICovXG4gIFpfT0s6ICAgICAgICAgICAgICAgMCxcbiAgWl9TVFJFQU1fRU5EOiAgICAgICAxLFxuICBaX05FRURfRElDVDogICAgICAgIDIsXG4gIFpfRVJSTk86ICAgICAgICAgICAtMSxcbiAgWl9TVFJFQU1fRVJST1I6ICAgIC0yLFxuICBaX0RBVEFfRVJST1I6ICAgICAgLTMsXG4gIC8vWl9NRU1fRVJST1I6ICAgICAtNCxcbiAgWl9CVUZfRVJST1I6ICAgICAgIC01LFxuICAvL1pfVkVSU0lPTl9FUlJPUjogLTYsXG5cbiAgLyogY29tcHJlc3Npb24gbGV2ZWxzICovXG4gIFpfTk9fQ09NUFJFU1NJT046ICAgICAgICAgMCxcbiAgWl9CRVNUX1NQRUVEOiAgICAgICAgICAgICAxLFxuICBaX0JFU1RfQ09NUFJFU1NJT046ICAgICAgIDksXG4gIFpfREVGQVVMVF9DT01QUkVTU0lPTjogICAtMSxcblxuXG4gIFpfRklMVEVSRUQ6ICAgICAgICAgICAgICAgMSxcbiAgWl9IVUZGTUFOX09OTFk6ICAgICAgICAgICAyLFxuICBaX1JMRTogICAgICAgICAgICAgICAgICAgIDMsXG4gIFpfRklYRUQ6ICAgICAgICAgICAgICAgICAgNCxcbiAgWl9ERUZBVUxUX1NUUkFURUdZOiAgICAgICAwLFxuXG4gIC8qIFBvc3NpYmxlIHZhbHVlcyBvZiB0aGUgZGF0YV90eXBlIGZpZWxkICh0aG91Z2ggc2VlIGluZmxhdGUoKSkgKi9cbiAgWl9CSU5BUlk6ICAgICAgICAgICAgICAgICAwLFxuICBaX1RFWFQ6ICAgICAgICAgICAgICAgICAgIDEsXG4gIC8vWl9BU0NJSTogICAgICAgICAgICAgICAgMSwgLy8gPSBaX1RFWFQgKGRlcHJlY2F0ZWQpXG4gIFpfVU5LTk9XTjogICAgICAgICAgICAgICAgMixcblxuICAvKiBUaGUgZGVmbGF0ZSBjb21wcmVzc2lvbiBtZXRob2QgKi9cbiAgWl9ERUZMQVRFRDogICAgICAgICAgICAgICA4XG4gIC8vWl9OVUxMOiAgICAgICAgICAgICAgICAgbnVsbCAvLyBVc2UgLTEgb3IgbnVsbCBpbmxpbmUsIGRlcGVuZGluZyBvbiB2YXIgdHlwZVxufTtcblxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIGV4Y2FsaWJ1cl8xID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcbnZhciBwYWtvID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcbnZhciBUaWxlZE1hcEZvcm1hdDtcbihmdW5jdGlvbiAoVGlsZWRNYXBGb3JtYXQpIHtcbiAgICAvKipcbiAgICAgKiBUTVggbWFwIGxheWVyIGZvcm1hdFxuICAgICAqIEB1bnN1cHBvcnRlZFxuICAgICAqL1xuICAgIFRpbGVkTWFwRm9ybWF0W1RpbGVkTWFwRm9ybWF0W1wiVE1YXCJdID0gMF0gPSBcIlRNWFwiO1xuICAgIC8qKlxuICAgICAqIEpTT04gbWFwIGxheWVyIGZvcm1hdFxuICAgICAqL1xuICAgIFRpbGVkTWFwRm9ybWF0W1RpbGVkTWFwRm9ybWF0W1wiSlNPTlwiXSA9IDFdID0gXCJKU09OXCI7XG59KShUaWxlZE1hcEZvcm1hdCA9IGV4cG9ydHMuVGlsZWRNYXBGb3JtYXQgfHwgKGV4cG9ydHMuVGlsZWRNYXBGb3JtYXQgPSB7fSkpO1xudmFyIFRpbGVkUmVzb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFRpbGVkUmVzb3VyY2UsIF9zdXBlcik7XG4gICAgZnVuY3Rpb24gVGlsZWRSZXNvdXJjZShwYXRoLCBtYXBGb3JtYXQpIHtcbiAgICAgICAgaWYgKG1hcEZvcm1hdCA9PT0gdm9pZCAwKSB7IG1hcEZvcm1hdCA9IFRpbGVkTWFwRm9ybWF0LkpTT047IH1cbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgc3dpdGNoIChtYXBGb3JtYXQpIHtcbiAgICAgICAgICAgIGNhc2UgVGlsZWRNYXBGb3JtYXQuSlNPTjpcbiAgICAgICAgICAgICAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHBhdGgsIFwianNvblwiKSB8fCB0aGlzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBcIlRoZSBmb3JtYXQgXCIgKyBtYXBGb3JtYXQgKyBcIiBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZC4gUGxlYXNlIGV4cG9ydCBUaWxlZCBtYXAgYXMgSlNPTi5cIjtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5tYXBGb3JtYXQgPSBtYXBGb3JtYXQ7XG4gICAgICAgIF90aGlzLmltYWdlUGF0aEFjY2Vzc29yID0gX3RoaXMuZXh0ZXJuYWxUaWxlc2V0UGF0aEFjY2Vzc29yID0gZnVuY3Rpb24gKHAsIHRpbGVzZXQpIHtcbiAgICAgICAgICAgIC8vIFVzZSBhYnNvbHV0ZSBwYXRoIGlmIHNwZWNpZmllZFxuICAgICAgICAgICAgaWYgKHAuaW5kZXhPZignLycpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBMb2FkIHJlbGF0aXZlIHRvIG1hcCBwYXRoXG4gICAgICAgICAgICB2YXIgcHAgPSBwYXRoLnNwbGl0KCcvJyk7XG4gICAgICAgICAgICB2YXIgcmVsUGF0aCA9IHBwLmNvbmNhdChbXSk7XG4gICAgICAgICAgICBpZiAocHAubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBmaWxlIHBhcnQgb2YgcGF0aFxuICAgICAgICAgICAgICAgIHJlbFBhdGguc3BsaWNlKC0xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbFBhdGgucHVzaChwKTtcbiAgICAgICAgICAgIHJldHVybiByZWxQYXRoLmpvaW4oJy8nKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICBUaWxlZFJlc291cmNlLnByb3RvdHlwZS5sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcCA9IG5ldyBleGNhbGlidXJfMS5Qcm9taXNlKCk7XG4gICAgICAgIF9zdXBlci5wcm90b3R5cGUubG9hZC5jYWxsKHRoaXMpLnRoZW4oZnVuY3Rpb24gKG1hcCkge1xuICAgICAgICAgICAgdmFyIHByb21pc2VzID0gW107XG4gICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggbG9hZGVkIHRpbGVzZXQgZGF0YVxuICAgICAgICAgICAgLy8gSWYgd2UgZmluZCBhbiBpbWFnZSBwcm9wZXJ0eSwgdGhlblxuICAgICAgICAgICAgLy8gbG9hZCB0aGUgaW1hZ2UgYW5kIHNwcml0ZVxuICAgICAgICAgICAgLy8gSWYgd2UgZmluZCBhIHNvdXJjZSBwcm9wZXJ0eSwgdGhlblxuICAgICAgICAgICAgLy8gbG9hZCB0aGUgdGlsZXNldCBkYXRhLCBtZXJnZSBpdCB3aXRoXG4gICAgICAgICAgICAvLyBleGlzdGluZyBkYXRhLCBhbmQgbG9hZCB0aGUgaW1hZ2UgYW5kIHNwcml0ZVxuICAgICAgICAgICAgX3RoaXMuZGF0YS50aWxlc2V0cy5mb3JFYWNoKGZ1bmN0aW9uICh0cykge1xuICAgICAgICAgICAgICAgIGlmICh0cy5zb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbGVzZXQgPSBuZXcgZXhjYWxpYnVyXzEuUmVzb3VyY2UoX3RoaXMuZXh0ZXJuYWxUaWxlc2V0UGF0aEFjY2Vzc29yKHRzLnNvdXJjZSwgdHMpLCBcImpzb25cIik7XG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2godGlsZXNldC5sb2FkKCkudGhlbihmdW5jdGlvbiAoZXh0ZXJuYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odHMsIGV4dGVybmFsKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gd2FpdCBvciBpbW1lZGlhdGVseSByZXNvbHZlIHBlbmRpbmcgcHJvbWlzZXNcbiAgICAgICAgICAgIC8vIGZvciBleHRlcm5hbCB0aWxlc2V0c1xuICAgICAgICAgICAgZXhjYWxpYnVyXzEuUHJvbWlzZS5qb2luLmFwcGx5KF90aGlzLCBwcm9taXNlcykudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gY2xlYXIgcGVuZGluZyBwcm9taXNlc1xuICAgICAgICAgICAgICAgIHByb21pc2VzID0gW107XG4gICAgICAgICAgICAgICAgLy8gcmV0cmlldmUgaW1hZ2VzIGZyb20gdGlsZXNldHMgYW5kIGNyZWF0ZSB0ZXh0dXJlc1xuICAgICAgICAgICAgICAgIF90aGlzLmRhdGEudGlsZXNldHMuZm9yRWFjaChmdW5jdGlvbiAodHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHR4ID0gbmV3IGV4Y2FsaWJ1cl8xLlRleHR1cmUoX3RoaXMuaW1hZ2VQYXRoQWNjZXNzb3IodHMuaW1hZ2UsIHRzKSk7XG4gICAgICAgICAgICAgICAgICAgIHRzLmltYWdlVGV4dHVyZSA9IHR4O1xuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHR4LmxvYWQoKSk7XG4gICAgICAgICAgICAgICAgICAgIGV4Y2FsaWJ1cl8xLkxvZ2dlci5nZXRJbnN0YW5jZSgpLmRlYnVnKFwiW1RpbGVkXSBMb2FkaW5nIGFzc29jaWF0ZWQgdGlsZXNldDogXCIgKyB0cy5pbWFnZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZXhjYWxpYnVyXzEuUHJvbWlzZS5qb2luLmFwcGx5KF90aGlzLCBwcm9taXNlcykudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHAucmVzb2x2ZShtYXApO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBwLnJlamVjdCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBwLnJlamVjdCh2YWx1ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwO1xuICAgIH07XG4gICAgVGlsZWRSZXNvdXJjZS5wcm90b3R5cGUucHJvY2Vzc0RhdGEgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAodHlwZW9mIGRhdGEgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgIHRocm93IFwiVGlsZWQgbWFwIHJlc291cmNlIFwiICsgdGhpcy5wYXRoICsgXCIgaXMgbm90IHRoZSBjb3JyZWN0IGNvbnRlbnQgdHlwZVwiO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhID09PSB2b2lkIDApIHtcbiAgICAgICAgICAgIHRocm93IFwiVGlsZWQgbWFwIHJlc291cmNlIFwiICsgdGhpcy5wYXRoICsgXCIgaXMgZW1wdHlcIjtcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKHRoaXMubWFwRm9ybWF0KSB7XG4gICAgICAgICAgICBjYXNlIFRpbGVkTWFwRm9ybWF0LkpTT046XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcnNlSnNvbk1hcChkYXRhKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgVGlsZWRSZXNvdXJjZS5wcm90b3R5cGUuZ2V0VGlsZXNldEZvclRpbGUgPSBmdW5jdGlvbiAoZ2lkKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSB0aGlzLmRhdGEudGlsZXNldHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHZhciB0cyA9IHRoaXMuZGF0YS50aWxlc2V0c1tpXTtcbiAgICAgICAgICAgIGlmICh0cy5maXJzdGdpZCA8PSBnaWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfTtcbiAgICBUaWxlZFJlc291cmNlLnByb3RvdHlwZS5nZXRUaWxlTWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbWFwID0gbmV3IGV4Y2FsaWJ1cl8xLlRpbGVNYXAoMCwgMCwgdGhpcy5kYXRhLnRpbGV3aWR0aCwgdGhpcy5kYXRhLnRpbGVoZWlnaHQsIHRoaXMuZGF0YS5oZWlnaHQsIHRoaXMuZGF0YS53aWR0aCk7XG4gICAgICAgIC8vIHJlZ2lzdGVyIHNwcml0ZSBzaGVldHMgZm9yIGVhY2ggdGlsZXNldCBpbiBtYXBcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMuZGF0YS50aWxlc2V0czsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciB0cyA9IF9hW19pXTtcbiAgICAgICAgICAgIHZhciBjb2xzID0gTWF0aC5mbG9vcih0cy5pbWFnZXdpZHRoIC8gdHMudGlsZXdpZHRoKTtcbiAgICAgICAgICAgIHZhciByb3dzID0gTWF0aC5mbG9vcih0cy5pbWFnZWhlaWdodCAvIHRzLnRpbGVoZWlnaHQpO1xuICAgICAgICAgICAgdmFyIHNzID0gbmV3IGV4Y2FsaWJ1cl8xLlNwcml0ZVNoZWV0KHRzLmltYWdlVGV4dHVyZSwgY29scywgcm93cywgdHMudGlsZXdpZHRoLCB0cy50aWxlaGVpZ2h0KTtcbiAgICAgICAgICAgIG1hcC5yZWdpc3RlclNwcml0ZVNoZWV0KHRzLmZpcnN0Z2lkLnRvU3RyaW5nKCksIHNzKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciBfYiA9IDAsIF9jID0gdGhpcy5kYXRhLmxheWVyczsgX2IgPCBfYy5sZW5ndGg7IF9iKyspIHtcbiAgICAgICAgICAgIHZhciBsYXllciA9IF9jW19iXTtcbiAgICAgICAgICAgIGlmIChsYXllci50eXBlID09PSBcInRpbGVsYXllclwiKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXllci5kYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBnaWQgPSBsYXllci5kYXRhW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZ2lkICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHMgPSB0aGlzLmdldFRpbGVzZXRGb3JUaWxlKGdpZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXAuZGF0YVtpXS5zcHJpdGVzLnB1c2gobmV3IGV4Y2FsaWJ1cl8xLlRpbGVTcHJpdGUodHMuZmlyc3RnaWQudG9TdHJpbmcoKSwgZ2lkIC0gdHMuZmlyc3RnaWQpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWFwO1xuICAgIH07XG4gICAgcmV0dXJuIFRpbGVkUmVzb3VyY2U7XG59KGV4Y2FsaWJ1cl8xLlJlc291cmNlKSk7XG5leHBvcnRzLmRlZmF1bHQgPSBUaWxlZFJlc291cmNlO1xuLyoqXG4gKiBIYW5kbGVzIHBhcnNpbmcgb2YgSlNPTiB0aWxlZCBkYXRhXG4gKi9cbnZhciBwYXJzZUpzb25NYXAgPSBmdW5jdGlvbiAoZGF0YSkge1xuICAgIC8vIERlY29tcHJlc3MgbGF5ZXJzXG4gICAgaWYgKGRhdGEubGF5ZXJzKSB7XG4gICAgICAgIGZvciAodmFyIF9pID0gMCwgX2EgPSBkYXRhLmxheWVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgIHZhciBsYXllciA9IF9hW19pXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgbGF5ZXIuZGF0YSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIGlmIChsYXllci5lbmNvZGluZyA9PT0gXCJiYXNlNjRcIikge1xuICAgICAgICAgICAgICAgICAgICBsYXllci5kYXRhID0gZGVjb21wcmVzc29ycy5kZWNvbXByZXNzQmFzZTY0KGxheWVyLmRhdGEsIGxheWVyLmVuY29kaW5nLCBsYXllci5jb21wcmVzc2lvbiB8fCBcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBsYXllci5kYXRhID0gZGVjb21wcmVzc29ycy5kZWNvbXByZXNzQ3N2KGxheWVyLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xufTtcbi8qKlxuICogRGVjb21wcmVzc2lvbiBpbXBsZW1lbnRhdGlvbnNcbiAqL1xudmFyIGRlY29tcHJlc3NvcnMgPSB7XG4gICAgLyoqXG4gICAgICogU2ltcGxlc3QgKHBhc3NlcyBkYXRhIHRocm91Z2ggc2luY2UgaXQncyB1bmNvbXByZXNzZWQpXG4gICAgICovXG4gICAgZGVjb21wcmVzc0NzdjogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBVc2VzIGJhc2U2NC5qcyBpbXBsZW1lbnRhdGlvbiB0byBkZWNvZGUgc3RyaW5nIGludG8gYnl0ZSBhcnJheVxuICAgICAqIGFuZCB0aGVuIGNvbnZlcnRzICh3aXRoL3dpdGhvdXQgY29tcHJlc3Npb24pIHRvIGFycmF5IG9mIG51bWJlcnNcbiAgICAgKi9cbiAgICBkZWNvbXByZXNzQmFzZTY0OiBmdW5jdGlvbiAoYjY0LCBlbmNvZGluZywgY29tcHJlc3Npb24pIHtcbiAgICAgICAgdmFyIGksIGosIGwsIHRtcCwgcGxhY2VIb2xkZXJzLCBhcnI7XG4gICAgICAgIGlmIChiNjQubGVuZ3RoICUgNCA+IDApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBzdHJpbmcuIExlbmd0aCBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNCcpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBBcnIgPSAodHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgPyBVaW50OEFycmF5XG4gICAgICAgICAgICA6IEFycmF5O1xuICAgICAgICB2YXIgUExVUyA9ICcrJy5jaGFyQ29kZUF0KDApO1xuICAgICAgICB2YXIgU0xBU0ggPSAnLycuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgdmFyIE5VTUJFUiA9ICcwJy5jaGFyQ29kZUF0KDApO1xuICAgICAgICB2YXIgTE9XRVIgPSAnYScuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgdmFyIFVQUEVSID0gJ0EnLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIHZhciBQTFVTX1VSTF9TQUZFID0gJy0nLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIHZhciBTTEFTSF9VUkxfU0FGRSA9ICdfJy5jaGFyQ29kZUF0KDApO1xuICAgICAgICBmdW5jdGlvbiBkZWNvZGUoZWx0KSB7XG4gICAgICAgICAgICB2YXIgY29kZSA9IGVsdC5jaGFyQ29kZUF0KDApO1xuICAgICAgICAgICAgaWYgKGNvZGUgPT09IFBMVVMgfHwgY29kZSA9PT0gUExVU19VUkxfU0FGRSlcbiAgICAgICAgICAgICAgICByZXR1cm4gNjI7IC8vICcrJ1xuICAgICAgICAgICAgaWYgKGNvZGUgPT09IFNMQVNIIHx8IGNvZGUgPT09IFNMQVNIX1VSTF9TQUZFKVxuICAgICAgICAgICAgICAgIHJldHVybiA2MzsgLy8gJy8nXG4gICAgICAgICAgICBpZiAoY29kZSA8IE5VTUJFUilcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7IC8vIG5vIG1hdGNoXG4gICAgICAgICAgICBpZiAoY29kZSA8IE5VTUJFUiArIDEwKVxuICAgICAgICAgICAgICAgIHJldHVybiBjb2RlIC0gTlVNQkVSICsgMjYgKyAyNjtcbiAgICAgICAgICAgIGlmIChjb2RlIDwgVVBQRVIgKyAyNilcbiAgICAgICAgICAgICAgICByZXR1cm4gY29kZSAtIFVQUEVSO1xuICAgICAgICAgICAgaWYgKGNvZGUgPCBMT1dFUiArIDI2KVxuICAgICAgICAgICAgICAgIHJldHVybiBjb2RlIC0gTE9XRVIgKyAyNjtcbiAgICAgICAgfVxuICAgICAgICAvLyB0aGUgbnVtYmVyIG9mIGVxdWFsIHNpZ25zIChwbGFjZSBob2xkZXJzKVxuICAgICAgICAvLyBpZiB0aGVyZSBhcmUgdHdvIHBsYWNlaG9sZGVycywgdGhhbiB0aGUgdHdvIGNoYXJhY3RlcnMgYmVmb3JlIGl0XG4gICAgICAgIC8vIHJlcHJlc2VudCBvbmUgYnl0ZVxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSwgdGhlbiB0aGUgdGhyZWUgY2hhcmFjdGVycyBiZWZvcmUgaXQgcmVwcmVzZW50IDIgYnl0ZXNcbiAgICAgICAgLy8gdGhpcyBpcyBqdXN0IGEgY2hlYXAgaGFjayB0byBub3QgZG8gaW5kZXhPZiB0d2ljZVxuICAgICAgICB2YXIgbGVuID0gYjY0Lmxlbmd0aDtcbiAgICAgICAgcGxhY2VIb2xkZXJzID0gYjY0LmNoYXJBdChsZW4gLSAyKSA9PT0gJz0nID8gMiA6IGI2NC5jaGFyQXQobGVuIC0gMSkgPT09ICc9JyA/IDEgOiAwO1xuICAgICAgICAvLyBiYXNlNjQgaXMgNC8zICsgdXAgdG8gdHdvIGNoYXJhY3RlcnMgb2YgdGhlIG9yaWdpbmFsIGRhdGFcbiAgICAgICAgYXJyID0gbmV3IEFycihiNjQubGVuZ3RoICogMyAvIDQgLSBwbGFjZUhvbGRlcnMpO1xuICAgICAgICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG4gICAgICAgIGwgPSBwbGFjZUhvbGRlcnMgPiAwID8gYjY0Lmxlbmd0aCAtIDQgOiBiNjQubGVuZ3RoO1xuICAgICAgICB2YXIgTCA9IDA7XG4gICAgICAgIGZ1bmN0aW9uIHB1c2godikge1xuICAgICAgICAgICAgYXJyW0wrK10gPSB2O1xuICAgICAgICB9XG4gICAgICAgIGZvciAoaSA9IDAsIGogPSAwOyBpIDwgbDsgaSArPSA0LCBqICs9IDMpIHtcbiAgICAgICAgICAgIHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMTgpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPDwgMTIpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAyKSkgPDwgNikgfCBkZWNvZGUoYjY0LmNoYXJBdChpICsgMykpO1xuICAgICAgICAgICAgcHVzaCgodG1wICYgMHhGRjAwMDApID4+IDE2KTtcbiAgICAgICAgICAgIHB1c2goKHRtcCAmIDB4RkYwMCkgPj4gOCk7XG4gICAgICAgICAgICBwdXNoKHRtcCAmIDB4RkYpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwbGFjZUhvbGRlcnMgPT09IDIpIHtcbiAgICAgICAgICAgIHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMikgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDEpKSA+PiA0KTtcbiAgICAgICAgICAgIHB1c2godG1wICYgMHhGRik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocGxhY2VIb2xkZXJzID09PSAxKSB7XG4gICAgICAgICAgICB0bXAgPSAoZGVjb2RlKGI2NC5jaGFyQXQoaSkpIDw8IDEwKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpIDw8IDQpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAyKSkgPj4gMik7XG4gICAgICAgICAgICBwdXNoKCh0bXAgPj4gOCkgJiAweEZGKTtcbiAgICAgICAgICAgIHB1c2godG1wICYgMHhGRik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQnl0ZSBhcnJheVxuICAgICAgICAvLyBoYW5kbGUgY29tcHJlc3Npb25cbiAgICAgICAgaWYgKFwiemxpYlwiID09PSBjb21wcmVzc2lvbiB8fCBcImd6aXBcIiA9PT0gY29tcHJlc3Npb24pIHtcbiAgICAgICAgICAgIGFyciA9IHBha28uaW5mbGF0ZShhcnIpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB0b051bWJlciA9IGZ1bmN0aW9uIChieXRlQXJyYXkpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IDA7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gYnl0ZUFycmF5Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSAodmFsdWUgKiAyNTYpICsgYnl0ZUFycmF5W2ldICogMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHJlc3VsdExlbiA9IGFyci5sZW5ndGggLyA0O1xuICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEFycmF5KHJlc3VsdExlbik7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCByZXN1bHRMZW47IGkrKykge1xuICAgICAgICAgICAgcmVzdWx0W2ldID0gdG9OdW1iZXIoYXJyLnNsaWNlKGkgKiA0LCBpICogNCArIDMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn07XG5cblxuLyoqKi8gfSksXG4vKiA4ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbm1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV84X187XG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbi8vIFRvcCBsZXZlbCBmaWxlIGlzIGp1c3QgYSBtaXhpbiBvZiBzdWJtb2R1bGVzICYgY29uc3RhbnRzXG5cblxudmFyIGFzc2lnbiAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCkuYXNzaWduO1xuXG52YXIgZGVmbGF0ZSAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG52YXIgaW5mbGF0ZSAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG52YXIgY29uc3RhbnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcblxudmFyIHBha28gPSB7fTtcblxuYXNzaWduKHBha28sIGRlZmxhdGUsIGluZmxhdGUsIGNvbnN0YW50cyk7XG5cbm1vZHVsZS5leHBvcnRzID0gcGFrbztcblxuXG4vKioqLyB9KSxcbi8qIDEwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cblxudmFyIHpsaWJfZGVmbGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xudmFyIHV0aWxzICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG52YXIgc3RyaW5ncyAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcbnZhciBtc2cgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xudmFyIFpTdHJlYW0gICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qIFB1YmxpYyBjb25zdGFudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG52YXIgWl9OT19GTFVTSCAgICAgID0gMDtcbnZhciBaX0ZJTklTSCAgICAgICAgPSA0O1xuXG52YXIgWl9PSyAgICAgICAgICAgID0gMDtcbnZhciBaX1NUUkVBTV9FTkQgICAgPSAxO1xudmFyIFpfU1lOQ19GTFVTSCAgICA9IDI7XG5cbnZhciBaX0RFRkFVTFRfQ09NUFJFU1NJT04gPSAtMTtcblxudmFyIFpfREVGQVVMVF9TVFJBVEVHWSAgICA9IDA7XG5cbnZhciBaX0RFRkxBVEVEICA9IDg7XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cblxuLyoqXG4gKiBjbGFzcyBEZWZsYXRlXG4gKlxuICogR2VuZXJpYyBKUy1zdHlsZSB3cmFwcGVyIGZvciB6bGliIGNhbGxzLiBJZiB5b3UgZG9uJ3QgbmVlZFxuICogc3RyZWFtaW5nIGJlaGF2aW91ciAtIHVzZSBtb3JlIHNpbXBsZSBmdW5jdGlvbnM6IFtbZGVmbGF0ZV1dLFxuICogW1tkZWZsYXRlUmF3XV0gYW5kIFtbZ3ppcF1dLlxuICoqL1xuXG4vKiBpbnRlcm5hbFxuICogRGVmbGF0ZS5jaHVua3MgLT4gQXJyYXlcbiAqXG4gKiBDaHVua3Mgb2Ygb3V0cHV0IGRhdGEsIGlmIFtbRGVmbGF0ZSNvbkRhdGFdXSBub3Qgb3ZlcnJpZGRlbi5cbiAqKi9cblxuLyoqXG4gKiBEZWZsYXRlLnJlc3VsdCAtPiBVaW50OEFycmF5fEFycmF5XG4gKlxuICogQ29tcHJlc3NlZCByZXN1bHQsIGdlbmVyYXRlZCBieSBkZWZhdWx0IFtbRGVmbGF0ZSNvbkRhdGFdXVxuICogYW5kIFtbRGVmbGF0ZSNvbkVuZF1dIGhhbmRsZXJzLiBGaWxsZWQgYWZ0ZXIgeW91IHB1c2ggbGFzdCBjaHVua1xuICogKGNhbGwgW1tEZWZsYXRlI3B1c2hdXSB3aXRoIGBaX0ZJTklTSGAgLyBgdHJ1ZWAgcGFyYW0pICBvciBpZiB5b3VcbiAqIHB1c2ggYSBjaHVuayB3aXRoIGV4cGxpY2l0IGZsdXNoIChjYWxsIFtbRGVmbGF0ZSNwdXNoXV0gd2l0aFxuICogYFpfU1lOQ19GTFVTSGAgcGFyYW0pLlxuICoqL1xuXG4vKipcbiAqIERlZmxhdGUuZXJyIC0+IE51bWJlclxuICpcbiAqIEVycm9yIGNvZGUgYWZ0ZXIgZGVmbGF0ZSBmaW5pc2hlZC4gMCAoWl9PSykgb24gc3VjY2Vzcy5cbiAqIFlvdSB3aWxsIG5vdCBuZWVkIGl0IGluIHJlYWwgbGlmZSwgYmVjYXVzZSBkZWZsYXRlIGVycm9yc1xuICogYXJlIHBvc3NpYmxlIG9ubHkgb24gd3Jvbmcgb3B0aW9ucyBvciBiYWQgYG9uRGF0YWAgLyBgb25FbmRgXG4gKiBjdXN0b20gaGFuZGxlcnMuXG4gKiovXG5cbi8qKlxuICogRGVmbGF0ZS5tc2cgLT4gU3RyaW5nXG4gKlxuICogRXJyb3IgbWVzc2FnZSwgaWYgW1tEZWZsYXRlLmVycl1dICE9IDBcbiAqKi9cblxuXG4vKipcbiAqIG5ldyBEZWZsYXRlKG9wdGlvbnMpXG4gKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgZGVmbGF0ZSBvcHRpb25zLlxuICpcbiAqIENyZWF0ZXMgbmV3IGRlZmxhdG9yIGluc3RhbmNlIHdpdGggc3BlY2lmaWVkIHBhcmFtcy4gVGhyb3dzIGV4Y2VwdGlvblxuICogb24gYmFkIHBhcmFtcy4gU3VwcG9ydGVkIG9wdGlvbnM6XG4gKlxuICogLSBgbGV2ZWxgXG4gKiAtIGB3aW5kb3dCaXRzYFxuICogLSBgbWVtTGV2ZWxgXG4gKiAtIGBzdHJhdGVneWBcbiAqIC0gYGRpY3Rpb25hcnlgXG4gKlxuICogW2h0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZF0oaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkKVxuICogZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlc2UuXG4gKlxuICogQWRkaXRpb25hbCBvcHRpb25zLCBmb3IgaW50ZXJuYWwgbmVlZHM6XG4gKlxuICogLSBgY2h1bmtTaXplYCAtIHNpemUgb2YgZ2VuZXJhdGVkIGRhdGEgY2h1bmtzICgxNksgYnkgZGVmYXVsdClcbiAqIC0gYHJhd2AgKEJvb2xlYW4pIC0gZG8gcmF3IGRlZmxhdGVcbiAqIC0gYGd6aXBgIChCb29sZWFuKSAtIGNyZWF0ZSBnemlwIHdyYXBwZXJcbiAqIC0gYHRvYCAoU3RyaW5nKSAtIGlmIGVxdWFsIHRvICdzdHJpbmcnLCB0aGVuIHJlc3VsdCB3aWxsIGJlIFwiYmluYXJ5IHN0cmluZ1wiXG4gKiAgICAoZWFjaCBjaGFyIGNvZGUgWzAuLjI1NV0pXG4gKiAtIGBoZWFkZXJgIChPYmplY3QpIC0gY3VzdG9tIGhlYWRlciBmb3IgZ3ppcFxuICogICAtIGB0ZXh0YCAoQm9vbGVhbikgLSB0cnVlIGlmIGNvbXByZXNzZWQgZGF0YSBiZWxpZXZlZCB0byBiZSB0ZXh0XG4gKiAgIC0gYHRpbWVgIChOdW1iZXIpIC0gbW9kaWZpY2F0aW9uIHRpbWUsIHVuaXggdGltZXN0YW1wXG4gKiAgIC0gYG9zYCAoTnVtYmVyKSAtIG9wZXJhdGlvbiBzeXN0ZW0gY29kZVxuICogICAtIGBleHRyYWAgKEFycmF5KSAtIGFycmF5IG9mIGJ5dGVzIHdpdGggZXh0cmEgZGF0YSAobWF4IDY1NTM2KVxuICogICAtIGBuYW1lYCAoU3RyaW5nKSAtIGZpbGUgbmFtZSAoYmluYXJ5IHN0cmluZylcbiAqICAgLSBgY29tbWVudGAgKFN0cmluZykgLSBjb21tZW50IChiaW5hcnkgc3RyaW5nKVxuICogICAtIGBoY3JjYCAoQm9vbGVhbikgLSB0cnVlIGlmIGhlYWRlciBjcmMgc2hvdWxkIGJlIGFkZGVkXG4gKlxuICogIyMjIyMgRXhhbXBsZTpcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiB2YXIgcGFrbyA9IHJlcXVpcmUoJ3Bha28nKVxuICogICAsIGNodW5rMSA9IFVpbnQ4QXJyYXkoWzEsMiwzLDQsNSw2LDcsOCw5XSlcbiAqICAgLCBjaHVuazIgPSBVaW50OEFycmF5KFsxMCwxMSwxMiwxMywxNCwxNSwxNiwxNywxOCwxOV0pO1xuICpcbiAqIHZhciBkZWZsYXRlID0gbmV3IHBha28uRGVmbGF0ZSh7IGxldmVsOiAzfSk7XG4gKlxuICogZGVmbGF0ZS5wdXNoKGNodW5rMSwgZmFsc2UpO1xuICogZGVmbGF0ZS5wdXNoKGNodW5rMiwgdHJ1ZSk7ICAvLyB0cnVlIC0+IGxhc3QgY2h1bmtcbiAqXG4gKiBpZiAoZGVmbGF0ZS5lcnIpIHsgdGhyb3cgbmV3IEVycm9yKGRlZmxhdGUuZXJyKTsgfVxuICpcbiAqIGNvbnNvbGUubG9nKGRlZmxhdGUucmVzdWx0KTtcbiAqIGBgYFxuICoqL1xuZnVuY3Rpb24gRGVmbGF0ZShvcHRpb25zKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBEZWZsYXRlKSkgcmV0dXJuIG5ldyBEZWZsYXRlKG9wdGlvbnMpO1xuXG4gIHRoaXMub3B0aW9ucyA9IHV0aWxzLmFzc2lnbih7XG4gICAgbGV2ZWw6IFpfREVGQVVMVF9DT01QUkVTU0lPTixcbiAgICBtZXRob2Q6IFpfREVGTEFURUQsXG4gICAgY2h1bmtTaXplOiAxNjM4NCxcbiAgICB3aW5kb3dCaXRzOiAxNSxcbiAgICBtZW1MZXZlbDogOCxcbiAgICBzdHJhdGVneTogWl9ERUZBVUxUX1NUUkFURUdZLFxuICAgIHRvOiAnJ1xuICB9LCBvcHRpb25zIHx8IHt9KTtcblxuICB2YXIgb3B0ID0gdGhpcy5vcHRpb25zO1xuXG4gIGlmIChvcHQucmF3ICYmIChvcHQud2luZG93Qml0cyA+IDApKSB7XG4gICAgb3B0LndpbmRvd0JpdHMgPSAtb3B0LndpbmRvd0JpdHM7XG4gIH1cblxuICBlbHNlIGlmIChvcHQuZ3ppcCAmJiAob3B0LndpbmRvd0JpdHMgPiAwKSAmJiAob3B0LndpbmRvd0JpdHMgPCAxNikpIHtcbiAgICBvcHQud2luZG93Qml0cyArPSAxNjtcbiAgfVxuXG4gIHRoaXMuZXJyICAgID0gMDsgICAgICAvLyBlcnJvciBjb2RlLCBpZiBoYXBwZW5zICgwID0gWl9PSylcbiAgdGhpcy5tc2cgICAgPSAnJzsgICAgIC8vIGVycm9yIG1lc3NhZ2VcbiAgdGhpcy5lbmRlZCAgPSBmYWxzZTsgIC8vIHVzZWQgdG8gYXZvaWQgbXVsdGlwbGUgb25FbmQoKSBjYWxsc1xuICB0aGlzLmNodW5rcyA9IFtdOyAgICAgLy8gY2h1bmtzIG9mIGNvbXByZXNzZWQgZGF0YVxuXG4gIHRoaXMuc3RybSA9IG5ldyBaU3RyZWFtKCk7XG4gIHRoaXMuc3RybS5hdmFpbF9vdXQgPSAwO1xuXG4gIHZhciBzdGF0dXMgPSB6bGliX2RlZmxhdGUuZGVmbGF0ZUluaXQyKFxuICAgIHRoaXMuc3RybSxcbiAgICBvcHQubGV2ZWwsXG4gICAgb3B0Lm1ldGhvZCxcbiAgICBvcHQud2luZG93Qml0cyxcbiAgICBvcHQubWVtTGV2ZWwsXG4gICAgb3B0LnN0cmF0ZWd5XG4gICk7XG5cbiAgaWYgKHN0YXR1cyAhPT0gWl9PSykge1xuICAgIHRocm93IG5ldyBFcnJvcihtc2dbc3RhdHVzXSk7XG4gIH1cblxuICBpZiAob3B0LmhlYWRlcikge1xuICAgIHpsaWJfZGVmbGF0ZS5kZWZsYXRlU2V0SGVhZGVyKHRoaXMuc3RybSwgb3B0LmhlYWRlcik7XG4gIH1cblxuICBpZiAob3B0LmRpY3Rpb25hcnkpIHtcbiAgICB2YXIgZGljdDtcbiAgICAvLyBDb252ZXJ0IGRhdGEgaWYgbmVlZGVkXG4gICAgaWYgKHR5cGVvZiBvcHQuZGljdGlvbmFyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIElmIHdlIG5lZWQgdG8gY29tcHJlc3MgdGV4dCwgY2hhbmdlIGVuY29kaW5nIHRvIHV0ZjguXG4gICAgICBkaWN0ID0gc3RyaW5ncy5zdHJpbmcyYnVmKG9wdC5kaWN0aW9uYXJ5KTtcbiAgICB9IGVsc2UgaWYgKHRvU3RyaW5nLmNhbGwob3B0LmRpY3Rpb25hcnkpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nKSB7XG4gICAgICBkaWN0ID0gbmV3IFVpbnQ4QXJyYXkob3B0LmRpY3Rpb25hcnkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaWN0ID0gb3B0LmRpY3Rpb25hcnk7XG4gICAgfVxuXG4gICAgc3RhdHVzID0gemxpYl9kZWZsYXRlLmRlZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSwgZGljdCk7XG5cbiAgICBpZiAoc3RhdHVzICE9PSBaX09LKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IobXNnW3N0YXR1c10pO1xuICAgIH1cblxuICAgIHRoaXMuX2RpY3Rfc2V0ID0gdHJ1ZTtcbiAgfVxufVxuXG4vKipcbiAqIERlZmxhdGUjcHVzaChkYXRhWywgbW9kZV0pIC0+IEJvb2xlYW5cbiAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheXxBcnJheUJ1ZmZlcnxTdHJpbmcpOiBpbnB1dCBkYXRhLiBTdHJpbmdzIHdpbGwgYmVcbiAqICAgY29udmVydGVkIHRvIHV0ZjggYnl0ZSBzZXF1ZW5jZS5cbiAqIC0gbW9kZSAoTnVtYmVyfEJvb2xlYW4pOiAwLi42IGZvciBjb3JyZXNwb25kaW5nIFpfTk9fRkxVU0guLlpfVFJFRSBtb2Rlcy5cbiAqICAgU2VlIGNvbnN0YW50cy4gU2tpcHBlZCBvciBgZmFsc2VgIG1lYW5zIFpfTk9fRkxVU0gsIGB0cnVlYCBtZWFucyBaX0ZJTklTSC5cbiAqXG4gKiBTZW5kcyBpbnB1dCBkYXRhIHRvIGRlZmxhdGUgcGlwZSwgZ2VuZXJhdGluZyBbW0RlZmxhdGUjb25EYXRhXV0gY2FsbHMgd2l0aFxuICogbmV3IGNvbXByZXNzZWQgY2h1bmtzLiBSZXR1cm5zIGB0cnVlYCBvbiBzdWNjZXNzLiBUaGUgbGFzdCBkYXRhIGJsb2NrIG11c3QgaGF2ZVxuICogbW9kZSBaX0ZJTklTSCAob3IgYHRydWVgKS4gVGhhdCB3aWxsIGZsdXNoIGludGVybmFsIHBlbmRpbmcgYnVmZmVycyBhbmQgY2FsbFxuICogW1tEZWZsYXRlI29uRW5kXV0uIEZvciBpbnRlcmltIGV4cGxpY2l0IGZsdXNoZXMgKHdpdGhvdXQgZW5kaW5nIHRoZSBzdHJlYW0pIHlvdVxuICogY2FuIHVzZSBtb2RlIFpfU1lOQ19GTFVTSCwga2VlcGluZyB0aGUgY29tcHJlc3Npb24gY29udGV4dC5cbiAqXG4gKiBPbiBmYWlsIGNhbGwgW1tEZWZsYXRlI29uRW5kXV0gd2l0aCBlcnJvciBjb2RlIGFuZCByZXR1cm4gZmFsc2UuXG4gKlxuICogV2Ugc3Ryb25nbHkgcmVjb21tZW5kIHRvIHVzZSBgVWludDhBcnJheWAgb24gaW5wdXQgZm9yIGJlc3Qgc3BlZWQgKG91dHB1dFxuICogYXJyYXkgZm9ybWF0IGlzIGRldGVjdGVkIGF1dG9tYXRpY2FsbHkpLiBBbHNvLCBkb24ndCBza2lwIGxhc3QgcGFyYW0gYW5kIGFsd2F5c1xuICogdXNlIHRoZSBzYW1lIHR5cGUgaW4geW91ciBjb2RlIChib29sZWFuIG9yIG51bWJlcikuIFRoYXQgd2lsbCBpbXByb3ZlIEpTIHNwZWVkLlxuICpcbiAqIEZvciByZWd1bGFyIGBBcnJheWAtcyBtYWtlIHN1cmUgYWxsIGVsZW1lbnRzIGFyZSBbMC4uMjU1XS5cbiAqXG4gKiAjIyMjIyBFeGFtcGxlXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogcHVzaChjaHVuaywgZmFsc2UpOyAvLyBwdXNoIG9uZSBvZiBkYXRhIGNodW5rc1xuICogLi4uXG4gKiBwdXNoKGNodW5rLCB0cnVlKTsgIC8vIHB1c2ggbGFzdCBjaHVua1xuICogYGBgXG4gKiovXG5EZWZsYXRlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGRhdGEsIG1vZGUpIHtcbiAgdmFyIHN0cm0gPSB0aGlzLnN0cm07XG4gIHZhciBjaHVua1NpemUgPSB0aGlzLm9wdGlvbnMuY2h1bmtTaXplO1xuICB2YXIgc3RhdHVzLCBfbW9kZTtcblxuICBpZiAodGhpcy5lbmRlZCkgeyByZXR1cm4gZmFsc2U7IH1cblxuICBfbW9kZSA9IChtb2RlID09PSB+fm1vZGUpID8gbW9kZSA6ICgobW9kZSA9PT0gdHJ1ZSkgPyBaX0ZJTklTSCA6IFpfTk9fRkxVU0gpO1xuXG4gIC8vIENvbnZlcnQgZGF0YSBpZiBuZWVkZWRcbiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgIC8vIElmIHdlIG5lZWQgdG8gY29tcHJlc3MgdGV4dCwgY2hhbmdlIGVuY29kaW5nIHRvIHV0ZjguXG4gICAgc3RybS5pbnB1dCA9IHN0cmluZ3Muc3RyaW5nMmJ1ZihkYXRhKTtcbiAgfSBlbHNlIGlmICh0b1N0cmluZy5jYWxsKGRhdGEpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nKSB7XG4gICAgc3RybS5pbnB1dCA9IG5ldyBVaW50OEFycmF5KGRhdGEpO1xuICB9IGVsc2Uge1xuICAgIHN0cm0uaW5wdXQgPSBkYXRhO1xuICB9XG5cbiAgc3RybS5uZXh0X2luID0gMDtcbiAgc3RybS5hdmFpbF9pbiA9IHN0cm0uaW5wdXQubGVuZ3RoO1xuXG4gIGRvIHtcbiAgICBpZiAoc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHN0cm0ub3V0cHV0ID0gbmV3IHV0aWxzLkJ1ZjgoY2h1bmtTaXplKTtcbiAgICAgIHN0cm0ubmV4dF9vdXQgPSAwO1xuICAgICAgc3RybS5hdmFpbF9vdXQgPSBjaHVua1NpemU7XG4gICAgfVxuICAgIHN0YXR1cyA9IHpsaWJfZGVmbGF0ZS5kZWZsYXRlKHN0cm0sIF9tb2RlKTsgICAgLyogbm8gYmFkIHJldHVybiB2YWx1ZSAqL1xuXG4gICAgaWYgKHN0YXR1cyAhPT0gWl9TVFJFQU1fRU5EICYmIHN0YXR1cyAhPT0gWl9PSykge1xuICAgICAgdGhpcy5vbkVuZChzdGF0dXMpO1xuICAgICAgdGhpcy5lbmRlZCA9IHRydWU7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCB8fCAoc3RybS5hdmFpbF9pbiA9PT0gMCAmJiAoX21vZGUgPT09IFpfRklOSVNIIHx8IF9tb2RlID09PSBaX1NZTkNfRkxVU0gpKSkge1xuICAgICAgaWYgKHRoaXMub3B0aW9ucy50byA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5vbkRhdGEoc3RyaW5ncy5idWYyYmluc3RyaW5nKHV0aWxzLnNocmlua0J1ZihzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCkpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMub25EYXRhKHV0aWxzLnNocmlua0J1ZihzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCkpO1xuICAgICAgfVxuICAgIH1cbiAgfSB3aGlsZSAoKHN0cm0uYXZhaWxfaW4gPiAwIHx8IHN0cm0uYXZhaWxfb3V0ID09PSAwKSAmJiBzdGF0dXMgIT09IFpfU1RSRUFNX0VORCk7XG5cbiAgLy8gRmluYWxpemUgb24gdGhlIGxhc3QgY2h1bmsuXG4gIGlmIChfbW9kZSA9PT0gWl9GSU5JU0gpIHtcbiAgICBzdGF0dXMgPSB6bGliX2RlZmxhdGUuZGVmbGF0ZUVuZCh0aGlzLnN0cm0pO1xuICAgIHRoaXMub25FbmQoc3RhdHVzKTtcbiAgICB0aGlzLmVuZGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gc3RhdHVzID09PSBaX09LO1xuICB9XG5cbiAgLy8gY2FsbGJhY2sgaW50ZXJpbSByZXN1bHRzIGlmIFpfU1lOQ19GTFVTSC5cbiAgaWYgKF9tb2RlID09PSBaX1NZTkNfRkxVU0gpIHtcbiAgICB0aGlzLm9uRW5kKFpfT0spO1xuICAgIHN0cm0uYXZhaWxfb3V0ID0gMDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuXG4vKipcbiAqIERlZmxhdGUjb25EYXRhKGNodW5rKSAtPiBWb2lkXG4gKiAtIGNodW5rIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IG91dHB1dCBkYXRhLiBUeXBlIG9mIGFycmF5IGRlcGVuZHNcbiAqICAgb24ganMgZW5naW5lIHN1cHBvcnQuIFdoZW4gc3RyaW5nIG91dHB1dCByZXF1ZXN0ZWQsIGVhY2ggY2h1bmtcbiAqICAgd2lsbCBiZSBzdHJpbmcuXG4gKlxuICogQnkgZGVmYXVsdCwgc3RvcmVzIGRhdGEgYmxvY2tzIGluIGBjaHVua3NbXWAgcHJvcGVydHkgYW5kIGdsdWVcbiAqIHRob3NlIGluIGBvbkVuZGAuIE92ZXJyaWRlIHRoaXMgaGFuZGxlciwgaWYgeW91IG5lZWQgYW5vdGhlciBiZWhhdmlvdXIuXG4gKiovXG5EZWZsYXRlLnByb3RvdHlwZS5vbkRhdGEgPSBmdW5jdGlvbiAoY2h1bmspIHtcbiAgdGhpcy5jaHVua3MucHVzaChjaHVuayk7XG59O1xuXG5cbi8qKlxuICogRGVmbGF0ZSNvbkVuZChzdGF0dXMpIC0+IFZvaWRcbiAqIC0gc3RhdHVzIChOdW1iZXIpOiBkZWZsYXRlIHN0YXR1cy4gMCAoWl9PSykgb24gc3VjY2VzcyxcbiAqICAgb3RoZXIgaWYgbm90LlxuICpcbiAqIENhbGxlZCBvbmNlIGFmdGVyIHlvdSB0ZWxsIGRlZmxhdGUgdGhhdCB0aGUgaW5wdXQgc3RyZWFtIGlzXG4gKiBjb21wbGV0ZSAoWl9GSU5JU0gpIG9yIHNob3VsZCBiZSBmbHVzaGVkIChaX1NZTkNfRkxVU0gpXG4gKiBvciBpZiBhbiBlcnJvciBoYXBwZW5lZC4gQnkgZGVmYXVsdCAtIGpvaW4gY29sbGVjdGVkIGNodW5rcyxcbiAqIGZyZWUgbWVtb3J5IGFuZCBmaWxsIGByZXN1bHRzYCAvIGBlcnJgIHByb3BlcnRpZXMuXG4gKiovXG5EZWZsYXRlLnByb3RvdHlwZS5vbkVuZCA9IGZ1bmN0aW9uIChzdGF0dXMpIHtcbiAgLy8gT24gc3VjY2VzcyAtIGpvaW5cbiAgaWYgKHN0YXR1cyA9PT0gWl9PSykge1xuICAgIGlmICh0aGlzLm9wdGlvbnMudG8gPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLnJlc3VsdCA9IHRoaXMuY2h1bmtzLmpvaW4oJycpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlc3VsdCA9IHV0aWxzLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpO1xuICAgIH1cbiAgfVxuICB0aGlzLmNodW5rcyA9IFtdO1xuICB0aGlzLmVyciA9IHN0YXR1cztcbiAgdGhpcy5tc2cgPSB0aGlzLnN0cm0ubXNnO1xufTtcblxuXG4vKipcbiAqIGRlZmxhdGUoZGF0YVssIG9wdGlvbnNdKSAtPiBVaW50OEFycmF5fEFycmF5fFN0cmluZ1xuICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IGlucHV0IGRhdGEgdG8gY29tcHJlc3MuXG4gKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgZGVmbGF0ZSBvcHRpb25zLlxuICpcbiAqIENvbXByZXNzIGBkYXRhYCB3aXRoIGRlZmxhdGUgYWxnb3JpdGhtIGFuZCBgb3B0aW9uc2AuXG4gKlxuICogU3VwcG9ydGVkIG9wdGlvbnMgYXJlOlxuICpcbiAqIC0gbGV2ZWxcbiAqIC0gd2luZG93Qml0c1xuICogLSBtZW1MZXZlbFxuICogLSBzdHJhdGVneVxuICogLSBkaWN0aW9uYXJ5XG4gKlxuICogW2h0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZF0oaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkKVxuICogZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlc2UuXG4gKlxuICogU3VnYXIgKG9wdGlvbnMpOlxuICpcbiAqIC0gYHJhd2AgKEJvb2xlYW4pIC0gc2F5IHRoYXQgd2Ugd29yayB3aXRoIHJhdyBzdHJlYW0sIGlmIHlvdSBkb24ndCB3aXNoIHRvIHNwZWNpZnlcbiAqICAgbmVnYXRpdmUgd2luZG93Qml0cyBpbXBsaWNpdGx5LlxuICogLSBgdG9gIChTdHJpbmcpIC0gaWYgZXF1YWwgdG8gJ3N0cmluZycsIHRoZW4gcmVzdWx0IHdpbGwgYmUgXCJiaW5hcnkgc3RyaW5nXCJcbiAqICAgIChlYWNoIGNoYXIgY29kZSBbMC4uMjU1XSlcbiAqXG4gKiAjIyMjIyBFeGFtcGxlOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIHZhciBwYWtvID0gcmVxdWlyZSgncGFrbycpXG4gKiAgICwgZGF0YSA9IFVpbnQ4QXJyYXkoWzEsMiwzLDQsNSw2LDcsOCw5XSk7XG4gKlxuICogY29uc29sZS5sb2cocGFrby5kZWZsYXRlKGRhdGEpKTtcbiAqIGBgYFxuICoqL1xuZnVuY3Rpb24gZGVmbGF0ZShpbnB1dCwgb3B0aW9ucykge1xuICB2YXIgZGVmbGF0b3IgPSBuZXcgRGVmbGF0ZShvcHRpb25zKTtcblxuICBkZWZsYXRvci5wdXNoKGlucHV0LCB0cnVlKTtcblxuICAvLyBUaGF0IHdpbGwgbmV2ZXIgaGFwcGVucywgaWYgeW91IGRvbid0IGNoZWF0IHdpdGggb3B0aW9ucyA6KVxuICBpZiAoZGVmbGF0b3IuZXJyKSB7IHRocm93IGRlZmxhdG9yLm1zZyB8fCBtc2dbZGVmbGF0b3IuZXJyXTsgfVxuXG4gIHJldHVybiBkZWZsYXRvci5yZXN1bHQ7XG59XG5cblxuLyoqXG4gKiBkZWZsYXRlUmF3KGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxBcnJheXxTdHJpbmdcbiAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheXxTdHJpbmcpOiBpbnB1dCBkYXRhIHRvIGNvbXByZXNzLlxuICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGRlZmxhdGUgb3B0aW9ucy5cbiAqXG4gKiBUaGUgc2FtZSBhcyBbW2RlZmxhdGVdXSwgYnV0IGNyZWF0ZXMgcmF3IGRhdGEsIHdpdGhvdXQgd3JhcHBlclxuICogKGhlYWRlciBhbmQgYWRsZXIzMiBjcmMpLlxuICoqL1xuZnVuY3Rpb24gZGVmbGF0ZVJhdyhpbnB1dCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgb3B0aW9ucy5yYXcgPSB0cnVlO1xuICByZXR1cm4gZGVmbGF0ZShpbnB1dCwgb3B0aW9ucyk7XG59XG5cblxuLyoqXG4gKiBnemlwKGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxBcnJheXxTdHJpbmdcbiAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheXxTdHJpbmcpOiBpbnB1dCBkYXRhIHRvIGNvbXByZXNzLlxuICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGRlZmxhdGUgb3B0aW9ucy5cbiAqXG4gKiBUaGUgc2FtZSBhcyBbW2RlZmxhdGVdXSwgYnV0IGNyZWF0ZSBnemlwIHdyYXBwZXIgaW5zdGVhZCBvZlxuICogZGVmbGF0ZSBvbmUuXG4gKiovXG5mdW5jdGlvbiBnemlwKGlucHV0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBvcHRpb25zLmd6aXAgPSB0cnVlO1xuICByZXR1cm4gZGVmbGF0ZShpbnB1dCwgb3B0aW9ucyk7XG59XG5cblxuZXhwb3J0cy5EZWZsYXRlID0gRGVmbGF0ZTtcbmV4cG9ydHMuZGVmbGF0ZSA9IGRlZmxhdGU7XG5leHBvcnRzLmRlZmxhdGVSYXcgPSBkZWZsYXRlUmF3O1xuZXhwb3J0cy5nemlwID0gZ3ppcDtcblxuXG4vKioqLyB9KSxcbi8qIDExICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbi8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlclxuLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW5cbi8vXG4vLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxuLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4vLyBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuLy8gaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuLy9cbi8vIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4vLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4vLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuLy8gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbi8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuLy8gMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cblxudmFyIHV0aWxzICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xudmFyIHRyZWVzICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKTtcbnZhciBhZGxlcjMyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcbnZhciBjcmMzMiAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcbnZhciBtc2cgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKTtcblxuLyogUHVibGljIGNvbnN0YW50cyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cblxuLyogQWxsb3dlZCBmbHVzaCB2YWx1ZXM7IHNlZSBkZWZsYXRlKCkgYW5kIGluZmxhdGUoKSBiZWxvdyBmb3IgZGV0YWlscyAqL1xudmFyIFpfTk9fRkxVU0ggICAgICA9IDA7XG52YXIgWl9QQVJUSUFMX0ZMVVNIID0gMTtcbi8vdmFyIFpfU1lOQ19GTFVTSCAgICA9IDI7XG52YXIgWl9GVUxMX0ZMVVNIICAgID0gMztcbnZhciBaX0ZJTklTSCAgICAgICAgPSA0O1xudmFyIFpfQkxPQ0sgICAgICAgICA9IDU7XG4vL3ZhciBaX1RSRUVTICAgICAgICAgPSA2O1xuXG5cbi8qIFJldHVybiBjb2RlcyBmb3IgdGhlIGNvbXByZXNzaW9uL2RlY29tcHJlc3Npb24gZnVuY3Rpb25zLiBOZWdhdGl2ZSB2YWx1ZXNcbiAqIGFyZSBlcnJvcnMsIHBvc2l0aXZlIHZhbHVlcyBhcmUgdXNlZCBmb3Igc3BlY2lhbCBidXQgbm9ybWFsIGV2ZW50cy5cbiAqL1xudmFyIFpfT0sgICAgICAgICAgICA9IDA7XG52YXIgWl9TVFJFQU1fRU5EICAgID0gMTtcbi8vdmFyIFpfTkVFRF9ESUNUICAgICA9IDI7XG4vL3ZhciBaX0VSUk5PICAgICAgICAgPSAtMTtcbnZhciBaX1NUUkVBTV9FUlJPUiAgPSAtMjtcbnZhciBaX0RBVEFfRVJST1IgICAgPSAtMztcbi8vdmFyIFpfTUVNX0VSUk9SICAgICA9IC00O1xudmFyIFpfQlVGX0VSUk9SICAgICA9IC01O1xuLy92YXIgWl9WRVJTSU9OX0VSUk9SID0gLTY7XG5cblxuLyogY29tcHJlc3Npb24gbGV2ZWxzICovXG4vL3ZhciBaX05PX0NPTVBSRVNTSU9OICAgICAgPSAwO1xuLy92YXIgWl9CRVNUX1NQRUVEICAgICAgICAgID0gMTtcbi8vdmFyIFpfQkVTVF9DT01QUkVTU0lPTiAgICA9IDk7XG52YXIgWl9ERUZBVUxUX0NPTVBSRVNTSU9OID0gLTE7XG5cblxudmFyIFpfRklMVEVSRUQgICAgICAgICAgICA9IDE7XG52YXIgWl9IVUZGTUFOX09OTFkgICAgICAgID0gMjtcbnZhciBaX1JMRSAgICAgICAgICAgICAgICAgPSAzO1xudmFyIFpfRklYRUQgICAgICAgICAgICAgICA9IDQ7XG52YXIgWl9ERUZBVUxUX1NUUkFURUdZICAgID0gMDtcblxuLyogUG9zc2libGUgdmFsdWVzIG9mIHRoZSBkYXRhX3R5cGUgZmllbGQgKHRob3VnaCBzZWUgaW5mbGF0ZSgpKSAqL1xuLy92YXIgWl9CSU5BUlkgICAgICAgICAgICAgID0gMDtcbi8vdmFyIFpfVEVYVCAgICAgICAgICAgICAgICA9IDE7XG4vL3ZhciBaX0FTQ0lJICAgICAgICAgICAgICAgPSAxOyAvLyA9IFpfVEVYVFxudmFyIFpfVU5LTk9XTiAgICAgICAgICAgICA9IDI7XG5cblxuLyogVGhlIGRlZmxhdGUgY29tcHJlc3Npb24gbWV0aG9kICovXG52YXIgWl9ERUZMQVRFRCAgPSA4O1xuXG4vKj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5cbnZhciBNQVhfTUVNX0xFVkVMID0gOTtcbi8qIE1heGltdW0gdmFsdWUgZm9yIG1lbUxldmVsIGluIGRlZmxhdGVJbml0MiAqL1xudmFyIE1BWF9XQklUUyA9IDE1O1xuLyogMzJLIExaNzcgd2luZG93ICovXG52YXIgREVGX01FTV9MRVZFTCA9IDg7XG5cblxudmFyIExFTkdUSF9DT0RFUyAgPSAyOTtcbi8qIG51bWJlciBvZiBsZW5ndGggY29kZXMsIG5vdCBjb3VudGluZyB0aGUgc3BlY2lhbCBFTkRfQkxPQ0sgY29kZSAqL1xudmFyIExJVEVSQUxTICAgICAgPSAyNTY7XG4vKiBudW1iZXIgb2YgbGl0ZXJhbCBieXRlcyAwLi4yNTUgKi9cbnZhciBMX0NPREVTICAgICAgID0gTElURVJBTFMgKyAxICsgTEVOR1RIX0NPREVTO1xuLyogbnVtYmVyIG9mIExpdGVyYWwgb3IgTGVuZ3RoIGNvZGVzLCBpbmNsdWRpbmcgdGhlIEVORF9CTE9DSyBjb2RlICovXG52YXIgRF9DT0RFUyAgICAgICA9IDMwO1xuLyogbnVtYmVyIG9mIGRpc3RhbmNlIGNvZGVzICovXG52YXIgQkxfQ09ERVMgICAgICA9IDE5O1xuLyogbnVtYmVyIG9mIGNvZGVzIHVzZWQgdG8gdHJhbnNmZXIgdGhlIGJpdCBsZW5ndGhzICovXG52YXIgSEVBUF9TSVpFICAgICA9IDIgKiBMX0NPREVTICsgMTtcbi8qIG1heGltdW0gaGVhcCBzaXplICovXG52YXIgTUFYX0JJVFMgID0gMTU7XG4vKiBBbGwgY29kZXMgbXVzdCBub3QgZXhjZWVkIE1BWF9CSVRTIGJpdHMgKi9cblxudmFyIE1JTl9NQVRDSCA9IDM7XG52YXIgTUFYX01BVENIID0gMjU4O1xudmFyIE1JTl9MT09LQUhFQUQgPSAoTUFYX01BVENIICsgTUlOX01BVENIICsgMSk7XG5cbnZhciBQUkVTRVRfRElDVCA9IDB4MjA7XG5cbnZhciBJTklUX1NUQVRFID0gNDI7XG52YXIgRVhUUkFfU1RBVEUgPSA2OTtcbnZhciBOQU1FX1NUQVRFID0gNzM7XG52YXIgQ09NTUVOVF9TVEFURSA9IDkxO1xudmFyIEhDUkNfU1RBVEUgPSAxMDM7XG52YXIgQlVTWV9TVEFURSA9IDExMztcbnZhciBGSU5JU0hfU1RBVEUgPSA2NjY7XG5cbnZhciBCU19ORUVEX01PUkUgICAgICA9IDE7IC8qIGJsb2NrIG5vdCBjb21wbGV0ZWQsIG5lZWQgbW9yZSBpbnB1dCBvciBtb3JlIG91dHB1dCAqL1xudmFyIEJTX0JMT0NLX0RPTkUgICAgID0gMjsgLyogYmxvY2sgZmx1c2ggcGVyZm9ybWVkICovXG52YXIgQlNfRklOSVNIX1NUQVJURUQgPSAzOyAvKiBmaW5pc2ggc3RhcnRlZCwgbmVlZCBvbmx5IG1vcmUgb3V0cHV0IGF0IG5leHQgZGVmbGF0ZSAqL1xudmFyIEJTX0ZJTklTSF9ET05FICAgID0gNDsgLyogZmluaXNoIGRvbmUsIGFjY2VwdCBubyBtb3JlIGlucHV0IG9yIG91dHB1dCAqL1xuXG52YXIgT1NfQ09ERSA9IDB4MDM7IC8vIFVuaXggOikgLiBEb24ndCBkZXRlY3QsIHVzZSB0aGlzIGRlZmF1bHQuXG5cbmZ1bmN0aW9uIGVycihzdHJtLCBlcnJvckNvZGUpIHtcbiAgc3RybS5tc2cgPSBtc2dbZXJyb3JDb2RlXTtcbiAgcmV0dXJuIGVycm9yQ29kZTtcbn1cblxuZnVuY3Rpb24gcmFuayhmKSB7XG4gIHJldHVybiAoKGYpIDw8IDEpIC0gKChmKSA+IDQgPyA5IDogMCk7XG59XG5cbmZ1bmN0aW9uIHplcm8oYnVmKSB7IHZhciBsZW4gPSBidWYubGVuZ3RoOyB3aGlsZSAoLS1sZW4gPj0gMCkgeyBidWZbbGVuXSA9IDA7IH0gfVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEZsdXNoIGFzIG11Y2ggcGVuZGluZyBvdXRwdXQgYXMgcG9zc2libGUuIEFsbCBkZWZsYXRlKCkgb3V0cHV0IGdvZXNcbiAqIHRocm91Z2ggdGhpcyBmdW5jdGlvbiBzbyBzb21lIGFwcGxpY2F0aW9ucyBtYXkgd2lzaCB0byBtb2RpZnkgaXRcbiAqIHRvIGF2b2lkIGFsbG9jYXRpbmcgYSBsYXJnZSBzdHJtLT5vdXRwdXQgYnVmZmVyIGFuZCBjb3B5aW5nIGludG8gaXQuXG4gKiAoU2VlIGFsc28gcmVhZF9idWYoKSkuXG4gKi9cbmZ1bmN0aW9uIGZsdXNoX3BlbmRpbmcoc3RybSkge1xuICB2YXIgcyA9IHN0cm0uc3RhdGU7XG5cbiAgLy9fdHJfZmx1c2hfYml0cyhzKTtcbiAgdmFyIGxlbiA9IHMucGVuZGluZztcbiAgaWYgKGxlbiA+IHN0cm0uYXZhaWxfb3V0KSB7XG4gICAgbGVuID0gc3RybS5hdmFpbF9vdXQ7XG4gIH1cbiAgaWYgKGxlbiA9PT0gMCkgeyByZXR1cm47IH1cblxuICB1dGlscy5hcnJheVNldChzdHJtLm91dHB1dCwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nX291dCwgbGVuLCBzdHJtLm5leHRfb3V0KTtcbiAgc3RybS5uZXh0X291dCArPSBsZW47XG4gIHMucGVuZGluZ19vdXQgKz0gbGVuO1xuICBzdHJtLnRvdGFsX291dCArPSBsZW47XG4gIHN0cm0uYXZhaWxfb3V0IC09IGxlbjtcbiAgcy5wZW5kaW5nIC09IGxlbjtcbiAgaWYgKHMucGVuZGluZyA9PT0gMCkge1xuICAgIHMucGVuZGluZ19vdXQgPSAwO1xuICB9XG59XG5cblxuZnVuY3Rpb24gZmx1c2hfYmxvY2tfb25seShzLCBsYXN0KSB7XG4gIHRyZWVzLl90cl9mbHVzaF9ibG9jayhzLCAocy5ibG9ja19zdGFydCA+PSAwID8gcy5ibG9ja19zdGFydCA6IC0xKSwgcy5zdHJzdGFydCAtIHMuYmxvY2tfc3RhcnQsIGxhc3QpO1xuICBzLmJsb2NrX3N0YXJ0ID0gcy5zdHJzdGFydDtcbiAgZmx1c2hfcGVuZGluZyhzLnN0cm0pO1xufVxuXG5cbmZ1bmN0aW9uIHB1dF9ieXRlKHMsIGIpIHtcbiAgcy5wZW5kaW5nX2J1ZltzLnBlbmRpbmcrK10gPSBiO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFB1dCBhIHNob3J0IGluIHRoZSBwZW5kaW5nIGJ1ZmZlci4gVGhlIDE2LWJpdCB2YWx1ZSBpcyBwdXQgaW4gTVNCIG9yZGVyLlxuICogSU4gYXNzZXJ0aW9uOiB0aGUgc3RyZWFtIHN0YXRlIGlzIGNvcnJlY3QgYW5kIHRoZXJlIGlzIGVub3VnaCByb29tIGluXG4gKiBwZW5kaW5nX2J1Zi5cbiAqL1xuZnVuY3Rpb24gcHV0U2hvcnRNU0IocywgYikge1xuLy8gIHB1dF9ieXRlKHMsIChCeXRlKShiID4+IDgpKTtcbi8vICBwdXRfYnl0ZShzLCAoQnl0ZSkoYiAmIDB4ZmYpKTtcbiAgcy5wZW5kaW5nX2J1ZltzLnBlbmRpbmcrK10gPSAoYiA+Pj4gOCkgJiAweGZmO1xuICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IGIgJiAweGZmO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogUmVhZCBhIG5ldyBidWZmZXIgZnJvbSB0aGUgY3VycmVudCBpbnB1dCBzdHJlYW0sIHVwZGF0ZSB0aGUgYWRsZXIzMlxuICogYW5kIHRvdGFsIG51bWJlciBvZiBieXRlcyByZWFkLiAgQWxsIGRlZmxhdGUoKSBpbnB1dCBnb2VzIHRocm91Z2hcbiAqIHRoaXMgZnVuY3Rpb24gc28gc29tZSBhcHBsaWNhdGlvbnMgbWF5IHdpc2ggdG8gbW9kaWZ5IGl0IHRvIGF2b2lkXG4gKiBhbGxvY2F0aW5nIGEgbGFyZ2Ugc3RybS0+aW5wdXQgYnVmZmVyIGFuZCBjb3B5aW5nIGZyb20gaXQuXG4gKiAoU2VlIGFsc28gZmx1c2hfcGVuZGluZygpKS5cbiAqL1xuZnVuY3Rpb24gcmVhZF9idWYoc3RybSwgYnVmLCBzdGFydCwgc2l6ZSkge1xuICB2YXIgbGVuID0gc3RybS5hdmFpbF9pbjtcblxuICBpZiAobGVuID4gc2l6ZSkgeyBsZW4gPSBzaXplOyB9XG4gIGlmIChsZW4gPT09IDApIHsgcmV0dXJuIDA7IH1cblxuICBzdHJtLmF2YWlsX2luIC09IGxlbjtcblxuICAvLyB6bWVtY3B5KGJ1Ziwgc3RybS0+bmV4dF9pbiwgbGVuKTtcbiAgdXRpbHMuYXJyYXlTZXQoYnVmLCBzdHJtLmlucHV0LCBzdHJtLm5leHRfaW4sIGxlbiwgc3RhcnQpO1xuICBpZiAoc3RybS5zdGF0ZS53cmFwID09PSAxKSB7XG4gICAgc3RybS5hZGxlciA9IGFkbGVyMzIoc3RybS5hZGxlciwgYnVmLCBsZW4sIHN0YXJ0KTtcbiAgfVxuXG4gIGVsc2UgaWYgKHN0cm0uc3RhdGUud3JhcCA9PT0gMikge1xuICAgIHN0cm0uYWRsZXIgPSBjcmMzMihzdHJtLmFkbGVyLCBidWYsIGxlbiwgc3RhcnQpO1xuICB9XG5cbiAgc3RybS5uZXh0X2luICs9IGxlbjtcbiAgc3RybS50b3RhbF9pbiArPSBsZW47XG5cbiAgcmV0dXJuIGxlbjtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFNldCBtYXRjaF9zdGFydCB0byB0aGUgbG9uZ2VzdCBtYXRjaCBzdGFydGluZyBhdCB0aGUgZ2l2ZW4gc3RyaW5nIGFuZFxuICogcmV0dXJuIGl0cyBsZW5ndGguIE1hdGNoZXMgc2hvcnRlciBvciBlcXVhbCB0byBwcmV2X2xlbmd0aCBhcmUgZGlzY2FyZGVkLFxuICogaW4gd2hpY2ggY2FzZSB0aGUgcmVzdWx0IGlzIGVxdWFsIHRvIHByZXZfbGVuZ3RoIGFuZCBtYXRjaF9zdGFydCBpc1xuICogZ2FyYmFnZS5cbiAqIElOIGFzc2VydGlvbnM6IGN1cl9tYXRjaCBpcyB0aGUgaGVhZCBvZiB0aGUgaGFzaCBjaGFpbiBmb3IgdGhlIGN1cnJlbnRcbiAqICAgc3RyaW5nIChzdHJzdGFydCkgYW5kIGl0cyBkaXN0YW5jZSBpcyA8PSBNQVhfRElTVCwgYW5kIHByZXZfbGVuZ3RoID49IDFcbiAqIE9VVCBhc3NlcnRpb246IHRoZSBtYXRjaCBsZW5ndGggaXMgbm90IGdyZWF0ZXIgdGhhbiBzLT5sb29rYWhlYWQuXG4gKi9cbmZ1bmN0aW9uIGxvbmdlc3RfbWF0Y2gocywgY3VyX21hdGNoKSB7XG4gIHZhciBjaGFpbl9sZW5ndGggPSBzLm1heF9jaGFpbl9sZW5ndGg7ICAgICAgLyogbWF4IGhhc2ggY2hhaW4gbGVuZ3RoICovXG4gIHZhciBzY2FuID0gcy5zdHJzdGFydDsgLyogY3VycmVudCBzdHJpbmcgKi9cbiAgdmFyIG1hdGNoOyAgICAgICAgICAgICAgICAgICAgICAgLyogbWF0Y2hlZCBzdHJpbmcgKi9cbiAgdmFyIGxlbjsgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBsZW5ndGggb2YgY3VycmVudCBtYXRjaCAqL1xuICB2YXIgYmVzdF9sZW4gPSBzLnByZXZfbGVuZ3RoOyAgICAgICAgICAgICAgLyogYmVzdCBtYXRjaCBsZW5ndGggc28gZmFyICovXG4gIHZhciBuaWNlX21hdGNoID0gcy5uaWNlX21hdGNoOyAgICAgICAgICAgICAvKiBzdG9wIGlmIG1hdGNoIGxvbmcgZW5vdWdoICovXG4gIHZhciBsaW1pdCA9IChzLnN0cnN0YXJ0ID4gKHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkpID9cbiAgICAgIHMuc3Ryc3RhcnQgLSAocy53X3NpemUgLSBNSU5fTE9PS0FIRUFEKSA6IDAvKk5JTCovO1xuXG4gIHZhciBfd2luID0gcy53aW5kb3c7IC8vIHNob3J0Y3V0XG5cbiAgdmFyIHdtYXNrID0gcy53X21hc2s7XG4gIHZhciBwcmV2ICA9IHMucHJldjtcblxuICAvKiBTdG9wIHdoZW4gY3VyX21hdGNoIGJlY29tZXMgPD0gbGltaXQuIFRvIHNpbXBsaWZ5IHRoZSBjb2RlLFxuICAgKiB3ZSBwcmV2ZW50IG1hdGNoZXMgd2l0aCB0aGUgc3RyaW5nIG9mIHdpbmRvdyBpbmRleCAwLlxuICAgKi9cblxuICB2YXIgc3RyZW5kID0gcy5zdHJzdGFydCArIE1BWF9NQVRDSDtcbiAgdmFyIHNjYW5fZW5kMSAgPSBfd2luW3NjYW4gKyBiZXN0X2xlbiAtIDFdO1xuICB2YXIgc2Nhbl9lbmQgICA9IF93aW5bc2NhbiArIGJlc3RfbGVuXTtcblxuICAvKiBUaGUgY29kZSBpcyBvcHRpbWl6ZWQgZm9yIEhBU0hfQklUUyA+PSA4IGFuZCBNQVhfTUFUQ0gtMiBtdWx0aXBsZSBvZiAxNi5cbiAgICogSXQgaXMgZWFzeSB0byBnZXQgcmlkIG9mIHRoaXMgb3B0aW1pemF0aW9uIGlmIG5lY2Vzc2FyeS5cbiAgICovXG4gIC8vIEFzc2VydChzLT5oYXNoX2JpdHMgPj0gOCAmJiBNQVhfTUFUQ0ggPT0gMjU4LCBcIkNvZGUgdG9vIGNsZXZlclwiKTtcblxuICAvKiBEbyBub3Qgd2FzdGUgdG9vIG11Y2ggdGltZSBpZiB3ZSBhbHJlYWR5IGhhdmUgYSBnb29kIG1hdGNoOiAqL1xuICBpZiAocy5wcmV2X2xlbmd0aCA+PSBzLmdvb2RfbWF0Y2gpIHtcbiAgICBjaGFpbl9sZW5ndGggPj49IDI7XG4gIH1cbiAgLyogRG8gbm90IGxvb2sgZm9yIG1hdGNoZXMgYmV5b25kIHRoZSBlbmQgb2YgdGhlIGlucHV0LiBUaGlzIGlzIG5lY2Vzc2FyeVxuICAgKiB0byBtYWtlIGRlZmxhdGUgZGV0ZXJtaW5pc3RpYy5cbiAgICovXG4gIGlmIChuaWNlX21hdGNoID4gcy5sb29rYWhlYWQpIHsgbmljZV9tYXRjaCA9IHMubG9va2FoZWFkOyB9XG5cbiAgLy8gQXNzZXJ0KCh1bGcpcy0+c3Ryc3RhcnQgPD0gcy0+d2luZG93X3NpemUtTUlOX0xPT0tBSEVBRCwgXCJuZWVkIGxvb2thaGVhZFwiKTtcblxuICBkbyB7XG4gICAgLy8gQXNzZXJ0KGN1cl9tYXRjaCA8IHMtPnN0cnN0YXJ0LCBcIm5vIGZ1dHVyZVwiKTtcbiAgICBtYXRjaCA9IGN1cl9tYXRjaDtcblxuICAgIC8qIFNraXAgdG8gbmV4dCBtYXRjaCBpZiB0aGUgbWF0Y2ggbGVuZ3RoIGNhbm5vdCBpbmNyZWFzZVxuICAgICAqIG9yIGlmIHRoZSBtYXRjaCBsZW5ndGggaXMgbGVzcyB0aGFuIDIuICBOb3RlIHRoYXQgdGhlIGNoZWNrcyBiZWxvd1xuICAgICAqIGZvciBpbnN1ZmZpY2llbnQgbG9va2FoZWFkIG9ubHkgb2NjdXIgb2NjYXNpb25hbGx5IGZvciBwZXJmb3JtYW5jZVxuICAgICAqIHJlYXNvbnMuICBUaGVyZWZvcmUgdW5pbml0aWFsaXplZCBtZW1vcnkgd2lsbCBiZSBhY2Nlc3NlZCwgYW5kXG4gICAgICogY29uZGl0aW9uYWwganVtcHMgd2lsbCBiZSBtYWRlIHRoYXQgZGVwZW5kIG9uIHRob3NlIHZhbHVlcy5cbiAgICAgKiBIb3dldmVyIHRoZSBsZW5ndGggb2YgdGhlIG1hdGNoIGlzIGxpbWl0ZWQgdG8gdGhlIGxvb2thaGVhZCwgc29cbiAgICAgKiB0aGUgb3V0cHV0IG9mIGRlZmxhdGUgaXMgbm90IGFmZmVjdGVkIGJ5IHRoZSB1bmluaXRpYWxpemVkIHZhbHVlcy5cbiAgICAgKi9cblxuICAgIGlmIChfd2luW21hdGNoICsgYmVzdF9sZW5dICAgICAhPT0gc2Nhbl9lbmQgIHx8XG4gICAgICAgIF93aW5bbWF0Y2ggKyBiZXN0X2xlbiAtIDFdICE9PSBzY2FuX2VuZDEgfHxcbiAgICAgICAgX3dpblttYXRjaF0gICAgICAgICAgICAgICAgIT09IF93aW5bc2Nhbl0gfHxcbiAgICAgICAgX3dpblsrK21hdGNoXSAgICAgICAgICAgICAgIT09IF93aW5bc2NhbiArIDFdKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvKiBUaGUgY2hlY2sgYXQgYmVzdF9sZW4tMSBjYW4gYmUgcmVtb3ZlZCBiZWNhdXNlIGl0IHdpbGwgYmUgbWFkZVxuICAgICAqIGFnYWluIGxhdGVyLiAoVGhpcyBoZXVyaXN0aWMgaXMgbm90IGFsd2F5cyBhIHdpbi4pXG4gICAgICogSXQgaXMgbm90IG5lY2Vzc2FyeSB0byBjb21wYXJlIHNjYW5bMl0gYW5kIG1hdGNoWzJdIHNpbmNlIHRoZXlcbiAgICAgKiBhcmUgYWx3YXlzIGVxdWFsIHdoZW4gdGhlIG90aGVyIGJ5dGVzIG1hdGNoLCBnaXZlbiB0aGF0XG4gICAgICogdGhlIGhhc2gga2V5cyBhcmUgZXF1YWwgYW5kIHRoYXQgSEFTSF9CSVRTID49IDguXG4gICAgICovXG4gICAgc2NhbiArPSAyO1xuICAgIG1hdGNoKys7XG4gICAgLy8gQXNzZXJ0KCpzY2FuID09ICptYXRjaCwgXCJtYXRjaFsyXT9cIik7XG5cbiAgICAvKiBXZSBjaGVjayBmb3IgaW5zdWZmaWNpZW50IGxvb2thaGVhZCBvbmx5IGV2ZXJ5IDh0aCBjb21wYXJpc29uO1xuICAgICAqIHRoZSAyNTZ0aCBjaGVjayB3aWxsIGJlIG1hZGUgYXQgc3Ryc3RhcnQrMjU4LlxuICAgICAqL1xuICAgIGRvIHtcbiAgICAgIC8qanNoaW50IG5vZW1wdHk6ZmFsc2UqL1xuICAgIH0gd2hpbGUgKF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJiBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiZcbiAgICAgICAgICAgICBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiYgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmXG4gICAgICAgICAgICAgX3dpblsrK3NjYW5dID09PSBfd2luWysrbWF0Y2hdICYmIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJlxuICAgICAgICAgICAgIF93aW5bKytzY2FuXSA9PT0gX3dpblsrK21hdGNoXSAmJiBfd2luWysrc2Nhbl0gPT09IF93aW5bKyttYXRjaF0gJiZcbiAgICAgICAgICAgICBzY2FuIDwgc3RyZW5kKTtcblxuICAgIC8vIEFzc2VydChzY2FuIDw9IHMtPndpbmRvdysodW5zaWduZWQpKHMtPndpbmRvd19zaXplLTEpLCBcIndpbGQgc2NhblwiKTtcblxuICAgIGxlbiA9IE1BWF9NQVRDSCAtIChzdHJlbmQgLSBzY2FuKTtcbiAgICBzY2FuID0gc3RyZW5kIC0gTUFYX01BVENIO1xuXG4gICAgaWYgKGxlbiA+IGJlc3RfbGVuKSB7XG4gICAgICBzLm1hdGNoX3N0YXJ0ID0gY3VyX21hdGNoO1xuICAgICAgYmVzdF9sZW4gPSBsZW47XG4gICAgICBpZiAobGVuID49IG5pY2VfbWF0Y2gpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzY2FuX2VuZDEgID0gX3dpbltzY2FuICsgYmVzdF9sZW4gLSAxXTtcbiAgICAgIHNjYW5fZW5kICAgPSBfd2luW3NjYW4gKyBiZXN0X2xlbl07XG4gICAgfVxuICB9IHdoaWxlICgoY3VyX21hdGNoID0gcHJldltjdXJfbWF0Y2ggJiB3bWFza10pID4gbGltaXQgJiYgLS1jaGFpbl9sZW5ndGggIT09IDApO1xuXG4gIGlmIChiZXN0X2xlbiA8PSBzLmxvb2thaGVhZCkge1xuICAgIHJldHVybiBiZXN0X2xlbjtcbiAgfVxuICByZXR1cm4gcy5sb29rYWhlYWQ7XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBGaWxsIHRoZSB3aW5kb3cgd2hlbiB0aGUgbG9va2FoZWFkIGJlY29tZXMgaW5zdWZmaWNpZW50LlxuICogVXBkYXRlcyBzdHJzdGFydCBhbmQgbG9va2FoZWFkLlxuICpcbiAqIElOIGFzc2VydGlvbjogbG9va2FoZWFkIDwgTUlOX0xPT0tBSEVBRFxuICogT1VUIGFzc2VydGlvbnM6IHN0cnN0YXJ0IDw9IHdpbmRvd19zaXplLU1JTl9MT09LQUhFQURcbiAqICAgIEF0IGxlYXN0IG9uZSBieXRlIGhhcyBiZWVuIHJlYWQsIG9yIGF2YWlsX2luID09IDA7IHJlYWRzIGFyZVxuICogICAgcGVyZm9ybWVkIGZvciBhdCBsZWFzdCB0d28gYnl0ZXMgKHJlcXVpcmVkIGZvciB0aGUgemlwIHRyYW5zbGF0ZV9lb2xcbiAqICAgIG9wdGlvbiAtLSBub3Qgc3VwcG9ydGVkIGhlcmUpLlxuICovXG5mdW5jdGlvbiBmaWxsX3dpbmRvdyhzKSB7XG4gIHZhciBfd19zaXplID0gcy53X3NpemU7XG4gIHZhciBwLCBuLCBtLCBtb3JlLCBzdHI7XG5cbiAgLy9Bc3NlcnQocy0+bG9va2FoZWFkIDwgTUlOX0xPT0tBSEVBRCwgXCJhbHJlYWR5IGVub3VnaCBsb29rYWhlYWRcIik7XG5cbiAgZG8ge1xuICAgIG1vcmUgPSBzLndpbmRvd19zaXplIC0gcy5sb29rYWhlYWQgLSBzLnN0cnN0YXJ0O1xuXG4gICAgLy8gSlMgaW50cyBoYXZlIDMyIGJpdCwgYmxvY2sgYmVsb3cgbm90IG5lZWRlZFxuICAgIC8qIERlYWwgd2l0aCAhQCMkJSA2NEsgbGltaXQ6ICovXG4gICAgLy9pZiAoc2l6ZW9mKGludCkgPD0gMikge1xuICAgIC8vICAgIGlmIChtb3JlID09IDAgJiYgcy0+c3Ryc3RhcnQgPT0gMCAmJiBzLT5sb29rYWhlYWQgPT0gMCkge1xuICAgIC8vICAgICAgICBtb3JlID0gd3NpemU7XG4gICAgLy9cbiAgICAvLyAgfSBlbHNlIGlmIChtb3JlID09ICh1bnNpZ25lZCkoLTEpKSB7XG4gICAgLy8gICAgICAgIC8qIFZlcnkgdW5saWtlbHksIGJ1dCBwb3NzaWJsZSBvbiAxNiBiaXQgbWFjaGluZSBpZlxuICAgIC8vICAgICAgICAgKiBzdHJzdGFydCA9PSAwICYmIGxvb2thaGVhZCA9PSAxIChpbnB1dCBkb25lIGEgYnl0ZSBhdCB0aW1lKVxuICAgIC8vICAgICAgICAgKi9cbiAgICAvLyAgICAgICAgbW9yZS0tO1xuICAgIC8vICAgIH1cbiAgICAvL31cblxuXG4gICAgLyogSWYgdGhlIHdpbmRvdyBpcyBhbG1vc3QgZnVsbCBhbmQgdGhlcmUgaXMgaW5zdWZmaWNpZW50IGxvb2thaGVhZCxcbiAgICAgKiBtb3ZlIHRoZSB1cHBlciBoYWxmIHRvIHRoZSBsb3dlciBvbmUgdG8gbWFrZSByb29tIGluIHRoZSB1cHBlciBoYWxmLlxuICAgICAqL1xuICAgIGlmIChzLnN0cnN0YXJ0ID49IF93X3NpemUgKyAoX3dfc2l6ZSAtIE1JTl9MT09LQUhFQUQpKSB7XG5cbiAgICAgIHV0aWxzLmFycmF5U2V0KHMud2luZG93LCBzLndpbmRvdywgX3dfc2l6ZSwgX3dfc2l6ZSwgMCk7XG4gICAgICBzLm1hdGNoX3N0YXJ0IC09IF93X3NpemU7XG4gICAgICBzLnN0cnN0YXJ0IC09IF93X3NpemU7XG4gICAgICAvKiB3ZSBub3cgaGF2ZSBzdHJzdGFydCA+PSBNQVhfRElTVCAqL1xuICAgICAgcy5ibG9ja19zdGFydCAtPSBfd19zaXplO1xuXG4gICAgICAvKiBTbGlkZSB0aGUgaGFzaCB0YWJsZSAoY291bGQgYmUgYXZvaWRlZCB3aXRoIDMyIGJpdCB2YWx1ZXNcbiAgICAgICBhdCB0aGUgZXhwZW5zZSBvZiBtZW1vcnkgdXNhZ2UpLiBXZSBzbGlkZSBldmVuIHdoZW4gbGV2ZWwgPT0gMFxuICAgICAgIHRvIGtlZXAgdGhlIGhhc2ggdGFibGUgY29uc2lzdGVudCBpZiB3ZSBzd2l0Y2ggYmFjayB0byBsZXZlbCA+IDBcbiAgICAgICBsYXRlci4gKFVzaW5nIGxldmVsIDAgcGVybWFuZW50bHkgaXMgbm90IGFuIG9wdGltYWwgdXNhZ2Ugb2ZcbiAgICAgICB6bGliLCBzbyB3ZSBkb24ndCBjYXJlIGFib3V0IHRoaXMgcGF0aG9sb2dpY2FsIGNhc2UuKVxuICAgICAgICovXG5cbiAgICAgIG4gPSBzLmhhc2hfc2l6ZTtcbiAgICAgIHAgPSBuO1xuICAgICAgZG8ge1xuICAgICAgICBtID0gcy5oZWFkWy0tcF07XG4gICAgICAgIHMuaGVhZFtwXSA9IChtID49IF93X3NpemUgPyBtIC0gX3dfc2l6ZSA6IDApO1xuICAgICAgfSB3aGlsZSAoLS1uKTtcblxuICAgICAgbiA9IF93X3NpemU7XG4gICAgICBwID0gbjtcbiAgICAgIGRvIHtcbiAgICAgICAgbSA9IHMucHJldlstLXBdO1xuICAgICAgICBzLnByZXZbcF0gPSAobSA+PSBfd19zaXplID8gbSAtIF93X3NpemUgOiAwKTtcbiAgICAgICAgLyogSWYgbiBpcyBub3Qgb24gYW55IGhhc2ggY2hhaW4sIHByZXZbbl0gaXMgZ2FyYmFnZSBidXRcbiAgICAgICAgICogaXRzIHZhbHVlIHdpbGwgbmV2ZXIgYmUgdXNlZC5cbiAgICAgICAgICovXG4gICAgICB9IHdoaWxlICgtLW4pO1xuXG4gICAgICBtb3JlICs9IF93X3NpemU7XG4gICAgfVxuICAgIGlmIChzLnN0cm0uYXZhaWxfaW4gPT09IDApIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8qIElmIHRoZXJlIHdhcyBubyBzbGlkaW5nOlxuICAgICAqICAgIHN0cnN0YXJ0IDw9IFdTSVpFK01BWF9ESVNULTEgJiYgbG9va2FoZWFkIDw9IE1JTl9MT09LQUhFQUQgLSAxICYmXG4gICAgICogICAgbW9yZSA9PSB3aW5kb3dfc2l6ZSAtIGxvb2thaGVhZCAtIHN0cnN0YXJ0XG4gICAgICogPT4gbW9yZSA+PSB3aW5kb3dfc2l6ZSAtIChNSU5fTE9PS0FIRUFELTEgKyBXU0laRSArIE1BWF9ESVNULTEpXG4gICAgICogPT4gbW9yZSA+PSB3aW5kb3dfc2l6ZSAtIDIqV1NJWkUgKyAyXG4gICAgICogSW4gdGhlIEJJR19NRU0gb3IgTU1BUCBjYXNlIChub3QgeWV0IHN1cHBvcnRlZCksXG4gICAgICogICB3aW5kb3dfc2l6ZSA9PSBpbnB1dF9zaXplICsgTUlOX0xPT0tBSEVBRCAgJiZcbiAgICAgKiAgIHN0cnN0YXJ0ICsgcy0+bG9va2FoZWFkIDw9IGlucHV0X3NpemUgPT4gbW9yZSA+PSBNSU5fTE9PS0FIRUFELlxuICAgICAqIE90aGVyd2lzZSwgd2luZG93X3NpemUgPT0gMipXU0laRSBzbyBtb3JlID49IDIuXG4gICAgICogSWYgdGhlcmUgd2FzIHNsaWRpbmcsIG1vcmUgPj0gV1NJWkUuIFNvIGluIGFsbCBjYXNlcywgbW9yZSA+PSAyLlxuICAgICAqL1xuICAgIC8vQXNzZXJ0KG1vcmUgPj0gMiwgXCJtb3JlIDwgMlwiKTtcbiAgICBuID0gcmVhZF9idWYocy5zdHJtLCBzLndpbmRvdywgcy5zdHJzdGFydCArIHMubG9va2FoZWFkLCBtb3JlKTtcbiAgICBzLmxvb2thaGVhZCArPSBuO1xuXG4gICAgLyogSW5pdGlhbGl6ZSB0aGUgaGFzaCB2YWx1ZSBub3cgdGhhdCB3ZSBoYXZlIHNvbWUgaW5wdXQ6ICovXG4gICAgaWYgKHMubG9va2FoZWFkICsgcy5pbnNlcnQgPj0gTUlOX01BVENIKSB7XG4gICAgICBzdHIgPSBzLnN0cnN0YXJ0IC0gcy5pbnNlcnQ7XG4gICAgICBzLmluc19oID0gcy53aW5kb3dbc3RyXTtcblxuICAgICAgLyogVVBEQVRFX0hBU0gocywgcy0+aW5zX2gsIHMtPndpbmRvd1tzdHIgKyAxXSk7ICovXG4gICAgICBzLmluc19oID0gKChzLmluc19oIDw8IHMuaGFzaF9zaGlmdCkgXiBzLndpbmRvd1tzdHIgKyAxXSkgJiBzLmhhc2hfbWFzaztcbi8vI2lmIE1JTl9NQVRDSCAhPSAzXG4vLyAgICAgICAgQ2FsbCB1cGRhdGVfaGFzaCgpIE1JTl9NQVRDSC0zIG1vcmUgdGltZXNcbi8vI2VuZGlmXG4gICAgICB3aGlsZSAocy5pbnNlcnQpIHtcbiAgICAgICAgLyogVVBEQVRFX0hBU0gocywgcy0+aW5zX2gsIHMtPndpbmRvd1tzdHIgKyBNSU5fTUFUQ0gtMV0pOyAqL1xuICAgICAgICBzLmluc19oID0gKChzLmluc19oIDw8IHMuaGFzaF9zaGlmdCkgXiBzLndpbmRvd1tzdHIgKyBNSU5fTUFUQ0ggLSAxXSkgJiBzLmhhc2hfbWFzaztcblxuICAgICAgICBzLnByZXZbc3RyICYgcy53X21hc2tdID0gcy5oZWFkW3MuaW5zX2hdO1xuICAgICAgICBzLmhlYWRbcy5pbnNfaF0gPSBzdHI7XG4gICAgICAgIHN0cisrO1xuICAgICAgICBzLmluc2VydC0tO1xuICAgICAgICBpZiAocy5sb29rYWhlYWQgKyBzLmluc2VydCA8IE1JTl9NQVRDSCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8qIElmIHRoZSB3aG9sZSBpbnB1dCBoYXMgbGVzcyB0aGFuIE1JTl9NQVRDSCBieXRlcywgaW5zX2ggaXMgZ2FyYmFnZSxcbiAgICAgKiBidXQgdGhpcyBpcyBub3QgaW1wb3J0YW50IHNpbmNlIG9ubHkgbGl0ZXJhbCBieXRlcyB3aWxsIGJlIGVtaXR0ZWQuXG4gICAgICovXG5cbiAgfSB3aGlsZSAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEICYmIHMuc3RybS5hdmFpbF9pbiAhPT0gMCk7XG5cbiAgLyogSWYgdGhlIFdJTl9JTklUIGJ5dGVzIGFmdGVyIHRoZSBlbmQgb2YgdGhlIGN1cnJlbnQgZGF0YSBoYXZlIG5ldmVyIGJlZW5cbiAgICogd3JpdHRlbiwgdGhlbiB6ZXJvIHRob3NlIGJ5dGVzIGluIG9yZGVyIHRvIGF2b2lkIG1lbW9yeSBjaGVjayByZXBvcnRzIG9mXG4gICAqIHRoZSB1c2Ugb2YgdW5pbml0aWFsaXplZCAob3IgdW5pbml0aWFsaXNlZCBhcyBKdWxpYW4gd3JpdGVzKSBieXRlcyBieVxuICAgKiB0aGUgbG9uZ2VzdCBtYXRjaCByb3V0aW5lcy4gIFVwZGF0ZSB0aGUgaGlnaCB3YXRlciBtYXJrIGZvciB0aGUgbmV4dFxuICAgKiB0aW1lIHRocm91Z2ggaGVyZS4gIFdJTl9JTklUIGlzIHNldCB0byBNQVhfTUFUQ0ggc2luY2UgdGhlIGxvbmdlc3QgbWF0Y2hcbiAgICogcm91dGluZXMgYWxsb3cgc2Nhbm5pbmcgdG8gc3Ryc3RhcnQgKyBNQVhfTUFUQ0gsIGlnbm9yaW5nIGxvb2thaGVhZC5cbiAgICovXG4vLyAgaWYgKHMuaGlnaF93YXRlciA8IHMud2luZG93X3NpemUpIHtcbi8vICAgIHZhciBjdXJyID0gcy5zdHJzdGFydCArIHMubG9va2FoZWFkO1xuLy8gICAgdmFyIGluaXQgPSAwO1xuLy9cbi8vICAgIGlmIChzLmhpZ2hfd2F0ZXIgPCBjdXJyKSB7XG4vLyAgICAgIC8qIFByZXZpb3VzIGhpZ2ggd2F0ZXIgbWFyayBiZWxvdyBjdXJyZW50IGRhdGEgLS0gemVybyBXSU5fSU5JVFxuLy8gICAgICAgKiBieXRlcyBvciB1cCB0byBlbmQgb2Ygd2luZG93LCB3aGljaGV2ZXIgaXMgbGVzcy5cbi8vICAgICAgICovXG4vLyAgICAgIGluaXQgPSBzLndpbmRvd19zaXplIC0gY3Vycjtcbi8vICAgICAgaWYgKGluaXQgPiBXSU5fSU5JVClcbi8vICAgICAgICBpbml0ID0gV0lOX0lOSVQ7XG4vLyAgICAgIHptZW16ZXJvKHMtPndpbmRvdyArIGN1cnIsICh1bnNpZ25lZClpbml0KTtcbi8vICAgICAgcy0+aGlnaF93YXRlciA9IGN1cnIgKyBpbml0O1xuLy8gICAgfVxuLy8gICAgZWxzZSBpZiAocy0+aGlnaF93YXRlciA8ICh1bGcpY3VyciArIFdJTl9JTklUKSB7XG4vLyAgICAgIC8qIEhpZ2ggd2F0ZXIgbWFyayBhdCBvciBhYm92ZSBjdXJyZW50IGRhdGEsIGJ1dCBiZWxvdyBjdXJyZW50IGRhdGFcbi8vICAgICAgICogcGx1cyBXSU5fSU5JVCAtLSB6ZXJvIG91dCB0byBjdXJyZW50IGRhdGEgcGx1cyBXSU5fSU5JVCwgb3IgdXBcbi8vICAgICAgICogdG8gZW5kIG9mIHdpbmRvdywgd2hpY2hldmVyIGlzIGxlc3MuXG4vLyAgICAgICAqL1xuLy8gICAgICBpbml0ID0gKHVsZyljdXJyICsgV0lOX0lOSVQgLSBzLT5oaWdoX3dhdGVyO1xuLy8gICAgICBpZiAoaW5pdCA+IHMtPndpbmRvd19zaXplIC0gcy0+aGlnaF93YXRlcilcbi8vICAgICAgICBpbml0ID0gcy0+d2luZG93X3NpemUgLSBzLT5oaWdoX3dhdGVyO1xuLy8gICAgICB6bWVtemVybyhzLT53aW5kb3cgKyBzLT5oaWdoX3dhdGVyLCAodW5zaWduZWQpaW5pdCk7XG4vLyAgICAgIHMtPmhpZ2hfd2F0ZXIgKz0gaW5pdDtcbi8vICAgIH1cbi8vICB9XG4vL1xuLy8gIEFzc2VydCgodWxnKXMtPnN0cnN0YXJ0IDw9IHMtPndpbmRvd19zaXplIC0gTUlOX0xPT0tBSEVBRCxcbi8vICAgIFwibm90IGVub3VnaCByb29tIGZvciBzZWFyY2hcIik7XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29weSB3aXRob3V0IGNvbXByZXNzaW9uIGFzIG11Y2ggYXMgcG9zc2libGUgZnJvbSB0aGUgaW5wdXQgc3RyZWFtLCByZXR1cm5cbiAqIHRoZSBjdXJyZW50IGJsb2NrIHN0YXRlLlxuICogVGhpcyBmdW5jdGlvbiBkb2VzIG5vdCBpbnNlcnQgbmV3IHN0cmluZ3MgaW4gdGhlIGRpY3Rpb25hcnkgc2luY2VcbiAqIHVuY29tcHJlc3NpYmxlIGRhdGEgaXMgcHJvYmFibHkgbm90IHVzZWZ1bC4gVGhpcyBmdW5jdGlvbiBpcyB1c2VkXG4gKiBvbmx5IGZvciB0aGUgbGV2ZWw9MCBjb21wcmVzc2lvbiBvcHRpb24uXG4gKiBOT1RFOiB0aGlzIGZ1bmN0aW9uIHNob3VsZCBiZSBvcHRpbWl6ZWQgdG8gYXZvaWQgZXh0cmEgY29weWluZyBmcm9tXG4gKiB3aW5kb3cgdG8gcGVuZGluZ19idWYuXG4gKi9cbmZ1bmN0aW9uIGRlZmxhdGVfc3RvcmVkKHMsIGZsdXNoKSB7XG4gIC8qIFN0b3JlZCBibG9ja3MgYXJlIGxpbWl0ZWQgdG8gMHhmZmZmIGJ5dGVzLCBwZW5kaW5nX2J1ZiBpcyBsaW1pdGVkXG4gICAqIHRvIHBlbmRpbmdfYnVmX3NpemUsIGFuZCBlYWNoIHN0b3JlZCBibG9jayBoYXMgYSA1IGJ5dGUgaGVhZGVyOlxuICAgKi9cbiAgdmFyIG1heF9ibG9ja19zaXplID0gMHhmZmZmO1xuXG4gIGlmIChtYXhfYmxvY2tfc2l6ZSA+IHMucGVuZGluZ19idWZfc2l6ZSAtIDUpIHtcbiAgICBtYXhfYmxvY2tfc2l6ZSA9IHMucGVuZGluZ19idWZfc2l6ZSAtIDU7XG4gIH1cblxuICAvKiBDb3B5IGFzIG11Y2ggYXMgcG9zc2libGUgZnJvbSBpbnB1dCB0byBvdXRwdXQ6ICovXG4gIGZvciAoOzspIHtcbiAgICAvKiBGaWxsIHRoZSB3aW5kb3cgYXMgbXVjaCBhcyBwb3NzaWJsZTogKi9cbiAgICBpZiAocy5sb29rYWhlYWQgPD0gMSkge1xuXG4gICAgICAvL0Fzc2VydChzLT5zdHJzdGFydCA8IHMtPndfc2l6ZStNQVhfRElTVChzKSB8fFxuICAgICAgLy8gIHMtPmJsb2NrX3N0YXJ0ID49IChsb25nKXMtPndfc2l6ZSwgXCJzbGlkZSB0b28gbGF0ZVwiKTtcbi8vICAgICAgaWYgKCEocy5zdHJzdGFydCA8IHMud19zaXplICsgKHMud19zaXplIC0gTUlOX0xPT0tBSEVBRCkgfHxcbi8vICAgICAgICBzLmJsb2NrX3N0YXJ0ID49IHMud19zaXplKSkge1xuLy8gICAgICAgIHRocm93ICBuZXcgRXJyb3IoXCJzbGlkZSB0b28gbGF0ZVwiKTtcbi8vICAgICAgfVxuXG4gICAgICBmaWxsX3dpbmRvdyhzKTtcbiAgICAgIGlmIChzLmxvb2thaGVhZCA9PT0gMCAmJiBmbHVzaCA9PT0gWl9OT19GTFVTSCkge1xuICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgfVxuXG4gICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvKiBmbHVzaCB0aGUgY3VycmVudCBibG9jayAqL1xuICAgIH1cbiAgICAvL0Fzc2VydChzLT5ibG9ja19zdGFydCA+PSAwTCwgXCJibG9jayBnb25lXCIpO1xuLy8gICAgaWYgKHMuYmxvY2tfc3RhcnQgPCAwKSB0aHJvdyBuZXcgRXJyb3IoXCJibG9jayBnb25lXCIpO1xuXG4gICAgcy5zdHJzdGFydCArPSBzLmxvb2thaGVhZDtcbiAgICBzLmxvb2thaGVhZCA9IDA7XG5cbiAgICAvKiBFbWl0IGEgc3RvcmVkIGJsb2NrIGlmIHBlbmRpbmdfYnVmIHdpbGwgYmUgZnVsbDogKi9cbiAgICB2YXIgbWF4X3N0YXJ0ID0gcy5ibG9ja19zdGFydCArIG1heF9ibG9ja19zaXplO1xuXG4gICAgaWYgKHMuc3Ryc3RhcnQgPT09IDAgfHwgcy5zdHJzdGFydCA+PSBtYXhfc3RhcnQpIHtcbiAgICAgIC8qIHN0cnN0YXJ0ID09IDAgaXMgcG9zc2libGUgd2hlbiB3cmFwYXJvdW5kIG9uIDE2LWJpdCBtYWNoaW5lICovXG4gICAgICBzLmxvb2thaGVhZCA9IHMuc3Ryc3RhcnQgLSBtYXhfc3RhcnQ7XG4gICAgICBzLnN0cnN0YXJ0ID0gbWF4X3N0YXJ0O1xuICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqL1xuICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgfVxuICAgICAgLyoqKi9cblxuXG4gICAgfVxuICAgIC8qIEZsdXNoIGlmIHdlIG1heSBoYXZlIHRvIHNsaWRlLCBvdGhlcndpc2UgYmxvY2tfc3RhcnQgbWF5IGJlY29tZVxuICAgICAqIG5lZ2F0aXZlIGFuZCB0aGUgZGF0YSB3aWxsIGJlIGdvbmU6XG4gICAgICovXG4gICAgaWYgKHMuc3Ryc3RhcnQgLSBzLmJsb2NrX3N0YXJ0ID49IChzLndfc2l6ZSAtIE1JTl9MT09LQUhFQUQpKSB7XG4gICAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovXG4gICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTtcbiAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgICB9XG4gICAgICAvKioqL1xuICAgIH1cbiAgfVxuXG4gIHMuaW5zZXJ0ID0gMDtcblxuICBpZiAoZmx1c2ggPT09IFpfRklOSVNIKSB7XG4gICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAxKTsgKioqL1xuICAgIGZsdXNoX2Jsb2NrX29ubHkocywgdHJ1ZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDtcbiAgICB9XG4gICAgLyoqKi9cbiAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7XG4gIH1cblxuICBpZiAocy5zdHJzdGFydCA+IHMuYmxvY2tfc3RhcnQpIHtcbiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovXG4gICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgfVxuICAgIC8qKiovXG4gIH1cblxuICByZXR1cm4gQlNfTkVFRF9NT1JFO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvbXByZXNzIGFzIG11Y2ggYXMgcG9zc2libGUgZnJvbSB0aGUgaW5wdXQgc3RyZWFtLCByZXR1cm4gdGhlIGN1cnJlbnRcbiAqIGJsb2NrIHN0YXRlLlxuICogVGhpcyBmdW5jdGlvbiBkb2VzIG5vdCBwZXJmb3JtIGxhenkgZXZhbHVhdGlvbiBvZiBtYXRjaGVzIGFuZCBpbnNlcnRzXG4gKiBuZXcgc3RyaW5ncyBpbiB0aGUgZGljdGlvbmFyeSBvbmx5IGZvciB1bm1hdGNoZWQgc3RyaW5ncyBvciBmb3Igc2hvcnRcbiAqIG1hdGNoZXMuIEl0IGlzIHVzZWQgb25seSBmb3IgdGhlIGZhc3QgY29tcHJlc3Npb24gb3B0aW9ucy5cbiAqL1xuZnVuY3Rpb24gZGVmbGF0ZV9mYXN0KHMsIGZsdXNoKSB7XG4gIHZhciBoYXNoX2hlYWQ7ICAgICAgICAvKiBoZWFkIG9mIHRoZSBoYXNoIGNoYWluICovXG4gIHZhciBiZmx1c2g7ICAgICAgICAgICAvKiBzZXQgaWYgY3VycmVudCBibG9jayBtdXN0IGJlIGZsdXNoZWQgKi9cblxuICBmb3IgKDs7KSB7XG4gICAgLyogTWFrZSBzdXJlIHRoYXQgd2UgYWx3YXlzIGhhdmUgZW5vdWdoIGxvb2thaGVhZCwgZXhjZXB0XG4gICAgICogYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQgZmlsZS4gV2UgbmVlZCBNQVhfTUFUQ0ggYnl0ZXNcbiAgICAgKiBmb3IgdGhlIG5leHQgbWF0Y2gsIHBsdXMgTUlOX01BVENIIGJ5dGVzIHRvIGluc2VydCB0aGVcbiAgICAgKiBzdHJpbmcgZm9sbG93aW5nIHRoZSBuZXh0IG1hdGNoLlxuICAgICAqL1xuICAgIGlmIChzLmxvb2thaGVhZCA8IE1JTl9MT09LQUhFQUQpIHtcbiAgICAgIGZpbGxfd2luZG93KHMpO1xuICAgICAgaWYgKHMubG9va2FoZWFkIDwgTUlOX0xPT0tBSEVBRCAmJiBmbHVzaCA9PT0gWl9OT19GTFVTSCkge1xuICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgfVxuICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7XG4gICAgICAgIGJyZWFrOyAvKiBmbHVzaCB0aGUgY3VycmVudCBibG9jayAqL1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qIEluc2VydCB0aGUgc3RyaW5nIHdpbmRvd1tzdHJzdGFydCAuLiBzdHJzdGFydCsyXSBpbiB0aGVcbiAgICAgKiBkaWN0aW9uYXJ5LCBhbmQgc2V0IGhhc2hfaGVhZCB0byB0aGUgaGVhZCBvZiB0aGUgaGFzaCBjaGFpbjpcbiAgICAgKi9cbiAgICBoYXNoX2hlYWQgPSAwLypOSUwqLztcbiAgICBpZiAocy5sb29rYWhlYWQgPj0gTUlOX01BVENIKSB7XG4gICAgICAvKioqIElOU0VSVF9TVFJJTkcocywgcy5zdHJzdGFydCwgaGFzaF9oZWFkKTsgKioqL1xuICAgICAgcy5pbnNfaCA9ICgocy5pbnNfaCA8PCBzLmhhc2hfc2hpZnQpIF4gcy53aW5kb3dbcy5zdHJzdGFydCArIE1JTl9NQVRDSCAtIDFdKSAmIHMuaGFzaF9tYXNrO1xuICAgICAgaGFzaF9oZWFkID0gcy5wcmV2W3Muc3Ryc3RhcnQgJiBzLndfbWFza10gPSBzLmhlYWRbcy5pbnNfaF07XG4gICAgICBzLmhlYWRbcy5pbnNfaF0gPSBzLnN0cnN0YXJ0O1xuICAgICAgLyoqKi9cbiAgICB9XG5cbiAgICAvKiBGaW5kIHRoZSBsb25nZXN0IG1hdGNoLCBkaXNjYXJkaW5nIHRob3NlIDw9IHByZXZfbGVuZ3RoLlxuICAgICAqIEF0IHRoaXMgcG9pbnQgd2UgaGF2ZSBhbHdheXMgbWF0Y2hfbGVuZ3RoIDwgTUlOX01BVENIXG4gICAgICovXG4gICAgaWYgKGhhc2hfaGVhZCAhPT0gMC8qTklMKi8gJiYgKChzLnN0cnN0YXJ0IC0gaGFzaF9oZWFkKSA8PSAocy53X3NpemUgLSBNSU5fTE9PS0FIRUFEKSkpIHtcbiAgICAgIC8qIFRvIHNpbXBsaWZ5IHRoZSBjb2RlLCB3ZSBwcmV2ZW50IG1hdGNoZXMgd2l0aCB0aGUgc3RyaW5nXG4gICAgICAgKiBvZiB3aW5kb3cgaW5kZXggMCAoaW4gcGFydGljdWxhciB3ZSBoYXZlIHRvIGF2b2lkIGEgbWF0Y2hcbiAgICAgICAqIG9mIHRoZSBzdHJpbmcgd2l0aCBpdHNlbGYgYXQgdGhlIHN0YXJ0IG9mIHRoZSBpbnB1dCBmaWxlKS5cbiAgICAgICAqL1xuICAgICAgcy5tYXRjaF9sZW5ndGggPSBsb25nZXN0X21hdGNoKHMsIGhhc2hfaGVhZCk7XG4gICAgICAvKiBsb25nZXN0X21hdGNoKCkgc2V0cyBtYXRjaF9zdGFydCAqL1xuICAgIH1cbiAgICBpZiAocy5tYXRjaF9sZW5ndGggPj0gTUlOX01BVENIKSB7XG4gICAgICAvLyBjaGVja19tYXRjaChzLCBzLnN0cnN0YXJ0LCBzLm1hdGNoX3N0YXJ0LCBzLm1hdGNoX2xlbmd0aCk7IC8vIGZvciBkZWJ1ZyBvbmx5XG5cbiAgICAgIC8qKiogX3RyX3RhbGx5X2Rpc3Qocywgcy5zdHJzdGFydCAtIHMubWF0Y2hfc3RhcnQsXG4gICAgICAgICAgICAgICAgICAgICBzLm1hdGNoX2xlbmd0aCAtIE1JTl9NQVRDSCwgYmZsdXNoKTsgKioqL1xuICAgICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIHMuc3Ryc3RhcnQgLSBzLm1hdGNoX3N0YXJ0LCBzLm1hdGNoX2xlbmd0aCAtIE1JTl9NQVRDSCk7XG5cbiAgICAgIHMubG9va2FoZWFkIC09IHMubWF0Y2hfbGVuZ3RoO1xuXG4gICAgICAvKiBJbnNlcnQgbmV3IHN0cmluZ3MgaW4gdGhlIGhhc2ggdGFibGUgb25seSBpZiB0aGUgbWF0Y2ggbGVuZ3RoXG4gICAgICAgKiBpcyBub3QgdG9vIGxhcmdlLiBUaGlzIHNhdmVzIHRpbWUgYnV0IGRlZ3JhZGVzIGNvbXByZXNzaW9uLlxuICAgICAgICovXG4gICAgICBpZiAocy5tYXRjaF9sZW5ndGggPD0gcy5tYXhfbGF6eV9tYXRjaC8qbWF4X2luc2VydF9sZW5ndGgqLyAmJiBzLmxvb2thaGVhZCA+PSBNSU5fTUFUQ0gpIHtcbiAgICAgICAgcy5tYXRjaF9sZW5ndGgtLTsgLyogc3RyaW5nIGF0IHN0cnN0YXJ0IGFscmVhZHkgaW4gdGFibGUgKi9cbiAgICAgICAgZG8ge1xuICAgICAgICAgIHMuc3Ryc3RhcnQrKztcbiAgICAgICAgICAvKioqIElOU0VSVF9TVFJJTkcocywgcy5zdHJzdGFydCwgaGFzaF9oZWFkKTsgKioqL1xuICAgICAgICAgIHMuaW5zX2ggPSAoKHMuaW5zX2ggPDwgcy5oYXNoX3NoaWZ0KSBeIHMud2luZG93W3Muc3Ryc3RhcnQgKyBNSU5fTUFUQ0ggLSAxXSkgJiBzLmhhc2hfbWFzaztcbiAgICAgICAgICBoYXNoX2hlYWQgPSBzLnByZXZbcy5zdHJzdGFydCAmIHMud19tYXNrXSA9IHMuaGVhZFtzLmluc19oXTtcbiAgICAgICAgICBzLmhlYWRbcy5pbnNfaF0gPSBzLnN0cnN0YXJ0O1xuICAgICAgICAgIC8qKiovXG4gICAgICAgICAgLyogc3Ryc3RhcnQgbmV2ZXIgZXhjZWVkcyBXU0laRS1NQVhfTUFUQ0gsIHNvIHRoZXJlIGFyZVxuICAgICAgICAgICAqIGFsd2F5cyBNSU5fTUFUQ0ggYnl0ZXMgYWhlYWQuXG4gICAgICAgICAgICovXG4gICAgICAgIH0gd2hpbGUgKC0tcy5tYXRjaF9sZW5ndGggIT09IDApO1xuICAgICAgICBzLnN0cnN0YXJ0Kys7XG4gICAgICB9IGVsc2VcbiAgICAgIHtcbiAgICAgICAgcy5zdHJzdGFydCArPSBzLm1hdGNoX2xlbmd0aDtcbiAgICAgICAgcy5tYXRjaF9sZW5ndGggPSAwO1xuICAgICAgICBzLmluc19oID0gcy53aW5kb3dbcy5zdHJzdGFydF07XG4gICAgICAgIC8qIFVQREFURV9IQVNIKHMsIHMuaW5zX2gsIHMud2luZG93W3Muc3Ryc3RhcnQrMV0pOyAqL1xuICAgICAgICBzLmluc19oID0gKChzLmluc19oIDw8IHMuaGFzaF9zaGlmdCkgXiBzLndpbmRvd1tzLnN0cnN0YXJ0ICsgMV0pICYgcy5oYXNoX21hc2s7XG5cbi8vI2lmIE1JTl9NQVRDSCAhPSAzXG4vLyAgICAgICAgICAgICAgICBDYWxsIFVQREFURV9IQVNIKCkgTUlOX01BVENILTMgbW9yZSB0aW1lc1xuLy8jZW5kaWZcbiAgICAgICAgLyogSWYgbG9va2FoZWFkIDwgTUlOX01BVENILCBpbnNfaCBpcyBnYXJiYWdlLCBidXQgaXQgZG9lcyBub3RcbiAgICAgICAgICogbWF0dGVyIHNpbmNlIGl0IHdpbGwgYmUgcmVjb21wdXRlZCBhdCBuZXh0IGRlZmxhdGUgY2FsbC5cbiAgICAgICAgICovXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8qIE5vIG1hdGNoLCBvdXRwdXQgYSBsaXRlcmFsIGJ5dGUgKi9cbiAgICAgIC8vVHJhY2V2digoc3RkZXJyLFwiJWNcIiwgcy53aW5kb3dbcy5zdHJzdGFydF0pKTtcbiAgICAgIC8qKiogX3RyX3RhbGx5X2xpdChzLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSwgYmZsdXNoKTsgKioqL1xuICAgICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnRdKTtcblxuICAgICAgcy5sb29rYWhlYWQtLTtcbiAgICAgIHMuc3Ryc3RhcnQrKztcbiAgICB9XG4gICAgaWYgKGJmbHVzaCkge1xuICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqL1xuICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgfVxuICAgICAgLyoqKi9cbiAgICB9XG4gIH1cbiAgcy5pbnNlcnQgPSAoKHMuc3Ryc3RhcnQgPCAoTUlOX01BVENIIC0gMSkpID8gcy5zdHJzdGFydCA6IE1JTl9NQVRDSCAtIDEpO1xuICBpZiAoZmx1c2ggPT09IFpfRklOSVNIKSB7XG4gICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAxKTsgKioqL1xuICAgIGZsdXNoX2Jsb2NrX29ubHkocywgdHJ1ZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDtcbiAgICB9XG4gICAgLyoqKi9cbiAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7XG4gIH1cbiAgaWYgKHMubGFzdF9saXQpIHtcbiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovXG4gICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgfVxuICAgIC8qKiovXG4gIH1cbiAgcmV0dXJuIEJTX0JMT0NLX0RPTkU7XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogU2FtZSBhcyBhYm92ZSwgYnV0IGFjaGlldmVzIGJldHRlciBjb21wcmVzc2lvbi4gV2UgdXNlIGEgbGF6eVxuICogZXZhbHVhdGlvbiBmb3IgbWF0Y2hlczogYSBtYXRjaCBpcyBmaW5hbGx5IGFkb3B0ZWQgb25seSBpZiB0aGVyZSBpc1xuICogbm8gYmV0dGVyIG1hdGNoIGF0IHRoZSBuZXh0IHdpbmRvdyBwb3NpdGlvbi5cbiAqL1xuZnVuY3Rpb24gZGVmbGF0ZV9zbG93KHMsIGZsdXNoKSB7XG4gIHZhciBoYXNoX2hlYWQ7ICAgICAgICAgIC8qIGhlYWQgb2YgaGFzaCBjaGFpbiAqL1xuICB2YXIgYmZsdXNoOyAgICAgICAgICAgICAgLyogc2V0IGlmIGN1cnJlbnQgYmxvY2sgbXVzdCBiZSBmbHVzaGVkICovXG5cbiAgdmFyIG1heF9pbnNlcnQ7XG5cbiAgLyogUHJvY2VzcyB0aGUgaW5wdXQgYmxvY2suICovXG4gIGZvciAoOzspIHtcbiAgICAvKiBNYWtlIHN1cmUgdGhhdCB3ZSBhbHdheXMgaGF2ZSBlbm91Z2ggbG9va2FoZWFkLCBleGNlcHRcbiAgICAgKiBhdCB0aGUgZW5kIG9mIHRoZSBpbnB1dCBmaWxlLiBXZSBuZWVkIE1BWF9NQVRDSCBieXRlc1xuICAgICAqIGZvciB0aGUgbmV4dCBtYXRjaCwgcGx1cyBNSU5fTUFUQ0ggYnl0ZXMgdG8gaW5zZXJ0IHRoZVxuICAgICAqIHN0cmluZyBmb2xsb3dpbmcgdGhlIG5leHQgbWF0Y2guXG4gICAgICovXG4gICAgaWYgKHMubG9va2FoZWFkIDwgTUlOX0xPT0tBSEVBRCkge1xuICAgICAgZmlsbF93aW5kb3cocyk7XG4gICAgICBpZiAocy5sb29rYWhlYWQgPCBNSU5fTE9PS0FIRUFEICYmIGZsdXNoID09PSBaX05PX0ZMVVNIKSB7XG4gICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgICB9XG4gICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHsgYnJlYWs7IH0gLyogZmx1c2ggdGhlIGN1cnJlbnQgYmxvY2sgKi9cbiAgICB9XG5cbiAgICAvKiBJbnNlcnQgdGhlIHN0cmluZyB3aW5kb3dbc3Ryc3RhcnQgLi4gc3Ryc3RhcnQrMl0gaW4gdGhlXG4gICAgICogZGljdGlvbmFyeSwgYW5kIHNldCBoYXNoX2hlYWQgdG8gdGhlIGhlYWQgb2YgdGhlIGhhc2ggY2hhaW46XG4gICAgICovXG4gICAgaGFzaF9oZWFkID0gMC8qTklMKi87XG4gICAgaWYgKHMubG9va2FoZWFkID49IE1JTl9NQVRDSCkge1xuICAgICAgLyoqKiBJTlNFUlRfU1RSSU5HKHMsIHMuc3Ryc3RhcnQsIGhhc2hfaGVhZCk7ICoqKi9cbiAgICAgIHMuaW5zX2ggPSAoKHMuaW5zX2ggPDwgcy5oYXNoX3NoaWZ0KSBeIHMud2luZG93W3Muc3Ryc3RhcnQgKyBNSU5fTUFUQ0ggLSAxXSkgJiBzLmhhc2hfbWFzaztcbiAgICAgIGhhc2hfaGVhZCA9IHMucHJldltzLnN0cnN0YXJ0ICYgcy53X21hc2tdID0gcy5oZWFkW3MuaW5zX2hdO1xuICAgICAgcy5oZWFkW3MuaW5zX2hdID0gcy5zdHJzdGFydDtcbiAgICAgIC8qKiovXG4gICAgfVxuXG4gICAgLyogRmluZCB0aGUgbG9uZ2VzdCBtYXRjaCwgZGlzY2FyZGluZyB0aG9zZSA8PSBwcmV2X2xlbmd0aC5cbiAgICAgKi9cbiAgICBzLnByZXZfbGVuZ3RoID0gcy5tYXRjaF9sZW5ndGg7XG4gICAgcy5wcmV2X21hdGNoID0gcy5tYXRjaF9zdGFydDtcbiAgICBzLm1hdGNoX2xlbmd0aCA9IE1JTl9NQVRDSCAtIDE7XG5cbiAgICBpZiAoaGFzaF9oZWFkICE9PSAwLypOSUwqLyAmJiBzLnByZXZfbGVuZ3RoIDwgcy5tYXhfbGF6eV9tYXRjaCAmJlxuICAgICAgICBzLnN0cnN0YXJ0IC0gaGFzaF9oZWFkIDw9IChzLndfc2l6ZSAtIE1JTl9MT09LQUhFQUQpLypNQVhfRElTVChzKSovKSB7XG4gICAgICAvKiBUbyBzaW1wbGlmeSB0aGUgY29kZSwgd2UgcHJldmVudCBtYXRjaGVzIHdpdGggdGhlIHN0cmluZ1xuICAgICAgICogb2Ygd2luZG93IGluZGV4IDAgKGluIHBhcnRpY3VsYXIgd2UgaGF2ZSB0byBhdm9pZCBhIG1hdGNoXG4gICAgICAgKiBvZiB0aGUgc3RyaW5nIHdpdGggaXRzZWxmIGF0IHRoZSBzdGFydCBvZiB0aGUgaW5wdXQgZmlsZSkuXG4gICAgICAgKi9cbiAgICAgIHMubWF0Y2hfbGVuZ3RoID0gbG9uZ2VzdF9tYXRjaChzLCBoYXNoX2hlYWQpO1xuICAgICAgLyogbG9uZ2VzdF9tYXRjaCgpIHNldHMgbWF0Y2hfc3RhcnQgKi9cblxuICAgICAgaWYgKHMubWF0Y2hfbGVuZ3RoIDw9IDUgJiZcbiAgICAgICAgIChzLnN0cmF0ZWd5ID09PSBaX0ZJTFRFUkVEIHx8IChzLm1hdGNoX2xlbmd0aCA9PT0gTUlOX01BVENIICYmIHMuc3Ryc3RhcnQgLSBzLm1hdGNoX3N0YXJ0ID4gNDA5Ni8qVE9PX0ZBUiovKSkpIHtcblxuICAgICAgICAvKiBJZiBwcmV2X21hdGNoIGlzIGFsc28gTUlOX01BVENILCBtYXRjaF9zdGFydCBpcyBnYXJiYWdlXG4gICAgICAgICAqIGJ1dCB3ZSB3aWxsIGlnbm9yZSB0aGUgY3VycmVudCBtYXRjaCBhbnl3YXkuXG4gICAgICAgICAqL1xuICAgICAgICBzLm1hdGNoX2xlbmd0aCA9IE1JTl9NQVRDSCAtIDE7XG4gICAgICB9XG4gICAgfVxuICAgIC8qIElmIHRoZXJlIHdhcyBhIG1hdGNoIGF0IHRoZSBwcmV2aW91cyBzdGVwIGFuZCB0aGUgY3VycmVudFxuICAgICAqIG1hdGNoIGlzIG5vdCBiZXR0ZXIsIG91dHB1dCB0aGUgcHJldmlvdXMgbWF0Y2g6XG4gICAgICovXG4gICAgaWYgKHMucHJldl9sZW5ndGggPj0gTUlOX01BVENIICYmIHMubWF0Y2hfbGVuZ3RoIDw9IHMucHJldl9sZW5ndGgpIHtcbiAgICAgIG1heF9pbnNlcnQgPSBzLnN0cnN0YXJ0ICsgcy5sb29rYWhlYWQgLSBNSU5fTUFUQ0g7XG4gICAgICAvKiBEbyBub3QgaW5zZXJ0IHN0cmluZ3MgaW4gaGFzaCB0YWJsZSBiZXlvbmQgdGhpcy4gKi9cblxuICAgICAgLy9jaGVja19tYXRjaChzLCBzLnN0cnN0YXJ0LTEsIHMucHJldl9tYXRjaCwgcy5wcmV2X2xlbmd0aCk7XG5cbiAgICAgIC8qKipfdHJfdGFsbHlfZGlzdChzLCBzLnN0cnN0YXJ0IC0gMSAtIHMucHJldl9tYXRjaCxcbiAgICAgICAgICAgICAgICAgICAgIHMucHJldl9sZW5ndGggLSBNSU5fTUFUQ0gsIGJmbHVzaCk7KioqL1xuICAgICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIHMuc3Ryc3RhcnQgLSAxIC0gcy5wcmV2X21hdGNoLCBzLnByZXZfbGVuZ3RoIC0gTUlOX01BVENIKTtcbiAgICAgIC8qIEluc2VydCBpbiBoYXNoIHRhYmxlIGFsbCBzdHJpbmdzIHVwIHRvIHRoZSBlbmQgb2YgdGhlIG1hdGNoLlxuICAgICAgICogc3Ryc3RhcnQtMSBhbmQgc3Ryc3RhcnQgYXJlIGFscmVhZHkgaW5zZXJ0ZWQuIElmIHRoZXJlIGlzIG5vdFxuICAgICAgICogZW5vdWdoIGxvb2thaGVhZCwgdGhlIGxhc3QgdHdvIHN0cmluZ3MgYXJlIG5vdCBpbnNlcnRlZCBpblxuICAgICAgICogdGhlIGhhc2ggdGFibGUuXG4gICAgICAgKi9cbiAgICAgIHMubG9va2FoZWFkIC09IHMucHJldl9sZW5ndGggLSAxO1xuICAgICAgcy5wcmV2X2xlbmd0aCAtPSAyO1xuICAgICAgZG8ge1xuICAgICAgICBpZiAoKytzLnN0cnN0YXJ0IDw9IG1heF9pbnNlcnQpIHtcbiAgICAgICAgICAvKioqIElOU0VSVF9TVFJJTkcocywgcy5zdHJzdGFydCwgaGFzaF9oZWFkKTsgKioqL1xuICAgICAgICAgIHMuaW5zX2ggPSAoKHMuaW5zX2ggPDwgcy5oYXNoX3NoaWZ0KSBeIHMud2luZG93W3Muc3Ryc3RhcnQgKyBNSU5fTUFUQ0ggLSAxXSkgJiBzLmhhc2hfbWFzaztcbiAgICAgICAgICBoYXNoX2hlYWQgPSBzLnByZXZbcy5zdHJzdGFydCAmIHMud19tYXNrXSA9IHMuaGVhZFtzLmluc19oXTtcbiAgICAgICAgICBzLmhlYWRbcy5pbnNfaF0gPSBzLnN0cnN0YXJ0O1xuICAgICAgICAgIC8qKiovXG4gICAgICAgIH1cbiAgICAgIH0gd2hpbGUgKC0tcy5wcmV2X2xlbmd0aCAhPT0gMCk7XG4gICAgICBzLm1hdGNoX2F2YWlsYWJsZSA9IDA7XG4gICAgICBzLm1hdGNoX2xlbmd0aCA9IE1JTl9NQVRDSCAtIDE7XG4gICAgICBzLnN0cnN0YXJ0Kys7XG5cbiAgICAgIGlmIChiZmx1c2gpIHtcbiAgICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqL1xuICAgICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTtcbiAgICAgICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgICB9XG4gICAgICAgIC8qKiovXG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKHMubWF0Y2hfYXZhaWxhYmxlKSB7XG4gICAgICAvKiBJZiB0aGVyZSB3YXMgbm8gbWF0Y2ggYXQgdGhlIHByZXZpb3VzIHBvc2l0aW9uLCBvdXRwdXQgYVxuICAgICAgICogc2luZ2xlIGxpdGVyYWwuIElmIHRoZXJlIHdhcyBhIG1hdGNoIGJ1dCB0aGUgY3VycmVudCBtYXRjaFxuICAgICAgICogaXMgbG9uZ2VyLCB0cnVuY2F0ZSB0aGUgcHJldmlvdXMgbWF0Y2ggdG8gYSBzaW5nbGUgbGl0ZXJhbC5cbiAgICAgICAqL1xuICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsXCIlY1wiLCBzLT53aW5kb3dbcy0+c3Ryc3RhcnQtMV0pKTtcbiAgICAgIC8qKiogX3RyX3RhbGx5X2xpdChzLCBzLndpbmRvd1tzLnN0cnN0YXJ0LTFdLCBiZmx1c2gpOyAqKiovXG4gICAgICBiZmx1c2ggPSB0cmVlcy5fdHJfdGFsbHkocywgMCwgcy53aW5kb3dbcy5zdHJzdGFydCAtIDFdKTtcblxuICAgICAgaWYgKGJmbHVzaCkge1xuICAgICAgICAvKioqIEZMVVNIX0JMT0NLX09OTFkocywgMCkgKioqL1xuICAgICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTtcbiAgICAgICAgLyoqKi9cbiAgICAgIH1cbiAgICAgIHMuc3Ryc3RhcnQrKztcbiAgICAgIHMubG9va2FoZWFkLS07XG4gICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvKiBUaGVyZSBpcyBubyBwcmV2aW91cyBtYXRjaCB0byBjb21wYXJlIHdpdGgsIHdhaXQgZm9yXG4gICAgICAgKiB0aGUgbmV4dCBzdGVwIHRvIGRlY2lkZS5cbiAgICAgICAqL1xuICAgICAgcy5tYXRjaF9hdmFpbGFibGUgPSAxO1xuICAgICAgcy5zdHJzdGFydCsrO1xuICAgICAgcy5sb29rYWhlYWQtLTtcbiAgICB9XG4gIH1cbiAgLy9Bc3NlcnQgKGZsdXNoICE9IFpfTk9fRkxVU0gsIFwibm8gZmx1c2g/XCIpO1xuICBpZiAocy5tYXRjaF9hdmFpbGFibGUpIHtcbiAgICAvL1RyYWNldnYoKHN0ZGVycixcIiVjXCIsIHMtPndpbmRvd1tzLT5zdHJzdGFydC0xXSkpO1xuICAgIC8qKiogX3RyX3RhbGx5X2xpdChzLCBzLndpbmRvd1tzLnN0cnN0YXJ0LTFdLCBiZmx1c2gpOyAqKiovXG4gICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnQgLSAxXSk7XG5cbiAgICBzLm1hdGNoX2F2YWlsYWJsZSA9IDA7XG4gIH1cbiAgcy5pbnNlcnQgPSBzLnN0cnN0YXJ0IDwgTUlOX01BVENIIC0gMSA/IHMuc3Ryc3RhcnQgOiBNSU5fTUFUQ0ggLSAxO1xuICBpZiAoZmx1c2ggPT09IFpfRklOSVNIKSB7XG4gICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAxKTsgKioqL1xuICAgIGZsdXNoX2Jsb2NrX29ubHkocywgdHJ1ZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDtcbiAgICB9XG4gICAgLyoqKi9cbiAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7XG4gIH1cbiAgaWYgKHMubGFzdF9saXQpIHtcbiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovXG4gICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgfVxuICAgIC8qKiovXG4gIH1cblxuICByZXR1cm4gQlNfQkxPQ0tfRE9ORTtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEZvciBaX1JMRSwgc2ltcGx5IGxvb2sgZm9yIHJ1bnMgb2YgYnl0ZXMsIGdlbmVyYXRlIG1hdGNoZXMgb25seSBvZiBkaXN0YW5jZVxuICogb25lLiAgRG8gbm90IG1haW50YWluIGEgaGFzaCB0YWJsZS4gIChJdCB3aWxsIGJlIHJlZ2VuZXJhdGVkIGlmIHRoaXMgcnVuIG9mXG4gKiBkZWZsYXRlIHN3aXRjaGVzIGF3YXkgZnJvbSBaX1JMRS4pXG4gKi9cbmZ1bmN0aW9uIGRlZmxhdGVfcmxlKHMsIGZsdXNoKSB7XG4gIHZhciBiZmx1c2g7ICAgICAgICAgICAgLyogc2V0IGlmIGN1cnJlbnQgYmxvY2sgbXVzdCBiZSBmbHVzaGVkICovXG4gIHZhciBwcmV2OyAgICAgICAgICAgICAgLyogYnl0ZSBhdCBkaXN0YW5jZSBvbmUgdG8gbWF0Y2ggKi9cbiAgdmFyIHNjYW4sIHN0cmVuZDsgICAgICAvKiBzY2FuIGdvZXMgdXAgdG8gc3RyZW5kIGZvciBsZW5ndGggb2YgcnVuICovXG5cbiAgdmFyIF93aW4gPSBzLndpbmRvdztcblxuICBmb3IgKDs7KSB7XG4gICAgLyogTWFrZSBzdXJlIHRoYXQgd2UgYWx3YXlzIGhhdmUgZW5vdWdoIGxvb2thaGVhZCwgZXhjZXB0XG4gICAgICogYXQgdGhlIGVuZCBvZiB0aGUgaW5wdXQgZmlsZS4gV2UgbmVlZCBNQVhfTUFUQ0ggYnl0ZXNcbiAgICAgKiBmb3IgdGhlIGxvbmdlc3QgcnVuLCBwbHVzIG9uZSBmb3IgdGhlIHVucm9sbGVkIGxvb3AuXG4gICAgICovXG4gICAgaWYgKHMubG9va2FoZWFkIDw9IE1BWF9NQVRDSCkge1xuICAgICAgZmlsbF93aW5kb3cocyk7XG4gICAgICBpZiAocy5sb29rYWhlYWQgPD0gTUFYX01BVENIICYmIGZsdXNoID09PSBaX05PX0ZMVVNIKSB7XG4gICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgICB9XG4gICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHsgYnJlYWs7IH0gLyogZmx1c2ggdGhlIGN1cnJlbnQgYmxvY2sgKi9cbiAgICB9XG5cbiAgICAvKiBTZWUgaG93IG1hbnkgdGltZXMgdGhlIHByZXZpb3VzIGJ5dGUgcmVwZWF0cyAqL1xuICAgIHMubWF0Y2hfbGVuZ3RoID0gMDtcbiAgICBpZiAocy5sb29rYWhlYWQgPj0gTUlOX01BVENIICYmIHMuc3Ryc3RhcnQgPiAwKSB7XG4gICAgICBzY2FuID0gcy5zdHJzdGFydCAtIDE7XG4gICAgICBwcmV2ID0gX3dpbltzY2FuXTtcbiAgICAgIGlmIChwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHByZXYgPT09IF93aW5bKytzY2FuXSkge1xuICAgICAgICBzdHJlbmQgPSBzLnN0cnN0YXJ0ICsgTUFYX01BVENIO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgLypqc2hpbnQgbm9lbXB0eTpmYWxzZSovXG4gICAgICAgIH0gd2hpbGUgKHByZXYgPT09IF93aW5bKytzY2FuXSAmJiBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiZcbiAgICAgICAgICAgICAgICAgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmIHByZXYgPT09IF93aW5bKytzY2FuXSAmJlxuICAgICAgICAgICAgICAgICBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiYgcHJldiA9PT0gX3dpblsrK3NjYW5dICYmXG4gICAgICAgICAgICAgICAgIHByZXYgPT09IF93aW5bKytzY2FuXSAmJiBwcmV2ID09PSBfd2luWysrc2Nhbl0gJiZcbiAgICAgICAgICAgICAgICAgc2NhbiA8IHN0cmVuZCk7XG4gICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gTUFYX01BVENIIC0gKHN0cmVuZCAtIHNjYW4pO1xuICAgICAgICBpZiAocy5tYXRjaF9sZW5ndGggPiBzLmxvb2thaGVhZCkge1xuICAgICAgICAgIHMubWF0Y2hfbGVuZ3RoID0gcy5sb29rYWhlYWQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vQXNzZXJ0KHNjYW4gPD0gcy0+d2luZG93Kyh1SW50KShzLT53aW5kb3dfc2l6ZS0xKSwgXCJ3aWxkIHNjYW5cIik7XG4gICAgfVxuXG4gICAgLyogRW1pdCBtYXRjaCBpZiBoYXZlIHJ1biBvZiBNSU5fTUFUQ0ggb3IgbG9uZ2VyLCBlbHNlIGVtaXQgbGl0ZXJhbCAqL1xuICAgIGlmIChzLm1hdGNoX2xlbmd0aCA+PSBNSU5fTUFUQ0gpIHtcbiAgICAgIC8vY2hlY2tfbWF0Y2gocywgcy5zdHJzdGFydCwgcy5zdHJzdGFydCAtIDEsIHMubWF0Y2hfbGVuZ3RoKTtcblxuICAgICAgLyoqKiBfdHJfdGFsbHlfZGlzdChzLCAxLCBzLm1hdGNoX2xlbmd0aCAtIE1JTl9NQVRDSCwgYmZsdXNoKTsgKioqL1xuICAgICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIDEsIHMubWF0Y2hfbGVuZ3RoIC0gTUlOX01BVENIKTtcblxuICAgICAgcy5sb29rYWhlYWQgLT0gcy5tYXRjaF9sZW5ndGg7XG4gICAgICBzLnN0cnN0YXJ0ICs9IHMubWF0Y2hfbGVuZ3RoO1xuICAgICAgcy5tYXRjaF9sZW5ndGggPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgICAvKiBObyBtYXRjaCwgb3V0cHV0IGEgbGl0ZXJhbCBieXRlICovXG4gICAgICAvL1RyYWNldnYoKHN0ZGVycixcIiVjXCIsIHMtPndpbmRvd1tzLT5zdHJzdGFydF0pKTtcbiAgICAgIC8qKiogX3RyX3RhbGx5X2xpdChzLCBzLndpbmRvd1tzLnN0cnN0YXJ0XSwgYmZsdXNoKTsgKioqL1xuICAgICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnRdKTtcblxuICAgICAgcy5sb29rYWhlYWQtLTtcbiAgICAgIHMuc3Ryc3RhcnQrKztcbiAgICB9XG4gICAgaWYgKGJmbHVzaCkge1xuICAgICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAwKTsgKioqL1xuICAgICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gQlNfTkVFRF9NT1JFO1xuICAgICAgfVxuICAgICAgLyoqKi9cbiAgICB9XG4gIH1cbiAgcy5pbnNlcnQgPSAwO1xuICBpZiAoZmx1c2ggPT09IFpfRklOSVNIKSB7XG4gICAgLyoqKiBGTFVTSF9CTE9DSyhzLCAxKTsgKioqL1xuICAgIGZsdXNoX2Jsb2NrX29ubHkocywgdHJ1ZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19GSU5JU0hfU1RBUlRFRDtcbiAgICB9XG4gICAgLyoqKi9cbiAgICByZXR1cm4gQlNfRklOSVNIX0RPTkU7XG4gIH1cbiAgaWYgKHMubGFzdF9saXQpIHtcbiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovXG4gICAgZmx1c2hfYmxvY2tfb25seShzLCBmYWxzZSk7XG4gICAgaWYgKHMuc3RybS5hdmFpbF9vdXQgPT09IDApIHtcbiAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgfVxuICAgIC8qKiovXG4gIH1cbiAgcmV0dXJuIEJTX0JMT0NLX0RPTkU7XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogRm9yIFpfSFVGRk1BTl9PTkxZLCBkbyBub3QgbG9vayBmb3IgbWF0Y2hlcy4gIERvIG5vdCBtYWludGFpbiBhIGhhc2ggdGFibGUuXG4gKiAoSXQgd2lsbCBiZSByZWdlbmVyYXRlZCBpZiB0aGlzIHJ1biBvZiBkZWZsYXRlIHN3aXRjaGVzIGF3YXkgZnJvbSBIdWZmbWFuLilcbiAqL1xuZnVuY3Rpb24gZGVmbGF0ZV9odWZmKHMsIGZsdXNoKSB7XG4gIHZhciBiZmx1c2g7ICAgICAgICAgICAgIC8qIHNldCBpZiBjdXJyZW50IGJsb2NrIG11c3QgYmUgZmx1c2hlZCAqL1xuXG4gIGZvciAoOzspIHtcbiAgICAvKiBNYWtlIHN1cmUgdGhhdCB3ZSBoYXZlIGEgbGl0ZXJhbCB0byB3cml0ZS4gKi9cbiAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHtcbiAgICAgIGZpbGxfd2luZG93KHMpO1xuICAgICAgaWYgKHMubG9va2FoZWFkID09PSAwKSB7XG4gICAgICAgIGlmIChmbHVzaCA9PT0gWl9OT19GTFVTSCkge1xuICAgICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7ICAgICAgLyogZmx1c2ggdGhlIGN1cnJlbnQgYmxvY2sgKi9cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKiBPdXRwdXQgYSBsaXRlcmFsIGJ5dGUgKi9cbiAgICBzLm1hdGNoX2xlbmd0aCA9IDA7XG4gICAgLy9UcmFjZXZ2KChzdGRlcnIsXCIlY1wiLCBzLT53aW5kb3dbcy0+c3Ryc3RhcnRdKSk7XG4gICAgLyoqKiBfdHJfdGFsbHlfbGl0KHMsIHMud2luZG93W3Muc3Ryc3RhcnRdLCBiZmx1c2gpOyAqKiovXG4gICAgYmZsdXNoID0gdHJlZXMuX3RyX3RhbGx5KHMsIDAsIHMud2luZG93W3Muc3Ryc3RhcnRdKTtcbiAgICBzLmxvb2thaGVhZC0tO1xuICAgIHMuc3Ryc3RhcnQrKztcbiAgICBpZiAoYmZsdXNoKSB7XG4gICAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDApOyAqKiovXG4gICAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTtcbiAgICAgIGlmIChzLnN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICAgIHJldHVybiBCU19ORUVEX01PUkU7XG4gICAgICB9XG4gICAgICAvKioqL1xuICAgIH1cbiAgfVxuICBzLmluc2VydCA9IDA7XG4gIGlmIChmbHVzaCA9PT0gWl9GSU5JU0gpIHtcbiAgICAvKioqIEZMVVNIX0JMT0NLKHMsIDEpOyAqKiovXG4gICAgZmx1c2hfYmxvY2tfb25seShzLCB0cnVlKTtcbiAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgcmV0dXJuIEJTX0ZJTklTSF9TVEFSVEVEO1xuICAgIH1cbiAgICAvKioqL1xuICAgIHJldHVybiBCU19GSU5JU0hfRE9ORTtcbiAgfVxuICBpZiAocy5sYXN0X2xpdCkge1xuICAgIC8qKiogRkxVU0hfQkxPQ0socywgMCk7ICoqKi9cbiAgICBmbHVzaF9ibG9ja19vbmx5KHMsIGZhbHNlKTtcbiAgICBpZiAocy5zdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgcmV0dXJuIEJTX05FRURfTU9SRTtcbiAgICB9XG4gICAgLyoqKi9cbiAgfVxuICByZXR1cm4gQlNfQkxPQ0tfRE9ORTtcbn1cblxuLyogVmFsdWVzIGZvciBtYXhfbGF6eV9tYXRjaCwgZ29vZF9tYXRjaCBhbmQgbWF4X2NoYWluX2xlbmd0aCwgZGVwZW5kaW5nIG9uXG4gKiB0aGUgZGVzaXJlZCBwYWNrIGxldmVsICgwLi45KS4gVGhlIHZhbHVlcyBnaXZlbiBiZWxvdyBoYXZlIGJlZW4gdHVuZWQgdG9cbiAqIGV4Y2x1ZGUgd29yc3QgY2FzZSBwZXJmb3JtYW5jZSBmb3IgcGF0aG9sb2dpY2FsIGZpbGVzLiBCZXR0ZXIgdmFsdWVzIG1heSBiZVxuICogZm91bmQgZm9yIHNwZWNpZmljIGZpbGVzLlxuICovXG5mdW5jdGlvbiBDb25maWcoZ29vZF9sZW5ndGgsIG1heF9sYXp5LCBuaWNlX2xlbmd0aCwgbWF4X2NoYWluLCBmdW5jKSB7XG4gIHRoaXMuZ29vZF9sZW5ndGggPSBnb29kX2xlbmd0aDtcbiAgdGhpcy5tYXhfbGF6eSA9IG1heF9sYXp5O1xuICB0aGlzLm5pY2VfbGVuZ3RoID0gbmljZV9sZW5ndGg7XG4gIHRoaXMubWF4X2NoYWluID0gbWF4X2NoYWluO1xuICB0aGlzLmZ1bmMgPSBmdW5jO1xufVxuXG52YXIgY29uZmlndXJhdGlvbl90YWJsZTtcblxuY29uZmlndXJhdGlvbl90YWJsZSA9IFtcbiAgLyogICAgICBnb29kIGxhenkgbmljZSBjaGFpbiAqL1xuICBuZXcgQ29uZmlnKDAsIDAsIDAsIDAsIGRlZmxhdGVfc3RvcmVkKSwgICAgICAgICAgLyogMCBzdG9yZSBvbmx5ICovXG4gIG5ldyBDb25maWcoNCwgNCwgOCwgNCwgZGVmbGF0ZV9mYXN0KSwgICAgICAgICAgICAvKiAxIG1heCBzcGVlZCwgbm8gbGF6eSBtYXRjaGVzICovXG4gIG5ldyBDb25maWcoNCwgNSwgMTYsIDgsIGRlZmxhdGVfZmFzdCksICAgICAgICAgICAvKiAyICovXG4gIG5ldyBDb25maWcoNCwgNiwgMzIsIDMyLCBkZWZsYXRlX2Zhc3QpLCAgICAgICAgICAvKiAzICovXG5cbiAgbmV3IENvbmZpZyg0LCA0LCAxNiwgMTYsIGRlZmxhdGVfc2xvdyksICAgICAgICAgIC8qIDQgbGF6eSBtYXRjaGVzICovXG4gIG5ldyBDb25maWcoOCwgMTYsIDMyLCAzMiwgZGVmbGF0ZV9zbG93KSwgICAgICAgICAvKiA1ICovXG4gIG5ldyBDb25maWcoOCwgMTYsIDEyOCwgMTI4LCBkZWZsYXRlX3Nsb3cpLCAgICAgICAvKiA2ICovXG4gIG5ldyBDb25maWcoOCwgMzIsIDEyOCwgMjU2LCBkZWZsYXRlX3Nsb3cpLCAgICAgICAvKiA3ICovXG4gIG5ldyBDb25maWcoMzIsIDEyOCwgMjU4LCAxMDI0LCBkZWZsYXRlX3Nsb3cpLCAgICAvKiA4ICovXG4gIG5ldyBDb25maWcoMzIsIDI1OCwgMjU4LCA0MDk2LCBkZWZsYXRlX3Nsb3cpICAgICAvKiA5IG1heCBjb21wcmVzc2lvbiAqL1xuXTtcblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEluaXRpYWxpemUgdGhlIFwibG9uZ2VzdCBtYXRjaFwiIHJvdXRpbmVzIGZvciBhIG5ldyB6bGliIHN0cmVhbVxuICovXG5mdW5jdGlvbiBsbV9pbml0KHMpIHtcbiAgcy53aW5kb3dfc2l6ZSA9IDIgKiBzLndfc2l6ZTtcblxuICAvKioqIENMRUFSX0hBU0gocyk7ICoqKi9cbiAgemVybyhzLmhlYWQpOyAvLyBGaWxsIHdpdGggTklMICg9IDApO1xuXG4gIC8qIFNldCB0aGUgZGVmYXVsdCBjb25maWd1cmF0aW9uIHBhcmFtZXRlcnM6XG4gICAqL1xuICBzLm1heF9sYXp5X21hdGNoID0gY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5tYXhfbGF6eTtcbiAgcy5nb29kX21hdGNoID0gY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5nb29kX2xlbmd0aDtcbiAgcy5uaWNlX21hdGNoID0gY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5uaWNlX2xlbmd0aDtcbiAgcy5tYXhfY2hhaW5fbGVuZ3RoID0gY29uZmlndXJhdGlvbl90YWJsZVtzLmxldmVsXS5tYXhfY2hhaW47XG5cbiAgcy5zdHJzdGFydCA9IDA7XG4gIHMuYmxvY2tfc3RhcnQgPSAwO1xuICBzLmxvb2thaGVhZCA9IDA7XG4gIHMuaW5zZXJ0ID0gMDtcbiAgcy5tYXRjaF9sZW5ndGggPSBzLnByZXZfbGVuZ3RoID0gTUlOX01BVENIIC0gMTtcbiAgcy5tYXRjaF9hdmFpbGFibGUgPSAwO1xuICBzLmluc19oID0gMDtcbn1cblxuXG5mdW5jdGlvbiBEZWZsYXRlU3RhdGUoKSB7XG4gIHRoaXMuc3RybSA9IG51bGw7ICAgICAgICAgICAgLyogcG9pbnRlciBiYWNrIHRvIHRoaXMgemxpYiBzdHJlYW0gKi9cbiAgdGhpcy5zdGF0dXMgPSAwOyAgICAgICAgICAgIC8qIGFzIHRoZSBuYW1lIGltcGxpZXMgKi9cbiAgdGhpcy5wZW5kaW5nX2J1ZiA9IG51bGw7ICAgICAgLyogb3V0cHV0IHN0aWxsIHBlbmRpbmcgKi9cbiAgdGhpcy5wZW5kaW5nX2J1Zl9zaXplID0gMDsgIC8qIHNpemUgb2YgcGVuZGluZ19idWYgKi9cbiAgdGhpcy5wZW5kaW5nX291dCA9IDA7ICAgICAgIC8qIG5leHQgcGVuZGluZyBieXRlIHRvIG91dHB1dCB0byB0aGUgc3RyZWFtICovXG4gIHRoaXMucGVuZGluZyA9IDA7ICAgICAgICAgICAvKiBuYiBvZiBieXRlcyBpbiB0aGUgcGVuZGluZyBidWZmZXIgKi9cbiAgdGhpcy53cmFwID0gMDsgICAgICAgICAgICAgIC8qIGJpdCAwIHRydWUgZm9yIHpsaWIsIGJpdCAxIHRydWUgZm9yIGd6aXAgKi9cbiAgdGhpcy5nemhlYWQgPSBudWxsOyAgICAgICAgIC8qIGd6aXAgaGVhZGVyIGluZm9ybWF0aW9uIHRvIHdyaXRlICovXG4gIHRoaXMuZ3ppbmRleCA9IDA7ICAgICAgICAgICAvKiB3aGVyZSBpbiBleHRyYSwgbmFtZSwgb3IgY29tbWVudCAqL1xuICB0aGlzLm1ldGhvZCA9IFpfREVGTEFURUQ7IC8qIGNhbiBvbmx5IGJlIERFRkxBVEVEICovXG4gIHRoaXMubGFzdF9mbHVzaCA9IC0xOyAgIC8qIHZhbHVlIG9mIGZsdXNoIHBhcmFtIGZvciBwcmV2aW91cyBkZWZsYXRlIGNhbGwgKi9cblxuICB0aGlzLndfc2l6ZSA9IDA7ICAvKiBMWjc3IHdpbmRvdyBzaXplICgzMksgYnkgZGVmYXVsdCkgKi9cbiAgdGhpcy53X2JpdHMgPSAwOyAgLyogbG9nMih3X3NpemUpICAoOC4uMTYpICovXG4gIHRoaXMud19tYXNrID0gMDsgIC8qIHdfc2l6ZSAtIDEgKi9cblxuICB0aGlzLndpbmRvdyA9IG51bGw7XG4gIC8qIFNsaWRpbmcgd2luZG93LiBJbnB1dCBieXRlcyBhcmUgcmVhZCBpbnRvIHRoZSBzZWNvbmQgaGFsZiBvZiB0aGUgd2luZG93LFxuICAgKiBhbmQgbW92ZSB0byB0aGUgZmlyc3QgaGFsZiBsYXRlciB0byBrZWVwIGEgZGljdGlvbmFyeSBvZiBhdCBsZWFzdCB3U2l6ZVxuICAgKiBieXRlcy4gV2l0aCB0aGlzIG9yZ2FuaXphdGlvbiwgbWF0Y2hlcyBhcmUgbGltaXRlZCB0byBhIGRpc3RhbmNlIG9mXG4gICAqIHdTaXplLU1BWF9NQVRDSCBieXRlcywgYnV0IHRoaXMgZW5zdXJlcyB0aGF0IElPIGlzIGFsd2F5c1xuICAgKiBwZXJmb3JtZWQgd2l0aCBhIGxlbmd0aCBtdWx0aXBsZSBvZiB0aGUgYmxvY2sgc2l6ZS5cbiAgICovXG5cbiAgdGhpcy53aW5kb3dfc2l6ZSA9IDA7XG4gIC8qIEFjdHVhbCBzaXplIG9mIHdpbmRvdzogMip3U2l6ZSwgZXhjZXB0IHdoZW4gdGhlIHVzZXIgaW5wdXQgYnVmZmVyXG4gICAqIGlzIGRpcmVjdGx5IHVzZWQgYXMgc2xpZGluZyB3aW5kb3cuXG4gICAqL1xuXG4gIHRoaXMucHJldiA9IG51bGw7XG4gIC8qIExpbmsgdG8gb2xkZXIgc3RyaW5nIHdpdGggc2FtZSBoYXNoIGluZGV4LiBUbyBsaW1pdCB0aGUgc2l6ZSBvZiB0aGlzXG4gICAqIGFycmF5IHRvIDY0SywgdGhpcyBsaW5rIGlzIG1haW50YWluZWQgb25seSBmb3IgdGhlIGxhc3QgMzJLIHN0cmluZ3MuXG4gICAqIEFuIGluZGV4IGluIHRoaXMgYXJyYXkgaXMgdGh1cyBhIHdpbmRvdyBpbmRleCBtb2R1bG8gMzJLLlxuICAgKi9cblxuICB0aGlzLmhlYWQgPSBudWxsOyAgIC8qIEhlYWRzIG9mIHRoZSBoYXNoIGNoYWlucyBvciBOSUwuICovXG5cbiAgdGhpcy5pbnNfaCA9IDA7ICAgICAgIC8qIGhhc2ggaW5kZXggb2Ygc3RyaW5nIHRvIGJlIGluc2VydGVkICovXG4gIHRoaXMuaGFzaF9zaXplID0gMDsgICAvKiBudW1iZXIgb2YgZWxlbWVudHMgaW4gaGFzaCB0YWJsZSAqL1xuICB0aGlzLmhhc2hfYml0cyA9IDA7ICAgLyogbG9nMihoYXNoX3NpemUpICovXG4gIHRoaXMuaGFzaF9tYXNrID0gMDsgICAvKiBoYXNoX3NpemUtMSAqL1xuXG4gIHRoaXMuaGFzaF9zaGlmdCA9IDA7XG4gIC8qIE51bWJlciBvZiBiaXRzIGJ5IHdoaWNoIGluc19oIG11c3QgYmUgc2hpZnRlZCBhdCBlYWNoIGlucHV0XG4gICAqIHN0ZXAuIEl0IG11c3QgYmUgc3VjaCB0aGF0IGFmdGVyIE1JTl9NQVRDSCBzdGVwcywgdGhlIG9sZGVzdFxuICAgKiBieXRlIG5vIGxvbmdlciB0YWtlcyBwYXJ0IGluIHRoZSBoYXNoIGtleSwgdGhhdCBpczpcbiAgICogICBoYXNoX3NoaWZ0ICogTUlOX01BVENIID49IGhhc2hfYml0c1xuICAgKi9cblxuICB0aGlzLmJsb2NrX3N0YXJ0ID0gMDtcbiAgLyogV2luZG93IHBvc2l0aW9uIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGN1cnJlbnQgb3V0cHV0IGJsb2NrLiBHZXRzXG4gICAqIG5lZ2F0aXZlIHdoZW4gdGhlIHdpbmRvdyBpcyBtb3ZlZCBiYWNrd2FyZHMuXG4gICAqL1xuXG4gIHRoaXMubWF0Y2hfbGVuZ3RoID0gMDsgICAgICAvKiBsZW5ndGggb2YgYmVzdCBtYXRjaCAqL1xuICB0aGlzLnByZXZfbWF0Y2ggPSAwOyAgICAgICAgLyogcHJldmlvdXMgbWF0Y2ggKi9cbiAgdGhpcy5tYXRjaF9hdmFpbGFibGUgPSAwOyAgIC8qIHNldCBpZiBwcmV2aW91cyBtYXRjaCBleGlzdHMgKi9cbiAgdGhpcy5zdHJzdGFydCA9IDA7ICAgICAgICAgIC8qIHN0YXJ0IG9mIHN0cmluZyB0byBpbnNlcnQgKi9cbiAgdGhpcy5tYXRjaF9zdGFydCA9IDA7ICAgICAgIC8qIHN0YXJ0IG9mIG1hdGNoaW5nIHN0cmluZyAqL1xuICB0aGlzLmxvb2thaGVhZCA9IDA7ICAgICAgICAgLyogbnVtYmVyIG9mIHZhbGlkIGJ5dGVzIGFoZWFkIGluIHdpbmRvdyAqL1xuXG4gIHRoaXMucHJldl9sZW5ndGggPSAwO1xuICAvKiBMZW5ndGggb2YgdGhlIGJlc3QgbWF0Y2ggYXQgcHJldmlvdXMgc3RlcC4gTWF0Y2hlcyBub3QgZ3JlYXRlciB0aGFuIHRoaXNcbiAgICogYXJlIGRpc2NhcmRlZC4gVGhpcyBpcyB1c2VkIGluIHRoZSBsYXp5IG1hdGNoIGV2YWx1YXRpb24uXG4gICAqL1xuXG4gIHRoaXMubWF4X2NoYWluX2xlbmd0aCA9IDA7XG4gIC8qIFRvIHNwZWVkIHVwIGRlZmxhdGlvbiwgaGFzaCBjaGFpbnMgYXJlIG5ldmVyIHNlYXJjaGVkIGJleW9uZCB0aGlzXG4gICAqIGxlbmd0aC4gIEEgaGlnaGVyIGxpbWl0IGltcHJvdmVzIGNvbXByZXNzaW9uIHJhdGlvIGJ1dCBkZWdyYWRlcyB0aGVcbiAgICogc3BlZWQuXG4gICAqL1xuXG4gIHRoaXMubWF4X2xhenlfbWF0Y2ggPSAwO1xuICAvKiBBdHRlbXB0IHRvIGZpbmQgYSBiZXR0ZXIgbWF0Y2ggb25seSB3aGVuIHRoZSBjdXJyZW50IG1hdGNoIGlzIHN0cmljdGx5XG4gICAqIHNtYWxsZXIgdGhhbiB0aGlzIHZhbHVlLiBUaGlzIG1lY2hhbmlzbSBpcyB1c2VkIG9ubHkgZm9yIGNvbXByZXNzaW9uXG4gICAqIGxldmVscyA+PSA0LlxuICAgKi9cbiAgLy8gVGhhdCdzIGFsaWFzIHRvIG1heF9sYXp5X21hdGNoLCBkb24ndCB1c2UgZGlyZWN0bHlcbiAgLy90aGlzLm1heF9pbnNlcnRfbGVuZ3RoID0gMDtcbiAgLyogSW5zZXJ0IG5ldyBzdHJpbmdzIGluIHRoZSBoYXNoIHRhYmxlIG9ubHkgaWYgdGhlIG1hdGNoIGxlbmd0aCBpcyBub3RcbiAgICogZ3JlYXRlciB0aGFuIHRoaXMgbGVuZ3RoLiBUaGlzIHNhdmVzIHRpbWUgYnV0IGRlZ3JhZGVzIGNvbXByZXNzaW9uLlxuICAgKiBtYXhfaW5zZXJ0X2xlbmd0aCBpcyB1c2VkIG9ubHkgZm9yIGNvbXByZXNzaW9uIGxldmVscyA8PSAzLlxuICAgKi9cblxuICB0aGlzLmxldmVsID0gMDsgICAgIC8qIGNvbXByZXNzaW9uIGxldmVsICgxLi45KSAqL1xuICB0aGlzLnN0cmF0ZWd5ID0gMDsgIC8qIGZhdm9yIG9yIGZvcmNlIEh1ZmZtYW4gY29kaW5nKi9cblxuICB0aGlzLmdvb2RfbWF0Y2ggPSAwO1xuICAvKiBVc2UgYSBmYXN0ZXIgc2VhcmNoIHdoZW4gdGhlIHByZXZpb3VzIG1hdGNoIGlzIGxvbmdlciB0aGFuIHRoaXMgKi9cblxuICB0aGlzLm5pY2VfbWF0Y2ggPSAwOyAvKiBTdG9wIHNlYXJjaGluZyB3aGVuIGN1cnJlbnQgbWF0Y2ggZXhjZWVkcyB0aGlzICovXG5cbiAgICAgICAgICAgICAgLyogdXNlZCBieSB0cmVlcy5jOiAqL1xuXG4gIC8qIERpZG4ndCB1c2UgY3RfZGF0YSB0eXBlZGVmIGJlbG93IHRvIHN1cHByZXNzIGNvbXBpbGVyIHdhcm5pbmcgKi9cblxuICAvLyBzdHJ1Y3QgY3RfZGF0YV9zIGR5bl9sdHJlZVtIRUFQX1NJWkVdOyAgIC8qIGxpdGVyYWwgYW5kIGxlbmd0aCB0cmVlICovXG4gIC8vIHN0cnVjdCBjdF9kYXRhX3MgZHluX2R0cmVlWzIqRF9DT0RFUysxXTsgLyogZGlzdGFuY2UgdHJlZSAqL1xuICAvLyBzdHJ1Y3QgY3RfZGF0YV9zIGJsX3RyZWVbMipCTF9DT0RFUysxXTsgIC8qIEh1ZmZtYW4gdHJlZSBmb3IgYml0IGxlbmd0aHMgKi9cblxuICAvLyBVc2UgZmxhdCBhcnJheSBvZiBET1VCTEUgc2l6ZSwgd2l0aCBpbnRlcmxlYXZlZCBmYXRhLFxuICAvLyBiZWNhdXNlIEpTIGRvZXMgbm90IHN1cHBvcnQgZWZmZWN0aXZlXG4gIHRoaXMuZHluX2x0cmVlICA9IG5ldyB1dGlscy5CdWYxNihIRUFQX1NJWkUgKiAyKTtcbiAgdGhpcy5keW5fZHRyZWUgID0gbmV3IHV0aWxzLkJ1ZjE2KCgyICogRF9DT0RFUyArIDEpICogMik7XG4gIHRoaXMuYmxfdHJlZSAgICA9IG5ldyB1dGlscy5CdWYxNigoMiAqIEJMX0NPREVTICsgMSkgKiAyKTtcbiAgemVybyh0aGlzLmR5bl9sdHJlZSk7XG4gIHplcm8odGhpcy5keW5fZHRyZWUpO1xuICB6ZXJvKHRoaXMuYmxfdHJlZSk7XG5cbiAgdGhpcy5sX2Rlc2MgICA9IG51bGw7ICAgICAgICAgLyogZGVzYy4gZm9yIGxpdGVyYWwgdHJlZSAqL1xuICB0aGlzLmRfZGVzYyAgID0gbnVsbDsgICAgICAgICAvKiBkZXNjLiBmb3IgZGlzdGFuY2UgdHJlZSAqL1xuICB0aGlzLmJsX2Rlc2MgID0gbnVsbDsgICAgICAgICAvKiBkZXNjLiBmb3IgYml0IGxlbmd0aCB0cmVlICovXG5cbiAgLy91c2ggYmxfY291bnRbTUFYX0JJVFMrMV07XG4gIHRoaXMuYmxfY291bnQgPSBuZXcgdXRpbHMuQnVmMTYoTUFYX0JJVFMgKyAxKTtcbiAgLyogbnVtYmVyIG9mIGNvZGVzIGF0IGVhY2ggYml0IGxlbmd0aCBmb3IgYW4gb3B0aW1hbCB0cmVlICovXG5cbiAgLy9pbnQgaGVhcFsyKkxfQ09ERVMrMV07ICAgICAgLyogaGVhcCB1c2VkIHRvIGJ1aWxkIHRoZSBIdWZmbWFuIHRyZWVzICovXG4gIHRoaXMuaGVhcCA9IG5ldyB1dGlscy5CdWYxNigyICogTF9DT0RFUyArIDEpOyAgLyogaGVhcCB1c2VkIHRvIGJ1aWxkIHRoZSBIdWZmbWFuIHRyZWVzICovXG4gIHplcm8odGhpcy5oZWFwKTtcblxuICB0aGlzLmhlYXBfbGVuID0gMDsgICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgZWxlbWVudHMgaW4gdGhlIGhlYXAgKi9cbiAgdGhpcy5oZWFwX21heCA9IDA7ICAgICAgICAgICAgICAgLyogZWxlbWVudCBvZiBsYXJnZXN0IGZyZXF1ZW5jeSAqL1xuICAvKiBUaGUgc29ucyBvZiBoZWFwW25dIGFyZSBoZWFwWzIqbl0gYW5kIGhlYXBbMipuKzFdLiBoZWFwWzBdIGlzIG5vdCB1c2VkLlxuICAgKiBUaGUgc2FtZSBoZWFwIGFycmF5IGlzIHVzZWQgdG8gYnVpbGQgYWxsIHRyZWVzLlxuICAgKi9cblxuICB0aGlzLmRlcHRoID0gbmV3IHV0aWxzLkJ1ZjE2KDIgKiBMX0NPREVTICsgMSk7IC8vdWNoIGRlcHRoWzIqTF9DT0RFUysxXTtcbiAgemVybyh0aGlzLmRlcHRoKTtcbiAgLyogRGVwdGggb2YgZWFjaCBzdWJ0cmVlIHVzZWQgYXMgdGllIGJyZWFrZXIgZm9yIHRyZWVzIG9mIGVxdWFsIGZyZXF1ZW5jeVxuICAgKi9cblxuICB0aGlzLmxfYnVmID0gMDsgICAgICAgICAgLyogYnVmZmVyIGluZGV4IGZvciBsaXRlcmFscyBvciBsZW5ndGhzICovXG5cbiAgdGhpcy5saXRfYnVmc2l6ZSA9IDA7XG4gIC8qIFNpemUgb2YgbWF0Y2ggYnVmZmVyIGZvciBsaXRlcmFscy9sZW5ndGhzLiAgVGhlcmUgYXJlIDQgcmVhc29ucyBmb3JcbiAgICogbGltaXRpbmcgbGl0X2J1ZnNpemUgdG8gNjRLOlxuICAgKiAgIC0gZnJlcXVlbmNpZXMgY2FuIGJlIGtlcHQgaW4gMTYgYml0IGNvdW50ZXJzXG4gICAqICAgLSBpZiBjb21wcmVzc2lvbiBpcyBub3Qgc3VjY2Vzc2Z1bCBmb3IgdGhlIGZpcnN0IGJsb2NrLCBhbGwgaW5wdXRcbiAgICogICAgIGRhdGEgaXMgc3RpbGwgaW4gdGhlIHdpbmRvdyBzbyB3ZSBjYW4gc3RpbGwgZW1pdCBhIHN0b3JlZCBibG9jayBldmVuXG4gICAqICAgICB3aGVuIGlucHV0IGNvbWVzIGZyb20gc3RhbmRhcmQgaW5wdXQuICAoVGhpcyBjYW4gYWxzbyBiZSBkb25lIGZvclxuICAgKiAgICAgYWxsIGJsb2NrcyBpZiBsaXRfYnVmc2l6ZSBpcyBub3QgZ3JlYXRlciB0aGFuIDMySy4pXG4gICAqICAgLSBpZiBjb21wcmVzc2lvbiBpcyBub3Qgc3VjY2Vzc2Z1bCBmb3IgYSBmaWxlIHNtYWxsZXIgdGhhbiA2NEssIHdlIGNhblxuICAgKiAgICAgZXZlbiBlbWl0IGEgc3RvcmVkIGZpbGUgaW5zdGVhZCBvZiBhIHN0b3JlZCBibG9jayAoc2F2aW5nIDUgYnl0ZXMpLlxuICAgKiAgICAgVGhpcyBpcyBhcHBsaWNhYmxlIG9ubHkgZm9yIHppcCAobm90IGd6aXAgb3IgemxpYikuXG4gICAqICAgLSBjcmVhdGluZyBuZXcgSHVmZm1hbiB0cmVlcyBsZXNzIGZyZXF1ZW50bHkgbWF5IG5vdCBwcm92aWRlIGZhc3RcbiAgICogICAgIGFkYXB0YXRpb24gdG8gY2hhbmdlcyBpbiB0aGUgaW5wdXQgZGF0YSBzdGF0aXN0aWNzLiAoVGFrZSBmb3JcbiAgICogICAgIGV4YW1wbGUgYSBiaW5hcnkgZmlsZSB3aXRoIHBvb3JseSBjb21wcmVzc2libGUgY29kZSBmb2xsb3dlZCBieVxuICAgKiAgICAgYSBoaWdobHkgY29tcHJlc3NpYmxlIHN0cmluZyB0YWJsZS4pIFNtYWxsZXIgYnVmZmVyIHNpemVzIGdpdmVcbiAgICogICAgIGZhc3QgYWRhcHRhdGlvbiBidXQgaGF2ZSBvZiBjb3Vyc2UgdGhlIG92ZXJoZWFkIG9mIHRyYW5zbWl0dGluZ1xuICAgKiAgICAgdHJlZXMgbW9yZSBmcmVxdWVudGx5LlxuICAgKiAgIC0gSSBjYW4ndCBjb3VudCBhYm92ZSA0XG4gICAqL1xuXG4gIHRoaXMubGFzdF9saXQgPSAwOyAgICAgIC8qIHJ1bm5pbmcgaW5kZXggaW4gbF9idWYgKi9cblxuICB0aGlzLmRfYnVmID0gMDtcbiAgLyogQnVmZmVyIGluZGV4IGZvciBkaXN0YW5jZXMuIFRvIHNpbXBsaWZ5IHRoZSBjb2RlLCBkX2J1ZiBhbmQgbF9idWYgaGF2ZVxuICAgKiB0aGUgc2FtZSBudW1iZXIgb2YgZWxlbWVudHMuIFRvIHVzZSBkaWZmZXJlbnQgbGVuZ3RocywgYW4gZXh0cmEgZmxhZ1xuICAgKiBhcnJheSB3b3VsZCBiZSBuZWNlc3NhcnkuXG4gICAqL1xuXG4gIHRoaXMub3B0X2xlbiA9IDA7ICAgICAgIC8qIGJpdCBsZW5ndGggb2YgY3VycmVudCBibG9jayB3aXRoIG9wdGltYWwgdHJlZXMgKi9cbiAgdGhpcy5zdGF0aWNfbGVuID0gMDsgICAgLyogYml0IGxlbmd0aCBvZiBjdXJyZW50IGJsb2NrIHdpdGggc3RhdGljIHRyZWVzICovXG4gIHRoaXMubWF0Y2hlcyA9IDA7ICAgICAgIC8qIG51bWJlciBvZiBzdHJpbmcgbWF0Y2hlcyBpbiBjdXJyZW50IGJsb2NrICovXG4gIHRoaXMuaW5zZXJ0ID0gMDsgICAgICAgIC8qIGJ5dGVzIGF0IGVuZCBvZiB3aW5kb3cgbGVmdCB0byBpbnNlcnQgKi9cblxuXG4gIHRoaXMuYmlfYnVmID0gMDtcbiAgLyogT3V0cHV0IGJ1ZmZlci4gYml0cyBhcmUgaW5zZXJ0ZWQgc3RhcnRpbmcgYXQgdGhlIGJvdHRvbSAobGVhc3RcbiAgICogc2lnbmlmaWNhbnQgYml0cykuXG4gICAqL1xuICB0aGlzLmJpX3ZhbGlkID0gMDtcbiAgLyogTnVtYmVyIG9mIHZhbGlkIGJpdHMgaW4gYmlfYnVmLiAgQWxsIGJpdHMgYWJvdmUgdGhlIGxhc3QgdmFsaWQgYml0XG4gICAqIGFyZSBhbHdheXMgemVyby5cbiAgICovXG5cbiAgLy8gVXNlZCBmb3Igd2luZG93IG1lbW9yeSBpbml0LiBXZSBzYWZlbHkgaWdub3JlIGl0IGZvciBKUy4gVGhhdCBtYWtlc1xuICAvLyBzZW5zZSBvbmx5IGZvciBwb2ludGVycyBhbmQgbWVtb3J5IGNoZWNrIHRvb2xzLlxuICAvL3RoaXMuaGlnaF93YXRlciA9IDA7XG4gIC8qIEhpZ2ggd2F0ZXIgbWFyayBvZmZzZXQgaW4gd2luZG93IGZvciBpbml0aWFsaXplZCBieXRlcyAtLSBieXRlcyBhYm92ZVxuICAgKiB0aGlzIGFyZSBzZXQgdG8gemVybyBpbiBvcmRlciB0byBhdm9pZCBtZW1vcnkgY2hlY2sgd2FybmluZ3Mgd2hlblxuICAgKiBsb25nZXN0IG1hdGNoIHJvdXRpbmVzIGFjY2VzcyBieXRlcyBwYXN0IHRoZSBpbnB1dC4gIFRoaXMgaXMgdGhlblxuICAgKiB1cGRhdGVkIHRvIHRoZSBuZXcgaGlnaCB3YXRlciBtYXJrLlxuICAgKi9cbn1cblxuXG5mdW5jdGlvbiBkZWZsYXRlUmVzZXRLZWVwKHN0cm0pIHtcbiAgdmFyIHM7XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7XG4gICAgcmV0dXJuIGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUik7XG4gIH1cblxuICBzdHJtLnRvdGFsX2luID0gc3RybS50b3RhbF9vdXQgPSAwO1xuICBzdHJtLmRhdGFfdHlwZSA9IFpfVU5LTk9XTjtcblxuICBzID0gc3RybS5zdGF0ZTtcbiAgcy5wZW5kaW5nID0gMDtcbiAgcy5wZW5kaW5nX291dCA9IDA7XG5cbiAgaWYgKHMud3JhcCA8IDApIHtcbiAgICBzLndyYXAgPSAtcy53cmFwO1xuICAgIC8qIHdhcyBtYWRlIG5lZ2F0aXZlIGJ5IGRlZmxhdGUoLi4uLCBaX0ZJTklTSCk7ICovXG4gIH1cbiAgcy5zdGF0dXMgPSAocy53cmFwID8gSU5JVF9TVEFURSA6IEJVU1lfU1RBVEUpO1xuICBzdHJtLmFkbGVyID0gKHMud3JhcCA9PT0gMikgP1xuICAgIDAgIC8vIGNyYzMyKDAsIFpfTlVMTCwgMClcbiAgOlxuICAgIDE7IC8vIGFkbGVyMzIoMCwgWl9OVUxMLCAwKVxuICBzLmxhc3RfZmx1c2ggPSBaX05PX0ZMVVNIO1xuICB0cmVlcy5fdHJfaW5pdChzKTtcbiAgcmV0dXJuIFpfT0s7XG59XG5cblxuZnVuY3Rpb24gZGVmbGF0ZVJlc2V0KHN0cm0pIHtcbiAgdmFyIHJldCA9IGRlZmxhdGVSZXNldEtlZXAoc3RybSk7XG4gIGlmIChyZXQgPT09IFpfT0spIHtcbiAgICBsbV9pbml0KHN0cm0uc3RhdGUpO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cblxuZnVuY3Rpb24gZGVmbGF0ZVNldEhlYWRlcihzdHJtLCBoZWFkKSB7XG4gIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cbiAgaWYgKHN0cm0uc3RhdGUud3JhcCAhPT0gMikgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cbiAgc3RybS5zdGF0ZS5nemhlYWQgPSBoZWFkO1xuICByZXR1cm4gWl9PSztcbn1cblxuXG5mdW5jdGlvbiBkZWZsYXRlSW5pdDIoc3RybSwgbGV2ZWwsIG1ldGhvZCwgd2luZG93Qml0cywgbWVtTGV2ZWwsIHN0cmF0ZWd5KSB7XG4gIGlmICghc3RybSkgeyAvLyA9PT0gWl9OVUxMXG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG4gIHZhciB3cmFwID0gMTtcblxuICBpZiAobGV2ZWwgPT09IFpfREVGQVVMVF9DT01QUkVTU0lPTikge1xuICAgIGxldmVsID0gNjtcbiAgfVxuXG4gIGlmICh3aW5kb3dCaXRzIDwgMCkgeyAvKiBzdXBwcmVzcyB6bGliIHdyYXBwZXIgKi9cbiAgICB3cmFwID0gMDtcbiAgICB3aW5kb3dCaXRzID0gLXdpbmRvd0JpdHM7XG4gIH1cblxuICBlbHNlIGlmICh3aW5kb3dCaXRzID4gMTUpIHtcbiAgICB3cmFwID0gMjsgICAgICAgICAgIC8qIHdyaXRlIGd6aXAgd3JhcHBlciBpbnN0ZWFkICovXG4gICAgd2luZG93Qml0cyAtPSAxNjtcbiAgfVxuXG5cbiAgaWYgKG1lbUxldmVsIDwgMSB8fCBtZW1MZXZlbCA+IE1BWF9NRU1fTEVWRUwgfHwgbWV0aG9kICE9PSBaX0RFRkxBVEVEIHx8XG4gICAgd2luZG93Qml0cyA8IDggfHwgd2luZG93Qml0cyA+IDE1IHx8IGxldmVsIDwgMCB8fCBsZXZlbCA+IDkgfHxcbiAgICBzdHJhdGVneSA8IDAgfHwgc3RyYXRlZ3kgPiBaX0ZJWEVEKSB7XG4gICAgcmV0dXJuIGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUik7XG4gIH1cblxuXG4gIGlmICh3aW5kb3dCaXRzID09PSA4KSB7XG4gICAgd2luZG93Qml0cyA9IDk7XG4gIH1cbiAgLyogdW50aWwgMjU2LWJ5dGUgd2luZG93IGJ1ZyBmaXhlZCAqL1xuXG4gIHZhciBzID0gbmV3IERlZmxhdGVTdGF0ZSgpO1xuXG4gIHN0cm0uc3RhdGUgPSBzO1xuICBzLnN0cm0gPSBzdHJtO1xuXG4gIHMud3JhcCA9IHdyYXA7XG4gIHMuZ3poZWFkID0gbnVsbDtcbiAgcy53X2JpdHMgPSB3aW5kb3dCaXRzO1xuICBzLndfc2l6ZSA9IDEgPDwgcy53X2JpdHM7XG4gIHMud19tYXNrID0gcy53X3NpemUgLSAxO1xuXG4gIHMuaGFzaF9iaXRzID0gbWVtTGV2ZWwgKyA3O1xuICBzLmhhc2hfc2l6ZSA9IDEgPDwgcy5oYXNoX2JpdHM7XG4gIHMuaGFzaF9tYXNrID0gcy5oYXNoX3NpemUgLSAxO1xuICBzLmhhc2hfc2hpZnQgPSB+figocy5oYXNoX2JpdHMgKyBNSU5fTUFUQ0ggLSAxKSAvIE1JTl9NQVRDSCk7XG5cbiAgcy53aW5kb3cgPSBuZXcgdXRpbHMuQnVmOChzLndfc2l6ZSAqIDIpO1xuICBzLmhlYWQgPSBuZXcgdXRpbHMuQnVmMTYocy5oYXNoX3NpemUpO1xuICBzLnByZXYgPSBuZXcgdXRpbHMuQnVmMTYocy53X3NpemUpO1xuXG4gIC8vIERvbid0IG5lZWQgbWVtIGluaXQgbWFnaWMgZm9yIEpTLlxuICAvL3MuaGlnaF93YXRlciA9IDA7ICAvKiBub3RoaW5nIHdyaXR0ZW4gdG8gcy0+d2luZG93IHlldCAqL1xuXG4gIHMubGl0X2J1ZnNpemUgPSAxIDw8IChtZW1MZXZlbCArIDYpOyAvKiAxNksgZWxlbWVudHMgYnkgZGVmYXVsdCAqL1xuXG4gIHMucGVuZGluZ19idWZfc2l6ZSA9IHMubGl0X2J1ZnNpemUgKiA0O1xuXG4gIC8vb3ZlcmxheSA9ICh1c2hmICopIFpBTExPQyhzdHJtLCBzLT5saXRfYnVmc2l6ZSwgc2l6ZW9mKHVzaCkrMik7XG4gIC8vcy0+cGVuZGluZ19idWYgPSAodWNoZiAqKSBvdmVybGF5O1xuICBzLnBlbmRpbmdfYnVmID0gbmV3IHV0aWxzLkJ1Zjgocy5wZW5kaW5nX2J1Zl9zaXplKTtcblxuICAvLyBJdCBpcyBvZmZzZXQgZnJvbSBgcy5wZW5kaW5nX2J1ZmAgKHNpemUgaXMgYHMubGl0X2J1ZnNpemUgKiAyYClcbiAgLy9zLT5kX2J1ZiA9IG92ZXJsYXkgKyBzLT5saXRfYnVmc2l6ZS9zaXplb2YodXNoKTtcbiAgcy5kX2J1ZiA9IDEgKiBzLmxpdF9idWZzaXplO1xuXG4gIC8vcy0+bF9idWYgPSBzLT5wZW5kaW5nX2J1ZiArICgxK3NpemVvZih1c2gpKSpzLT5saXRfYnVmc2l6ZTtcbiAgcy5sX2J1ZiA9ICgxICsgMikgKiBzLmxpdF9idWZzaXplO1xuXG4gIHMubGV2ZWwgPSBsZXZlbDtcbiAgcy5zdHJhdGVneSA9IHN0cmF0ZWd5O1xuICBzLm1ldGhvZCA9IG1ldGhvZDtcblxuICByZXR1cm4gZGVmbGF0ZVJlc2V0KHN0cm0pO1xufVxuXG5mdW5jdGlvbiBkZWZsYXRlSW5pdChzdHJtLCBsZXZlbCkge1xuICByZXR1cm4gZGVmbGF0ZUluaXQyKHN0cm0sIGxldmVsLCBaX0RFRkxBVEVELCBNQVhfV0JJVFMsIERFRl9NRU1fTEVWRUwsIFpfREVGQVVMVF9TVFJBVEVHWSk7XG59XG5cblxuZnVuY3Rpb24gZGVmbGF0ZShzdHJtLCBmbHVzaCkge1xuICB2YXIgb2xkX2ZsdXNoLCBzO1xuICB2YXIgYmVnLCB2YWw7IC8vIGZvciBnemlwIGhlYWRlciB3cml0ZSBvbmx5XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlIHx8XG4gICAgZmx1c2ggPiBaX0JMT0NLIHx8IGZsdXNoIDwgMCkge1xuICAgIHJldHVybiBzdHJtID8gZXJyKHN0cm0sIFpfU1RSRUFNX0VSUk9SKSA6IFpfU1RSRUFNX0VSUk9SO1xuICB9XG5cbiAgcyA9IHN0cm0uc3RhdGU7XG5cbiAgaWYgKCFzdHJtLm91dHB1dCB8fFxuICAgICAgKCFzdHJtLmlucHV0ICYmIHN0cm0uYXZhaWxfaW4gIT09IDApIHx8XG4gICAgICAocy5zdGF0dXMgPT09IEZJTklTSF9TVEFURSAmJiBmbHVzaCAhPT0gWl9GSU5JU0gpKSB7XG4gICAgcmV0dXJuIGVycihzdHJtLCAoc3RybS5hdmFpbF9vdXQgPT09IDApID8gWl9CVUZfRVJST1IgOiBaX1NUUkVBTV9FUlJPUik7XG4gIH1cblxuICBzLnN0cm0gPSBzdHJtOyAvKiBqdXN0IGluIGNhc2UgKi9cbiAgb2xkX2ZsdXNoID0gcy5sYXN0X2ZsdXNoO1xuICBzLmxhc3RfZmx1c2ggPSBmbHVzaDtcblxuICAvKiBXcml0ZSB0aGUgaGVhZGVyICovXG4gIGlmIChzLnN0YXR1cyA9PT0gSU5JVF9TVEFURSkge1xuXG4gICAgaWYgKHMud3JhcCA9PT0gMikgeyAvLyBHWklQIGhlYWRlclxuICAgICAgc3RybS5hZGxlciA9IDA7ICAvL2NyYzMyKDBMLCBaX05VTEwsIDApO1xuICAgICAgcHV0X2J5dGUocywgMzEpO1xuICAgICAgcHV0X2J5dGUocywgMTM5KTtcbiAgICAgIHB1dF9ieXRlKHMsIDgpO1xuICAgICAgaWYgKCFzLmd6aGVhZCkgeyAvLyBzLT5nemhlYWQgPT0gWl9OVUxMXG4gICAgICAgIHB1dF9ieXRlKHMsIDApO1xuICAgICAgICBwdXRfYnl0ZShzLCAwKTtcbiAgICAgICAgcHV0X2J5dGUocywgMCk7XG4gICAgICAgIHB1dF9ieXRlKHMsIDApO1xuICAgICAgICBwdXRfYnl0ZShzLCAwKTtcbiAgICAgICAgcHV0X2J5dGUocywgcy5sZXZlbCA9PT0gOSA/IDIgOlxuICAgICAgICAgICAgICAgICAgICAocy5zdHJhdGVneSA+PSBaX0hVRkZNQU5fT05MWSB8fCBzLmxldmVsIDwgMiA/XG4gICAgICAgICAgICAgICAgICAgICA0IDogMCkpO1xuICAgICAgICBwdXRfYnl0ZShzLCBPU19DT0RFKTtcbiAgICAgICAgcy5zdGF0dXMgPSBCVVNZX1NUQVRFO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHB1dF9ieXRlKHMsIChzLmd6aGVhZC50ZXh0ID8gMSA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgKHMuZ3poZWFkLmhjcmMgPyAyIDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAoIXMuZ3poZWFkLmV4dHJhID8gMCA6IDQpICtcbiAgICAgICAgICAgICAgICAgICAgKCFzLmd6aGVhZC5uYW1lID8gMCA6IDgpICtcbiAgICAgICAgICAgICAgICAgICAgKCFzLmd6aGVhZC5jb21tZW50ID8gMCA6IDE2KVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgIHB1dF9ieXRlKHMsIHMuZ3poZWFkLnRpbWUgJiAweGZmKTtcbiAgICAgICAgcHV0X2J5dGUocywgKHMuZ3poZWFkLnRpbWUgPj4gOCkgJiAweGZmKTtcbiAgICAgICAgcHV0X2J5dGUocywgKHMuZ3poZWFkLnRpbWUgPj4gMTYpICYgMHhmZik7XG4gICAgICAgIHB1dF9ieXRlKHMsIChzLmd6aGVhZC50aW1lID4+IDI0KSAmIDB4ZmYpO1xuICAgICAgICBwdXRfYnl0ZShzLCBzLmxldmVsID09PSA5ID8gMiA6XG4gICAgICAgICAgICAgICAgICAgIChzLnN0cmF0ZWd5ID49IFpfSFVGRk1BTl9PTkxZIHx8IHMubGV2ZWwgPCAyID9cbiAgICAgICAgICAgICAgICAgICAgIDQgOiAwKSk7XG4gICAgICAgIHB1dF9ieXRlKHMsIHMuZ3poZWFkLm9zICYgMHhmZik7XG4gICAgICAgIGlmIChzLmd6aGVhZC5leHRyYSAmJiBzLmd6aGVhZC5leHRyYS5sZW5ndGgpIHtcbiAgICAgICAgICBwdXRfYnl0ZShzLCBzLmd6aGVhZC5leHRyYS5sZW5ndGggJiAweGZmKTtcbiAgICAgICAgICBwdXRfYnl0ZShzLCAocy5nemhlYWQuZXh0cmEubGVuZ3RoID4+IDgpICYgMHhmZik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMpIHtcbiAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzIoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nLCAwKTtcbiAgICAgICAgfVxuICAgICAgICBzLmd6aW5kZXggPSAwO1xuICAgICAgICBzLnN0YXR1cyA9IEVYVFJBX1NUQVRFO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIC8vIERFRkxBVEUgaGVhZGVyXG4gICAge1xuICAgICAgdmFyIGhlYWRlciA9IChaX0RFRkxBVEVEICsgKChzLndfYml0cyAtIDgpIDw8IDQpKSA8PCA4O1xuICAgICAgdmFyIGxldmVsX2ZsYWdzID0gLTE7XG5cbiAgICAgIGlmIChzLnN0cmF0ZWd5ID49IFpfSFVGRk1BTl9PTkxZIHx8IHMubGV2ZWwgPCAyKSB7XG4gICAgICAgIGxldmVsX2ZsYWdzID0gMDtcbiAgICAgIH0gZWxzZSBpZiAocy5sZXZlbCA8IDYpIHtcbiAgICAgICAgbGV2ZWxfZmxhZ3MgPSAxO1xuICAgICAgfSBlbHNlIGlmIChzLmxldmVsID09PSA2KSB7XG4gICAgICAgIGxldmVsX2ZsYWdzID0gMjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldmVsX2ZsYWdzID0gMztcbiAgICAgIH1cbiAgICAgIGhlYWRlciB8PSAobGV2ZWxfZmxhZ3MgPDwgNik7XG4gICAgICBpZiAocy5zdHJzdGFydCAhPT0gMCkgeyBoZWFkZXIgfD0gUFJFU0VUX0RJQ1Q7IH1cbiAgICAgIGhlYWRlciArPSAzMSAtIChoZWFkZXIgJSAzMSk7XG5cbiAgICAgIHMuc3RhdHVzID0gQlVTWV9TVEFURTtcbiAgICAgIHB1dFNob3J0TVNCKHMsIGhlYWRlcik7XG5cbiAgICAgIC8qIFNhdmUgdGhlIGFkbGVyMzIgb2YgdGhlIHByZXNldCBkaWN0aW9uYXJ5OiAqL1xuICAgICAgaWYgKHMuc3Ryc3RhcnQgIT09IDApIHtcbiAgICAgICAgcHV0U2hvcnRNU0Iocywgc3RybS5hZGxlciA+Pj4gMTYpO1xuICAgICAgICBwdXRTaG9ydE1TQihzLCBzdHJtLmFkbGVyICYgMHhmZmZmKTtcbiAgICAgIH1cbiAgICAgIHN0cm0uYWRsZXIgPSAxOyAvLyBhZGxlcjMyKDBMLCBaX05VTEwsIDApO1xuICAgIH1cbiAgfVxuXG4vLyNpZmRlZiBHWklQXG4gIGlmIChzLnN0YXR1cyA9PT0gRVhUUkFfU1RBVEUpIHtcbiAgICBpZiAocy5nemhlYWQuZXh0cmEvKiAhPSBaX05VTEwqLykge1xuICAgICAgYmVnID0gcy5wZW5kaW5nOyAgLyogc3RhcnQgb2YgYnl0ZXMgdG8gdXBkYXRlIGNyYyAqL1xuXG4gICAgICB3aGlsZSAocy5nemluZGV4IDwgKHMuZ3poZWFkLmV4dHJhLmxlbmd0aCAmIDB4ZmZmZikpIHtcbiAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7XG4gICAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7XG4gICAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzIoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nIC0gYmVnLCBiZWcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pO1xuICAgICAgICAgIGJlZyA9IHMucGVuZGluZztcbiAgICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwdXRfYnl0ZShzLCBzLmd6aGVhZC5leHRyYVtzLmd6aW5kZXhdICYgMHhmZik7XG4gICAgICAgIHMuZ3ppbmRleCsrO1xuICAgICAgfVxuICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7XG4gICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMihzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7XG4gICAgICB9XG4gICAgICBpZiAocy5nemluZGV4ID09PSBzLmd6aGVhZC5leHRyYS5sZW5ndGgpIHtcbiAgICAgICAgcy5nemluZGV4ID0gMDtcbiAgICAgICAgcy5zdGF0dXMgPSBOQU1FX1NUQVRFO1xuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHMuc3RhdHVzID0gTkFNRV9TVEFURTtcbiAgICB9XG4gIH1cbiAgaWYgKHMuc3RhdHVzID09PSBOQU1FX1NUQVRFKSB7XG4gICAgaWYgKHMuZ3poZWFkLm5hbWUvKiAhPSBaX05VTEwqLykge1xuICAgICAgYmVnID0gcy5wZW5kaW5nOyAgLyogc3RhcnQgb2YgYnl0ZXMgdG8gdXBkYXRlIGNyYyAqL1xuICAgICAgLy9pbnQgdmFsO1xuXG4gICAgICBkbyB7XG4gICAgICAgIGlmIChzLnBlbmRpbmcgPT09IHMucGVuZGluZ19idWZfc2l6ZSkge1xuICAgICAgICAgIGlmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGJlZykge1xuICAgICAgICAgICAgc3RybS5hZGxlciA9IGNyYzMyKHN0cm0uYWRsZXIsIHMucGVuZGluZ19idWYsIHMucGVuZGluZyAtIGJlZywgYmVnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZmx1c2hfcGVuZGluZyhzdHJtKTtcbiAgICAgICAgICBiZWcgPSBzLnBlbmRpbmc7XG4gICAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7XG4gICAgICAgICAgICB2YWwgPSAxO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIEpTIHNwZWNpZmljOiBsaXR0bGUgbWFnaWMgdG8gYWRkIHplcm8gdGVybWluYXRvciB0byBlbmQgb2Ygc3RyaW5nXG4gICAgICAgIGlmIChzLmd6aW5kZXggPCBzLmd6aGVhZC5uYW1lLmxlbmd0aCkge1xuICAgICAgICAgIHZhbCA9IHMuZ3poZWFkLm5hbWUuY2hhckNvZGVBdChzLmd6aW5kZXgrKykgJiAweGZmO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcHV0X2J5dGUocywgdmFsKTtcbiAgICAgIH0gd2hpbGUgKHZhbCAhPT0gMCk7XG5cbiAgICAgIGlmIChzLmd6aGVhZC5oY3JjICYmIHMucGVuZGluZyA+IGJlZykge1xuICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzIoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nIC0gYmVnLCBiZWcpO1xuICAgICAgfVxuICAgICAgaWYgKHZhbCA9PT0gMCkge1xuICAgICAgICBzLmd6aW5kZXggPSAwO1xuICAgICAgICBzLnN0YXR1cyA9IENPTU1FTlRfU1RBVEU7XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcy5zdGF0dXMgPSBDT01NRU5UX1NUQVRFO1xuICAgIH1cbiAgfVxuICBpZiAocy5zdGF0dXMgPT09IENPTU1FTlRfU1RBVEUpIHtcbiAgICBpZiAocy5nemhlYWQuY29tbWVudC8qICE9IFpfTlVMTCovKSB7XG4gICAgICBiZWcgPSBzLnBlbmRpbmc7ICAvKiBzdGFydCBvZiBieXRlcyB0byB1cGRhdGUgY3JjICovXG4gICAgICAvL2ludCB2YWw7XG5cbiAgICAgIGRvIHtcbiAgICAgICAgaWYgKHMucGVuZGluZyA9PT0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7XG4gICAgICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7XG4gICAgICAgICAgICBzdHJtLmFkbGVyID0gY3JjMzIoc3RybS5hZGxlciwgcy5wZW5kaW5nX2J1Ziwgcy5wZW5kaW5nIC0gYmVnLCBiZWcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pO1xuICAgICAgICAgIGJlZyA9IHMucGVuZGluZztcbiAgICAgICAgICBpZiAocy5wZW5kaW5nID09PSBzLnBlbmRpbmdfYnVmX3NpemUpIHtcbiAgICAgICAgICAgIHZhbCA9IDE7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSlMgc3BlY2lmaWM6IGxpdHRsZSBtYWdpYyB0byBhZGQgemVybyB0ZXJtaW5hdG9yIHRvIGVuZCBvZiBzdHJpbmdcbiAgICAgICAgaWYgKHMuZ3ppbmRleCA8IHMuZ3poZWFkLmNvbW1lbnQubGVuZ3RoKSB7XG4gICAgICAgICAgdmFsID0gcy5nemhlYWQuY29tbWVudC5jaGFyQ29kZUF0KHMuZ3ppbmRleCsrKSAmIDB4ZmY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFsID0gMDtcbiAgICAgICAgfVxuICAgICAgICBwdXRfYnl0ZShzLCB2YWwpO1xuICAgICAgfSB3aGlsZSAodmFsICE9PSAwKTtcblxuICAgICAgaWYgKHMuZ3poZWFkLmhjcmMgJiYgcy5wZW5kaW5nID4gYmVnKSB7XG4gICAgICAgIHN0cm0uYWRsZXIgPSBjcmMzMihzdHJtLmFkbGVyLCBzLnBlbmRpbmdfYnVmLCBzLnBlbmRpbmcgLSBiZWcsIGJlZyk7XG4gICAgICB9XG4gICAgICBpZiAodmFsID09PSAwKSB7XG4gICAgICAgIHMuc3RhdHVzID0gSENSQ19TVEFURTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzLnN0YXR1cyA9IEhDUkNfU1RBVEU7XG4gICAgfVxuICB9XG4gIGlmIChzLnN0YXR1cyA9PT0gSENSQ19TVEFURSkge1xuICAgIGlmIChzLmd6aGVhZC5oY3JjKSB7XG4gICAgICBpZiAocy5wZW5kaW5nICsgMiA+IHMucGVuZGluZ19idWZfc2l6ZSkge1xuICAgICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pO1xuICAgICAgfVxuICAgICAgaWYgKHMucGVuZGluZyArIDIgPD0gcy5wZW5kaW5nX2J1Zl9zaXplKSB7XG4gICAgICAgIHB1dF9ieXRlKHMsIHN0cm0uYWRsZXIgJiAweGZmKTtcbiAgICAgICAgcHV0X2J5dGUocywgKHN0cm0uYWRsZXIgPj4gOCkgJiAweGZmKTtcbiAgICAgICAgc3RybS5hZGxlciA9IDA7IC8vY3JjMzIoMEwsIFpfTlVMTCwgMCk7XG4gICAgICAgIHMuc3RhdHVzID0gQlVTWV9TVEFURTtcbiAgICAgIH1cbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzLnN0YXR1cyA9IEJVU1lfU1RBVEU7XG4gICAgfVxuICB9XG4vLyNlbmRpZlxuXG4gIC8qIEZsdXNoIGFzIG11Y2ggcGVuZGluZyBvdXRwdXQgYXMgcG9zc2libGUgKi9cbiAgaWYgKHMucGVuZGluZyAhPT0gMCkge1xuICAgIGZsdXNoX3BlbmRpbmcoc3RybSk7XG4gICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICAvKiBTaW5jZSBhdmFpbF9vdXQgaXMgMCwgZGVmbGF0ZSB3aWxsIGJlIGNhbGxlZCBhZ2FpbiB3aXRoXG4gICAgICAgKiBtb3JlIG91dHB1dCBzcGFjZSwgYnV0IHBvc3NpYmx5IHdpdGggYm90aCBwZW5kaW5nIGFuZFxuICAgICAgICogYXZhaWxfaW4gZXF1YWwgdG8gemVyby4gVGhlcmUgd29uJ3QgYmUgYW55dGhpbmcgdG8gZG8sXG4gICAgICAgKiBidXQgdGhpcyBpcyBub3QgYW4gZXJyb3Igc2l0dWF0aW9uIHNvIG1ha2Ugc3VyZSB3ZVxuICAgICAgICogcmV0dXJuIE9LIGluc3RlYWQgb2YgQlVGX0VSUk9SIGF0IG5leHQgY2FsbCBvZiBkZWZsYXRlOlxuICAgICAgICovXG4gICAgICBzLmxhc3RfZmx1c2ggPSAtMTtcbiAgICAgIHJldHVybiBaX09LO1xuICAgIH1cblxuICAgIC8qIE1ha2Ugc3VyZSB0aGVyZSBpcyBzb21ldGhpbmcgdG8gZG8gYW5kIGF2b2lkIGR1cGxpY2F0ZSBjb25zZWN1dGl2ZVxuICAgICAqIGZsdXNoZXMuIEZvciByZXBlYXRlZCBhbmQgdXNlbGVzcyBjYWxscyB3aXRoIFpfRklOSVNILCB3ZSBrZWVwXG4gICAgICogcmV0dXJuaW5nIFpfU1RSRUFNX0VORCBpbnN0ZWFkIG9mIFpfQlVGX0VSUk9SLlxuICAgICAqL1xuICB9IGVsc2UgaWYgKHN0cm0uYXZhaWxfaW4gPT09IDAgJiYgcmFuayhmbHVzaCkgPD0gcmFuayhvbGRfZmx1c2gpICYmXG4gICAgZmx1c2ggIT09IFpfRklOSVNIKSB7XG4gICAgcmV0dXJuIGVycihzdHJtLCBaX0JVRl9FUlJPUik7XG4gIH1cblxuICAvKiBVc2VyIG11c3Qgbm90IHByb3ZpZGUgbW9yZSBpbnB1dCBhZnRlciB0aGUgZmlyc3QgRklOSVNIOiAqL1xuICBpZiAocy5zdGF0dXMgPT09IEZJTklTSF9TVEFURSAmJiBzdHJtLmF2YWlsX2luICE9PSAwKSB7XG4gICAgcmV0dXJuIGVycihzdHJtLCBaX0JVRl9FUlJPUik7XG4gIH1cblxuICAvKiBTdGFydCBhIG5ldyBibG9jayBvciBjb250aW51ZSB0aGUgY3VycmVudCBvbmUuXG4gICAqL1xuICBpZiAoc3RybS5hdmFpbF9pbiAhPT0gMCB8fCBzLmxvb2thaGVhZCAhPT0gMCB8fFxuICAgIChmbHVzaCAhPT0gWl9OT19GTFVTSCAmJiBzLnN0YXR1cyAhPT0gRklOSVNIX1NUQVRFKSkge1xuICAgIHZhciBic3RhdGUgPSAocy5zdHJhdGVneSA9PT0gWl9IVUZGTUFOX09OTFkpID8gZGVmbGF0ZV9odWZmKHMsIGZsdXNoKSA6XG4gICAgICAocy5zdHJhdGVneSA9PT0gWl9STEUgPyBkZWZsYXRlX3JsZShzLCBmbHVzaCkgOlxuICAgICAgICBjb25maWd1cmF0aW9uX3RhYmxlW3MubGV2ZWxdLmZ1bmMocywgZmx1c2gpKTtcblxuICAgIGlmIChic3RhdGUgPT09IEJTX0ZJTklTSF9TVEFSVEVEIHx8IGJzdGF0ZSA9PT0gQlNfRklOSVNIX0RPTkUpIHtcbiAgICAgIHMuc3RhdHVzID0gRklOSVNIX1NUQVRFO1xuICAgIH1cbiAgICBpZiAoYnN0YXRlID09PSBCU19ORUVEX01PUkUgfHwgYnN0YXRlID09PSBCU19GSU5JU0hfU1RBUlRFRCkge1xuICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICAgIHMubGFzdF9mbHVzaCA9IC0xO1xuICAgICAgICAvKiBhdm9pZCBCVUZfRVJST1IgbmV4dCBjYWxsLCBzZWUgYWJvdmUgKi9cbiAgICAgIH1cbiAgICAgIHJldHVybiBaX09LO1xuICAgICAgLyogSWYgZmx1c2ggIT0gWl9OT19GTFVTSCAmJiBhdmFpbF9vdXQgPT0gMCwgdGhlIG5leHQgY2FsbFxuICAgICAgICogb2YgZGVmbGF0ZSBzaG91bGQgdXNlIHRoZSBzYW1lIGZsdXNoIHBhcmFtZXRlciB0byBtYWtlIHN1cmVcbiAgICAgICAqIHRoYXQgdGhlIGZsdXNoIGlzIGNvbXBsZXRlLiBTbyB3ZSBkb24ndCBoYXZlIHRvIG91dHB1dCBhblxuICAgICAgICogZW1wdHkgYmxvY2sgaGVyZSwgdGhpcyB3aWxsIGJlIGRvbmUgYXQgbmV4dCBjYWxsLiBUaGlzIGFsc29cbiAgICAgICAqIGVuc3VyZXMgdGhhdCBmb3IgYSB2ZXJ5IHNtYWxsIG91dHB1dCBidWZmZXIsIHdlIGVtaXQgYXQgbW9zdFxuICAgICAgICogb25lIGVtcHR5IGJsb2NrLlxuICAgICAgICovXG4gICAgfVxuICAgIGlmIChic3RhdGUgPT09IEJTX0JMT0NLX0RPTkUpIHtcbiAgICAgIGlmIChmbHVzaCA9PT0gWl9QQVJUSUFMX0ZMVVNIKSB7XG4gICAgICAgIHRyZWVzLl90cl9hbGlnbihzKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKGZsdXNoICE9PSBaX0JMT0NLKSB7IC8qIEZVTExfRkxVU0ggb3IgU1lOQ19GTFVTSCAqL1xuXG4gICAgICAgIHRyZWVzLl90cl9zdG9yZWRfYmxvY2socywgMCwgMCwgZmFsc2UpO1xuICAgICAgICAvKiBGb3IgYSBmdWxsIGZsdXNoLCB0aGlzIGVtcHR5IGJsb2NrIHdpbGwgYmUgcmVjb2duaXplZFxuICAgICAgICAgKiBhcyBhIHNwZWNpYWwgbWFya2VyIGJ5IGluZmxhdGVfc3luYygpLlxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKGZsdXNoID09PSBaX0ZVTExfRkxVU0gpIHtcbiAgICAgICAgICAvKioqIENMRUFSX0hBU0gocyk7ICoqKi8gICAgICAgICAgICAgLyogZm9yZ2V0IGhpc3RvcnkgKi9cbiAgICAgICAgICB6ZXJvKHMuaGVhZCk7IC8vIEZpbGwgd2l0aCBOSUwgKD0gMCk7XG5cbiAgICAgICAgICBpZiAocy5sb29rYWhlYWQgPT09IDApIHtcbiAgICAgICAgICAgIHMuc3Ryc3RhcnQgPSAwO1xuICAgICAgICAgICAgcy5ibG9ja19zdGFydCA9IDA7XG4gICAgICAgICAgICBzLmluc2VydCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmbHVzaF9wZW5kaW5nKHN0cm0pO1xuICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICAgIHMubGFzdF9mbHVzaCA9IC0xOyAvKiBhdm9pZCBCVUZfRVJST1IgYXQgbmV4dCBjYWxsLCBzZWUgYWJvdmUgKi9cbiAgICAgICAgcmV0dXJuIFpfT0s7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vQXNzZXJ0KHN0cm0tPmF2YWlsX291dCA+IDAsIFwiYnVnMlwiKTtcbiAgLy9pZiAoc3RybS5hdmFpbF9vdXQgPD0gMCkgeyB0aHJvdyBuZXcgRXJyb3IoXCJidWcyXCIpO31cblxuICBpZiAoZmx1c2ggIT09IFpfRklOSVNIKSB7IHJldHVybiBaX09LOyB9XG4gIGlmIChzLndyYXAgPD0gMCkgeyByZXR1cm4gWl9TVFJFQU1fRU5EOyB9XG5cbiAgLyogV3JpdGUgdGhlIHRyYWlsZXIgKi9cbiAgaWYgKHMud3JhcCA9PT0gMikge1xuICAgIHB1dF9ieXRlKHMsIHN0cm0uYWRsZXIgJiAweGZmKTtcbiAgICBwdXRfYnl0ZShzLCAoc3RybS5hZGxlciA+PiA4KSAmIDB4ZmYpO1xuICAgIHB1dF9ieXRlKHMsIChzdHJtLmFkbGVyID4+IDE2KSAmIDB4ZmYpO1xuICAgIHB1dF9ieXRlKHMsIChzdHJtLmFkbGVyID4+IDI0KSAmIDB4ZmYpO1xuICAgIHB1dF9ieXRlKHMsIHN0cm0udG90YWxfaW4gJiAweGZmKTtcbiAgICBwdXRfYnl0ZShzLCAoc3RybS50b3RhbF9pbiA+PiA4KSAmIDB4ZmYpO1xuICAgIHB1dF9ieXRlKHMsIChzdHJtLnRvdGFsX2luID4+IDE2KSAmIDB4ZmYpO1xuICAgIHB1dF9ieXRlKHMsIChzdHJtLnRvdGFsX2luID4+IDI0KSAmIDB4ZmYpO1xuICB9XG4gIGVsc2VcbiAge1xuICAgIHB1dFNob3J0TVNCKHMsIHN0cm0uYWRsZXIgPj4+IDE2KTtcbiAgICBwdXRTaG9ydE1TQihzLCBzdHJtLmFkbGVyICYgMHhmZmZmKTtcbiAgfVxuXG4gIGZsdXNoX3BlbmRpbmcoc3RybSk7XG4gIC8qIElmIGF2YWlsX291dCBpcyB6ZXJvLCB0aGUgYXBwbGljYXRpb24gd2lsbCBjYWxsIGRlZmxhdGUgYWdhaW5cbiAgICogdG8gZmx1c2ggdGhlIHJlc3QuXG4gICAqL1xuICBpZiAocy53cmFwID4gMCkgeyBzLndyYXAgPSAtcy53cmFwOyB9XG4gIC8qIHdyaXRlIHRoZSB0cmFpbGVyIG9ubHkgb25jZSEgKi9cbiAgcmV0dXJuIHMucGVuZGluZyAhPT0gMCA/IFpfT0sgOiBaX1NUUkVBTV9FTkQ7XG59XG5cbmZ1bmN0aW9uIGRlZmxhdGVFbmQoc3RybSkge1xuICB2YXIgc3RhdHVzO1xuXG4gIGlmICghc3RybS8qPT0gWl9OVUxMKi8gfHwgIXN0cm0uc3RhdGUvKj09IFpfTlVMTCovKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG5cbiAgc3RhdHVzID0gc3RybS5zdGF0ZS5zdGF0dXM7XG4gIGlmIChzdGF0dXMgIT09IElOSVRfU1RBVEUgJiZcbiAgICBzdGF0dXMgIT09IEVYVFJBX1NUQVRFICYmXG4gICAgc3RhdHVzICE9PSBOQU1FX1NUQVRFICYmXG4gICAgc3RhdHVzICE9PSBDT01NRU5UX1NUQVRFICYmXG4gICAgc3RhdHVzICE9PSBIQ1JDX1NUQVRFICYmXG4gICAgc3RhdHVzICE9PSBCVVNZX1NUQVRFICYmXG4gICAgc3RhdHVzICE9PSBGSU5JU0hfU1RBVEVcbiAgKSB7XG4gICAgcmV0dXJuIGVycihzdHJtLCBaX1NUUkVBTV9FUlJPUik7XG4gIH1cblxuICBzdHJtLnN0YXRlID0gbnVsbDtcblxuICByZXR1cm4gc3RhdHVzID09PSBCVVNZX1NUQVRFID8gZXJyKHN0cm0sIFpfREFUQV9FUlJPUikgOiBaX09LO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEluaXRpYWxpemVzIHRoZSBjb21wcmVzc2lvbiBkaWN0aW9uYXJ5IGZyb20gdGhlIGdpdmVuIGJ5dGVcbiAqIHNlcXVlbmNlIHdpdGhvdXQgcHJvZHVjaW5nIGFueSBjb21wcmVzc2VkIG91dHB1dC5cbiAqL1xuZnVuY3Rpb24gZGVmbGF0ZVNldERpY3Rpb25hcnkoc3RybSwgZGljdGlvbmFyeSkge1xuICB2YXIgZGljdExlbmd0aCA9IGRpY3Rpb25hcnkubGVuZ3RoO1xuXG4gIHZhciBzO1xuICB2YXIgc3RyLCBuO1xuICB2YXIgd3JhcDtcbiAgdmFyIGF2YWlsO1xuICB2YXIgbmV4dDtcbiAgdmFyIGlucHV0O1xuICB2YXIgdG1wRGljdDtcblxuICBpZiAoIXN0cm0vKj09IFpfTlVMTCovIHx8ICFzdHJtLnN0YXRlLyo9PSBaX05VTEwqLykge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuXG4gIHMgPSBzdHJtLnN0YXRlO1xuICB3cmFwID0gcy53cmFwO1xuXG4gIGlmICh3cmFwID09PSAyIHx8ICh3cmFwID09PSAxICYmIHMuc3RhdHVzICE9PSBJTklUX1NUQVRFKSB8fCBzLmxvb2thaGVhZCkge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuXG4gIC8qIHdoZW4gdXNpbmcgemxpYiB3cmFwcGVycywgY29tcHV0ZSBBZGxlci0zMiBmb3IgcHJvdmlkZWQgZGljdGlvbmFyeSAqL1xuICBpZiAod3JhcCA9PT0gMSkge1xuICAgIC8qIGFkbGVyMzIoc3RybS0+YWRsZXIsIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgpOyAqL1xuICAgIHN0cm0uYWRsZXIgPSBhZGxlcjMyKHN0cm0uYWRsZXIsIGRpY3Rpb25hcnksIGRpY3RMZW5ndGgsIDApO1xuICB9XG5cbiAgcy53cmFwID0gMDsgICAvKiBhdm9pZCBjb21wdXRpbmcgQWRsZXItMzIgaW4gcmVhZF9idWYgKi9cblxuICAvKiBpZiBkaWN0aW9uYXJ5IHdvdWxkIGZpbGwgd2luZG93LCBqdXN0IHJlcGxhY2UgdGhlIGhpc3RvcnkgKi9cbiAgaWYgKGRpY3RMZW5ndGggPj0gcy53X3NpemUpIHtcbiAgICBpZiAod3JhcCA9PT0gMCkgeyAgICAgICAgICAgIC8qIGFscmVhZHkgZW1wdHkgb3RoZXJ3aXNlICovXG4gICAgICAvKioqIENMRUFSX0hBU0gocyk7ICoqKi9cbiAgICAgIHplcm8ocy5oZWFkKTsgLy8gRmlsbCB3aXRoIE5JTCAoPSAwKTtcbiAgICAgIHMuc3Ryc3RhcnQgPSAwO1xuICAgICAgcy5ibG9ja19zdGFydCA9IDA7XG4gICAgICBzLmluc2VydCA9IDA7XG4gICAgfVxuICAgIC8qIHVzZSB0aGUgdGFpbCAqL1xuICAgIC8vIGRpY3Rpb25hcnkgPSBkaWN0aW9uYXJ5LnNsaWNlKGRpY3RMZW5ndGggLSBzLndfc2l6ZSk7XG4gICAgdG1wRGljdCA9IG5ldyB1dGlscy5CdWY4KHMud19zaXplKTtcbiAgICB1dGlscy5hcnJheVNldCh0bXBEaWN0LCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoIC0gcy53X3NpemUsIHMud19zaXplLCAwKTtcbiAgICBkaWN0aW9uYXJ5ID0gdG1wRGljdDtcbiAgICBkaWN0TGVuZ3RoID0gcy53X3NpemU7XG4gIH1cbiAgLyogaW5zZXJ0IGRpY3Rpb25hcnkgaW50byB3aW5kb3cgYW5kIGhhc2ggKi9cbiAgYXZhaWwgPSBzdHJtLmF2YWlsX2luO1xuICBuZXh0ID0gc3RybS5uZXh0X2luO1xuICBpbnB1dCA9IHN0cm0uaW5wdXQ7XG4gIHN0cm0uYXZhaWxfaW4gPSBkaWN0TGVuZ3RoO1xuICBzdHJtLm5leHRfaW4gPSAwO1xuICBzdHJtLmlucHV0ID0gZGljdGlvbmFyeTtcbiAgZmlsbF93aW5kb3cocyk7XG4gIHdoaWxlIChzLmxvb2thaGVhZCA+PSBNSU5fTUFUQ0gpIHtcbiAgICBzdHIgPSBzLnN0cnN0YXJ0O1xuICAgIG4gPSBzLmxvb2thaGVhZCAtIChNSU5fTUFUQ0ggLSAxKTtcbiAgICBkbyB7XG4gICAgICAvKiBVUERBVEVfSEFTSChzLCBzLT5pbnNfaCwgcy0+d2luZG93W3N0ciArIE1JTl9NQVRDSC0xXSk7ICovXG4gICAgICBzLmluc19oID0gKChzLmluc19oIDw8IHMuaGFzaF9zaGlmdCkgXiBzLndpbmRvd1tzdHIgKyBNSU5fTUFUQ0ggLSAxXSkgJiBzLmhhc2hfbWFzaztcblxuICAgICAgcy5wcmV2W3N0ciAmIHMud19tYXNrXSA9IHMuaGVhZFtzLmluc19oXTtcblxuICAgICAgcy5oZWFkW3MuaW5zX2hdID0gc3RyO1xuICAgICAgc3RyKys7XG4gICAgfSB3aGlsZSAoLS1uKTtcbiAgICBzLnN0cnN0YXJ0ID0gc3RyO1xuICAgIHMubG9va2FoZWFkID0gTUlOX01BVENIIC0gMTtcbiAgICBmaWxsX3dpbmRvdyhzKTtcbiAgfVxuICBzLnN0cnN0YXJ0ICs9IHMubG9va2FoZWFkO1xuICBzLmJsb2NrX3N0YXJ0ID0gcy5zdHJzdGFydDtcbiAgcy5pbnNlcnQgPSBzLmxvb2thaGVhZDtcbiAgcy5sb29rYWhlYWQgPSAwO1xuICBzLm1hdGNoX2xlbmd0aCA9IHMucHJldl9sZW5ndGggPSBNSU5fTUFUQ0ggLSAxO1xuICBzLm1hdGNoX2F2YWlsYWJsZSA9IDA7XG4gIHN0cm0ubmV4dF9pbiA9IG5leHQ7XG4gIHN0cm0uaW5wdXQgPSBpbnB1dDtcbiAgc3RybS5hdmFpbF9pbiA9IGF2YWlsO1xuICBzLndyYXAgPSB3cmFwO1xuICByZXR1cm4gWl9PSztcbn1cblxuXG5leHBvcnRzLmRlZmxhdGVJbml0ID0gZGVmbGF0ZUluaXQ7XG5leHBvcnRzLmRlZmxhdGVJbml0MiA9IGRlZmxhdGVJbml0MjtcbmV4cG9ydHMuZGVmbGF0ZVJlc2V0ID0gZGVmbGF0ZVJlc2V0O1xuZXhwb3J0cy5kZWZsYXRlUmVzZXRLZWVwID0gZGVmbGF0ZVJlc2V0S2VlcDtcbmV4cG9ydHMuZGVmbGF0ZVNldEhlYWRlciA9IGRlZmxhdGVTZXRIZWFkZXI7XG5leHBvcnRzLmRlZmxhdGUgPSBkZWZsYXRlO1xuZXhwb3J0cy5kZWZsYXRlRW5kID0gZGVmbGF0ZUVuZDtcbmV4cG9ydHMuZGVmbGF0ZVNldERpY3Rpb25hcnkgPSBkZWZsYXRlU2V0RGljdGlvbmFyeTtcbmV4cG9ydHMuZGVmbGF0ZUluZm8gPSAncGFrbyBkZWZsYXRlIChmcm9tIE5vZGVjYSBwcm9qZWN0KSc7XG5cbi8qIE5vdCBpbXBsZW1lbnRlZFxuZXhwb3J0cy5kZWZsYXRlQm91bmQgPSBkZWZsYXRlQm91bmQ7XG5leHBvcnRzLmRlZmxhdGVDb3B5ID0gZGVmbGF0ZUNvcHk7XG5leHBvcnRzLmRlZmxhdGVQYXJhbXMgPSBkZWZsYXRlUGFyYW1zO1xuZXhwb3J0cy5kZWZsYXRlUGVuZGluZyA9IGRlZmxhdGVQZW5kaW5nO1xuZXhwb3J0cy5kZWZsYXRlUHJpbWUgPSBkZWZsYXRlUHJpbWU7XG5leHBvcnRzLmRlZmxhdGVUdW5lID0gZGVmbGF0ZVR1bmU7XG4qL1xuXG5cbi8qKiovIH0pLFxuLyogMTIgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuLy8gKEMpIDE5OTUtMjAxMyBKZWFuLWxvdXAgR2FpbGx5IGFuZCBNYXJrIEFkbGVyXG4vLyAoQykgMjAxNC0yMDE3IFZpdGFseSBQdXpyaW4gYW5kIEFuZHJleSBUdXBpdHNpblxuLy9cbi8vIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4vLyB3YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbi8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4vLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG4vLyBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4vL1xuLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3Rcbi8vICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbi8vICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXG4vLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXG4vLyAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuLy8gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4vLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuXG52YXIgdXRpbHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG4vKiBQdWJsaWMgY29uc3RhbnRzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuXG4vL3ZhciBaX0ZJTFRFUkVEICAgICAgICAgID0gMTtcbi8vdmFyIFpfSFVGRk1BTl9PTkxZICAgICAgPSAyO1xuLy92YXIgWl9STEUgICAgICAgICAgICAgICA9IDM7XG52YXIgWl9GSVhFRCAgICAgICAgICAgICAgID0gNDtcbi8vdmFyIFpfREVGQVVMVF9TVFJBVEVHWSAgPSAwO1xuXG4vKiBQb3NzaWJsZSB2YWx1ZXMgb2YgdGhlIGRhdGFfdHlwZSBmaWVsZCAodGhvdWdoIHNlZSBpbmZsYXRlKCkpICovXG52YXIgWl9CSU5BUlkgICAgICAgICAgICAgID0gMDtcbnZhciBaX1RFWFQgICAgICAgICAgICAgICAgPSAxO1xuLy92YXIgWl9BU0NJSSAgICAgICAgICAgICA9IDE7IC8vID0gWl9URVhUXG52YXIgWl9VTktOT1dOICAgICAgICAgICAgID0gMjtcblxuLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuXG5mdW5jdGlvbiB6ZXJvKGJ1ZikgeyB2YXIgbGVuID0gYnVmLmxlbmd0aDsgd2hpbGUgKC0tbGVuID49IDApIHsgYnVmW2xlbl0gPSAwOyB9IH1cblxuLy8gRnJvbSB6dXRpbC5oXG5cbnZhciBTVE9SRURfQkxPQ0sgPSAwO1xudmFyIFNUQVRJQ19UUkVFUyA9IDE7XG52YXIgRFlOX1RSRUVTICAgID0gMjtcbi8qIFRoZSB0aHJlZSBraW5kcyBvZiBibG9jayB0eXBlICovXG5cbnZhciBNSU5fTUFUQ0ggICAgPSAzO1xudmFyIE1BWF9NQVRDSCAgICA9IDI1ODtcbi8qIFRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIG1hdGNoIGxlbmd0aHMgKi9cblxuLy8gRnJvbSBkZWZsYXRlLmhcbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogSW50ZXJuYWwgY29tcHJlc3Npb24gc3RhdGUuXG4gKi9cblxudmFyIExFTkdUSF9DT0RFUyAgPSAyOTtcbi8qIG51bWJlciBvZiBsZW5ndGggY29kZXMsIG5vdCBjb3VudGluZyB0aGUgc3BlY2lhbCBFTkRfQkxPQ0sgY29kZSAqL1xuXG52YXIgTElURVJBTFMgICAgICA9IDI1Njtcbi8qIG51bWJlciBvZiBsaXRlcmFsIGJ5dGVzIDAuLjI1NSAqL1xuXG52YXIgTF9DT0RFUyAgICAgICA9IExJVEVSQUxTICsgMSArIExFTkdUSF9DT0RFUztcbi8qIG51bWJlciBvZiBMaXRlcmFsIG9yIExlbmd0aCBjb2RlcywgaW5jbHVkaW5nIHRoZSBFTkRfQkxPQ0sgY29kZSAqL1xuXG52YXIgRF9DT0RFUyAgICAgICA9IDMwO1xuLyogbnVtYmVyIG9mIGRpc3RhbmNlIGNvZGVzICovXG5cbnZhciBCTF9DT0RFUyAgICAgID0gMTk7XG4vKiBudW1iZXIgb2YgY29kZXMgdXNlZCB0byB0cmFuc2ZlciB0aGUgYml0IGxlbmd0aHMgKi9cblxudmFyIEhFQVBfU0laRSAgICAgPSAyICogTF9DT0RFUyArIDE7XG4vKiBtYXhpbXVtIGhlYXAgc2l6ZSAqL1xuXG52YXIgTUFYX0JJVFMgICAgICA9IDE1O1xuLyogQWxsIGNvZGVzIG11c3Qgbm90IGV4Y2VlZCBNQVhfQklUUyBiaXRzICovXG5cbnZhciBCdWZfc2l6ZSAgICAgID0gMTY7XG4vKiBzaXplIG9mIGJpdCBidWZmZXIgaW4gYmlfYnVmICovXG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb25zdGFudHNcbiAqL1xuXG52YXIgTUFYX0JMX0JJVFMgPSA3O1xuLyogQml0IGxlbmd0aCBjb2RlcyBtdXN0IG5vdCBleGNlZWQgTUFYX0JMX0JJVFMgYml0cyAqL1xuXG52YXIgRU5EX0JMT0NLICAgPSAyNTY7XG4vKiBlbmQgb2YgYmxvY2sgbGl0ZXJhbCBjb2RlICovXG5cbnZhciBSRVBfM182ICAgICA9IDE2O1xuLyogcmVwZWF0IHByZXZpb3VzIGJpdCBsZW5ndGggMy02IHRpbWVzICgyIGJpdHMgb2YgcmVwZWF0IGNvdW50KSAqL1xuXG52YXIgUkVQWl8zXzEwICAgPSAxNztcbi8qIHJlcGVhdCBhIHplcm8gbGVuZ3RoIDMtMTAgdGltZXMgICgzIGJpdHMgb2YgcmVwZWF0IGNvdW50KSAqL1xuXG52YXIgUkVQWl8xMV8xMzggPSAxODtcbi8qIHJlcGVhdCBhIHplcm8gbGVuZ3RoIDExLTEzOCB0aW1lcyAgKDcgYml0cyBvZiByZXBlYXQgY291bnQpICovXG5cbi8qIGVzbGludC1kaXNhYmxlIGNvbW1hLXNwYWNpbmcsYXJyYXktYnJhY2tldC1zcGFjaW5nICovXG52YXIgZXh0cmFfbGJpdHMgPSAgIC8qIGV4dHJhIGJpdHMgZm9yIGVhY2ggbGVuZ3RoIGNvZGUgKi9cbiAgWzAsMCwwLDAsMCwwLDAsMCwxLDEsMSwxLDIsMiwyLDIsMywzLDMsMyw0LDQsNCw0LDUsNSw1LDUsMF07XG5cbnZhciBleHRyYV9kYml0cyA9ICAgLyogZXh0cmEgYml0cyBmb3IgZWFjaCBkaXN0YW5jZSBjb2RlICovXG4gIFswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLDEzLDEzXTtcblxudmFyIGV4dHJhX2JsYml0cyA9ICAvKiBleHRyYSBiaXRzIGZvciBlYWNoIGJpdCBsZW5ndGggY29kZSAqL1xuICBbMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwyLDMsN107XG5cbnZhciBibF9vcmRlciA9XG4gIFsxNiwxNywxOCwwLDgsNyw5LDYsMTAsNSwxMSw0LDEyLDMsMTMsMiwxNCwxLDE1XTtcbi8qIGVzbGludC1lbmFibGUgY29tbWEtc3BhY2luZyxhcnJheS1icmFja2V0LXNwYWNpbmcgKi9cblxuLyogVGhlIGxlbmd0aHMgb2YgdGhlIGJpdCBsZW5ndGggY29kZXMgYXJlIHNlbnQgaW4gb3JkZXIgb2YgZGVjcmVhc2luZ1xuICogcHJvYmFiaWxpdHksIHRvIGF2b2lkIHRyYW5zbWl0dGluZyB0aGUgbGVuZ3RocyBmb3IgdW51c2VkIGJpdCBsZW5ndGggY29kZXMuXG4gKi9cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBMb2NhbCBkYXRhLiBUaGVzZSBhcmUgaW5pdGlhbGl6ZWQgb25seSBvbmNlLlxuICovXG5cbi8vIFdlIHByZS1maWxsIGFycmF5cyB3aXRoIDAgdG8gYXZvaWQgdW5pbml0aWFsaXplZCBnYXBzXG5cbnZhciBESVNUX0NPREVfTEVOID0gNTEyOyAvKiBzZWUgZGVmaW5pdGlvbiBvZiBhcnJheSBkaXN0X2NvZGUgYmVsb3cgKi9cblxuLy8gISEhISBVc2UgZmxhdCBhcnJheSBpbnN0ZWFkIG9mIHN0cnVjdHVyZSwgRnJlcSA9IGkqMiwgTGVuID0gaSoyKzFcbnZhciBzdGF0aWNfbHRyZWUgID0gbmV3IEFycmF5KChMX0NPREVTICsgMikgKiAyKTtcbnplcm8oc3RhdGljX2x0cmVlKTtcbi8qIFRoZSBzdGF0aWMgbGl0ZXJhbCB0cmVlLiBTaW5jZSB0aGUgYml0IGxlbmd0aHMgYXJlIGltcG9zZWQsIHRoZXJlIGlzIG5vXG4gKiBuZWVkIGZvciB0aGUgTF9DT0RFUyBleHRyYSBjb2RlcyB1c2VkIGR1cmluZyBoZWFwIGNvbnN0cnVjdGlvbi4gSG93ZXZlclxuICogVGhlIGNvZGVzIDI4NiBhbmQgMjg3IGFyZSBuZWVkZWQgdG8gYnVpbGQgYSBjYW5vbmljYWwgdHJlZSAoc2VlIF90cl9pbml0XG4gKiBiZWxvdykuXG4gKi9cblxudmFyIHN0YXRpY19kdHJlZSAgPSBuZXcgQXJyYXkoRF9DT0RFUyAqIDIpO1xuemVybyhzdGF0aWNfZHRyZWUpO1xuLyogVGhlIHN0YXRpYyBkaXN0YW5jZSB0cmVlLiAoQWN0dWFsbHkgYSB0cml2aWFsIHRyZWUgc2luY2UgYWxsIGNvZGVzIHVzZVxuICogNSBiaXRzLilcbiAqL1xuXG52YXIgX2Rpc3RfY29kZSAgICA9IG5ldyBBcnJheShESVNUX0NPREVfTEVOKTtcbnplcm8oX2Rpc3RfY29kZSk7XG4vKiBEaXN0YW5jZSBjb2Rlcy4gVGhlIGZpcnN0IDI1NiB2YWx1ZXMgY29ycmVzcG9uZCB0byB0aGUgZGlzdGFuY2VzXG4gKiAzIC4uIDI1OCwgdGhlIGxhc3QgMjU2IHZhbHVlcyBjb3JyZXNwb25kIHRvIHRoZSB0b3AgOCBiaXRzIG9mXG4gKiB0aGUgMTUgYml0IGRpc3RhbmNlcy5cbiAqL1xuXG52YXIgX2xlbmd0aF9jb2RlICA9IG5ldyBBcnJheShNQVhfTUFUQ0ggLSBNSU5fTUFUQ0ggKyAxKTtcbnplcm8oX2xlbmd0aF9jb2RlKTtcbi8qIGxlbmd0aCBjb2RlIGZvciBlYWNoIG5vcm1hbGl6ZWQgbWF0Y2ggbGVuZ3RoICgwID09IE1JTl9NQVRDSCkgKi9cblxudmFyIGJhc2VfbGVuZ3RoICAgPSBuZXcgQXJyYXkoTEVOR1RIX0NPREVTKTtcbnplcm8oYmFzZV9sZW5ndGgpO1xuLyogRmlyc3Qgbm9ybWFsaXplZCBsZW5ndGggZm9yIGVhY2ggY29kZSAoMCA9IE1JTl9NQVRDSCkgKi9cblxudmFyIGJhc2VfZGlzdCAgICAgPSBuZXcgQXJyYXkoRF9DT0RFUyk7XG56ZXJvKGJhc2VfZGlzdCk7XG4vKiBGaXJzdCBub3JtYWxpemVkIGRpc3RhbmNlIGZvciBlYWNoIGNvZGUgKDAgPSBkaXN0YW5jZSBvZiAxKSAqL1xuXG5cbmZ1bmN0aW9uIFN0YXRpY1RyZWVEZXNjKHN0YXRpY190cmVlLCBleHRyYV9iaXRzLCBleHRyYV9iYXNlLCBlbGVtcywgbWF4X2xlbmd0aCkge1xuXG4gIHRoaXMuc3RhdGljX3RyZWUgID0gc3RhdGljX3RyZWU7ICAvKiBzdGF0aWMgdHJlZSBvciBOVUxMICovXG4gIHRoaXMuZXh0cmFfYml0cyAgID0gZXh0cmFfYml0czsgICAvKiBleHRyYSBiaXRzIGZvciBlYWNoIGNvZGUgb3IgTlVMTCAqL1xuICB0aGlzLmV4dHJhX2Jhc2UgICA9IGV4dHJhX2Jhc2U7ICAgLyogYmFzZSBpbmRleCBmb3IgZXh0cmFfYml0cyAqL1xuICB0aGlzLmVsZW1zICAgICAgICA9IGVsZW1zOyAgICAgICAgLyogbWF4IG51bWJlciBvZiBlbGVtZW50cyBpbiB0aGUgdHJlZSAqL1xuICB0aGlzLm1heF9sZW5ndGggICA9IG1heF9sZW5ndGg7ICAgLyogbWF4IGJpdCBsZW5ndGggZm9yIHRoZSBjb2RlcyAqL1xuXG4gIC8vIHNob3cgaWYgYHN0YXRpY190cmVlYCBoYXMgZGF0YSBvciBkdW1teSAtIG5lZWRlZCBmb3IgbW9ub21vcnBoaWMgb2JqZWN0c1xuICB0aGlzLmhhc19zdHJlZSAgICA9IHN0YXRpY190cmVlICYmIHN0YXRpY190cmVlLmxlbmd0aDtcbn1cblxuXG52YXIgc3RhdGljX2xfZGVzYztcbnZhciBzdGF0aWNfZF9kZXNjO1xudmFyIHN0YXRpY19ibF9kZXNjO1xuXG5cbmZ1bmN0aW9uIFRyZWVEZXNjKGR5bl90cmVlLCBzdGF0X2Rlc2MpIHtcbiAgdGhpcy5keW5fdHJlZSA9IGR5bl90cmVlOyAgICAgLyogdGhlIGR5bmFtaWMgdHJlZSAqL1xuICB0aGlzLm1heF9jb2RlID0gMDsgICAgICAgICAgICAvKiBsYXJnZXN0IGNvZGUgd2l0aCBub24gemVybyBmcmVxdWVuY3kgKi9cbiAgdGhpcy5zdGF0X2Rlc2MgPSBzdGF0X2Rlc2M7ICAgLyogdGhlIGNvcnJlc3BvbmRpbmcgc3RhdGljIHRyZWUgKi9cbn1cblxuXG5cbmZ1bmN0aW9uIGRfY29kZShkaXN0KSB7XG4gIHJldHVybiBkaXN0IDwgMjU2ID8gX2Rpc3RfY29kZVtkaXN0XSA6IF9kaXN0X2NvZGVbMjU2ICsgKGRpc3QgPj4+IDcpXTtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIE91dHB1dCBhIHNob3J0IExTQiBmaXJzdCBvbiB0aGUgc3RyZWFtLlxuICogSU4gYXNzZXJ0aW9uOiB0aGVyZSBpcyBlbm91Z2ggcm9vbSBpbiBwZW5kaW5nQnVmLlxuICovXG5mdW5jdGlvbiBwdXRfc2hvcnQocywgdykge1xuLy8gICAgcHV0X2J5dGUocywgKHVjaCkoKHcpICYgMHhmZikpO1xuLy8gICAgcHV0X2J5dGUocywgKHVjaCkoKHVzaCkodykgPj4gOCkpO1xuICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9ICh3KSAmIDB4ZmY7XG4gIHMucGVuZGluZ19idWZbcy5wZW5kaW5nKytdID0gKHcgPj4+IDgpICYgMHhmZjtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFNlbmQgYSB2YWx1ZSBvbiBhIGdpdmVuIG51bWJlciBvZiBiaXRzLlxuICogSU4gYXNzZXJ0aW9uOiBsZW5ndGggPD0gMTYgYW5kIHZhbHVlIGZpdHMgaW4gbGVuZ3RoIGJpdHMuXG4gKi9cbmZ1bmN0aW9uIHNlbmRfYml0cyhzLCB2YWx1ZSwgbGVuZ3RoKSB7XG4gIGlmIChzLmJpX3ZhbGlkID4gKEJ1Zl9zaXplIC0gbGVuZ3RoKSkge1xuICAgIHMuYmlfYnVmIHw9ICh2YWx1ZSA8PCBzLmJpX3ZhbGlkKSAmIDB4ZmZmZjtcbiAgICBwdXRfc2hvcnQocywgcy5iaV9idWYpO1xuICAgIHMuYmlfYnVmID0gdmFsdWUgPj4gKEJ1Zl9zaXplIC0gcy5iaV92YWxpZCk7XG4gICAgcy5iaV92YWxpZCArPSBsZW5ndGggLSBCdWZfc2l6ZTtcbiAgfSBlbHNlIHtcbiAgICBzLmJpX2J1ZiB8PSAodmFsdWUgPDwgcy5iaV92YWxpZCkgJiAweGZmZmY7XG4gICAgcy5iaV92YWxpZCArPSBsZW5ndGg7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBzZW5kX2NvZGUocywgYywgdHJlZSkge1xuICBzZW5kX2JpdHMocywgdHJlZVtjICogMl0vKi5Db2RlKi8sIHRyZWVbYyAqIDIgKyAxXS8qLkxlbiovKTtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFJldmVyc2UgdGhlIGZpcnN0IGxlbiBiaXRzIG9mIGEgY29kZSwgdXNpbmcgc3RyYWlnaHRmb3J3YXJkIGNvZGUgKGEgZmFzdGVyXG4gKiBtZXRob2Qgd291bGQgdXNlIGEgdGFibGUpXG4gKiBJTiBhc3NlcnRpb246IDEgPD0gbGVuIDw9IDE1XG4gKi9cbmZ1bmN0aW9uIGJpX3JldmVyc2UoY29kZSwgbGVuKSB7XG4gIHZhciByZXMgPSAwO1xuICBkbyB7XG4gICAgcmVzIHw9IGNvZGUgJiAxO1xuICAgIGNvZGUgPj4+PSAxO1xuICAgIHJlcyA8PD0gMTtcbiAgfSB3aGlsZSAoLS1sZW4gPiAwKTtcbiAgcmV0dXJuIHJlcyA+Pj4gMTtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEZsdXNoIHRoZSBiaXQgYnVmZmVyLCBrZWVwaW5nIGF0IG1vc3QgNyBiaXRzIGluIGl0LlxuICovXG5mdW5jdGlvbiBiaV9mbHVzaChzKSB7XG4gIGlmIChzLmJpX3ZhbGlkID09PSAxNikge1xuICAgIHB1dF9zaG9ydChzLCBzLmJpX2J1Zik7XG4gICAgcy5iaV9idWYgPSAwO1xuICAgIHMuYmlfdmFsaWQgPSAwO1xuXG4gIH0gZWxzZSBpZiAocy5iaV92YWxpZCA+PSA4KSB7XG4gICAgcy5wZW5kaW5nX2J1ZltzLnBlbmRpbmcrK10gPSBzLmJpX2J1ZiAmIDB4ZmY7XG4gICAgcy5iaV9idWYgPj49IDg7XG4gICAgcy5iaV92YWxpZCAtPSA4O1xuICB9XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb21wdXRlIHRoZSBvcHRpbWFsIGJpdCBsZW5ndGhzIGZvciBhIHRyZWUgYW5kIHVwZGF0ZSB0aGUgdG90YWwgYml0IGxlbmd0aFxuICogZm9yIHRoZSBjdXJyZW50IGJsb2NrLlxuICogSU4gYXNzZXJ0aW9uOiB0aGUgZmllbGRzIGZyZXEgYW5kIGRhZCBhcmUgc2V0LCBoZWFwW2hlYXBfbWF4XSBhbmRcbiAqICAgIGFib3ZlIGFyZSB0aGUgdHJlZSBub2RlcyBzb3J0ZWQgYnkgaW5jcmVhc2luZyBmcmVxdWVuY3kuXG4gKiBPVVQgYXNzZXJ0aW9uczogdGhlIGZpZWxkIGxlbiBpcyBzZXQgdG8gdGhlIG9wdGltYWwgYml0IGxlbmd0aCwgdGhlXG4gKiAgICAgYXJyYXkgYmxfY291bnQgY29udGFpbnMgdGhlIGZyZXF1ZW5jaWVzIGZvciBlYWNoIGJpdCBsZW5ndGguXG4gKiAgICAgVGhlIGxlbmd0aCBvcHRfbGVuIGlzIHVwZGF0ZWQ7IHN0YXRpY19sZW4gaXMgYWxzbyB1cGRhdGVkIGlmIHN0cmVlIGlzXG4gKiAgICAgbm90IG51bGwuXG4gKi9cbmZ1bmN0aW9uIGdlbl9iaXRsZW4ocywgZGVzYylcbi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7XG4vLyAgICB0cmVlX2Rlc2MgKmRlc2M7ICAgIC8qIHRoZSB0cmVlIGRlc2NyaXB0b3IgKi9cbntcbiAgdmFyIHRyZWUgICAgICAgICAgICA9IGRlc2MuZHluX3RyZWU7XG4gIHZhciBtYXhfY29kZSAgICAgICAgPSBkZXNjLm1heF9jb2RlO1xuICB2YXIgc3RyZWUgICAgICAgICAgID0gZGVzYy5zdGF0X2Rlc2Muc3RhdGljX3RyZWU7XG4gIHZhciBoYXNfc3RyZWUgICAgICAgPSBkZXNjLnN0YXRfZGVzYy5oYXNfc3RyZWU7XG4gIHZhciBleHRyYSAgICAgICAgICAgPSBkZXNjLnN0YXRfZGVzYy5leHRyYV9iaXRzO1xuICB2YXIgYmFzZSAgICAgICAgICAgID0gZGVzYy5zdGF0X2Rlc2MuZXh0cmFfYmFzZTtcbiAgdmFyIG1heF9sZW5ndGggICAgICA9IGRlc2Muc3RhdF9kZXNjLm1heF9sZW5ndGg7XG4gIHZhciBoOyAgICAgICAgICAgICAgLyogaGVhcCBpbmRleCAqL1xuICB2YXIgbiwgbTsgICAgICAgICAgIC8qIGl0ZXJhdGUgb3ZlciB0aGUgdHJlZSBlbGVtZW50cyAqL1xuICB2YXIgYml0czsgICAgICAgICAgIC8qIGJpdCBsZW5ndGggKi9cbiAgdmFyIHhiaXRzOyAgICAgICAgICAvKiBleHRyYSBiaXRzICovXG4gIHZhciBmOyAgICAgICAgICAgICAgLyogZnJlcXVlbmN5ICovXG4gIHZhciBvdmVyZmxvdyA9IDA7ICAgLyogbnVtYmVyIG9mIGVsZW1lbnRzIHdpdGggYml0IGxlbmd0aCB0b28gbGFyZ2UgKi9cblxuICBmb3IgKGJpdHMgPSAwOyBiaXRzIDw9IE1BWF9CSVRTOyBiaXRzKyspIHtcbiAgICBzLmJsX2NvdW50W2JpdHNdID0gMDtcbiAgfVxuXG4gIC8qIEluIGEgZmlyc3QgcGFzcywgY29tcHV0ZSB0aGUgb3B0aW1hbCBiaXQgbGVuZ3RocyAod2hpY2ggbWF5XG4gICAqIG92ZXJmbG93IGluIHRoZSBjYXNlIG9mIHRoZSBiaXQgbGVuZ3RoIHRyZWUpLlxuICAgKi9cbiAgdHJlZVtzLmhlYXBbcy5oZWFwX21heF0gKiAyICsgMV0vKi5MZW4qLyA9IDA7IC8qIHJvb3Qgb2YgdGhlIGhlYXAgKi9cblxuICBmb3IgKGggPSBzLmhlYXBfbWF4ICsgMTsgaCA8IEhFQVBfU0laRTsgaCsrKSB7XG4gICAgbiA9IHMuaGVhcFtoXTtcbiAgICBiaXRzID0gdHJlZVt0cmVlW24gKiAyICsgMV0vKi5EYWQqLyAqIDIgKyAxXS8qLkxlbiovICsgMTtcbiAgICBpZiAoYml0cyA+IG1heF9sZW5ndGgpIHtcbiAgICAgIGJpdHMgPSBtYXhfbGVuZ3RoO1xuICAgICAgb3ZlcmZsb3crKztcbiAgICB9XG4gICAgdHJlZVtuICogMiArIDFdLyouTGVuKi8gPSBiaXRzO1xuICAgIC8qIFdlIG92ZXJ3cml0ZSB0cmVlW25dLkRhZCB3aGljaCBpcyBubyBsb25nZXIgbmVlZGVkICovXG5cbiAgICBpZiAobiA+IG1heF9jb2RlKSB7IGNvbnRpbnVlOyB9IC8qIG5vdCBhIGxlYWYgbm9kZSAqL1xuXG4gICAgcy5ibF9jb3VudFtiaXRzXSsrO1xuICAgIHhiaXRzID0gMDtcbiAgICBpZiAobiA+PSBiYXNlKSB7XG4gICAgICB4Yml0cyA9IGV4dHJhW24gLSBiYXNlXTtcbiAgICB9XG4gICAgZiA9IHRyZWVbbiAqIDJdLyouRnJlcSovO1xuICAgIHMub3B0X2xlbiArPSBmICogKGJpdHMgKyB4Yml0cyk7XG4gICAgaWYgKGhhc19zdHJlZSkge1xuICAgICAgcy5zdGF0aWNfbGVuICs9IGYgKiAoc3RyZWVbbiAqIDIgKyAxXS8qLkxlbiovICsgeGJpdHMpO1xuICAgIH1cbiAgfVxuICBpZiAob3ZlcmZsb3cgPT09IDApIHsgcmV0dXJuOyB9XG5cbiAgLy8gVHJhY2UoKHN0ZGVycixcIlxcbmJpdCBsZW5ndGggb3ZlcmZsb3dcXG5cIikpO1xuICAvKiBUaGlzIGhhcHBlbnMgZm9yIGV4YW1wbGUgb24gb2JqMiBhbmQgcGljIG9mIHRoZSBDYWxnYXJ5IGNvcnB1cyAqL1xuXG4gIC8qIEZpbmQgdGhlIGZpcnN0IGJpdCBsZW5ndGggd2hpY2ggY291bGQgaW5jcmVhc2U6ICovXG4gIGRvIHtcbiAgICBiaXRzID0gbWF4X2xlbmd0aCAtIDE7XG4gICAgd2hpbGUgKHMuYmxfY291bnRbYml0c10gPT09IDApIHsgYml0cy0tOyB9XG4gICAgcy5ibF9jb3VudFtiaXRzXS0tOyAgICAgIC8qIG1vdmUgb25lIGxlYWYgZG93biB0aGUgdHJlZSAqL1xuICAgIHMuYmxfY291bnRbYml0cyArIDFdICs9IDI7IC8qIG1vdmUgb25lIG92ZXJmbG93IGl0ZW0gYXMgaXRzIGJyb3RoZXIgKi9cbiAgICBzLmJsX2NvdW50W21heF9sZW5ndGhdLS07XG4gICAgLyogVGhlIGJyb3RoZXIgb2YgdGhlIG92ZXJmbG93IGl0ZW0gYWxzbyBtb3ZlcyBvbmUgc3RlcCB1cCxcbiAgICAgKiBidXQgdGhpcyBkb2VzIG5vdCBhZmZlY3QgYmxfY291bnRbbWF4X2xlbmd0aF1cbiAgICAgKi9cbiAgICBvdmVyZmxvdyAtPSAyO1xuICB9IHdoaWxlIChvdmVyZmxvdyA+IDApO1xuXG4gIC8qIE5vdyByZWNvbXB1dGUgYWxsIGJpdCBsZW5ndGhzLCBzY2FubmluZyBpbiBpbmNyZWFzaW5nIGZyZXF1ZW5jeS5cbiAgICogaCBpcyBzdGlsbCBlcXVhbCB0byBIRUFQX1NJWkUuIChJdCBpcyBzaW1wbGVyIHRvIHJlY29uc3RydWN0IGFsbFxuICAgKiBsZW5ndGhzIGluc3RlYWQgb2YgZml4aW5nIG9ubHkgdGhlIHdyb25nIG9uZXMuIFRoaXMgaWRlYSBpcyB0YWtlblxuICAgKiBmcm9tICdhcicgd3JpdHRlbiBieSBIYXJ1aGlrbyBPa3VtdXJhLilcbiAgICovXG4gIGZvciAoYml0cyA9IG1heF9sZW5ndGg7IGJpdHMgIT09IDA7IGJpdHMtLSkge1xuICAgIG4gPSBzLmJsX2NvdW50W2JpdHNdO1xuICAgIHdoaWxlIChuICE9PSAwKSB7XG4gICAgICBtID0gcy5oZWFwWy0taF07XG4gICAgICBpZiAobSA+IG1heF9jb2RlKSB7IGNvbnRpbnVlOyB9XG4gICAgICBpZiAodHJlZVttICogMiArIDFdLyouTGVuKi8gIT09IGJpdHMpIHtcbiAgICAgICAgLy8gVHJhY2UoKHN0ZGVycixcImNvZGUgJWQgYml0cyAlZC0+JWRcXG5cIiwgbSwgdHJlZVttXS5MZW4sIGJpdHMpKTtcbiAgICAgICAgcy5vcHRfbGVuICs9IChiaXRzIC0gdHJlZVttICogMiArIDFdLyouTGVuKi8pICogdHJlZVttICogMl0vKi5GcmVxKi87XG4gICAgICAgIHRyZWVbbSAqIDIgKyAxXS8qLkxlbiovID0gYml0cztcbiAgICAgIH1cbiAgICAgIG4tLTtcbiAgICB9XG4gIH1cbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEdlbmVyYXRlIHRoZSBjb2RlcyBmb3IgYSBnaXZlbiB0cmVlIGFuZCBiaXQgY291bnRzICh3aGljaCBuZWVkIG5vdCBiZVxuICogb3B0aW1hbCkuXG4gKiBJTiBhc3NlcnRpb246IHRoZSBhcnJheSBibF9jb3VudCBjb250YWlucyB0aGUgYml0IGxlbmd0aCBzdGF0aXN0aWNzIGZvclxuICogdGhlIGdpdmVuIHRyZWUgYW5kIHRoZSBmaWVsZCBsZW4gaXMgc2V0IGZvciBhbGwgdHJlZSBlbGVtZW50cy5cbiAqIE9VVCBhc3NlcnRpb246IHRoZSBmaWVsZCBjb2RlIGlzIHNldCBmb3IgYWxsIHRyZWUgZWxlbWVudHMgb2Ygbm9uXG4gKiAgICAgemVybyBjb2RlIGxlbmd0aC5cbiAqL1xuZnVuY3Rpb24gZ2VuX2NvZGVzKHRyZWUsIG1heF9jb2RlLCBibF9jb3VudClcbi8vICAgIGN0X2RhdGEgKnRyZWU7ICAgICAgICAgICAgIC8qIHRoZSB0cmVlIHRvIGRlY29yYXRlICovXG4vLyAgICBpbnQgbWF4X2NvZGU7ICAgICAgICAgICAgICAvKiBsYXJnZXN0IGNvZGUgd2l0aCBub24gemVybyBmcmVxdWVuY3kgKi9cbi8vICAgIHVzaGYgKmJsX2NvdW50OyAgICAgICAgICAgIC8qIG51bWJlciBvZiBjb2RlcyBhdCBlYWNoIGJpdCBsZW5ndGggKi9cbntcbiAgdmFyIG5leHRfY29kZSA9IG5ldyBBcnJheShNQVhfQklUUyArIDEpOyAvKiBuZXh0IGNvZGUgdmFsdWUgZm9yIGVhY2ggYml0IGxlbmd0aCAqL1xuICB2YXIgY29kZSA9IDA7ICAgICAgICAgICAgICAvKiBydW5uaW5nIGNvZGUgdmFsdWUgKi9cbiAgdmFyIGJpdHM7ICAgICAgICAgICAgICAgICAgLyogYml0IGluZGV4ICovXG4gIHZhciBuOyAgICAgICAgICAgICAgICAgICAgIC8qIGNvZGUgaW5kZXggKi9cblxuICAvKiBUaGUgZGlzdHJpYnV0aW9uIGNvdW50cyBhcmUgZmlyc3QgdXNlZCB0byBnZW5lcmF0ZSB0aGUgY29kZSB2YWx1ZXNcbiAgICogd2l0aG91dCBiaXQgcmV2ZXJzYWwuXG4gICAqL1xuICBmb3IgKGJpdHMgPSAxOyBiaXRzIDw9IE1BWF9CSVRTOyBiaXRzKyspIHtcbiAgICBuZXh0X2NvZGVbYml0c10gPSBjb2RlID0gKGNvZGUgKyBibF9jb3VudFtiaXRzIC0gMV0pIDw8IDE7XG4gIH1cbiAgLyogQ2hlY2sgdGhhdCB0aGUgYml0IGNvdW50cyBpbiBibF9jb3VudCBhcmUgY29uc2lzdGVudC4gVGhlIGxhc3QgY29kZVxuICAgKiBtdXN0IGJlIGFsbCBvbmVzLlxuICAgKi9cbiAgLy9Bc3NlcnQgKGNvZGUgKyBibF9jb3VudFtNQVhfQklUU10tMSA9PSAoMTw8TUFYX0JJVFMpLTEsXG4gIC8vICAgICAgICBcImluY29uc2lzdGVudCBiaXQgY291bnRzXCIpO1xuICAvL1RyYWNldigoc3RkZXJyLFwiXFxuZ2VuX2NvZGVzOiBtYXhfY29kZSAlZCBcIiwgbWF4X2NvZGUpKTtcblxuICBmb3IgKG4gPSAwOyAgbiA8PSBtYXhfY29kZTsgbisrKSB7XG4gICAgdmFyIGxlbiA9IHRyZWVbbiAqIDIgKyAxXS8qLkxlbiovO1xuICAgIGlmIChsZW4gPT09IDApIHsgY29udGludWU7IH1cbiAgICAvKiBOb3cgcmV2ZXJzZSB0aGUgYml0cyAqL1xuICAgIHRyZWVbbiAqIDJdLyouQ29kZSovID0gYmlfcmV2ZXJzZShuZXh0X2NvZGVbbGVuXSsrLCBsZW4pO1xuXG4gICAgLy9UcmFjZWN2KHRyZWUgIT0gc3RhdGljX2x0cmVlLCAoc3RkZXJyLFwiXFxubiAlM2QgJWMgbCAlMmQgYyAlNHggKCV4KSBcIixcbiAgICAvLyAgICAgbiwgKGlzZ3JhcGgobikgPyBuIDogJyAnKSwgbGVuLCB0cmVlW25dLkNvZGUsIG5leHRfY29kZVtsZW5dLTEpKTtcbiAgfVxufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogSW5pdGlhbGl6ZSB0aGUgdmFyaW91cyAnY29uc3RhbnQnIHRhYmxlcy5cbiAqL1xuZnVuY3Rpb24gdHJfc3RhdGljX2luaXQoKSB7XG4gIHZhciBuOyAgICAgICAgLyogaXRlcmF0ZXMgb3ZlciB0cmVlIGVsZW1lbnRzICovXG4gIHZhciBiaXRzOyAgICAgLyogYml0IGNvdW50ZXIgKi9cbiAgdmFyIGxlbmd0aDsgICAvKiBsZW5ndGggdmFsdWUgKi9cbiAgdmFyIGNvZGU7ICAgICAvKiBjb2RlIHZhbHVlICovXG4gIHZhciBkaXN0OyAgICAgLyogZGlzdGFuY2UgaW5kZXggKi9cbiAgdmFyIGJsX2NvdW50ID0gbmV3IEFycmF5KE1BWF9CSVRTICsgMSk7XG4gIC8qIG51bWJlciBvZiBjb2RlcyBhdCBlYWNoIGJpdCBsZW5ndGggZm9yIGFuIG9wdGltYWwgdHJlZSAqL1xuXG4gIC8vIGRvIGNoZWNrIGluIF90cl9pbml0KClcbiAgLy9pZiAoc3RhdGljX2luaXRfZG9uZSkgcmV0dXJuO1xuXG4gIC8qIEZvciBzb21lIGVtYmVkZGVkIHRhcmdldHMsIGdsb2JhbCB2YXJpYWJsZXMgYXJlIG5vdCBpbml0aWFsaXplZDogKi9cbi8qI2lmZGVmIE5PX0lOSVRfR0xPQkFMX1BPSU5URVJTXG4gIHN0YXRpY19sX2Rlc2Muc3RhdGljX3RyZWUgPSBzdGF0aWNfbHRyZWU7XG4gIHN0YXRpY19sX2Rlc2MuZXh0cmFfYml0cyA9IGV4dHJhX2xiaXRzO1xuICBzdGF0aWNfZF9kZXNjLnN0YXRpY190cmVlID0gc3RhdGljX2R0cmVlO1xuICBzdGF0aWNfZF9kZXNjLmV4dHJhX2JpdHMgPSBleHRyYV9kYml0cztcbiAgc3RhdGljX2JsX2Rlc2MuZXh0cmFfYml0cyA9IGV4dHJhX2JsYml0cztcbiNlbmRpZiovXG5cbiAgLyogSW5pdGlhbGl6ZSB0aGUgbWFwcGluZyBsZW5ndGggKDAuLjI1NSkgLT4gbGVuZ3RoIGNvZGUgKDAuLjI4KSAqL1xuICBsZW5ndGggPSAwO1xuICBmb3IgKGNvZGUgPSAwOyBjb2RlIDwgTEVOR1RIX0NPREVTIC0gMTsgY29kZSsrKSB7XG4gICAgYmFzZV9sZW5ndGhbY29kZV0gPSBsZW5ndGg7XG4gICAgZm9yIChuID0gMDsgbiA8ICgxIDw8IGV4dHJhX2xiaXRzW2NvZGVdKTsgbisrKSB7XG4gICAgICBfbGVuZ3RoX2NvZGVbbGVuZ3RoKytdID0gY29kZTtcbiAgICB9XG4gIH1cbiAgLy9Bc3NlcnQgKGxlbmd0aCA9PSAyNTYsIFwidHJfc3RhdGljX2luaXQ6IGxlbmd0aCAhPSAyNTZcIik7XG4gIC8qIE5vdGUgdGhhdCB0aGUgbGVuZ3RoIDI1NSAobWF0Y2ggbGVuZ3RoIDI1OCkgY2FuIGJlIHJlcHJlc2VudGVkXG4gICAqIGluIHR3byBkaWZmZXJlbnQgd2F5czogY29kZSAyODQgKyA1IGJpdHMgb3IgY29kZSAyODUsIHNvIHdlXG4gICAqIG92ZXJ3cml0ZSBsZW5ndGhfY29kZVsyNTVdIHRvIHVzZSB0aGUgYmVzdCBlbmNvZGluZzpcbiAgICovXG4gIF9sZW5ndGhfY29kZVtsZW5ndGggLSAxXSA9IGNvZGU7XG5cbiAgLyogSW5pdGlhbGl6ZSB0aGUgbWFwcGluZyBkaXN0ICgwLi4zMkspIC0+IGRpc3QgY29kZSAoMC4uMjkpICovXG4gIGRpc3QgPSAwO1xuICBmb3IgKGNvZGUgPSAwOyBjb2RlIDwgMTY7IGNvZGUrKykge1xuICAgIGJhc2VfZGlzdFtjb2RlXSA9IGRpc3Q7XG4gICAgZm9yIChuID0gMDsgbiA8ICgxIDw8IGV4dHJhX2RiaXRzW2NvZGVdKTsgbisrKSB7XG4gICAgICBfZGlzdF9jb2RlW2Rpc3QrK10gPSBjb2RlO1xuICAgIH1cbiAgfVxuICAvL0Fzc2VydCAoZGlzdCA9PSAyNTYsIFwidHJfc3RhdGljX2luaXQ6IGRpc3QgIT0gMjU2XCIpO1xuICBkaXN0ID4+PSA3OyAvKiBmcm9tIG5vdyBvbiwgYWxsIGRpc3RhbmNlcyBhcmUgZGl2aWRlZCBieSAxMjggKi9cbiAgZm9yICg7IGNvZGUgPCBEX0NPREVTOyBjb2RlKyspIHtcbiAgICBiYXNlX2Rpc3RbY29kZV0gPSBkaXN0IDw8IDc7XG4gICAgZm9yIChuID0gMDsgbiA8ICgxIDw8IChleHRyYV9kYml0c1tjb2RlXSAtIDcpKTsgbisrKSB7XG4gICAgICBfZGlzdF9jb2RlWzI1NiArIGRpc3QrK10gPSBjb2RlO1xuICAgIH1cbiAgfVxuICAvL0Fzc2VydCAoZGlzdCA9PSAyNTYsIFwidHJfc3RhdGljX2luaXQ6IDI1NitkaXN0ICE9IDUxMlwiKTtcblxuICAvKiBDb25zdHJ1Y3QgdGhlIGNvZGVzIG9mIHRoZSBzdGF0aWMgbGl0ZXJhbCB0cmVlICovXG4gIGZvciAoYml0cyA9IDA7IGJpdHMgPD0gTUFYX0JJVFM7IGJpdHMrKykge1xuICAgIGJsX2NvdW50W2JpdHNdID0gMDtcbiAgfVxuXG4gIG4gPSAwO1xuICB3aGlsZSAobiA8PSAxNDMpIHtcbiAgICBzdGF0aWNfbHRyZWVbbiAqIDIgKyAxXS8qLkxlbiovID0gODtcbiAgICBuKys7XG4gICAgYmxfY291bnRbOF0rKztcbiAgfVxuICB3aGlsZSAobiA8PSAyNTUpIHtcbiAgICBzdGF0aWNfbHRyZWVbbiAqIDIgKyAxXS8qLkxlbiovID0gOTtcbiAgICBuKys7XG4gICAgYmxfY291bnRbOV0rKztcbiAgfVxuICB3aGlsZSAobiA8PSAyNzkpIHtcbiAgICBzdGF0aWNfbHRyZWVbbiAqIDIgKyAxXS8qLkxlbiovID0gNztcbiAgICBuKys7XG4gICAgYmxfY291bnRbN10rKztcbiAgfVxuICB3aGlsZSAobiA8PSAyODcpIHtcbiAgICBzdGF0aWNfbHRyZWVbbiAqIDIgKyAxXS8qLkxlbiovID0gODtcbiAgICBuKys7XG4gICAgYmxfY291bnRbOF0rKztcbiAgfVxuICAvKiBDb2RlcyAyODYgYW5kIDI4NyBkbyBub3QgZXhpc3QsIGJ1dCB3ZSBtdXN0IGluY2x1ZGUgdGhlbSBpbiB0aGVcbiAgICogdHJlZSBjb25zdHJ1Y3Rpb24gdG8gZ2V0IGEgY2Fub25pY2FsIEh1ZmZtYW4gdHJlZSAobG9uZ2VzdCBjb2RlXG4gICAqIGFsbCBvbmVzKVxuICAgKi9cbiAgZ2VuX2NvZGVzKHN0YXRpY19sdHJlZSwgTF9DT0RFUyArIDEsIGJsX2NvdW50KTtcblxuICAvKiBUaGUgc3RhdGljIGRpc3RhbmNlIHRyZWUgaXMgdHJpdmlhbDogKi9cbiAgZm9yIChuID0gMDsgbiA8IERfQ09ERVM7IG4rKykge1xuICAgIHN0YXRpY19kdHJlZVtuICogMiArIDFdLyouTGVuKi8gPSA1O1xuICAgIHN0YXRpY19kdHJlZVtuICogMl0vKi5Db2RlKi8gPSBiaV9yZXZlcnNlKG4sIDUpO1xuICB9XG5cbiAgLy8gTm93IGRhdGEgcmVhZHkgYW5kIHdlIGNhbiBpbml0IHN0YXRpYyB0cmVlc1xuICBzdGF0aWNfbF9kZXNjID0gbmV3IFN0YXRpY1RyZWVEZXNjKHN0YXRpY19sdHJlZSwgZXh0cmFfbGJpdHMsIExJVEVSQUxTICsgMSwgTF9DT0RFUywgTUFYX0JJVFMpO1xuICBzdGF0aWNfZF9kZXNjID0gbmV3IFN0YXRpY1RyZWVEZXNjKHN0YXRpY19kdHJlZSwgZXh0cmFfZGJpdHMsIDAsICAgICAgICAgIERfQ09ERVMsIE1BWF9CSVRTKTtcbiAgc3RhdGljX2JsX2Rlc2MgPSBuZXcgU3RhdGljVHJlZURlc2MobmV3IEFycmF5KDApLCBleHRyYV9ibGJpdHMsIDAsICAgICAgICAgQkxfQ09ERVMsIE1BWF9CTF9CSVRTKTtcblxuICAvL3N0YXRpY19pbml0X2RvbmUgPSB0cnVlO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogSW5pdGlhbGl6ZSBhIG5ldyBibG9jay5cbiAqL1xuZnVuY3Rpb24gaW5pdF9ibG9jayhzKSB7XG4gIHZhciBuOyAvKiBpdGVyYXRlcyBvdmVyIHRyZWUgZWxlbWVudHMgKi9cblxuICAvKiBJbml0aWFsaXplIHRoZSB0cmVlcy4gKi9cbiAgZm9yIChuID0gMDsgbiA8IExfQ09ERVM7ICBuKyspIHsgcy5keW5fbHRyZWVbbiAqIDJdLyouRnJlcSovID0gMDsgfVxuICBmb3IgKG4gPSAwOyBuIDwgRF9DT0RFUzsgIG4rKykgeyBzLmR5bl9kdHJlZVtuICogMl0vKi5GcmVxKi8gPSAwOyB9XG4gIGZvciAobiA9IDA7IG4gPCBCTF9DT0RFUzsgbisrKSB7IHMuYmxfdHJlZVtuICogMl0vKi5GcmVxKi8gPSAwOyB9XG5cbiAgcy5keW5fbHRyZWVbRU5EX0JMT0NLICogMl0vKi5GcmVxKi8gPSAxO1xuICBzLm9wdF9sZW4gPSBzLnN0YXRpY19sZW4gPSAwO1xuICBzLmxhc3RfbGl0ID0gcy5tYXRjaGVzID0gMDtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIEZsdXNoIHRoZSBiaXQgYnVmZmVyIGFuZCBhbGlnbiB0aGUgb3V0cHV0IG9uIGEgYnl0ZSBib3VuZGFyeVxuICovXG5mdW5jdGlvbiBiaV93aW5kdXAocylcbntcbiAgaWYgKHMuYmlfdmFsaWQgPiA4KSB7XG4gICAgcHV0X3Nob3J0KHMsIHMuYmlfYnVmKTtcbiAgfSBlbHNlIGlmIChzLmJpX3ZhbGlkID4gMCkge1xuICAgIC8vcHV0X2J5dGUocywgKEJ5dGUpcy0+YmlfYnVmKTtcbiAgICBzLnBlbmRpbmdfYnVmW3MucGVuZGluZysrXSA9IHMuYmlfYnVmO1xuICB9XG4gIHMuYmlfYnVmID0gMDtcbiAgcy5iaV92YWxpZCA9IDA7XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29weSBhIHN0b3JlZCBibG9jaywgc3RvcmluZyBmaXJzdCB0aGUgbGVuZ3RoIGFuZCBpdHNcbiAqIG9uZSdzIGNvbXBsZW1lbnQgaWYgcmVxdWVzdGVkLlxuICovXG5mdW5jdGlvbiBjb3B5X2Jsb2NrKHMsIGJ1ZiwgbGVuLCBoZWFkZXIpXG4vL0RlZmxhdGVTdGF0ZSAqcztcbi8vY2hhcmYgICAgKmJ1ZjsgICAgLyogdGhlIGlucHV0IGRhdGEgKi9cbi8vdW5zaWduZWQgbGVuOyAgICAgLyogaXRzIGxlbmd0aCAqL1xuLy9pbnQgICAgICBoZWFkZXI7ICAvKiB0cnVlIGlmIGJsb2NrIGhlYWRlciBtdXN0IGJlIHdyaXR0ZW4gKi9cbntcbiAgYmlfd2luZHVwKHMpOyAgICAgICAgLyogYWxpZ24gb24gYnl0ZSBib3VuZGFyeSAqL1xuXG4gIGlmIChoZWFkZXIpIHtcbiAgICBwdXRfc2hvcnQocywgbGVuKTtcbiAgICBwdXRfc2hvcnQocywgfmxlbik7XG4gIH1cbi8vICB3aGlsZSAobGVuLS0pIHtcbi8vICAgIHB1dF9ieXRlKHMsICpidWYrKyk7XG4vLyAgfVxuICB1dGlscy5hcnJheVNldChzLnBlbmRpbmdfYnVmLCBzLndpbmRvdywgYnVmLCBsZW4sIHMucGVuZGluZyk7XG4gIHMucGVuZGluZyArPSBsZW47XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogQ29tcGFyZXMgdG8gc3VidHJlZXMsIHVzaW5nIHRoZSB0cmVlIGRlcHRoIGFzIHRpZSBicmVha2VyIHdoZW5cbiAqIHRoZSBzdWJ0cmVlcyBoYXZlIGVxdWFsIGZyZXF1ZW5jeS4gVGhpcyBtaW5pbWl6ZXMgdGhlIHdvcnN0IGNhc2UgbGVuZ3RoLlxuICovXG5mdW5jdGlvbiBzbWFsbGVyKHRyZWUsIG4sIG0sIGRlcHRoKSB7XG4gIHZhciBfbjIgPSBuICogMjtcbiAgdmFyIF9tMiA9IG0gKiAyO1xuICByZXR1cm4gKHRyZWVbX24yXS8qLkZyZXEqLyA8IHRyZWVbX20yXS8qLkZyZXEqLyB8fFxuICAgICAgICAgKHRyZWVbX24yXS8qLkZyZXEqLyA9PT0gdHJlZVtfbTJdLyouRnJlcSovICYmIGRlcHRoW25dIDw9IGRlcHRoW21dKSk7XG59XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogUmVzdG9yZSB0aGUgaGVhcCBwcm9wZXJ0eSBieSBtb3ZpbmcgZG93biB0aGUgdHJlZSBzdGFydGluZyBhdCBub2RlIGssXG4gKiBleGNoYW5naW5nIGEgbm9kZSB3aXRoIHRoZSBzbWFsbGVzdCBvZiBpdHMgdHdvIHNvbnMgaWYgbmVjZXNzYXJ5LCBzdG9wcGluZ1xuICogd2hlbiB0aGUgaGVhcCBwcm9wZXJ0eSBpcyByZS1lc3RhYmxpc2hlZCAoZWFjaCBmYXRoZXIgc21hbGxlciB0aGFuIGl0c1xuICogdHdvIHNvbnMpLlxuICovXG5mdW5jdGlvbiBwcWRvd25oZWFwKHMsIHRyZWUsIGspXG4vLyAgICBkZWZsYXRlX3N0YXRlICpzO1xuLy8gICAgY3RfZGF0YSAqdHJlZTsgIC8qIHRoZSB0cmVlIHRvIHJlc3RvcmUgKi9cbi8vICAgIGludCBrOyAgICAgICAgICAgICAgIC8qIG5vZGUgdG8gbW92ZSBkb3duICovXG57XG4gIHZhciB2ID0gcy5oZWFwW2tdO1xuICB2YXIgaiA9IGsgPDwgMTsgIC8qIGxlZnQgc29uIG9mIGsgKi9cbiAgd2hpbGUgKGogPD0gcy5oZWFwX2xlbikge1xuICAgIC8qIFNldCBqIHRvIHRoZSBzbWFsbGVzdCBvZiB0aGUgdHdvIHNvbnM6ICovXG4gICAgaWYgKGogPCBzLmhlYXBfbGVuICYmXG4gICAgICBzbWFsbGVyKHRyZWUsIHMuaGVhcFtqICsgMV0sIHMuaGVhcFtqXSwgcy5kZXB0aCkpIHtcbiAgICAgIGorKztcbiAgICB9XG4gICAgLyogRXhpdCBpZiB2IGlzIHNtYWxsZXIgdGhhbiBib3RoIHNvbnMgKi9cbiAgICBpZiAoc21hbGxlcih0cmVlLCB2LCBzLmhlYXBbal0sIHMuZGVwdGgpKSB7IGJyZWFrOyB9XG5cbiAgICAvKiBFeGNoYW5nZSB2IHdpdGggdGhlIHNtYWxsZXN0IHNvbiAqL1xuICAgIHMuaGVhcFtrXSA9IHMuaGVhcFtqXTtcbiAgICBrID0gajtcblxuICAgIC8qIEFuZCBjb250aW51ZSBkb3duIHRoZSB0cmVlLCBzZXR0aW5nIGogdG8gdGhlIGxlZnQgc29uIG9mIGsgKi9cbiAgICBqIDw8PSAxO1xuICB9XG4gIHMuaGVhcFtrXSA9IHY7XG59XG5cblxuLy8gaW5saW5lZCBtYW51YWxseVxuLy8gdmFyIFNNQUxMRVNUID0gMTtcblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBTZW5kIHRoZSBibG9jayBkYXRhIGNvbXByZXNzZWQgdXNpbmcgdGhlIGdpdmVuIEh1ZmZtYW4gdHJlZXNcbiAqL1xuZnVuY3Rpb24gY29tcHJlc3NfYmxvY2socywgbHRyZWUsIGR0cmVlKVxuLy8gICAgZGVmbGF0ZV9zdGF0ZSAqcztcbi8vICAgIGNvbnN0IGN0X2RhdGEgKmx0cmVlOyAvKiBsaXRlcmFsIHRyZWUgKi9cbi8vICAgIGNvbnN0IGN0X2RhdGEgKmR0cmVlOyAvKiBkaXN0YW5jZSB0cmVlICovXG57XG4gIHZhciBkaXN0OyAgICAgICAgICAgLyogZGlzdGFuY2Ugb2YgbWF0Y2hlZCBzdHJpbmcgKi9cbiAgdmFyIGxjOyAgICAgICAgICAgICAvKiBtYXRjaCBsZW5ndGggb3IgdW5tYXRjaGVkIGNoYXIgKGlmIGRpc3QgPT0gMCkgKi9cbiAgdmFyIGx4ID0gMDsgICAgICAgICAvKiBydW5uaW5nIGluZGV4IGluIGxfYnVmICovXG4gIHZhciBjb2RlOyAgICAgICAgICAgLyogdGhlIGNvZGUgdG8gc2VuZCAqL1xuICB2YXIgZXh0cmE7ICAgICAgICAgIC8qIG51bWJlciBvZiBleHRyYSBiaXRzIHRvIHNlbmQgKi9cblxuICBpZiAocy5sYXN0X2xpdCAhPT0gMCkge1xuICAgIGRvIHtcbiAgICAgIGRpc3QgPSAocy5wZW5kaW5nX2J1ZltzLmRfYnVmICsgbHggKiAyXSA8PCA4KSB8IChzLnBlbmRpbmdfYnVmW3MuZF9idWYgKyBseCAqIDIgKyAxXSk7XG4gICAgICBsYyA9IHMucGVuZGluZ19idWZbcy5sX2J1ZiArIGx4XTtcbiAgICAgIGx4Kys7XG5cbiAgICAgIGlmIChkaXN0ID09PSAwKSB7XG4gICAgICAgIHNlbmRfY29kZShzLCBsYywgbHRyZWUpOyAvKiBzZW5kIGEgbGl0ZXJhbCBieXRlICovXG4gICAgICAgIC8vVHJhY2Vjdihpc2dyYXBoKGxjKSwgKHN0ZGVycixcIiAnJWMnIFwiLCBsYykpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLyogSGVyZSwgbGMgaXMgdGhlIG1hdGNoIGxlbmd0aCAtIE1JTl9NQVRDSCAqL1xuICAgICAgICBjb2RlID0gX2xlbmd0aF9jb2RlW2xjXTtcbiAgICAgICAgc2VuZF9jb2RlKHMsIGNvZGUgKyBMSVRFUkFMUyArIDEsIGx0cmVlKTsgLyogc2VuZCB0aGUgbGVuZ3RoIGNvZGUgKi9cbiAgICAgICAgZXh0cmEgPSBleHRyYV9sYml0c1tjb2RlXTtcbiAgICAgICAgaWYgKGV4dHJhICE9PSAwKSB7XG4gICAgICAgICAgbGMgLT0gYmFzZV9sZW5ndGhbY29kZV07XG4gICAgICAgICAgc2VuZF9iaXRzKHMsIGxjLCBleHRyYSk7ICAgICAgIC8qIHNlbmQgdGhlIGV4dHJhIGxlbmd0aCBiaXRzICovXG4gICAgICAgIH1cbiAgICAgICAgZGlzdC0tOyAvKiBkaXN0IGlzIG5vdyB0aGUgbWF0Y2ggZGlzdGFuY2UgLSAxICovXG4gICAgICAgIGNvZGUgPSBkX2NvZGUoZGlzdCk7XG4gICAgICAgIC8vQXNzZXJ0IChjb2RlIDwgRF9DT0RFUywgXCJiYWQgZF9jb2RlXCIpO1xuXG4gICAgICAgIHNlbmRfY29kZShzLCBjb2RlLCBkdHJlZSk7ICAgICAgIC8qIHNlbmQgdGhlIGRpc3RhbmNlIGNvZGUgKi9cbiAgICAgICAgZXh0cmEgPSBleHRyYV9kYml0c1tjb2RlXTtcbiAgICAgICAgaWYgKGV4dHJhICE9PSAwKSB7XG4gICAgICAgICAgZGlzdCAtPSBiYXNlX2Rpc3RbY29kZV07XG4gICAgICAgICAgc2VuZF9iaXRzKHMsIGRpc3QsIGV4dHJhKTsgICAvKiBzZW5kIHRoZSBleHRyYSBkaXN0YW5jZSBiaXRzICovXG4gICAgICAgIH1cbiAgICAgIH0gLyogbGl0ZXJhbCBvciBtYXRjaCBwYWlyID8gKi9cblxuICAgICAgLyogQ2hlY2sgdGhhdCB0aGUgb3ZlcmxheSBiZXR3ZWVuIHBlbmRpbmdfYnVmIGFuZCBkX2J1ZitsX2J1ZiBpcyBvazogKi9cbiAgICAgIC8vQXNzZXJ0KCh1SW50KShzLT5wZW5kaW5nKSA8IHMtPmxpdF9idWZzaXplICsgMipseCxcbiAgICAgIC8vICAgICAgIFwicGVuZGluZ0J1ZiBvdmVyZmxvd1wiKTtcblxuICAgIH0gd2hpbGUgKGx4IDwgcy5sYXN0X2xpdCk7XG4gIH1cblxuICBzZW5kX2NvZGUocywgRU5EX0JMT0NLLCBsdHJlZSk7XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBDb25zdHJ1Y3Qgb25lIEh1ZmZtYW4gdHJlZSBhbmQgYXNzaWducyB0aGUgY29kZSBiaXQgc3RyaW5ncyBhbmQgbGVuZ3Rocy5cbiAqIFVwZGF0ZSB0aGUgdG90YWwgYml0IGxlbmd0aCBmb3IgdGhlIGN1cnJlbnQgYmxvY2suXG4gKiBJTiBhc3NlcnRpb246IHRoZSBmaWVsZCBmcmVxIGlzIHNldCBmb3IgYWxsIHRyZWUgZWxlbWVudHMuXG4gKiBPVVQgYXNzZXJ0aW9uczogdGhlIGZpZWxkcyBsZW4gYW5kIGNvZGUgYXJlIHNldCB0byB0aGUgb3B0aW1hbCBiaXQgbGVuZ3RoXG4gKiAgICAgYW5kIGNvcnJlc3BvbmRpbmcgY29kZS4gVGhlIGxlbmd0aCBvcHRfbGVuIGlzIHVwZGF0ZWQ7IHN0YXRpY19sZW4gaXNcbiAqICAgICBhbHNvIHVwZGF0ZWQgaWYgc3RyZWUgaXMgbm90IG51bGwuIFRoZSBmaWVsZCBtYXhfY29kZSBpcyBzZXQuXG4gKi9cbmZ1bmN0aW9uIGJ1aWxkX3RyZWUocywgZGVzYylcbi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7XG4vLyAgICB0cmVlX2Rlc2MgKmRlc2M7IC8qIHRoZSB0cmVlIGRlc2NyaXB0b3IgKi9cbntcbiAgdmFyIHRyZWUgICAgID0gZGVzYy5keW5fdHJlZTtcbiAgdmFyIHN0cmVlICAgID0gZGVzYy5zdGF0X2Rlc2Muc3RhdGljX3RyZWU7XG4gIHZhciBoYXNfc3RyZWUgPSBkZXNjLnN0YXRfZGVzYy5oYXNfc3RyZWU7XG4gIHZhciBlbGVtcyAgICA9IGRlc2Muc3RhdF9kZXNjLmVsZW1zO1xuICB2YXIgbiwgbTsgICAgICAgICAgLyogaXRlcmF0ZSBvdmVyIGhlYXAgZWxlbWVudHMgKi9cbiAgdmFyIG1heF9jb2RlID0gLTE7IC8qIGxhcmdlc3QgY29kZSB3aXRoIG5vbiB6ZXJvIGZyZXF1ZW5jeSAqL1xuICB2YXIgbm9kZTsgICAgICAgICAgLyogbmV3IG5vZGUgYmVpbmcgY3JlYXRlZCAqL1xuXG4gIC8qIENvbnN0cnVjdCB0aGUgaW5pdGlhbCBoZWFwLCB3aXRoIGxlYXN0IGZyZXF1ZW50IGVsZW1lbnQgaW5cbiAgICogaGVhcFtTTUFMTEVTVF0uIFRoZSBzb25zIG9mIGhlYXBbbl0gYXJlIGhlYXBbMipuXSBhbmQgaGVhcFsyKm4rMV0uXG4gICAqIGhlYXBbMF0gaXMgbm90IHVzZWQuXG4gICAqL1xuICBzLmhlYXBfbGVuID0gMDtcbiAgcy5oZWFwX21heCA9IEhFQVBfU0laRTtcblxuICBmb3IgKG4gPSAwOyBuIDwgZWxlbXM7IG4rKykge1xuICAgIGlmICh0cmVlW24gKiAyXS8qLkZyZXEqLyAhPT0gMCkge1xuICAgICAgcy5oZWFwWysrcy5oZWFwX2xlbl0gPSBtYXhfY29kZSA9IG47XG4gICAgICBzLmRlcHRoW25dID0gMDtcblxuICAgIH0gZWxzZSB7XG4gICAgICB0cmVlW24gKiAyICsgMV0vKi5MZW4qLyA9IDA7XG4gICAgfVxuICB9XG5cbiAgLyogVGhlIHBremlwIGZvcm1hdCByZXF1aXJlcyB0aGF0IGF0IGxlYXN0IG9uZSBkaXN0YW5jZSBjb2RlIGV4aXN0cyxcbiAgICogYW5kIHRoYXQgYXQgbGVhc3Qgb25lIGJpdCBzaG91bGQgYmUgc2VudCBldmVuIGlmIHRoZXJlIGlzIG9ubHkgb25lXG4gICAqIHBvc3NpYmxlIGNvZGUuIFNvIHRvIGF2b2lkIHNwZWNpYWwgY2hlY2tzIGxhdGVyIG9uIHdlIGZvcmNlIGF0IGxlYXN0XG4gICAqIHR3byBjb2RlcyBvZiBub24gemVybyBmcmVxdWVuY3kuXG4gICAqL1xuICB3aGlsZSAocy5oZWFwX2xlbiA8IDIpIHtcbiAgICBub2RlID0gcy5oZWFwWysrcy5oZWFwX2xlbl0gPSAobWF4X2NvZGUgPCAyID8gKyttYXhfY29kZSA6IDApO1xuICAgIHRyZWVbbm9kZSAqIDJdLyouRnJlcSovID0gMTtcbiAgICBzLmRlcHRoW25vZGVdID0gMDtcbiAgICBzLm9wdF9sZW4tLTtcblxuICAgIGlmIChoYXNfc3RyZWUpIHtcbiAgICAgIHMuc3RhdGljX2xlbiAtPSBzdHJlZVtub2RlICogMiArIDFdLyouTGVuKi87XG4gICAgfVxuICAgIC8qIG5vZGUgaXMgMCBvciAxIHNvIGl0IGRvZXMgbm90IGhhdmUgZXh0cmEgYml0cyAqL1xuICB9XG4gIGRlc2MubWF4X2NvZGUgPSBtYXhfY29kZTtcblxuICAvKiBUaGUgZWxlbWVudHMgaGVhcFtoZWFwX2xlbi8yKzEgLi4gaGVhcF9sZW5dIGFyZSBsZWF2ZXMgb2YgdGhlIHRyZWUsXG4gICAqIGVzdGFibGlzaCBzdWItaGVhcHMgb2YgaW5jcmVhc2luZyBsZW5ndGhzOlxuICAgKi9cbiAgZm9yIChuID0gKHMuaGVhcF9sZW4gPj4gMS8qaW50IC8yKi8pOyBuID49IDE7IG4tLSkgeyBwcWRvd25oZWFwKHMsIHRyZWUsIG4pOyB9XG5cbiAgLyogQ29uc3RydWN0IHRoZSBIdWZmbWFuIHRyZWUgYnkgcmVwZWF0ZWRseSBjb21iaW5pbmcgdGhlIGxlYXN0IHR3b1xuICAgKiBmcmVxdWVudCBub2Rlcy5cbiAgICovXG4gIG5vZGUgPSBlbGVtczsgICAgICAgICAgICAgIC8qIG5leHQgaW50ZXJuYWwgbm9kZSBvZiB0aGUgdHJlZSAqL1xuICBkbyB7XG4gICAgLy9wcXJlbW92ZShzLCB0cmVlLCBuKTsgIC8qIG4gPSBub2RlIG9mIGxlYXN0IGZyZXF1ZW5jeSAqL1xuICAgIC8qKiogcHFyZW1vdmUgKioqL1xuICAgIG4gPSBzLmhlYXBbMS8qU01BTExFU1QqL107XG4gICAgcy5oZWFwWzEvKlNNQUxMRVNUKi9dID0gcy5oZWFwW3MuaGVhcF9sZW4tLV07XG4gICAgcHFkb3duaGVhcChzLCB0cmVlLCAxLypTTUFMTEVTVCovKTtcbiAgICAvKioqL1xuXG4gICAgbSA9IHMuaGVhcFsxLypTTUFMTEVTVCovXTsgLyogbSA9IG5vZGUgb2YgbmV4dCBsZWFzdCBmcmVxdWVuY3kgKi9cblxuICAgIHMuaGVhcFstLXMuaGVhcF9tYXhdID0gbjsgLyoga2VlcCB0aGUgbm9kZXMgc29ydGVkIGJ5IGZyZXF1ZW5jeSAqL1xuICAgIHMuaGVhcFstLXMuaGVhcF9tYXhdID0gbTtcblxuICAgIC8qIENyZWF0ZSBhIG5ldyBub2RlIGZhdGhlciBvZiBuIGFuZCBtICovXG4gICAgdHJlZVtub2RlICogMl0vKi5GcmVxKi8gPSB0cmVlW24gKiAyXS8qLkZyZXEqLyArIHRyZWVbbSAqIDJdLyouRnJlcSovO1xuICAgIHMuZGVwdGhbbm9kZV0gPSAocy5kZXB0aFtuXSA+PSBzLmRlcHRoW21dID8gcy5kZXB0aFtuXSA6IHMuZGVwdGhbbV0pICsgMTtcbiAgICB0cmVlW24gKiAyICsgMV0vKi5EYWQqLyA9IHRyZWVbbSAqIDIgKyAxXS8qLkRhZCovID0gbm9kZTtcblxuICAgIC8qIGFuZCBpbnNlcnQgdGhlIG5ldyBub2RlIGluIHRoZSBoZWFwICovXG4gICAgcy5oZWFwWzEvKlNNQUxMRVNUKi9dID0gbm9kZSsrO1xuICAgIHBxZG93bmhlYXAocywgdHJlZSwgMS8qU01BTExFU1QqLyk7XG5cbiAgfSB3aGlsZSAocy5oZWFwX2xlbiA+PSAyKTtcblxuICBzLmhlYXBbLS1zLmhlYXBfbWF4XSA9IHMuaGVhcFsxLypTTUFMTEVTVCovXTtcblxuICAvKiBBdCB0aGlzIHBvaW50LCB0aGUgZmllbGRzIGZyZXEgYW5kIGRhZCBhcmUgc2V0LiBXZSBjYW4gbm93XG4gICAqIGdlbmVyYXRlIHRoZSBiaXQgbGVuZ3Rocy5cbiAgICovXG4gIGdlbl9iaXRsZW4ocywgZGVzYyk7XG5cbiAgLyogVGhlIGZpZWxkIGxlbiBpcyBub3cgc2V0LCB3ZSBjYW4gZ2VuZXJhdGUgdGhlIGJpdCBjb2RlcyAqL1xuICBnZW5fY29kZXModHJlZSwgbWF4X2NvZGUsIHMuYmxfY291bnQpO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogU2NhbiBhIGxpdGVyYWwgb3IgZGlzdGFuY2UgdHJlZSB0byBkZXRlcm1pbmUgdGhlIGZyZXF1ZW5jaWVzIG9mIHRoZSBjb2Rlc1xuICogaW4gdGhlIGJpdCBsZW5ndGggdHJlZS5cbiAqL1xuZnVuY3Rpb24gc2Nhbl90cmVlKHMsIHRyZWUsIG1heF9jb2RlKVxuLy8gICAgZGVmbGF0ZV9zdGF0ZSAqcztcbi8vICAgIGN0X2RhdGEgKnRyZWU7ICAgLyogdGhlIHRyZWUgdG8gYmUgc2Nhbm5lZCAqL1xuLy8gICAgaW50IG1heF9jb2RlOyAgICAvKiBhbmQgaXRzIGxhcmdlc3QgY29kZSBvZiBub24gemVybyBmcmVxdWVuY3kgKi9cbntcbiAgdmFyIG47ICAgICAgICAgICAgICAgICAgICAgLyogaXRlcmF0ZXMgb3ZlciBhbGwgdHJlZSBlbGVtZW50cyAqL1xuICB2YXIgcHJldmxlbiA9IC0xOyAgICAgICAgICAvKiBsYXN0IGVtaXR0ZWQgbGVuZ3RoICovXG4gIHZhciBjdXJsZW47ICAgICAgICAgICAgICAgIC8qIGxlbmd0aCBvZiBjdXJyZW50IGNvZGUgKi9cblxuICB2YXIgbmV4dGxlbiA9IHRyZWVbMCAqIDIgKyAxXS8qLkxlbiovOyAvKiBsZW5ndGggb2YgbmV4dCBjb2RlICovXG5cbiAgdmFyIGNvdW50ID0gMDsgICAgICAgICAgICAgLyogcmVwZWF0IGNvdW50IG9mIHRoZSBjdXJyZW50IGNvZGUgKi9cbiAgdmFyIG1heF9jb3VudCA9IDc7ICAgICAgICAgLyogbWF4IHJlcGVhdCBjb3VudCAqL1xuICB2YXIgbWluX2NvdW50ID0gNDsgICAgICAgICAvKiBtaW4gcmVwZWF0IGNvdW50ICovXG5cbiAgaWYgKG5leHRsZW4gPT09IDApIHtcbiAgICBtYXhfY291bnQgPSAxMzg7XG4gICAgbWluX2NvdW50ID0gMztcbiAgfVxuICB0cmVlWyhtYXhfY29kZSArIDEpICogMiArIDFdLyouTGVuKi8gPSAweGZmZmY7IC8qIGd1YXJkICovXG5cbiAgZm9yIChuID0gMDsgbiA8PSBtYXhfY29kZTsgbisrKSB7XG4gICAgY3VybGVuID0gbmV4dGxlbjtcbiAgICBuZXh0bGVuID0gdHJlZVsobiArIDEpICogMiArIDFdLyouTGVuKi87XG5cbiAgICBpZiAoKytjb3VudCA8IG1heF9jb3VudCAmJiBjdXJsZW4gPT09IG5leHRsZW4pIHtcbiAgICAgIGNvbnRpbnVlO1xuXG4gICAgfSBlbHNlIGlmIChjb3VudCA8IG1pbl9jb3VudCkge1xuICAgICAgcy5ibF90cmVlW2N1cmxlbiAqIDJdLyouRnJlcSovICs9IGNvdW50O1xuXG4gICAgfSBlbHNlIGlmIChjdXJsZW4gIT09IDApIHtcblxuICAgICAgaWYgKGN1cmxlbiAhPT0gcHJldmxlbikgeyBzLmJsX3RyZWVbY3VybGVuICogMl0vKi5GcmVxKi8rKzsgfVxuICAgICAgcy5ibF90cmVlW1JFUF8zXzYgKiAyXS8qLkZyZXEqLysrO1xuXG4gICAgfSBlbHNlIGlmIChjb3VudCA8PSAxMCkge1xuICAgICAgcy5ibF90cmVlW1JFUFpfM18xMCAqIDJdLyouRnJlcSovKys7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgcy5ibF90cmVlW1JFUFpfMTFfMTM4ICogMl0vKi5GcmVxKi8rKztcbiAgICB9XG5cbiAgICBjb3VudCA9IDA7XG4gICAgcHJldmxlbiA9IGN1cmxlbjtcblxuICAgIGlmIChuZXh0bGVuID09PSAwKSB7XG4gICAgICBtYXhfY291bnQgPSAxMzg7XG4gICAgICBtaW5fY291bnQgPSAzO1xuXG4gICAgfSBlbHNlIGlmIChjdXJsZW4gPT09IG5leHRsZW4pIHtcbiAgICAgIG1heF9jb3VudCA9IDY7XG4gICAgICBtaW5fY291bnQgPSAzO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIG1heF9jb3VudCA9IDc7XG4gICAgICBtaW5fY291bnQgPSA0O1xuICAgIH1cbiAgfVxufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogU2VuZCBhIGxpdGVyYWwgb3IgZGlzdGFuY2UgdHJlZSBpbiBjb21wcmVzc2VkIGZvcm0sIHVzaW5nIHRoZSBjb2RlcyBpblxuICogYmxfdHJlZS5cbiAqL1xuZnVuY3Rpb24gc2VuZF90cmVlKHMsIHRyZWUsIG1heF9jb2RlKVxuLy8gICAgZGVmbGF0ZV9zdGF0ZSAqcztcbi8vICAgIGN0X2RhdGEgKnRyZWU7IC8qIHRoZSB0cmVlIHRvIGJlIHNjYW5uZWQgKi9cbi8vICAgIGludCBtYXhfY29kZTsgICAgICAgLyogYW5kIGl0cyBsYXJnZXN0IGNvZGUgb2Ygbm9uIHplcm8gZnJlcXVlbmN5ICovXG57XG4gIHZhciBuOyAgICAgICAgICAgICAgICAgICAgIC8qIGl0ZXJhdGVzIG92ZXIgYWxsIHRyZWUgZWxlbWVudHMgKi9cbiAgdmFyIHByZXZsZW4gPSAtMTsgICAgICAgICAgLyogbGFzdCBlbWl0dGVkIGxlbmd0aCAqL1xuICB2YXIgY3VybGVuOyAgICAgICAgICAgICAgICAvKiBsZW5ndGggb2YgY3VycmVudCBjb2RlICovXG5cbiAgdmFyIG5leHRsZW4gPSB0cmVlWzAgKiAyICsgMV0vKi5MZW4qLzsgLyogbGVuZ3RoIG9mIG5leHQgY29kZSAqL1xuXG4gIHZhciBjb3VudCA9IDA7ICAgICAgICAgICAgIC8qIHJlcGVhdCBjb3VudCBvZiB0aGUgY3VycmVudCBjb2RlICovXG4gIHZhciBtYXhfY291bnQgPSA3OyAgICAgICAgIC8qIG1heCByZXBlYXQgY291bnQgKi9cbiAgdmFyIG1pbl9jb3VudCA9IDQ7ICAgICAgICAgLyogbWluIHJlcGVhdCBjb3VudCAqL1xuXG4gIC8qIHRyZWVbbWF4X2NvZGUrMV0uTGVuID0gLTE7ICovICAvKiBndWFyZCBhbHJlYWR5IHNldCAqL1xuICBpZiAobmV4dGxlbiA9PT0gMCkge1xuICAgIG1heF9jb3VudCA9IDEzODtcbiAgICBtaW5fY291bnQgPSAzO1xuICB9XG5cbiAgZm9yIChuID0gMDsgbiA8PSBtYXhfY29kZTsgbisrKSB7XG4gICAgY3VybGVuID0gbmV4dGxlbjtcbiAgICBuZXh0bGVuID0gdHJlZVsobiArIDEpICogMiArIDFdLyouTGVuKi87XG5cbiAgICBpZiAoKytjb3VudCA8IG1heF9jb3VudCAmJiBjdXJsZW4gPT09IG5leHRsZW4pIHtcbiAgICAgIGNvbnRpbnVlO1xuXG4gICAgfSBlbHNlIGlmIChjb3VudCA8IG1pbl9jb3VudCkge1xuICAgICAgZG8geyBzZW5kX2NvZGUocywgY3VybGVuLCBzLmJsX3RyZWUpOyB9IHdoaWxlICgtLWNvdW50ICE9PSAwKTtcblxuICAgIH0gZWxzZSBpZiAoY3VybGVuICE9PSAwKSB7XG4gICAgICBpZiAoY3VybGVuICE9PSBwcmV2bGVuKSB7XG4gICAgICAgIHNlbmRfY29kZShzLCBjdXJsZW4sIHMuYmxfdHJlZSk7XG4gICAgICAgIGNvdW50LS07XG4gICAgICB9XG4gICAgICAvL0Fzc2VydChjb3VudCA+PSAzICYmIGNvdW50IDw9IDYsIFwiIDNfNj9cIik7XG4gICAgICBzZW5kX2NvZGUocywgUkVQXzNfNiwgcy5ibF90cmVlKTtcbiAgICAgIHNlbmRfYml0cyhzLCBjb3VudCAtIDMsIDIpO1xuXG4gICAgfSBlbHNlIGlmIChjb3VudCA8PSAxMCkge1xuICAgICAgc2VuZF9jb2RlKHMsIFJFUFpfM18xMCwgcy5ibF90cmVlKTtcbiAgICAgIHNlbmRfYml0cyhzLCBjb3VudCAtIDMsIDMpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHNlbmRfY29kZShzLCBSRVBaXzExXzEzOCwgcy5ibF90cmVlKTtcbiAgICAgIHNlbmRfYml0cyhzLCBjb3VudCAtIDExLCA3KTtcbiAgICB9XG5cbiAgICBjb3VudCA9IDA7XG4gICAgcHJldmxlbiA9IGN1cmxlbjtcbiAgICBpZiAobmV4dGxlbiA9PT0gMCkge1xuICAgICAgbWF4X2NvdW50ID0gMTM4O1xuICAgICAgbWluX2NvdW50ID0gMztcblxuICAgIH0gZWxzZSBpZiAoY3VybGVuID09PSBuZXh0bGVuKSB7XG4gICAgICBtYXhfY291bnQgPSA2O1xuICAgICAgbWluX2NvdW50ID0gMztcblxuICAgIH0gZWxzZSB7XG4gICAgICBtYXhfY291bnQgPSA3O1xuICAgICAgbWluX2NvdW50ID0gNDtcbiAgICB9XG4gIH1cbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENvbnN0cnVjdCB0aGUgSHVmZm1hbiB0cmVlIGZvciB0aGUgYml0IGxlbmd0aHMgYW5kIHJldHVybiB0aGUgaW5kZXggaW5cbiAqIGJsX29yZGVyIG9mIHRoZSBsYXN0IGJpdCBsZW5ndGggY29kZSB0byBzZW5kLlxuICovXG5mdW5jdGlvbiBidWlsZF9ibF90cmVlKHMpIHtcbiAgdmFyIG1heF9ibGluZGV4OyAgLyogaW5kZXggb2YgbGFzdCBiaXQgbGVuZ3RoIGNvZGUgb2Ygbm9uIHplcm8gZnJlcSAqL1xuXG4gIC8qIERldGVybWluZSB0aGUgYml0IGxlbmd0aCBmcmVxdWVuY2llcyBmb3IgbGl0ZXJhbCBhbmQgZGlzdGFuY2UgdHJlZXMgKi9cbiAgc2Nhbl90cmVlKHMsIHMuZHluX2x0cmVlLCBzLmxfZGVzYy5tYXhfY29kZSk7XG4gIHNjYW5fdHJlZShzLCBzLmR5bl9kdHJlZSwgcy5kX2Rlc2MubWF4X2NvZGUpO1xuXG4gIC8qIEJ1aWxkIHRoZSBiaXQgbGVuZ3RoIHRyZWU6ICovXG4gIGJ1aWxkX3RyZWUocywgcy5ibF9kZXNjKTtcbiAgLyogb3B0X2xlbiBub3cgaW5jbHVkZXMgdGhlIGxlbmd0aCBvZiB0aGUgdHJlZSByZXByZXNlbnRhdGlvbnMsIGV4Y2VwdFxuICAgKiB0aGUgbGVuZ3RocyBvZiB0aGUgYml0IGxlbmd0aHMgY29kZXMgYW5kIHRoZSA1KzUrNCBiaXRzIGZvciB0aGUgY291bnRzLlxuICAgKi9cblxuICAvKiBEZXRlcm1pbmUgdGhlIG51bWJlciBvZiBiaXQgbGVuZ3RoIGNvZGVzIHRvIHNlbmQuIFRoZSBwa3ppcCBmb3JtYXRcbiAgICogcmVxdWlyZXMgdGhhdCBhdCBsZWFzdCA0IGJpdCBsZW5ndGggY29kZXMgYmUgc2VudC4gKGFwcG5vdGUudHh0IHNheXNcbiAgICogMyBidXQgdGhlIGFjdHVhbCB2YWx1ZSB1c2VkIGlzIDQuKVxuICAgKi9cbiAgZm9yIChtYXhfYmxpbmRleCA9IEJMX0NPREVTIC0gMTsgbWF4X2JsaW5kZXggPj0gMzsgbWF4X2JsaW5kZXgtLSkge1xuICAgIGlmIChzLmJsX3RyZWVbYmxfb3JkZXJbbWF4X2JsaW5kZXhdICogMiArIDFdLyouTGVuKi8gIT09IDApIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICAvKiBVcGRhdGUgb3B0X2xlbiB0byBpbmNsdWRlIHRoZSBiaXQgbGVuZ3RoIHRyZWUgYW5kIGNvdW50cyAqL1xuICBzLm9wdF9sZW4gKz0gMyAqIChtYXhfYmxpbmRleCArIDEpICsgNSArIDUgKyA0O1xuICAvL1RyYWNldigoc3RkZXJyLCBcIlxcbmR5biB0cmVlczogZHluICVsZCwgc3RhdCAlbGRcIixcbiAgLy8gICAgICAgIHMtPm9wdF9sZW4sIHMtPnN0YXRpY19sZW4pKTtcblxuICByZXR1cm4gbWF4X2JsaW5kZXg7XG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBTZW5kIHRoZSBoZWFkZXIgZm9yIGEgYmxvY2sgdXNpbmcgZHluYW1pYyBIdWZmbWFuIHRyZWVzOiB0aGUgY291bnRzLCB0aGVcbiAqIGxlbmd0aHMgb2YgdGhlIGJpdCBsZW5ndGggY29kZXMsIHRoZSBsaXRlcmFsIHRyZWUgYW5kIHRoZSBkaXN0YW5jZSB0cmVlLlxuICogSU4gYXNzZXJ0aW9uOiBsY29kZXMgPj0gMjU3LCBkY29kZXMgPj0gMSwgYmxjb2RlcyA+PSA0LlxuICovXG5mdW5jdGlvbiBzZW5kX2FsbF90cmVlcyhzLCBsY29kZXMsIGRjb2RlcywgYmxjb2Rlcylcbi8vICAgIGRlZmxhdGVfc3RhdGUgKnM7XG4vLyAgICBpbnQgbGNvZGVzLCBkY29kZXMsIGJsY29kZXM7IC8qIG51bWJlciBvZiBjb2RlcyBmb3IgZWFjaCB0cmVlICovXG57XG4gIHZhciByYW5rOyAgICAgICAgICAgICAgICAgICAgLyogaW5kZXggaW4gYmxfb3JkZXIgKi9cblxuICAvL0Fzc2VydCAobGNvZGVzID49IDI1NyAmJiBkY29kZXMgPj0gMSAmJiBibGNvZGVzID49IDQsIFwibm90IGVub3VnaCBjb2Rlc1wiKTtcbiAgLy9Bc3NlcnQgKGxjb2RlcyA8PSBMX0NPREVTICYmIGRjb2RlcyA8PSBEX0NPREVTICYmIGJsY29kZXMgPD0gQkxfQ09ERVMsXG4gIC8vICAgICAgICBcInRvbyBtYW55IGNvZGVzXCIpO1xuICAvL1RyYWNldigoc3RkZXJyLCBcIlxcbmJsIGNvdW50czogXCIpKTtcbiAgc2VuZF9iaXRzKHMsIGxjb2RlcyAtIDI1NywgNSk7IC8qIG5vdCArMjU1IGFzIHN0YXRlZCBpbiBhcHBub3RlLnR4dCAqL1xuICBzZW5kX2JpdHMocywgZGNvZGVzIC0gMSwgICA1KTtcbiAgc2VuZF9iaXRzKHMsIGJsY29kZXMgLSA0LCAgNCk7IC8qIG5vdCAtMyBhcyBzdGF0ZWQgaW4gYXBwbm90ZS50eHQgKi9cbiAgZm9yIChyYW5rID0gMDsgcmFuayA8IGJsY29kZXM7IHJhbmsrKykge1xuICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiXFxuYmwgY29kZSAlMmQgXCIsIGJsX29yZGVyW3JhbmtdKSk7XG4gICAgc2VuZF9iaXRzKHMsIHMuYmxfdHJlZVtibF9vcmRlcltyYW5rXSAqIDIgKyAxXS8qLkxlbiovLCAzKTtcbiAgfVxuICAvL1RyYWNldigoc3RkZXJyLCBcIlxcbmJsIHRyZWU6IHNlbnQgJWxkXCIsIHMtPmJpdHNfc2VudCkpO1xuXG4gIHNlbmRfdHJlZShzLCBzLmR5bl9sdHJlZSwgbGNvZGVzIC0gMSk7IC8qIGxpdGVyYWwgdHJlZSAqL1xuICAvL1RyYWNldigoc3RkZXJyLCBcIlxcbmxpdCB0cmVlOiBzZW50ICVsZFwiLCBzLT5iaXRzX3NlbnQpKTtcblxuICBzZW5kX3RyZWUocywgcy5keW5fZHRyZWUsIGRjb2RlcyAtIDEpOyAvKiBkaXN0YW5jZSB0cmVlICovXG4gIC8vVHJhY2V2KChzdGRlcnIsIFwiXFxuZGlzdCB0cmVlOiBzZW50ICVsZFwiLCBzLT5iaXRzX3NlbnQpKTtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIENoZWNrIGlmIHRoZSBkYXRhIHR5cGUgaXMgVEVYVCBvciBCSU5BUlksIHVzaW5nIHRoZSBmb2xsb3dpbmcgYWxnb3JpdGhtOlxuICogLSBURVhUIGlmIHRoZSB0d28gY29uZGl0aW9ucyBiZWxvdyBhcmUgc2F0aXNmaWVkOlxuICogICAgYSkgVGhlcmUgYXJlIG5vIG5vbi1wb3J0YWJsZSBjb250cm9sIGNoYXJhY3RlcnMgYmVsb25naW5nIHRvIHRoZVxuICogICAgICAgXCJibGFjayBsaXN0XCIgKDAuLjYsIDE0Li4yNSwgMjguLjMxKS5cbiAqICAgIGIpIFRoZXJlIGlzIGF0IGxlYXN0IG9uZSBwcmludGFibGUgY2hhcmFjdGVyIGJlbG9uZ2luZyB0byB0aGVcbiAqICAgICAgIFwid2hpdGUgbGlzdFwiICg5IHtUQUJ9LCAxMCB7TEZ9LCAxMyB7Q1J9LCAzMi4uMjU1KS5cbiAqIC0gQklOQVJZIG90aGVyd2lzZS5cbiAqIC0gVGhlIGZvbGxvd2luZyBwYXJ0aWFsbHktcG9ydGFibGUgY29udHJvbCBjaGFyYWN0ZXJzIGZvcm0gYVxuICogICBcImdyYXkgbGlzdFwiIHRoYXQgaXMgaWdub3JlZCBpbiB0aGlzIGRldGVjdGlvbiBhbGdvcml0aG06XG4gKiAgICg3IHtCRUx9LCA4IHtCU30sIDExIHtWVH0sIDEyIHtGRn0sIDI2IHtTVUJ9LCAyNyB7RVNDfSkuXG4gKiBJTiBhc3NlcnRpb246IHRoZSBmaWVsZHMgRnJlcSBvZiBkeW5fbHRyZWUgYXJlIHNldC5cbiAqL1xuZnVuY3Rpb24gZGV0ZWN0X2RhdGFfdHlwZShzKSB7XG4gIC8qIGJsYWNrX21hc2sgaXMgdGhlIGJpdCBtYXNrIG9mIGJsYWNrLWxpc3RlZCBieXRlc1xuICAgKiBzZXQgYml0cyAwLi42LCAxNC4uMjUsIGFuZCAyOC4uMzFcbiAgICogMHhmM2ZmYzA3ZiA9IGJpbmFyeSAxMTExMDAxMTExMTExMTExMTEwMDAwMDAwMTExMTExMVxuICAgKi9cbiAgdmFyIGJsYWNrX21hc2sgPSAweGYzZmZjMDdmO1xuICB2YXIgbjtcblxuICAvKiBDaGVjayBmb3Igbm9uLXRleHR1YWwgKFwiYmxhY2stbGlzdGVkXCIpIGJ5dGVzLiAqL1xuICBmb3IgKG4gPSAwOyBuIDw9IDMxOyBuKyssIGJsYWNrX21hc2sgPj4+PSAxKSB7XG4gICAgaWYgKChibGFja19tYXNrICYgMSkgJiYgKHMuZHluX2x0cmVlW24gKiAyXS8qLkZyZXEqLyAhPT0gMCkpIHtcbiAgICAgIHJldHVybiBaX0JJTkFSWTtcbiAgICB9XG4gIH1cblxuICAvKiBDaGVjayBmb3IgdGV4dHVhbCAoXCJ3aGl0ZS1saXN0ZWRcIikgYnl0ZXMuICovXG4gIGlmIChzLmR5bl9sdHJlZVs5ICogMl0vKi5GcmVxKi8gIT09IDAgfHwgcy5keW5fbHRyZWVbMTAgKiAyXS8qLkZyZXEqLyAhPT0gMCB8fFxuICAgICAgcy5keW5fbHRyZWVbMTMgKiAyXS8qLkZyZXEqLyAhPT0gMCkge1xuICAgIHJldHVybiBaX1RFWFQ7XG4gIH1cbiAgZm9yIChuID0gMzI7IG4gPCBMSVRFUkFMUzsgbisrKSB7XG4gICAgaWYgKHMuZHluX2x0cmVlW24gKiAyXS8qLkZyZXEqLyAhPT0gMCkge1xuICAgICAgcmV0dXJuIFpfVEVYVDtcbiAgICB9XG4gIH1cblxuICAvKiBUaGVyZSBhcmUgbm8gXCJibGFjay1saXN0ZWRcIiBvciBcIndoaXRlLWxpc3RlZFwiIGJ5dGVzOlxuICAgKiB0aGlzIHN0cmVhbSBlaXRoZXIgaXMgZW1wdHkgb3IgaGFzIHRvbGVyYXRlZCAoXCJncmF5LWxpc3RlZFwiKSBieXRlcyBvbmx5LlxuICAgKi9cbiAgcmV0dXJuIFpfQklOQVJZO1xufVxuXG5cbnZhciBzdGF0aWNfaW5pdF9kb25lID0gZmFsc2U7XG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogSW5pdGlhbGl6ZSB0aGUgdHJlZSBkYXRhIHN0cnVjdHVyZXMgZm9yIGEgbmV3IHpsaWIgc3RyZWFtLlxuICovXG5mdW5jdGlvbiBfdHJfaW5pdChzKVxue1xuXG4gIGlmICghc3RhdGljX2luaXRfZG9uZSkge1xuICAgIHRyX3N0YXRpY19pbml0KCk7XG4gICAgc3RhdGljX2luaXRfZG9uZSA9IHRydWU7XG4gIH1cblxuICBzLmxfZGVzYyAgPSBuZXcgVHJlZURlc2Mocy5keW5fbHRyZWUsIHN0YXRpY19sX2Rlc2MpO1xuICBzLmRfZGVzYyAgPSBuZXcgVHJlZURlc2Mocy5keW5fZHRyZWUsIHN0YXRpY19kX2Rlc2MpO1xuICBzLmJsX2Rlc2MgPSBuZXcgVHJlZURlc2Mocy5ibF90cmVlLCBzdGF0aWNfYmxfZGVzYyk7XG5cbiAgcy5iaV9idWYgPSAwO1xuICBzLmJpX3ZhbGlkID0gMDtcblxuICAvKiBJbml0aWFsaXplIHRoZSBmaXJzdCBibG9jayBvZiB0aGUgZmlyc3QgZmlsZTogKi9cbiAgaW5pdF9ibG9jayhzKTtcbn1cblxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFNlbmQgYSBzdG9yZWQgYmxvY2tcbiAqL1xuZnVuY3Rpb24gX3RyX3N0b3JlZF9ibG9jayhzLCBidWYsIHN0b3JlZF9sZW4sIGxhc3QpXG4vL0RlZmxhdGVTdGF0ZSAqcztcbi8vY2hhcmYgKmJ1ZjsgICAgICAgLyogaW5wdXQgYmxvY2sgKi9cbi8vdWxnIHN0b3JlZF9sZW47ICAgLyogbGVuZ3RoIG9mIGlucHV0IGJsb2NrICovXG4vL2ludCBsYXN0OyAgICAgICAgIC8qIG9uZSBpZiB0aGlzIGlzIHRoZSBsYXN0IGJsb2NrIGZvciBhIGZpbGUgKi9cbntcbiAgc2VuZF9iaXRzKHMsIChTVE9SRURfQkxPQ0sgPDwgMSkgKyAobGFzdCA/IDEgOiAwKSwgMyk7ICAgIC8qIHNlbmQgYmxvY2sgdHlwZSAqL1xuICBjb3B5X2Jsb2NrKHMsIGJ1Ziwgc3RvcmVkX2xlbiwgdHJ1ZSk7IC8qIHdpdGggaGVhZGVyICovXG59XG5cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gKiBTZW5kIG9uZSBlbXB0eSBzdGF0aWMgYmxvY2sgdG8gZ2l2ZSBlbm91Z2ggbG9va2FoZWFkIGZvciBpbmZsYXRlLlxuICogVGhpcyB0YWtlcyAxMCBiaXRzLCBvZiB3aGljaCA3IG1heSByZW1haW4gaW4gdGhlIGJpdCBidWZmZXIuXG4gKi9cbmZ1bmN0aW9uIF90cl9hbGlnbihzKSB7XG4gIHNlbmRfYml0cyhzLCBTVEFUSUNfVFJFRVMgPDwgMSwgMyk7XG4gIHNlbmRfY29kZShzLCBFTkRfQkxPQ0ssIHN0YXRpY19sdHJlZSk7XG4gIGJpX2ZsdXNoKHMpO1xufVxuXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICogRGV0ZXJtaW5lIHRoZSBiZXN0IGVuY29kaW5nIGZvciB0aGUgY3VycmVudCBibG9jazogZHluYW1pYyB0cmVlcywgc3RhdGljXG4gKiB0cmVlcyBvciBzdG9yZSwgYW5kIG91dHB1dCB0aGUgZW5jb2RlZCBibG9jayB0byB0aGUgemlwIGZpbGUuXG4gKi9cbmZ1bmN0aW9uIF90cl9mbHVzaF9ibG9jayhzLCBidWYsIHN0b3JlZF9sZW4sIGxhc3QpXG4vL0RlZmxhdGVTdGF0ZSAqcztcbi8vY2hhcmYgKmJ1ZjsgICAgICAgLyogaW5wdXQgYmxvY2ssIG9yIE5VTEwgaWYgdG9vIG9sZCAqL1xuLy91bGcgc3RvcmVkX2xlbjsgICAvKiBsZW5ndGggb2YgaW5wdXQgYmxvY2sgKi9cbi8vaW50IGxhc3Q7ICAgICAgICAgLyogb25lIGlmIHRoaXMgaXMgdGhlIGxhc3QgYmxvY2sgZm9yIGEgZmlsZSAqL1xue1xuICB2YXIgb3B0X2xlbmIsIHN0YXRpY19sZW5iOyAgLyogb3B0X2xlbiBhbmQgc3RhdGljX2xlbiBpbiBieXRlcyAqL1xuICB2YXIgbWF4X2JsaW5kZXggPSAwOyAgICAgICAgLyogaW5kZXggb2YgbGFzdCBiaXQgbGVuZ3RoIGNvZGUgb2Ygbm9uIHplcm8gZnJlcSAqL1xuXG4gIC8qIEJ1aWxkIHRoZSBIdWZmbWFuIHRyZWVzIHVubGVzcyBhIHN0b3JlZCBibG9jayBpcyBmb3JjZWQgKi9cbiAgaWYgKHMubGV2ZWwgPiAwKSB7XG5cbiAgICAvKiBDaGVjayBpZiB0aGUgZmlsZSBpcyBiaW5hcnkgb3IgdGV4dCAqL1xuICAgIGlmIChzLnN0cm0uZGF0YV90eXBlID09PSBaX1VOS05PV04pIHtcbiAgICAgIHMuc3RybS5kYXRhX3R5cGUgPSBkZXRlY3RfZGF0YV90eXBlKHMpO1xuICAgIH1cblxuICAgIC8qIENvbnN0cnVjdCB0aGUgbGl0ZXJhbCBhbmQgZGlzdGFuY2UgdHJlZXMgKi9cbiAgICBidWlsZF90cmVlKHMsIHMubF9kZXNjKTtcbiAgICAvLyBUcmFjZXYoKHN0ZGVyciwgXCJcXG5saXQgZGF0YTogZHluICVsZCwgc3RhdCAlbGRcIiwgcy0+b3B0X2xlbixcbiAgICAvLyAgICAgICAgcy0+c3RhdGljX2xlbikpO1xuXG4gICAgYnVpbGRfdHJlZShzLCBzLmRfZGVzYyk7XG4gICAgLy8gVHJhY2V2KChzdGRlcnIsIFwiXFxuZGlzdCBkYXRhOiBkeW4gJWxkLCBzdGF0ICVsZFwiLCBzLT5vcHRfbGVuLFxuICAgIC8vICAgICAgICBzLT5zdGF0aWNfbGVuKSk7XG4gICAgLyogQXQgdGhpcyBwb2ludCwgb3B0X2xlbiBhbmQgc3RhdGljX2xlbiBhcmUgdGhlIHRvdGFsIGJpdCBsZW5ndGhzIG9mXG4gICAgICogdGhlIGNvbXByZXNzZWQgYmxvY2sgZGF0YSwgZXhjbHVkaW5nIHRoZSB0cmVlIHJlcHJlc2VudGF0aW9ucy5cbiAgICAgKi9cblxuICAgIC8qIEJ1aWxkIHRoZSBiaXQgbGVuZ3RoIHRyZWUgZm9yIHRoZSBhYm92ZSB0d28gdHJlZXMsIGFuZCBnZXQgdGhlIGluZGV4XG4gICAgICogaW4gYmxfb3JkZXIgb2YgdGhlIGxhc3QgYml0IGxlbmd0aCBjb2RlIHRvIHNlbmQuXG4gICAgICovXG4gICAgbWF4X2JsaW5kZXggPSBidWlsZF9ibF90cmVlKHMpO1xuXG4gICAgLyogRGV0ZXJtaW5lIHRoZSBiZXN0IGVuY29kaW5nLiBDb21wdXRlIHRoZSBibG9jayBsZW5ndGhzIGluIGJ5dGVzLiAqL1xuICAgIG9wdF9sZW5iID0gKHMub3B0X2xlbiArIDMgKyA3KSA+Pj4gMztcbiAgICBzdGF0aWNfbGVuYiA9IChzLnN0YXRpY19sZW4gKyAzICsgNykgPj4+IDM7XG5cbiAgICAvLyBUcmFjZXYoKHN0ZGVyciwgXCJcXG5vcHQgJWx1KCVsdSkgc3RhdCAlbHUoJWx1KSBzdG9yZWQgJWx1IGxpdCAldSBcIixcbiAgICAvLyAgICAgICAgb3B0X2xlbmIsIHMtPm9wdF9sZW4sIHN0YXRpY19sZW5iLCBzLT5zdGF0aWNfbGVuLCBzdG9yZWRfbGVuLFxuICAgIC8vICAgICAgICBzLT5sYXN0X2xpdCkpO1xuXG4gICAgaWYgKHN0YXRpY19sZW5iIDw9IG9wdF9sZW5iKSB7IG9wdF9sZW5iID0gc3RhdGljX2xlbmI7IH1cblxuICB9IGVsc2Uge1xuICAgIC8vIEFzc2VydChidWYgIT0gKGNoYXIqKTAsIFwibG9zdCBidWZcIik7XG4gICAgb3B0X2xlbmIgPSBzdGF0aWNfbGVuYiA9IHN0b3JlZF9sZW4gKyA1OyAvKiBmb3JjZSBhIHN0b3JlZCBibG9jayAqL1xuICB9XG5cbiAgaWYgKChzdG9yZWRfbGVuICsgNCA8PSBvcHRfbGVuYikgJiYgKGJ1ZiAhPT0gLTEpKSB7XG4gICAgLyogNDogdHdvIHdvcmRzIGZvciB0aGUgbGVuZ3RocyAqL1xuXG4gICAgLyogVGhlIHRlc3QgYnVmICE9IE5VTEwgaXMgb25seSBuZWNlc3NhcnkgaWYgTElUX0JVRlNJWkUgPiBXU0laRS5cbiAgICAgKiBPdGhlcndpc2Ugd2UgY2FuJ3QgaGF2ZSBwcm9jZXNzZWQgbW9yZSB0aGFuIFdTSVpFIGlucHV0IGJ5dGVzIHNpbmNlXG4gICAgICogdGhlIGxhc3QgYmxvY2sgZmx1c2gsIGJlY2F1c2UgY29tcHJlc3Npb24gd291bGQgaGF2ZSBiZWVuXG4gICAgICogc3VjY2Vzc2Z1bC4gSWYgTElUX0JVRlNJWkUgPD0gV1NJWkUsIGl0IGlzIG5ldmVyIHRvbyBsYXRlIHRvXG4gICAgICogdHJhbnNmb3JtIGEgYmxvY2sgaW50byBhIHN0b3JlZCBibG9jay5cbiAgICAgKi9cbiAgICBfdHJfc3RvcmVkX2Jsb2NrKHMsIGJ1Ziwgc3RvcmVkX2xlbiwgbGFzdCk7XG5cbiAgfSBlbHNlIGlmIChzLnN0cmF0ZWd5ID09PSBaX0ZJWEVEIHx8IHN0YXRpY19sZW5iID09PSBvcHRfbGVuYikge1xuXG4gICAgc2VuZF9iaXRzKHMsIChTVEFUSUNfVFJFRVMgPDwgMSkgKyAobGFzdCA/IDEgOiAwKSwgMyk7XG4gICAgY29tcHJlc3NfYmxvY2socywgc3RhdGljX2x0cmVlLCBzdGF0aWNfZHRyZWUpO1xuXG4gIH0gZWxzZSB7XG4gICAgc2VuZF9iaXRzKHMsIChEWU5fVFJFRVMgPDwgMSkgKyAobGFzdCA/IDEgOiAwKSwgMyk7XG4gICAgc2VuZF9hbGxfdHJlZXMocywgcy5sX2Rlc2MubWF4X2NvZGUgKyAxLCBzLmRfZGVzYy5tYXhfY29kZSArIDEsIG1heF9ibGluZGV4ICsgMSk7XG4gICAgY29tcHJlc3NfYmxvY2socywgcy5keW5fbHRyZWUsIHMuZHluX2R0cmVlKTtcbiAgfVxuICAvLyBBc3NlcnQgKHMtPmNvbXByZXNzZWRfbGVuID09IHMtPmJpdHNfc2VudCwgXCJiYWQgY29tcHJlc3NlZCBzaXplXCIpO1xuICAvKiBUaGUgYWJvdmUgY2hlY2sgaXMgbWFkZSBtb2QgMl4zMiwgZm9yIGZpbGVzIGxhcmdlciB0aGFuIDUxMiBNQlxuICAgKiBhbmQgdUxvbmcgaW1wbGVtZW50ZWQgb24gMzIgYml0cy5cbiAgICovXG4gIGluaXRfYmxvY2socyk7XG5cbiAgaWYgKGxhc3QpIHtcbiAgICBiaV93aW5kdXAocyk7XG4gIH1cbiAgLy8gVHJhY2V2KChzdGRlcnIsXCJcXG5jb21wcmxlbiAlbHUoJWx1KSBcIiwgcy0+Y29tcHJlc3NlZF9sZW4+PjMsXG4gIC8vICAgICAgIHMtPmNvbXByZXNzZWRfbGVuLTcqbGFzdCkpO1xufVxuXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqIFNhdmUgdGhlIG1hdGNoIGluZm8gYW5kIHRhbGx5IHRoZSBmcmVxdWVuY3kgY291bnRzLiBSZXR1cm4gdHJ1ZSBpZlxuICogdGhlIGN1cnJlbnQgYmxvY2sgbXVzdCBiZSBmbHVzaGVkLlxuICovXG5mdW5jdGlvbiBfdHJfdGFsbHkocywgZGlzdCwgbGMpXG4vLyAgICBkZWZsYXRlX3N0YXRlICpzO1xuLy8gICAgdW5zaWduZWQgZGlzdDsgIC8qIGRpc3RhbmNlIG9mIG1hdGNoZWQgc3RyaW5nICovXG4vLyAgICB1bnNpZ25lZCBsYzsgICAgLyogbWF0Y2ggbGVuZ3RoLU1JTl9NQVRDSCBvciB1bm1hdGNoZWQgY2hhciAoaWYgZGlzdD09MCkgKi9cbntcbiAgLy92YXIgb3V0X2xlbmd0aCwgaW5fbGVuZ3RoLCBkY29kZTtcblxuICBzLnBlbmRpbmdfYnVmW3MuZF9idWYgKyBzLmxhc3RfbGl0ICogMl0gICAgID0gKGRpc3QgPj4+IDgpICYgMHhmZjtcbiAgcy5wZW5kaW5nX2J1ZltzLmRfYnVmICsgcy5sYXN0X2xpdCAqIDIgKyAxXSA9IGRpc3QgJiAweGZmO1xuXG4gIHMucGVuZGluZ19idWZbcy5sX2J1ZiArIHMubGFzdF9saXRdID0gbGMgJiAweGZmO1xuICBzLmxhc3RfbGl0Kys7XG5cbiAgaWYgKGRpc3QgPT09IDApIHtcbiAgICAvKiBsYyBpcyB0aGUgdW5tYXRjaGVkIGNoYXIgKi9cbiAgICBzLmR5bl9sdHJlZVtsYyAqIDJdLyouRnJlcSovKys7XG4gIH0gZWxzZSB7XG4gICAgcy5tYXRjaGVzKys7XG4gICAgLyogSGVyZSwgbGMgaXMgdGhlIG1hdGNoIGxlbmd0aCAtIE1JTl9NQVRDSCAqL1xuICAgIGRpc3QtLTsgICAgICAgICAgICAgLyogZGlzdCA9IG1hdGNoIGRpc3RhbmNlIC0gMSAqL1xuICAgIC8vQXNzZXJ0KCh1c2gpZGlzdCA8ICh1c2gpTUFYX0RJU1QocykgJiZcbiAgICAvLyAgICAgICAodXNoKWxjIDw9ICh1c2gpKE1BWF9NQVRDSC1NSU5fTUFUQ0gpICYmXG4gICAgLy8gICAgICAgKHVzaClkX2NvZGUoZGlzdCkgPCAodXNoKURfQ09ERVMsICBcIl90cl90YWxseTogYmFkIG1hdGNoXCIpO1xuXG4gICAgcy5keW5fbHRyZWVbKF9sZW5ndGhfY29kZVtsY10gKyBMSVRFUkFMUyArIDEpICogMl0vKi5GcmVxKi8rKztcbiAgICBzLmR5bl9kdHJlZVtkX2NvZGUoZGlzdCkgKiAyXS8qLkZyZXEqLysrO1xuICB9XG5cbi8vICghKSBUaGlzIGJsb2NrIGlzIGRpc2FibGVkIGluIHpsaWIgZGVmYXVsdHMsXG4vLyBkb24ndCBlbmFibGUgaXQgZm9yIGJpbmFyeSBjb21wYXRpYmlsaXR5XG5cbi8vI2lmZGVmIFRSVU5DQVRFX0JMT0NLXG4vLyAgLyogVHJ5IHRvIGd1ZXNzIGlmIGl0IGlzIHByb2ZpdGFibGUgdG8gc3RvcCB0aGUgY3VycmVudCBibG9jayBoZXJlICovXG4vLyAgaWYgKChzLmxhc3RfbGl0ICYgMHgxZmZmKSA9PT0gMCAmJiBzLmxldmVsID4gMikge1xuLy8gICAgLyogQ29tcHV0ZSBhbiB1cHBlciBib3VuZCBmb3IgdGhlIGNvbXByZXNzZWQgbGVuZ3RoICovXG4vLyAgICBvdXRfbGVuZ3RoID0gcy5sYXN0X2xpdCo4O1xuLy8gICAgaW5fbGVuZ3RoID0gcy5zdHJzdGFydCAtIHMuYmxvY2tfc3RhcnQ7XG4vL1xuLy8gICAgZm9yIChkY29kZSA9IDA7IGRjb2RlIDwgRF9DT0RFUzsgZGNvZGUrKykge1xuLy8gICAgICBvdXRfbGVuZ3RoICs9IHMuZHluX2R0cmVlW2Rjb2RlKjJdLyouRnJlcSovICogKDUgKyBleHRyYV9kYml0c1tkY29kZV0pO1xuLy8gICAgfVxuLy8gICAgb3V0X2xlbmd0aCA+Pj49IDM7XG4vLyAgICAvL1RyYWNldigoc3RkZXJyLFwiXFxubGFzdF9saXQgJXUsIGluICVsZCwgb3V0IH4lbGQoJWxkJSUpIFwiLFxuLy8gICAgLy8gICAgICAgcy0+bGFzdF9saXQsIGluX2xlbmd0aCwgb3V0X2xlbmd0aCxcbi8vICAgIC8vICAgICAgIDEwMEwgLSBvdXRfbGVuZ3RoKjEwMEwvaW5fbGVuZ3RoKSk7XG4vLyAgICBpZiAocy5tYXRjaGVzIDwgKHMubGFzdF9saXQ+PjEpLyppbnQgLzIqLyAmJiBvdXRfbGVuZ3RoIDwgKGluX2xlbmd0aD4+MSkvKmludCAvMiovKSB7XG4vLyAgICAgIHJldHVybiB0cnVlO1xuLy8gICAgfVxuLy8gIH1cbi8vI2VuZGlmXG5cbiAgcmV0dXJuIChzLmxhc3RfbGl0ID09PSBzLmxpdF9idWZzaXplIC0gMSk7XG4gIC8qIFdlIGF2b2lkIGVxdWFsaXR5IHdpdGggbGl0X2J1ZnNpemUgYmVjYXVzZSBvZiB3cmFwYXJvdW5kIGF0IDY0S1xuICAgKiBvbiAxNiBiaXQgbWFjaGluZXMgYW5kIGJlY2F1c2Ugc3RvcmVkIGJsb2NrcyBhcmUgcmVzdHJpY3RlZCB0b1xuICAgKiA2NEstMSBieXRlcy5cbiAgICovXG59XG5cbmV4cG9ydHMuX3RyX2luaXQgID0gX3RyX2luaXQ7XG5leHBvcnRzLl90cl9zdG9yZWRfYmxvY2sgPSBfdHJfc3RvcmVkX2Jsb2NrO1xuZXhwb3J0cy5fdHJfZmx1c2hfYmxvY2sgID0gX3RyX2ZsdXNoX2Jsb2NrO1xuZXhwb3J0cy5fdHJfdGFsbHkgPSBfdHJfdGFsbHk7XG5leHBvcnRzLl90cl9hbGlnbiA9IF90cl9hbGlnbjtcblxuXG4vKioqLyB9KSxcbi8qIDEzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cblxudmFyIHpsaWJfaW5mbGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xudmFyIHV0aWxzICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG52YXIgc3RyaW5ncyAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcbnZhciBjICAgICAgICAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpO1xudmFyIG1zZyAgICAgICAgICA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG52YXIgWlN0cmVhbSAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcbnZhciBHWmhlYWRlciAgICAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblxudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqXG4gKiBjbGFzcyBJbmZsYXRlXG4gKlxuICogR2VuZXJpYyBKUy1zdHlsZSB3cmFwcGVyIGZvciB6bGliIGNhbGxzLiBJZiB5b3UgZG9uJ3QgbmVlZFxuICogc3RyZWFtaW5nIGJlaGF2aW91ciAtIHVzZSBtb3JlIHNpbXBsZSBmdW5jdGlvbnM6IFtbaW5mbGF0ZV1dXG4gKiBhbmQgW1tpbmZsYXRlUmF3XV0uXG4gKiovXG5cbi8qIGludGVybmFsXG4gKiBpbmZsYXRlLmNodW5rcyAtPiBBcnJheVxuICpcbiAqIENodW5rcyBvZiBvdXRwdXQgZGF0YSwgaWYgW1tJbmZsYXRlI29uRGF0YV1dIG5vdCBvdmVycmlkZGVuLlxuICoqL1xuXG4vKipcbiAqIEluZmxhdGUucmVzdWx0IC0+IFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nXG4gKlxuICogVW5jb21wcmVzc2VkIHJlc3VsdCwgZ2VuZXJhdGVkIGJ5IGRlZmF1bHQgW1tJbmZsYXRlI29uRGF0YV1dXG4gKiBhbmQgW1tJbmZsYXRlI29uRW5kXV0gaGFuZGxlcnMuIEZpbGxlZCBhZnRlciB5b3UgcHVzaCBsYXN0IGNodW5rXG4gKiAoY2FsbCBbW0luZmxhdGUjcHVzaF1dIHdpdGggYFpfRklOSVNIYCAvIGB0cnVlYCBwYXJhbSkgb3IgaWYgeW91XG4gKiBwdXNoIGEgY2h1bmsgd2l0aCBleHBsaWNpdCBmbHVzaCAoY2FsbCBbW0luZmxhdGUjcHVzaF1dIHdpdGhcbiAqIGBaX1NZTkNfRkxVU0hgIHBhcmFtKS5cbiAqKi9cblxuLyoqXG4gKiBJbmZsYXRlLmVyciAtPiBOdW1iZXJcbiAqXG4gKiBFcnJvciBjb2RlIGFmdGVyIGluZmxhdGUgZmluaXNoZWQuIDAgKFpfT0spIG9uIHN1Y2Nlc3MuXG4gKiBTaG91bGQgYmUgY2hlY2tlZCBpZiBicm9rZW4gZGF0YSBwb3NzaWJsZS5cbiAqKi9cblxuLyoqXG4gKiBJbmZsYXRlLm1zZyAtPiBTdHJpbmdcbiAqXG4gKiBFcnJvciBtZXNzYWdlLCBpZiBbW0luZmxhdGUuZXJyXV0gIT0gMFxuICoqL1xuXG5cbi8qKlxuICogbmV3IEluZmxhdGUob3B0aW9ucylcbiAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBpbmZsYXRlIG9wdGlvbnMuXG4gKlxuICogQ3JlYXRlcyBuZXcgaW5mbGF0b3IgaW5zdGFuY2Ugd2l0aCBzcGVjaWZpZWQgcGFyYW1zLiBUaHJvd3MgZXhjZXB0aW9uXG4gKiBvbiBiYWQgcGFyYW1zLiBTdXBwb3J0ZWQgb3B0aW9uczpcbiAqXG4gKiAtIGB3aW5kb3dCaXRzYFxuICogLSBgZGljdGlvbmFyeWBcbiAqXG4gKiBbaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkXShodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWQpXG4gKiBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiB0aGVzZS5cbiAqXG4gKiBBZGRpdGlvbmFsIG9wdGlvbnMsIGZvciBpbnRlcm5hbCBuZWVkczpcbiAqXG4gKiAtIGBjaHVua1NpemVgIC0gc2l6ZSBvZiBnZW5lcmF0ZWQgZGF0YSBjaHVua3MgKDE2SyBieSBkZWZhdWx0KVxuICogLSBgcmF3YCAoQm9vbGVhbikgLSBkbyByYXcgaW5mbGF0ZVxuICogLSBgdG9gIChTdHJpbmcpIC0gaWYgZXF1YWwgdG8gJ3N0cmluZycsIHRoZW4gcmVzdWx0IHdpbGwgYmUgY29udmVydGVkXG4gKiAgIGZyb20gdXRmOCB0byB1dGYxNiAoamF2YXNjcmlwdCkgc3RyaW5nLiBXaGVuIHN0cmluZyBvdXRwdXQgcmVxdWVzdGVkLFxuICogICBjaHVuayBsZW5ndGggY2FuIGRpZmZlciBmcm9tIGBjaHVua1NpemVgLCBkZXBlbmRpbmcgb24gY29udGVudC5cbiAqXG4gKiBCeSBkZWZhdWx0LCB3aGVuIG5vIG9wdGlvbnMgc2V0LCBhdXRvZGV0ZWN0IGRlZmxhdGUvZ3ppcCBkYXRhIGZvcm1hdCB2aWFcbiAqIHdyYXBwZXIgaGVhZGVyLlxuICpcbiAqICMjIyMjIEV4YW1wbGU6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogdmFyIHBha28gPSByZXF1aXJlKCdwYWtvJylcbiAqICAgLCBjaHVuazEgPSBVaW50OEFycmF5KFsxLDIsMyw0LDUsNiw3LDgsOV0pXG4gKiAgICwgY2h1bmsyID0gVWludDhBcnJheShbMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTldKTtcbiAqXG4gKiB2YXIgaW5mbGF0ZSA9IG5ldyBwYWtvLkluZmxhdGUoeyBsZXZlbDogM30pO1xuICpcbiAqIGluZmxhdGUucHVzaChjaHVuazEsIGZhbHNlKTtcbiAqIGluZmxhdGUucHVzaChjaHVuazIsIHRydWUpOyAgLy8gdHJ1ZSAtPiBsYXN0IGNodW5rXG4gKlxuICogaWYgKGluZmxhdGUuZXJyKSB7IHRocm93IG5ldyBFcnJvcihpbmZsYXRlLmVycik7IH1cbiAqXG4gKiBjb25zb2xlLmxvZyhpbmZsYXRlLnJlc3VsdCk7XG4gKiBgYGBcbiAqKi9cbmZ1bmN0aW9uIEluZmxhdGUob3B0aW9ucykge1xuICBpZiAoISh0aGlzIGluc3RhbmNlb2YgSW5mbGF0ZSkpIHJldHVybiBuZXcgSW5mbGF0ZShvcHRpb25zKTtcblxuICB0aGlzLm9wdGlvbnMgPSB1dGlscy5hc3NpZ24oe1xuICAgIGNodW5rU2l6ZTogMTYzODQsXG4gICAgd2luZG93Qml0czogMCxcbiAgICB0bzogJydcbiAgfSwgb3B0aW9ucyB8fCB7fSk7XG5cbiAgdmFyIG9wdCA9IHRoaXMub3B0aW9ucztcblxuICAvLyBGb3JjZSB3aW5kb3cgc2l6ZSBmb3IgYHJhd2AgZGF0YSwgaWYgbm90IHNldCBkaXJlY3RseSxcbiAgLy8gYmVjYXVzZSB3ZSBoYXZlIG5vIGhlYWRlciBmb3IgYXV0b2RldGVjdC5cbiAgaWYgKG9wdC5yYXcgJiYgKG9wdC53aW5kb3dCaXRzID49IDApICYmIChvcHQud2luZG93Qml0cyA8IDE2KSkge1xuICAgIG9wdC53aW5kb3dCaXRzID0gLW9wdC53aW5kb3dCaXRzO1xuICAgIGlmIChvcHQud2luZG93Qml0cyA9PT0gMCkgeyBvcHQud2luZG93Qml0cyA9IC0xNTsgfVxuICB9XG5cbiAgLy8gSWYgYHdpbmRvd0JpdHNgIG5vdCBkZWZpbmVkIChhbmQgbW9kZSBub3QgcmF3KSAtIHNldCBhdXRvZGV0ZWN0IGZsYWcgZm9yIGd6aXAvZGVmbGF0ZVxuICBpZiAoKG9wdC53aW5kb3dCaXRzID49IDApICYmIChvcHQud2luZG93Qml0cyA8IDE2KSAmJlxuICAgICAgIShvcHRpb25zICYmIG9wdGlvbnMud2luZG93Qml0cykpIHtcbiAgICBvcHQud2luZG93Qml0cyArPSAzMjtcbiAgfVxuXG4gIC8vIEd6aXAgaGVhZGVyIGhhcyBubyBpbmZvIGFib3V0IHdpbmRvd3Mgc2l6ZSwgd2UgY2FuIGRvIGF1dG9kZXRlY3Qgb25seVxuICAvLyBmb3IgZGVmbGF0ZS4gU28sIGlmIHdpbmRvdyBzaXplIG5vdCBzZXQsIGZvcmNlIGl0IHRvIG1heCB3aGVuIGd6aXAgcG9zc2libGVcbiAgaWYgKChvcHQud2luZG93Qml0cyA+IDE1KSAmJiAob3B0LndpbmRvd0JpdHMgPCA0OCkpIHtcbiAgICAvLyBiaXQgMyAoMTYpIC0+IGd6aXBwZWQgZGF0YVxuICAgIC8vIGJpdCA0ICgzMikgLT4gYXV0b2RldGVjdCBnemlwL2RlZmxhdGVcbiAgICBpZiAoKG9wdC53aW5kb3dCaXRzICYgMTUpID09PSAwKSB7XG4gICAgICBvcHQud2luZG93Qml0cyB8PSAxNTtcbiAgICB9XG4gIH1cblxuICB0aGlzLmVyciAgICA9IDA7ICAgICAgLy8gZXJyb3IgY29kZSwgaWYgaGFwcGVucyAoMCA9IFpfT0spXG4gIHRoaXMubXNnICAgID0gJyc7ICAgICAvLyBlcnJvciBtZXNzYWdlXG4gIHRoaXMuZW5kZWQgID0gZmFsc2U7ICAvLyB1c2VkIHRvIGF2b2lkIG11bHRpcGxlIG9uRW5kKCkgY2FsbHNcbiAgdGhpcy5jaHVua3MgPSBbXTsgICAgIC8vIGNodW5rcyBvZiBjb21wcmVzc2VkIGRhdGFcblxuICB0aGlzLnN0cm0gICA9IG5ldyBaU3RyZWFtKCk7XG4gIHRoaXMuc3RybS5hdmFpbF9vdXQgPSAwO1xuXG4gIHZhciBzdGF0dXMgID0gemxpYl9pbmZsYXRlLmluZmxhdGVJbml0MihcbiAgICB0aGlzLnN0cm0sXG4gICAgb3B0LndpbmRvd0JpdHNcbiAgKTtcblxuICBpZiAoc3RhdHVzICE9PSBjLlpfT0spIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IobXNnW3N0YXR1c10pO1xuICB9XG5cbiAgdGhpcy5oZWFkZXIgPSBuZXcgR1poZWFkZXIoKTtcblxuICB6bGliX2luZmxhdGUuaW5mbGF0ZUdldEhlYWRlcih0aGlzLnN0cm0sIHRoaXMuaGVhZGVyKTtcbn1cblxuLyoqXG4gKiBJbmZsYXRlI3B1c2goZGF0YVssIG1vZGVdKSAtPiBCb29sZWFuXG4gKiAtIGRhdGEgKFVpbnQ4QXJyYXl8QXJyYXl8QXJyYXlCdWZmZXJ8U3RyaW5nKTogaW5wdXQgZGF0YVxuICogLSBtb2RlIChOdW1iZXJ8Qm9vbGVhbik6IDAuLjYgZm9yIGNvcnJlc3BvbmRpbmcgWl9OT19GTFVTSC4uWl9UUkVFIG1vZGVzLlxuICogICBTZWUgY29uc3RhbnRzLiBTa2lwcGVkIG9yIGBmYWxzZWAgbWVhbnMgWl9OT19GTFVTSCwgYHRydWVgIG1lYW5zIFpfRklOSVNILlxuICpcbiAqIFNlbmRzIGlucHV0IGRhdGEgdG8gaW5mbGF0ZSBwaXBlLCBnZW5lcmF0aW5nIFtbSW5mbGF0ZSNvbkRhdGFdXSBjYWxscyB3aXRoXG4gKiBuZXcgb3V0cHV0IGNodW5rcy4gUmV0dXJucyBgdHJ1ZWAgb24gc3VjY2Vzcy4gVGhlIGxhc3QgZGF0YSBibG9jayBtdXN0IGhhdmVcbiAqIG1vZGUgWl9GSU5JU0ggKG9yIGB0cnVlYCkuIFRoYXQgd2lsbCBmbHVzaCBpbnRlcm5hbCBwZW5kaW5nIGJ1ZmZlcnMgYW5kIGNhbGxcbiAqIFtbSW5mbGF0ZSNvbkVuZF1dLiBGb3IgaW50ZXJpbSBleHBsaWNpdCBmbHVzaGVzICh3aXRob3V0IGVuZGluZyB0aGUgc3RyZWFtKSB5b3VcbiAqIGNhbiB1c2UgbW9kZSBaX1NZTkNfRkxVU0gsIGtlZXBpbmcgdGhlIGRlY29tcHJlc3Npb24gY29udGV4dC5cbiAqXG4gKiBPbiBmYWlsIGNhbGwgW1tJbmZsYXRlI29uRW5kXV0gd2l0aCBlcnJvciBjb2RlIGFuZCByZXR1cm4gZmFsc2UuXG4gKlxuICogV2Ugc3Ryb25nbHkgcmVjb21tZW5kIHRvIHVzZSBgVWludDhBcnJheWAgb24gaW5wdXQgZm9yIGJlc3Qgc3BlZWQgKG91dHB1dFxuICogZm9ybWF0IGlzIGRldGVjdGVkIGF1dG9tYXRpY2FsbHkpLiBBbHNvLCBkb24ndCBza2lwIGxhc3QgcGFyYW0gYW5kIGFsd2F5c1xuICogdXNlIHRoZSBzYW1lIHR5cGUgaW4geW91ciBjb2RlIChib29sZWFuIG9yIG51bWJlcikuIFRoYXQgd2lsbCBpbXByb3ZlIEpTIHNwZWVkLlxuICpcbiAqIEZvciByZWd1bGFyIGBBcnJheWAtcyBtYWtlIHN1cmUgYWxsIGVsZW1lbnRzIGFyZSBbMC4uMjU1XS5cbiAqXG4gKiAjIyMjIyBFeGFtcGxlXG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogcHVzaChjaHVuaywgZmFsc2UpOyAvLyBwdXNoIG9uZSBvZiBkYXRhIGNodW5rc1xuICogLi4uXG4gKiBwdXNoKGNodW5rLCB0cnVlKTsgIC8vIHB1c2ggbGFzdCBjaHVua1xuICogYGBgXG4gKiovXG5JbmZsYXRlLnByb3RvdHlwZS5wdXNoID0gZnVuY3Rpb24gKGRhdGEsIG1vZGUpIHtcbiAgdmFyIHN0cm0gPSB0aGlzLnN0cm07XG4gIHZhciBjaHVua1NpemUgPSB0aGlzLm9wdGlvbnMuY2h1bmtTaXplO1xuICB2YXIgZGljdGlvbmFyeSA9IHRoaXMub3B0aW9ucy5kaWN0aW9uYXJ5O1xuICB2YXIgc3RhdHVzLCBfbW9kZTtcbiAgdmFyIG5leHRfb3V0X3V0ZjgsIHRhaWwsIHV0ZjhzdHI7XG4gIHZhciBkaWN0O1xuXG4gIC8vIEZsYWcgdG8gcHJvcGVybHkgcHJvY2VzcyBaX0JVRl9FUlJPUiBvbiB0ZXN0aW5nIGluZmxhdGUgY2FsbFxuICAvLyB3aGVuIHdlIGNoZWNrIHRoYXQgYWxsIG91dHB1dCBkYXRhIHdhcyBmbHVzaGVkLlxuICB2YXIgYWxsb3dCdWZFcnJvciA9IGZhbHNlO1xuXG4gIGlmICh0aGlzLmVuZGVkKSB7IHJldHVybiBmYWxzZTsgfVxuICBfbW9kZSA9IChtb2RlID09PSB+fm1vZGUpID8gbW9kZSA6ICgobW9kZSA9PT0gdHJ1ZSkgPyBjLlpfRklOSVNIIDogYy5aX05PX0ZMVVNIKTtcblxuICAvLyBDb252ZXJ0IGRhdGEgaWYgbmVlZGVkXG4gIGlmICh0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBPbmx5IGJpbmFyeSBzdHJpbmdzIGNhbiBiZSBkZWNvbXByZXNzZWQgb24gcHJhY3RpY2VcbiAgICBzdHJtLmlucHV0ID0gc3RyaW5ncy5iaW5zdHJpbmcyYnVmKGRhdGEpO1xuICB9IGVsc2UgaWYgKHRvU3RyaW5nLmNhbGwoZGF0YSkgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpIHtcbiAgICBzdHJtLmlucHV0ID0gbmV3IFVpbnQ4QXJyYXkoZGF0YSk7XG4gIH0gZWxzZSB7XG4gICAgc3RybS5pbnB1dCA9IGRhdGE7XG4gIH1cblxuICBzdHJtLm5leHRfaW4gPSAwO1xuICBzdHJtLmF2YWlsX2luID0gc3RybS5pbnB1dC5sZW5ndGg7XG5cbiAgZG8ge1xuICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgc3RybS5vdXRwdXQgPSBuZXcgdXRpbHMuQnVmOChjaHVua1NpemUpO1xuICAgICAgc3RybS5uZXh0X291dCA9IDA7XG4gICAgICBzdHJtLmF2YWlsX291dCA9IGNodW5rU2l6ZTtcbiAgICB9XG5cbiAgICBzdGF0dXMgPSB6bGliX2luZmxhdGUuaW5mbGF0ZShzdHJtLCBjLlpfTk9fRkxVU0gpOyAgICAvKiBubyBiYWQgcmV0dXJuIHZhbHVlICovXG5cbiAgICBpZiAoc3RhdHVzID09PSBjLlpfTkVFRF9ESUNUICYmIGRpY3Rpb25hcnkpIHtcbiAgICAgIC8vIENvbnZlcnQgZGF0YSBpZiBuZWVkZWRcbiAgICAgIGlmICh0eXBlb2YgZGljdGlvbmFyeSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZGljdCA9IHN0cmluZ3Muc3RyaW5nMmJ1ZihkaWN0aW9uYXJ5KTtcbiAgICAgIH0gZWxzZSBpZiAodG9TdHJpbmcuY2FsbChkaWN0aW9uYXJ5KSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJykge1xuICAgICAgICBkaWN0ID0gbmV3IFVpbnQ4QXJyYXkoZGljdGlvbmFyeSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkaWN0ID0gZGljdGlvbmFyeTtcbiAgICAgIH1cblxuICAgICAgc3RhdHVzID0gemxpYl9pbmZsYXRlLmluZmxhdGVTZXREaWN0aW9uYXJ5KHRoaXMuc3RybSwgZGljdCk7XG5cbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSBjLlpfQlVGX0VSUk9SICYmIGFsbG93QnVmRXJyb3IgPT09IHRydWUpIHtcbiAgICAgIHN0YXR1cyA9IGMuWl9PSztcbiAgICAgIGFsbG93QnVmRXJyb3IgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzICE9PSBjLlpfU1RSRUFNX0VORCAmJiBzdGF0dXMgIT09IGMuWl9PSykge1xuICAgICAgdGhpcy5vbkVuZChzdGF0dXMpO1xuICAgICAgdGhpcy5lbmRlZCA9IHRydWU7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHN0cm0ubmV4dF9vdXQpIHtcbiAgICAgIGlmIChzdHJtLmF2YWlsX291dCA9PT0gMCB8fCBzdGF0dXMgPT09IGMuWl9TVFJFQU1fRU5EIHx8IChzdHJtLmF2YWlsX2luID09PSAwICYmIChfbW9kZSA9PT0gYy5aX0ZJTklTSCB8fCBfbW9kZSA9PT0gYy5aX1NZTkNfRkxVU0gpKSkge1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudG8gPT09ICdzdHJpbmcnKSB7XG5cbiAgICAgICAgICBuZXh0X291dF91dGY4ID0gc3RyaW5ncy51dGY4Ym9yZGVyKHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0KTtcblxuICAgICAgICAgIHRhaWwgPSBzdHJtLm5leHRfb3V0IC0gbmV4dF9vdXRfdXRmODtcbiAgICAgICAgICB1dGY4c3RyID0gc3RyaW5ncy5idWYyc3RyaW5nKHN0cm0ub3V0cHV0LCBuZXh0X291dF91dGY4KTtcblxuICAgICAgICAgIC8vIG1vdmUgdGFpbFxuICAgICAgICAgIHN0cm0ubmV4dF9vdXQgPSB0YWlsO1xuICAgICAgICAgIHN0cm0uYXZhaWxfb3V0ID0gY2h1bmtTaXplIC0gdGFpbDtcbiAgICAgICAgICBpZiAodGFpbCkgeyB1dGlscy5hcnJheVNldChzdHJtLm91dHB1dCwgc3RybS5vdXRwdXQsIG5leHRfb3V0X3V0ZjgsIHRhaWwsIDApOyB9XG5cbiAgICAgICAgICB0aGlzLm9uRGF0YSh1dGY4c3RyKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMub25EYXRhKHV0aWxzLnNocmlua0J1ZihzdHJtLm91dHB1dCwgc3RybS5uZXh0X291dCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2hlbiBubyBtb3JlIGlucHV0IGRhdGEsIHdlIHNob3VsZCBjaGVjayB0aGF0IGludGVybmFsIGluZmxhdGUgYnVmZmVyc1xuICAgIC8vIGFyZSBmbHVzaGVkLiBUaGUgb25seSB3YXkgdG8gZG8gaXQgd2hlbiBhdmFpbF9vdXQgPSAwIC0gcnVuIG9uZSBtb3JlXG4gICAgLy8gaW5mbGF0ZSBwYXNzLiBCdXQgaWYgb3V0cHV0IGRhdGEgbm90IGV4aXN0cywgaW5mbGF0ZSByZXR1cm4gWl9CVUZfRVJST1IuXG4gICAgLy8gSGVyZSB3ZSBzZXQgZmxhZyB0byBwcm9jZXNzIHRoaXMgZXJyb3IgcHJvcGVybHkuXG4gICAgLy9cbiAgICAvLyBOT1RFLiBEZWZsYXRlIGRvZXMgbm90IHJldHVybiBlcnJvciBpbiB0aGlzIGNhc2UgYW5kIGRvZXMgbm90IG5lZWRzIHN1Y2hcbiAgICAvLyBsb2dpYy5cbiAgICBpZiAoc3RybS5hdmFpbF9pbiA9PT0gMCAmJiBzdHJtLmF2YWlsX291dCA9PT0gMCkge1xuICAgICAgYWxsb3dCdWZFcnJvciA9IHRydWU7XG4gICAgfVxuXG4gIH0gd2hpbGUgKChzdHJtLmF2YWlsX2luID4gMCB8fCBzdHJtLmF2YWlsX291dCA9PT0gMCkgJiYgc3RhdHVzICE9PSBjLlpfU1RSRUFNX0VORCk7XG5cbiAgaWYgKHN0YXR1cyA9PT0gYy5aX1NUUkVBTV9FTkQpIHtcbiAgICBfbW9kZSA9IGMuWl9GSU5JU0g7XG4gIH1cblxuICAvLyBGaW5hbGl6ZSBvbiB0aGUgbGFzdCBjaHVuay5cbiAgaWYgKF9tb2RlID09PSBjLlpfRklOSVNIKSB7XG4gICAgc3RhdHVzID0gemxpYl9pbmZsYXRlLmluZmxhdGVFbmQodGhpcy5zdHJtKTtcbiAgICB0aGlzLm9uRW5kKHN0YXR1cyk7XG4gICAgdGhpcy5lbmRlZCA9IHRydWU7XG4gICAgcmV0dXJuIHN0YXR1cyA9PT0gYy5aX09LO1xuICB9XG5cbiAgLy8gY2FsbGJhY2sgaW50ZXJpbSByZXN1bHRzIGlmIFpfU1lOQ19GTFVTSC5cbiAgaWYgKF9tb2RlID09PSBjLlpfU1lOQ19GTFVTSCkge1xuICAgIHRoaXMub25FbmQoYy5aX09LKTtcbiAgICBzdHJtLmF2YWlsX291dCA9IDA7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn07XG5cblxuLyoqXG4gKiBJbmZsYXRlI29uRGF0YShjaHVuaykgLT4gVm9pZFxuICogLSBjaHVuayAoVWludDhBcnJheXxBcnJheXxTdHJpbmcpOiBvdXRwdXQgZGF0YS4gVHlwZSBvZiBhcnJheSBkZXBlbmRzXG4gKiAgIG9uIGpzIGVuZ2luZSBzdXBwb3J0LiBXaGVuIHN0cmluZyBvdXRwdXQgcmVxdWVzdGVkLCBlYWNoIGNodW5rXG4gKiAgIHdpbGwgYmUgc3RyaW5nLlxuICpcbiAqIEJ5IGRlZmF1bHQsIHN0b3JlcyBkYXRhIGJsb2NrcyBpbiBgY2h1bmtzW11gIHByb3BlcnR5IGFuZCBnbHVlXG4gKiB0aG9zZSBpbiBgb25FbmRgLiBPdmVycmlkZSB0aGlzIGhhbmRsZXIsIGlmIHlvdSBuZWVkIGFub3RoZXIgYmVoYXZpb3VyLlxuICoqL1xuSW5mbGF0ZS5wcm90b3R5cGUub25EYXRhID0gZnVuY3Rpb24gKGNodW5rKSB7XG4gIHRoaXMuY2h1bmtzLnB1c2goY2h1bmspO1xufTtcblxuXG4vKipcbiAqIEluZmxhdGUjb25FbmQoc3RhdHVzKSAtPiBWb2lkXG4gKiAtIHN0YXR1cyAoTnVtYmVyKTogaW5mbGF0ZSBzdGF0dXMuIDAgKFpfT0spIG9uIHN1Y2Nlc3MsXG4gKiAgIG90aGVyIGlmIG5vdC5cbiAqXG4gKiBDYWxsZWQgZWl0aGVyIGFmdGVyIHlvdSB0ZWxsIGluZmxhdGUgdGhhdCB0aGUgaW5wdXQgc3RyZWFtIGlzXG4gKiBjb21wbGV0ZSAoWl9GSU5JU0gpIG9yIHNob3VsZCBiZSBmbHVzaGVkIChaX1NZTkNfRkxVU0gpXG4gKiBvciBpZiBhbiBlcnJvciBoYXBwZW5lZC4gQnkgZGVmYXVsdCAtIGpvaW4gY29sbGVjdGVkIGNodW5rcyxcbiAqIGZyZWUgbWVtb3J5IGFuZCBmaWxsIGByZXN1bHRzYCAvIGBlcnJgIHByb3BlcnRpZXMuXG4gKiovXG5JbmZsYXRlLnByb3RvdHlwZS5vbkVuZCA9IGZ1bmN0aW9uIChzdGF0dXMpIHtcbiAgLy8gT24gc3VjY2VzcyAtIGpvaW5cbiAgaWYgKHN0YXR1cyA9PT0gYy5aX09LKSB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy50byA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIEdsdWUgJiBjb252ZXJ0IGhlcmUsIHVudGlsIHdlIHRlYWNoIHBha28gdG8gc2VuZFxuICAgICAgLy8gdXRmOCBhbGlnbmVkIHN0cmluZ3MgdG8gb25EYXRhXG4gICAgICB0aGlzLnJlc3VsdCA9IHRoaXMuY2h1bmtzLmpvaW4oJycpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlc3VsdCA9IHV0aWxzLmZsYXR0ZW5DaHVua3ModGhpcy5jaHVua3MpO1xuICAgIH1cbiAgfVxuICB0aGlzLmNodW5rcyA9IFtdO1xuICB0aGlzLmVyciA9IHN0YXR1cztcbiAgdGhpcy5tc2cgPSB0aGlzLnN0cm0ubXNnO1xufTtcblxuXG4vKipcbiAqIGluZmxhdGUoZGF0YVssIG9wdGlvbnNdKSAtPiBVaW50OEFycmF5fEFycmF5fFN0cmluZ1xuICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IGlucHV0IGRhdGEgdG8gZGVjb21wcmVzcy5cbiAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBpbmZsYXRlIG9wdGlvbnMuXG4gKlxuICogRGVjb21wcmVzcyBgZGF0YWAgd2l0aCBpbmZsYXRlL3VuZ3ppcCBhbmQgYG9wdGlvbnNgLiBBdXRvZGV0ZWN0XG4gKiBmb3JtYXQgdmlhIHdyYXBwZXIgaGVhZGVyIGJ5IGRlZmF1bHQuIFRoYXQncyB3aHkgd2UgZG9uJ3QgcHJvdmlkZVxuICogc2VwYXJhdGUgYHVuZ3ppcGAgbWV0aG9kLlxuICpcbiAqIFN1cHBvcnRlZCBvcHRpb25zIGFyZTpcbiAqXG4gKiAtIHdpbmRvd0JpdHNcbiAqXG4gKiBbaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkXShodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWQpXG4gKiBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cbiAqXG4gKiBTdWdhciAob3B0aW9ucyk6XG4gKlxuICogLSBgcmF3YCAoQm9vbGVhbikgLSBzYXkgdGhhdCB3ZSB3b3JrIHdpdGggcmF3IHN0cmVhbSwgaWYgeW91IGRvbid0IHdpc2ggdG8gc3BlY2lmeVxuICogICBuZWdhdGl2ZSB3aW5kb3dCaXRzIGltcGxpY2l0bHkuXG4gKiAtIGB0b2AgKFN0cmluZykgLSBpZiBlcXVhbCB0byAnc3RyaW5nJywgdGhlbiByZXN1bHQgd2lsbCBiZSBjb252ZXJ0ZWRcbiAqICAgZnJvbSB1dGY4IHRvIHV0ZjE2IChqYXZhc2NyaXB0KSBzdHJpbmcuIFdoZW4gc3RyaW5nIG91dHB1dCByZXF1ZXN0ZWQsXG4gKiAgIGNodW5rIGxlbmd0aCBjYW4gZGlmZmVyIGZyb20gYGNodW5rU2l6ZWAsIGRlcGVuZGluZyBvbiBjb250ZW50LlxuICpcbiAqXG4gKiAjIyMjIyBFeGFtcGxlOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIHZhciBwYWtvID0gcmVxdWlyZSgncGFrbycpXG4gKiAgICwgaW5wdXQgPSBwYWtvLmRlZmxhdGUoWzEsMiwzLDQsNSw2LDcsOCw5XSlcbiAqICAgLCBvdXRwdXQ7XG4gKlxuICogdHJ5IHtcbiAqICAgb3V0cHV0ID0gcGFrby5pbmZsYXRlKGlucHV0KTtcbiAqIH0gY2F0Y2ggKGVycilcbiAqICAgY29uc29sZS5sb2coZXJyKTtcbiAqIH1cbiAqIGBgYFxuICoqL1xuZnVuY3Rpb24gaW5mbGF0ZShpbnB1dCwgb3B0aW9ucykge1xuICB2YXIgaW5mbGF0b3IgPSBuZXcgSW5mbGF0ZShvcHRpb25zKTtcblxuICBpbmZsYXRvci5wdXNoKGlucHV0LCB0cnVlKTtcblxuICAvLyBUaGF0IHdpbGwgbmV2ZXIgaGFwcGVucywgaWYgeW91IGRvbid0IGNoZWF0IHdpdGggb3B0aW9ucyA6KVxuICBpZiAoaW5mbGF0b3IuZXJyKSB7IHRocm93IGluZmxhdG9yLm1zZyB8fCBtc2dbaW5mbGF0b3IuZXJyXTsgfVxuXG4gIHJldHVybiBpbmZsYXRvci5yZXN1bHQ7XG59XG5cblxuLyoqXG4gKiBpbmZsYXRlUmF3KGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxBcnJheXxTdHJpbmdcbiAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheXxTdHJpbmcpOiBpbnB1dCBkYXRhIHRvIGRlY29tcHJlc3MuXG4gKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgaW5mbGF0ZSBvcHRpb25zLlxuICpcbiAqIFRoZSBzYW1lIGFzIFtbaW5mbGF0ZV1dLCBidXQgY3JlYXRlcyByYXcgZGF0YSwgd2l0aG91dCB3cmFwcGVyXG4gKiAoaGVhZGVyIGFuZCBhZGxlcjMyIGNyYykuXG4gKiovXG5mdW5jdGlvbiBpbmZsYXRlUmF3KGlucHV0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBvcHRpb25zLnJhdyA9IHRydWU7XG4gIHJldHVybiBpbmZsYXRlKGlucHV0LCBvcHRpb25zKTtcbn1cblxuXG4vKipcbiAqIHVuZ3ppcChkYXRhWywgb3B0aW9uc10pIC0+IFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nXG4gKiAtIGRhdGEgKFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nKTogaW5wdXQgZGF0YSB0byBkZWNvbXByZXNzLlxuICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy5cbiAqXG4gKiBKdXN0IHNob3J0Y3V0IHRvIFtbaW5mbGF0ZV1dLCBiZWNhdXNlIGl0IGF1dG9kZXRlY3RzIGZvcm1hdFxuICogYnkgaGVhZGVyLmNvbnRlbnQuIERvbmUgZm9yIGNvbnZlbmllbmNlLlxuICoqL1xuXG5cbmV4cG9ydHMuSW5mbGF0ZSA9IEluZmxhdGU7XG5leHBvcnRzLmluZmxhdGUgPSBpbmZsYXRlO1xuZXhwb3J0cy5pbmZsYXRlUmF3ID0gaW5mbGF0ZVJhdztcbmV4cG9ydHMudW5nemlwICA9IGluZmxhdGU7XG5cblxuLyoqKi8gfSksXG4vKiAxNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcblxuXG4vLyAoQykgMTk5NS0yMDEzIEplYW4tbG91cCBHYWlsbHkgYW5kIE1hcmsgQWRsZXJcbi8vIChDKSAyMDE0LTIwMTcgVml0YWx5IFB1enJpbiBhbmQgQW5kcmV5IFR1cGl0c2luXG4vL1xuLy8gVGhpcyBzb2Z0d2FyZSBpcyBwcm92aWRlZCAnYXMtaXMnLCB3aXRob3V0IGFueSBleHByZXNzIG9yIGltcGxpZWRcbi8vIHdhcnJhbnR5LiBJbiBubyBldmVudCB3aWxsIHRoZSBhdXRob3JzIGJlIGhlbGQgbGlhYmxlIGZvciBhbnkgZGFtYWdlc1xuLy8gYXJpc2luZyBmcm9tIHRoZSB1c2Ugb2YgdGhpcyBzb2Z0d2FyZS5cbi8vXG4vLyBQZXJtaXNzaW9uIGlzIGdyYW50ZWQgdG8gYW55b25lIHRvIHVzZSB0aGlzIHNvZnR3YXJlIGZvciBhbnkgcHVycG9zZSxcbi8vIGluY2x1ZGluZyBjb21tZXJjaWFsIGFwcGxpY2F0aW9ucywgYW5kIHRvIGFsdGVyIGl0IGFuZCByZWRpc3RyaWJ1dGUgaXRcbi8vIGZyZWVseSwgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIHJlc3RyaWN0aW9uczpcbi8vXG4vLyAxLiBUaGUgb3JpZ2luIG9mIHRoaXMgc29mdHdhcmUgbXVzdCBub3QgYmUgbWlzcmVwcmVzZW50ZWQ7IHlvdSBtdXN0IG5vdFxuLy8gICBjbGFpbSB0aGF0IHlvdSB3cm90ZSB0aGUgb3JpZ2luYWwgc29mdHdhcmUuIElmIHlvdSB1c2UgdGhpcyBzb2Z0d2FyZVxuLy8gICBpbiBhIHByb2R1Y3QsIGFuIGFja25vd2xlZGdtZW50IGluIHRoZSBwcm9kdWN0IGRvY3VtZW50YXRpb24gd291bGQgYmVcbi8vICAgYXBwcmVjaWF0ZWQgYnV0IGlzIG5vdCByZXF1aXJlZC5cbi8vIDIuIEFsdGVyZWQgc291cmNlIHZlcnNpb25zIG11c3QgYmUgcGxhaW5seSBtYXJrZWQgYXMgc3VjaCwgYW5kIG11c3Qgbm90IGJlXG4vLyAgIG1pc3JlcHJlc2VudGVkIGFzIGJlaW5nIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS5cbi8vIDMuIFRoaXMgbm90aWNlIG1heSBub3QgYmUgcmVtb3ZlZCBvciBhbHRlcmVkIGZyb20gYW55IHNvdXJjZSBkaXN0cmlidXRpb24uXG5cbnZhciB1dGlscyAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbnZhciBhZGxlcjMyICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcbnZhciBjcmMzMiAgICAgICAgID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcbnZhciBpbmZsYXRlX2Zhc3QgID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSk7XG52YXIgaW5mbGF0ZV90YWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXG52YXIgQ09ERVMgPSAwO1xudmFyIExFTlMgPSAxO1xudmFyIERJU1RTID0gMjtcblxuLyogUHVibGljIGNvbnN0YW50cyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cblxuLyogQWxsb3dlZCBmbHVzaCB2YWx1ZXM7IHNlZSBkZWZsYXRlKCkgYW5kIGluZmxhdGUoKSBiZWxvdyBmb3IgZGV0YWlscyAqL1xuLy92YXIgWl9OT19GTFVTSCAgICAgID0gMDtcbi8vdmFyIFpfUEFSVElBTF9GTFVTSCA9IDE7XG4vL3ZhciBaX1NZTkNfRkxVU0ggICAgPSAyO1xuLy92YXIgWl9GVUxMX0ZMVVNIICAgID0gMztcbnZhciBaX0ZJTklTSCAgICAgICAgPSA0O1xudmFyIFpfQkxPQ0sgICAgICAgICA9IDU7XG52YXIgWl9UUkVFUyAgICAgICAgID0gNjtcblxuXG4vKiBSZXR1cm4gY29kZXMgZm9yIHRoZSBjb21wcmVzc2lvbi9kZWNvbXByZXNzaW9uIGZ1bmN0aW9ucy4gTmVnYXRpdmUgdmFsdWVzXG4gKiBhcmUgZXJyb3JzLCBwb3NpdGl2ZSB2YWx1ZXMgYXJlIHVzZWQgZm9yIHNwZWNpYWwgYnV0IG5vcm1hbCBldmVudHMuXG4gKi9cbnZhciBaX09LICAgICAgICAgICAgPSAwO1xudmFyIFpfU1RSRUFNX0VORCAgICA9IDE7XG52YXIgWl9ORUVEX0RJQ1QgICAgID0gMjtcbi8vdmFyIFpfRVJSTk8gICAgICAgICA9IC0xO1xudmFyIFpfU1RSRUFNX0VSUk9SICA9IC0yO1xudmFyIFpfREFUQV9FUlJPUiAgICA9IC0zO1xudmFyIFpfTUVNX0VSUk9SICAgICA9IC00O1xudmFyIFpfQlVGX0VSUk9SICAgICA9IC01O1xuLy92YXIgWl9WRVJTSU9OX0VSUk9SID0gLTY7XG5cbi8qIFRoZSBkZWZsYXRlIGNvbXByZXNzaW9uIG1ldGhvZCAqL1xudmFyIFpfREVGTEFURUQgID0gODtcblxuXG4vKiBTVEFURVMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuXG52YXIgICAgSEVBRCA9IDE7ICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIG1hZ2ljIGhlYWRlciAqL1xudmFyICAgIEZMQUdTID0gMjsgICAgICAvKiBpOiB3YWl0aW5nIGZvciBtZXRob2QgYW5kIGZsYWdzIChnemlwKSAqL1xudmFyICAgIFRJTUUgPSAzOyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBtb2RpZmljYXRpb24gdGltZSAoZ3ppcCkgKi9cbnZhciAgICBPUyA9IDQ7ICAgICAgICAgLyogaTogd2FpdGluZyBmb3IgZXh0cmEgZmxhZ3MgYW5kIG9wZXJhdGluZyBzeXN0ZW0gKGd6aXApICovXG52YXIgICAgRVhMRU4gPSA1OyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGV4dHJhIGxlbmd0aCAoZ3ppcCkgKi9cbnZhciAgICBFWFRSQSA9IDY7ICAgICAgLyogaTogd2FpdGluZyBmb3IgZXh0cmEgYnl0ZXMgKGd6aXApICovXG52YXIgICAgTkFNRSA9IDc7ICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGVuZCBvZiBmaWxlIG5hbWUgKGd6aXApICovXG52YXIgICAgQ09NTUVOVCA9IDg7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIGVuZCBvZiBjb21tZW50IChnemlwKSAqL1xudmFyICAgIEhDUkMgPSA5OyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBoZWFkZXIgY3JjIChnemlwKSAqL1xudmFyICAgIERJQ1RJRCA9IDEwOyAgICAvKiBpOiB3YWl0aW5nIGZvciBkaWN0aW9uYXJ5IGNoZWNrIHZhbHVlICovXG52YXIgICAgRElDVCA9IDExOyAgICAgIC8qIHdhaXRpbmcgZm9yIGluZmxhdGVTZXREaWN0aW9uYXJ5KCkgY2FsbCAqL1xudmFyICAgICAgICBUWVBFID0gMTI7ICAgICAgLyogaTogd2FpdGluZyBmb3IgdHlwZSBiaXRzLCBpbmNsdWRpbmcgbGFzdC1mbGFnIGJpdCAqL1xudmFyICAgICAgICBUWVBFRE8gPSAxMzsgICAgLyogaTogc2FtZSwgYnV0IHNraXAgY2hlY2sgdG8gZXhpdCBpbmZsYXRlIG9uIG5ldyBibG9jayAqL1xudmFyICAgICAgICBTVE9SRUQgPSAxNDsgICAgLyogaTogd2FpdGluZyBmb3Igc3RvcmVkIHNpemUgKGxlbmd0aCBhbmQgY29tcGxlbWVudCkgKi9cbnZhciAgICAgICAgQ09QWV8gPSAxNTsgICAgIC8qIGkvbzogc2FtZSBhcyBDT1BZIGJlbG93LCBidXQgb25seSBmaXJzdCB0aW1lIGluICovXG52YXIgICAgICAgIENPUFkgPSAxNjsgICAgICAvKiBpL286IHdhaXRpbmcgZm9yIGlucHV0IG9yIG91dHB1dCB0byBjb3B5IHN0b3JlZCBibG9jayAqL1xudmFyICAgICAgICBUQUJMRSA9IDE3OyAgICAgLyogaTogd2FpdGluZyBmb3IgZHluYW1pYyBibG9jayB0YWJsZSBsZW5ndGhzICovXG52YXIgICAgICAgIExFTkxFTlMgPSAxODsgICAvKiBpOiB3YWl0aW5nIGZvciBjb2RlIGxlbmd0aCBjb2RlIGxlbmd0aHMgKi9cbnZhciAgICAgICAgQ09ERUxFTlMgPSAxOTsgIC8qIGk6IHdhaXRpbmcgZm9yIGxlbmd0aC9saXQgYW5kIGRpc3RhbmNlIGNvZGUgbGVuZ3RocyAqL1xudmFyICAgICAgICAgICAgTEVOXyA9IDIwOyAgICAgIC8qIGk6IHNhbWUgYXMgTEVOIGJlbG93LCBidXQgb25seSBmaXJzdCB0aW1lIGluICovXG52YXIgICAgICAgICAgICBMRU4gPSAyMTsgICAgICAgLyogaTogd2FpdGluZyBmb3IgbGVuZ3RoL2xpdC9lb2IgY29kZSAqL1xudmFyICAgICAgICAgICAgTEVORVhUID0gMjI7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIGxlbmd0aCBleHRyYSBiaXRzICovXG52YXIgICAgICAgICAgICBESVNUID0gMjM7ICAgICAgLyogaTogd2FpdGluZyBmb3IgZGlzdGFuY2UgY29kZSAqL1xudmFyICAgICAgICAgICAgRElTVEVYVCA9IDI0OyAgIC8qIGk6IHdhaXRpbmcgZm9yIGRpc3RhbmNlIGV4dHJhIGJpdHMgKi9cbnZhciAgICAgICAgICAgIE1BVENIID0gMjU7ICAgICAvKiBvOiB3YWl0aW5nIGZvciBvdXRwdXQgc3BhY2UgdG8gY29weSBzdHJpbmcgKi9cbnZhciAgICAgICAgICAgIExJVCA9IDI2OyAgICAgICAvKiBvOiB3YWl0aW5nIGZvciBvdXRwdXQgc3BhY2UgdG8gd3JpdGUgbGl0ZXJhbCAqL1xudmFyICAgIENIRUNLID0gMjc7ICAgICAvKiBpOiB3YWl0aW5nIGZvciAzMi1iaXQgY2hlY2sgdmFsdWUgKi9cbnZhciAgICBMRU5HVEggPSAyODsgICAgLyogaTogd2FpdGluZyBmb3IgMzItYml0IGxlbmd0aCAoZ3ppcCkgKi9cbnZhciAgICBET05FID0gMjk7ICAgICAgLyogZmluaXNoZWQgY2hlY2ssIGRvbmUgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi9cbnZhciAgICBCQUQgPSAzMDsgICAgICAgLyogZ290IGEgZGF0YSBlcnJvciAtLSByZW1haW4gaGVyZSB1bnRpbCByZXNldCAqL1xudmFyICAgIE1FTSA9IDMxOyAgICAgICAvKiBnb3QgYW4gaW5mbGF0ZSgpIG1lbW9yeSBlcnJvciAtLSByZW1haW4gaGVyZSB1bnRpbCByZXNldCAqL1xudmFyICAgIFNZTkMgPSAzMjsgICAgICAvKiBsb29raW5nIGZvciBzeW5jaHJvbml6YXRpb24gYnl0ZXMgdG8gcmVzdGFydCBpbmZsYXRlKCkgKi9cblxuLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cblxuXG5cbnZhciBFTk9VR0hfTEVOUyA9IDg1MjtcbnZhciBFTk9VR0hfRElTVFMgPSA1OTI7XG4vL3ZhciBFTk9VR0ggPSAgKEVOT1VHSF9MRU5TK0VOT1VHSF9ESVNUUyk7XG5cbnZhciBNQVhfV0JJVFMgPSAxNTtcbi8qIDMySyBMWjc3IHdpbmRvdyAqL1xudmFyIERFRl9XQklUUyA9IE1BWF9XQklUUztcblxuXG5mdW5jdGlvbiB6c3dhcDMyKHEpIHtcbiAgcmV0dXJuICAoKChxID4+PiAyNCkgJiAweGZmKSArXG4gICAgICAgICAgKChxID4+PiA4KSAmIDB4ZmYwMCkgK1xuICAgICAgICAgICgocSAmIDB4ZmYwMCkgPDwgOCkgK1xuICAgICAgICAgICgocSAmIDB4ZmYpIDw8IDI0KSk7XG59XG5cblxuZnVuY3Rpb24gSW5mbGF0ZVN0YXRlKCkge1xuICB0aGlzLm1vZGUgPSAwOyAgICAgICAgICAgICAvKiBjdXJyZW50IGluZmxhdGUgbW9kZSAqL1xuICB0aGlzLmxhc3QgPSBmYWxzZTsgICAgICAgICAgLyogdHJ1ZSBpZiBwcm9jZXNzaW5nIGxhc3QgYmxvY2sgKi9cbiAgdGhpcy53cmFwID0gMDsgICAgICAgICAgICAgIC8qIGJpdCAwIHRydWUgZm9yIHpsaWIsIGJpdCAxIHRydWUgZm9yIGd6aXAgKi9cbiAgdGhpcy5oYXZlZGljdCA9IGZhbHNlOyAgICAgIC8qIHRydWUgaWYgZGljdGlvbmFyeSBwcm92aWRlZCAqL1xuICB0aGlzLmZsYWdzID0gMDsgICAgICAgICAgICAgLyogZ3ppcCBoZWFkZXIgbWV0aG9kIGFuZCBmbGFncyAoMCBpZiB6bGliKSAqL1xuICB0aGlzLmRtYXggPSAwOyAgICAgICAgICAgICAgLyogemxpYiBoZWFkZXIgbWF4IGRpc3RhbmNlIChJTkZMQVRFX1NUUklDVCkgKi9cbiAgdGhpcy5jaGVjayA9IDA7ICAgICAgICAgICAgIC8qIHByb3RlY3RlZCBjb3B5IG9mIGNoZWNrIHZhbHVlICovXG4gIHRoaXMudG90YWwgPSAwOyAgICAgICAgICAgICAvKiBwcm90ZWN0ZWQgY29weSBvZiBvdXRwdXQgY291bnQgKi9cbiAgLy8gVE9ETzogbWF5IGJlIHt9XG4gIHRoaXMuaGVhZCA9IG51bGw7ICAgICAgICAgICAvKiB3aGVyZSB0byBzYXZlIGd6aXAgaGVhZGVyIGluZm9ybWF0aW9uICovXG5cbiAgLyogc2xpZGluZyB3aW5kb3cgKi9cbiAgdGhpcy53Yml0cyA9IDA7ICAgICAgICAgICAgIC8qIGxvZyBiYXNlIDIgb2YgcmVxdWVzdGVkIHdpbmRvdyBzaXplICovXG4gIHRoaXMud3NpemUgPSAwOyAgICAgICAgICAgICAvKiB3aW5kb3cgc2l6ZSBvciB6ZXJvIGlmIG5vdCB1c2luZyB3aW5kb3cgKi9cbiAgdGhpcy53aGF2ZSA9IDA7ICAgICAgICAgICAgIC8qIHZhbGlkIGJ5dGVzIGluIHRoZSB3aW5kb3cgKi9cbiAgdGhpcy53bmV4dCA9IDA7ICAgICAgICAgICAgIC8qIHdpbmRvdyB3cml0ZSBpbmRleCAqL1xuICB0aGlzLndpbmRvdyA9IG51bGw7ICAgICAgICAgLyogYWxsb2NhdGVkIHNsaWRpbmcgd2luZG93LCBpZiBuZWVkZWQgKi9cblxuICAvKiBiaXQgYWNjdW11bGF0b3IgKi9cbiAgdGhpcy5ob2xkID0gMDsgICAgICAgICAgICAgIC8qIGlucHV0IGJpdCBhY2N1bXVsYXRvciAqL1xuICB0aGlzLmJpdHMgPSAwOyAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGJpdHMgaW4gXCJpblwiICovXG5cbiAgLyogZm9yIHN0cmluZyBhbmQgc3RvcmVkIGJsb2NrIGNvcHlpbmcgKi9cbiAgdGhpcy5sZW5ndGggPSAwOyAgICAgICAgICAgIC8qIGxpdGVyYWwgb3IgbGVuZ3RoIG9mIGRhdGEgdG8gY29weSAqL1xuICB0aGlzLm9mZnNldCA9IDA7ICAgICAgICAgICAgLyogZGlzdGFuY2UgYmFjayB0byBjb3B5IHN0cmluZyBmcm9tICovXG5cbiAgLyogZm9yIHRhYmxlIGFuZCBjb2RlIGRlY29kaW5nICovXG4gIHRoaXMuZXh0cmEgPSAwOyAgICAgICAgICAgICAvKiBleHRyYSBiaXRzIG5lZWRlZCAqL1xuXG4gIC8qIGZpeGVkIGFuZCBkeW5hbWljIGNvZGUgdGFibGVzICovXG4gIHRoaXMubGVuY29kZSA9IG51bGw7ICAgICAgICAgIC8qIHN0YXJ0aW5nIHRhYmxlIGZvciBsZW5ndGgvbGl0ZXJhbCBjb2RlcyAqL1xuICB0aGlzLmRpc3Rjb2RlID0gbnVsbDsgICAgICAgICAvKiBzdGFydGluZyB0YWJsZSBmb3IgZGlzdGFuY2UgY29kZXMgKi9cbiAgdGhpcy5sZW5iaXRzID0gMDsgICAgICAgICAgIC8qIGluZGV4IGJpdHMgZm9yIGxlbmNvZGUgKi9cbiAgdGhpcy5kaXN0Yml0cyA9IDA7ICAgICAgICAgIC8qIGluZGV4IGJpdHMgZm9yIGRpc3Rjb2RlICovXG5cbiAgLyogZHluYW1pYyB0YWJsZSBidWlsZGluZyAqL1xuICB0aGlzLm5jb2RlID0gMDsgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGNvZGUgbGVuZ3RoIGNvZGUgbGVuZ3RocyAqL1xuICB0aGlzLm5sZW4gPSAwOyAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGxlbmd0aCBjb2RlIGxlbmd0aHMgKi9cbiAgdGhpcy5uZGlzdCA9IDA7ICAgICAgICAgICAgIC8qIG51bWJlciBvZiBkaXN0YW5jZSBjb2RlIGxlbmd0aHMgKi9cbiAgdGhpcy5oYXZlID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBjb2RlIGxlbmd0aHMgaW4gbGVuc1tdICovXG4gIHRoaXMubmV4dCA9IG51bGw7ICAgICAgICAgICAgICAvKiBuZXh0IGF2YWlsYWJsZSBzcGFjZSBpbiBjb2Rlc1tdICovXG5cbiAgdGhpcy5sZW5zID0gbmV3IHV0aWxzLkJ1ZjE2KDMyMCk7IC8qIHRlbXBvcmFyeSBzdG9yYWdlIGZvciBjb2RlIGxlbmd0aHMgKi9cbiAgdGhpcy53b3JrID0gbmV3IHV0aWxzLkJ1ZjE2KDI4OCk7IC8qIHdvcmsgYXJlYSBmb3IgY29kZSB0YWJsZSBidWlsZGluZyAqL1xuXG4gIC8qXG4gICBiZWNhdXNlIHdlIGRvbid0IGhhdmUgcG9pbnRlcnMgaW4ganMsIHdlIHVzZSBsZW5jb2RlIGFuZCBkaXN0Y29kZSBkaXJlY3RseVxuICAgYXMgYnVmZmVycyBzbyB3ZSBkb24ndCBuZWVkIGNvZGVzXG4gICovXG4gIC8vdGhpcy5jb2RlcyA9IG5ldyB1dGlscy5CdWYzMihFTk9VR0gpOyAgICAgICAvKiBzcGFjZSBmb3IgY29kZSB0YWJsZXMgKi9cbiAgdGhpcy5sZW5keW4gPSBudWxsOyAgICAgICAgICAgICAgLyogZHluYW1pYyB0YWJsZSBmb3IgbGVuZ3RoL2xpdGVyYWwgY29kZXMgKEpTIHNwZWNpZmljKSAqL1xuICB0aGlzLmRpc3RkeW4gPSBudWxsOyAgICAgICAgICAgICAvKiBkeW5hbWljIHRhYmxlIGZvciBkaXN0YW5jZSBjb2RlcyAoSlMgc3BlY2lmaWMpICovXG4gIHRoaXMuc2FuZSA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIGlmIGZhbHNlLCBhbGxvdyBpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgKi9cbiAgdGhpcy5iYWNrID0gMDsgICAgICAgICAgICAgICAgICAgLyogYml0cyBiYWNrIG9mIGxhc3QgdW5wcm9jZXNzZWQgbGVuZ3RoL2xpdCAqL1xuICB0aGlzLndhcyA9IDA7ICAgICAgICAgICAgICAgICAgICAvKiBpbml0aWFsIGxlbmd0aCBvZiBtYXRjaCAqL1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlUmVzZXRLZWVwKHN0cm0pIHtcbiAgdmFyIHN0YXRlO1xuXG4gIGlmICghc3RybSB8fCAhc3RybS5zdGF0ZSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICBzdHJtLnRvdGFsX2luID0gc3RybS50b3RhbF9vdXQgPSBzdGF0ZS50b3RhbCA9IDA7XG4gIHN0cm0ubXNnID0gJyc7IC8qWl9OVUxMKi9cbiAgaWYgKHN0YXRlLndyYXApIHsgICAgICAgLyogdG8gc3VwcG9ydCBpbGwtY29uY2VpdmVkIEphdmEgdGVzdCBzdWl0ZSAqL1xuICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS53cmFwICYgMTtcbiAgfVxuICBzdGF0ZS5tb2RlID0gSEVBRDtcbiAgc3RhdGUubGFzdCA9IDA7XG4gIHN0YXRlLmhhdmVkaWN0ID0gMDtcbiAgc3RhdGUuZG1heCA9IDMyNzY4O1xuICBzdGF0ZS5oZWFkID0gbnVsbC8qWl9OVUxMKi87XG4gIHN0YXRlLmhvbGQgPSAwO1xuICBzdGF0ZS5iaXRzID0gMDtcbiAgLy9zdGF0ZS5sZW5jb2RlID0gc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5uZXh0ID0gc3RhdGUuY29kZXM7XG4gIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5sZW5keW4gPSBuZXcgdXRpbHMuQnVmMzIoRU5PVUdIX0xFTlMpO1xuICBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLmRpc3RkeW4gPSBuZXcgdXRpbHMuQnVmMzIoRU5PVUdIX0RJU1RTKTtcblxuICBzdGF0ZS5zYW5lID0gMTtcbiAgc3RhdGUuYmFjayA9IC0xO1xuICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6IHJlc2V0XFxuXCIpKTtcbiAgcmV0dXJuIFpfT0s7XG59XG5cbmZ1bmN0aW9uIGluZmxhdGVSZXNldChzdHJtKSB7XG4gIHZhciBzdGF0ZTtcblxuICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOyB9XG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcbiAgc3RhdGUud3NpemUgPSAwO1xuICBzdGF0ZS53aGF2ZSA9IDA7XG4gIHN0YXRlLnduZXh0ID0gMDtcbiAgcmV0dXJuIGluZmxhdGVSZXNldEtlZXAoc3RybSk7XG5cbn1cblxuZnVuY3Rpb24gaW5mbGF0ZVJlc2V0MihzdHJtLCB3aW5kb3dCaXRzKSB7XG4gIHZhciB3cmFwO1xuICB2YXIgc3RhdGU7XG5cbiAgLyogZ2V0IHRoZSBzdGF0ZSAqL1xuICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOyB9XG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcblxuICAvKiBleHRyYWN0IHdyYXAgcmVxdWVzdCBmcm9tIHdpbmRvd0JpdHMgcGFyYW1ldGVyICovXG4gIGlmICh3aW5kb3dCaXRzIDwgMCkge1xuICAgIHdyYXAgPSAwO1xuICAgIHdpbmRvd0JpdHMgPSAtd2luZG93Qml0cztcbiAgfVxuICBlbHNlIHtcbiAgICB3cmFwID0gKHdpbmRvd0JpdHMgPj4gNCkgKyAxO1xuICAgIGlmICh3aW5kb3dCaXRzIDwgNDgpIHtcbiAgICAgIHdpbmRvd0JpdHMgJj0gMTU7XG4gICAgfVxuICB9XG5cbiAgLyogc2V0IG51bWJlciBvZiB3aW5kb3cgYml0cywgZnJlZSB3aW5kb3cgaWYgZGlmZmVyZW50ICovXG4gIGlmICh3aW5kb3dCaXRzICYmICh3aW5kb3dCaXRzIDwgOCB8fCB3aW5kb3dCaXRzID4gMTUpKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG4gIGlmIChzdGF0ZS53aW5kb3cgIT09IG51bGwgJiYgc3RhdGUud2JpdHMgIT09IHdpbmRvd0JpdHMpIHtcbiAgICBzdGF0ZS53aW5kb3cgPSBudWxsO1xuICB9XG5cbiAgLyogdXBkYXRlIHN0YXRlIGFuZCByZXNldCB0aGUgcmVzdCBvZiBpdCAqL1xuICBzdGF0ZS53cmFwID0gd3JhcDtcbiAgc3RhdGUud2JpdHMgPSB3aW5kb3dCaXRzO1xuICByZXR1cm4gaW5mbGF0ZVJlc2V0KHN0cm0pO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlSW5pdDIoc3RybSwgd2luZG93Qml0cykge1xuICB2YXIgcmV0O1xuICB2YXIgc3RhdGU7XG5cbiAgaWYgKCFzdHJtKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICAvL3N0cm0ubXNnID0gWl9OVUxMOyAgICAgICAgICAgICAgICAgLyogaW4gY2FzZSB3ZSByZXR1cm4gYW4gZXJyb3IgKi9cblxuICBzdGF0ZSA9IG5ldyBJbmZsYXRlU3RhdGUoKTtcblxuICAvL2lmIChzdGF0ZSA9PT0gWl9OVUxMKSByZXR1cm4gWl9NRU1fRVJST1I7XG4gIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogYWxsb2NhdGVkXFxuXCIpKTtcbiAgc3RybS5zdGF0ZSA9IHN0YXRlO1xuICBzdGF0ZS53aW5kb3cgPSBudWxsLypaX05VTEwqLztcbiAgcmV0ID0gaW5mbGF0ZVJlc2V0MihzdHJtLCB3aW5kb3dCaXRzKTtcbiAgaWYgKHJldCAhPT0gWl9PSykge1xuICAgIHN0cm0uc3RhdGUgPSBudWxsLypaX05VTEwqLztcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlSW5pdChzdHJtKSB7XG4gIHJldHVybiBpbmZsYXRlSW5pdDIoc3RybSwgREVGX1dCSVRTKTtcbn1cblxuXG4vKlxuIFJldHVybiBzdGF0ZSB3aXRoIGxlbmd0aCBhbmQgZGlzdGFuY2UgZGVjb2RpbmcgdGFibGVzIGFuZCBpbmRleCBzaXplcyBzZXQgdG9cbiBmaXhlZCBjb2RlIGRlY29kaW5nLiAgTm9ybWFsbHkgdGhpcyByZXR1cm5zIGZpeGVkIHRhYmxlcyBmcm9tIGluZmZpeGVkLmguXG4gSWYgQlVJTERGSVhFRCBpcyBkZWZpbmVkLCB0aGVuIGluc3RlYWQgdGhpcyByb3V0aW5lIGJ1aWxkcyB0aGUgdGFibGVzIHRoZVxuIGZpcnN0IHRpbWUgaXQncyBjYWxsZWQsIGFuZCByZXR1cm5zIHRob3NlIHRhYmxlcyB0aGUgZmlyc3QgdGltZSBhbmRcbiB0aGVyZWFmdGVyLiAgVGhpcyByZWR1Y2VzIHRoZSBzaXplIG9mIHRoZSBjb2RlIGJ5IGFib3V0IDJLIGJ5dGVzLCBpblxuIGV4Y2hhbmdlIGZvciBhIGxpdHRsZSBleGVjdXRpb24gdGltZS4gIEhvd2V2ZXIsIEJVSUxERklYRUQgc2hvdWxkIG5vdCBiZVxuIHVzZWQgZm9yIHRocmVhZGVkIGFwcGxpY2F0aW9ucywgc2luY2UgdGhlIHJld3JpdGluZyBvZiB0aGUgdGFibGVzIGFuZCB2aXJnaW5cbiBtYXkgbm90IGJlIHRocmVhZC1zYWZlLlxuICovXG52YXIgdmlyZ2luID0gdHJ1ZTtcblxudmFyIGxlbmZpeCwgZGlzdGZpeDsgLy8gV2UgaGF2ZSBubyBwb2ludGVycyBpbiBKUywgc28ga2VlcCB0YWJsZXMgc2VwYXJhdGVcblxuZnVuY3Rpb24gZml4ZWR0YWJsZXMoc3RhdGUpIHtcbiAgLyogYnVpbGQgZml4ZWQgaHVmZm1hbiB0YWJsZXMgaWYgZmlyc3QgY2FsbCAobWF5IG5vdCBiZSB0aHJlYWQgc2FmZSkgKi9cbiAgaWYgKHZpcmdpbikge1xuICAgIHZhciBzeW07XG5cbiAgICBsZW5maXggPSBuZXcgdXRpbHMuQnVmMzIoNTEyKTtcbiAgICBkaXN0Zml4ID0gbmV3IHV0aWxzLkJ1ZjMyKDMyKTtcblxuICAgIC8qIGxpdGVyYWwvbGVuZ3RoIHRhYmxlICovXG4gICAgc3ltID0gMDtcbiAgICB3aGlsZSAoc3ltIDwgMTQ0KSB7IHN0YXRlLmxlbnNbc3ltKytdID0gODsgfVxuICAgIHdoaWxlIChzeW0gPCAyNTYpIHsgc3RhdGUubGVuc1tzeW0rK10gPSA5OyB9XG4gICAgd2hpbGUgKHN5bSA8IDI4MCkgeyBzdGF0ZS5sZW5zW3N5bSsrXSA9IDc7IH1cbiAgICB3aGlsZSAoc3ltIDwgMjg4KSB7IHN0YXRlLmxlbnNbc3ltKytdID0gODsgfVxuXG4gICAgaW5mbGF0ZV90YWJsZShMRU5TLCAgc3RhdGUubGVucywgMCwgMjg4LCBsZW5maXgsICAgMCwgc3RhdGUud29yaywgeyBiaXRzOiA5IH0pO1xuXG4gICAgLyogZGlzdGFuY2UgdGFibGUgKi9cbiAgICBzeW0gPSAwO1xuICAgIHdoaWxlIChzeW0gPCAzMikgeyBzdGF0ZS5sZW5zW3N5bSsrXSA9IDU7IH1cblxuICAgIGluZmxhdGVfdGFibGUoRElTVFMsIHN0YXRlLmxlbnMsIDAsIDMyLCAgIGRpc3RmaXgsIDAsIHN0YXRlLndvcmssIHsgYml0czogNSB9KTtcblxuICAgIC8qIGRvIHRoaXMganVzdCBvbmNlICovXG4gICAgdmlyZ2luID0gZmFsc2U7XG4gIH1cblxuICBzdGF0ZS5sZW5jb2RlID0gbGVuZml4O1xuICBzdGF0ZS5sZW5iaXRzID0gOTtcbiAgc3RhdGUuZGlzdGNvZGUgPSBkaXN0Zml4O1xuICBzdGF0ZS5kaXN0Yml0cyA9IDU7XG59XG5cblxuLypcbiBVcGRhdGUgdGhlIHdpbmRvdyB3aXRoIHRoZSBsYXN0IHdzaXplIChub3JtYWxseSAzMkspIGJ5dGVzIHdyaXR0ZW4gYmVmb3JlXG4gcmV0dXJuaW5nLiAgSWYgd2luZG93IGRvZXMgbm90IGV4aXN0IHlldCwgY3JlYXRlIGl0LiAgVGhpcyBpcyBvbmx5IGNhbGxlZFxuIHdoZW4gYSB3aW5kb3cgaXMgYWxyZWFkeSBpbiB1c2UsIG9yIHdoZW4gb3V0cHV0IGhhcyBiZWVuIHdyaXR0ZW4gZHVyaW5nIHRoaXNcbiBpbmZsYXRlIGNhbGwsIGJ1dCB0aGUgZW5kIG9mIHRoZSBkZWZsYXRlIHN0cmVhbSBoYXMgbm90IGJlZW4gcmVhY2hlZCB5ZXQuXG4gSXQgaXMgYWxzbyBjYWxsZWQgdG8gY3JlYXRlIGEgd2luZG93IGZvciBkaWN0aW9uYXJ5IGRhdGEgd2hlbiBhIGRpY3Rpb25hcnlcbiBpcyBsb2FkZWQuXG5cbiBQcm92aWRpbmcgb3V0cHV0IGJ1ZmZlcnMgbGFyZ2VyIHRoYW4gMzJLIHRvIGluZmxhdGUoKSBzaG91bGQgcHJvdmlkZSBhIHNwZWVkXG4gYWR2YW50YWdlLCBzaW5jZSBvbmx5IHRoZSBsYXN0IDMySyBvZiBvdXRwdXQgaXMgY29waWVkIHRvIHRoZSBzbGlkaW5nIHdpbmRvd1xuIHVwb24gcmV0dXJuIGZyb20gaW5mbGF0ZSgpLCBhbmQgc2luY2UgYWxsIGRpc3RhbmNlcyBhZnRlciB0aGUgZmlyc3QgMzJLIG9mXG4gb3V0cHV0IHdpbGwgZmFsbCBpbiB0aGUgb3V0cHV0IGRhdGEsIG1ha2luZyBtYXRjaCBjb3BpZXMgc2ltcGxlciBhbmQgZmFzdGVyLlxuIFRoZSBhZHZhbnRhZ2UgbWF5IGJlIGRlcGVuZGVudCBvbiB0aGUgc2l6ZSBvZiB0aGUgcHJvY2Vzc29yJ3MgZGF0YSBjYWNoZXMuXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZXdpbmRvdyhzdHJtLCBzcmMsIGVuZCwgY29weSkge1xuICB2YXIgZGlzdDtcbiAgdmFyIHN0YXRlID0gc3RybS5zdGF0ZTtcblxuICAvKiBpZiBpdCBoYXNuJ3QgYmVlbiBkb25lIGFscmVhZHksIGFsbG9jYXRlIHNwYWNlIGZvciB0aGUgd2luZG93ICovXG4gIGlmIChzdGF0ZS53aW5kb3cgPT09IG51bGwpIHtcbiAgICBzdGF0ZS53c2l6ZSA9IDEgPDwgc3RhdGUud2JpdHM7XG4gICAgc3RhdGUud25leHQgPSAwO1xuICAgIHN0YXRlLndoYXZlID0gMDtcblxuICAgIHN0YXRlLndpbmRvdyA9IG5ldyB1dGlscy5CdWY4KHN0YXRlLndzaXplKTtcbiAgfVxuXG4gIC8qIGNvcHkgc3RhdGUtPndzaXplIG9yIGxlc3Mgb3V0cHV0IGJ5dGVzIGludG8gdGhlIGNpcmN1bGFyIHdpbmRvdyAqL1xuICBpZiAoY29weSA+PSBzdGF0ZS53c2l6ZSkge1xuICAgIHV0aWxzLmFycmF5U2V0KHN0YXRlLndpbmRvdywgc3JjLCBlbmQgLSBzdGF0ZS53c2l6ZSwgc3RhdGUud3NpemUsIDApO1xuICAgIHN0YXRlLnduZXh0ID0gMDtcbiAgICBzdGF0ZS53aGF2ZSA9IHN0YXRlLndzaXplO1xuICB9XG4gIGVsc2Uge1xuICAgIGRpc3QgPSBzdGF0ZS53c2l6ZSAtIHN0YXRlLnduZXh0O1xuICAgIGlmIChkaXN0ID4gY29weSkge1xuICAgICAgZGlzdCA9IGNvcHk7XG4gICAgfVxuICAgIC8vem1lbWNweShzdGF0ZS0+d2luZG93ICsgc3RhdGUtPnduZXh0LCBlbmQgLSBjb3B5LCBkaXN0KTtcbiAgICB1dGlscy5hcnJheVNldChzdGF0ZS53aW5kb3csIHNyYywgZW5kIC0gY29weSwgZGlzdCwgc3RhdGUud25leHQpO1xuICAgIGNvcHkgLT0gZGlzdDtcbiAgICBpZiAoY29weSkge1xuICAgICAgLy96bWVtY3B5KHN0YXRlLT53aW5kb3csIGVuZCAtIGNvcHksIGNvcHkpO1xuICAgICAgdXRpbHMuYXJyYXlTZXQoc3RhdGUud2luZG93LCBzcmMsIGVuZCAtIGNvcHksIGNvcHksIDApO1xuICAgICAgc3RhdGUud25leHQgPSBjb3B5O1xuICAgICAgc3RhdGUud2hhdmUgPSBzdGF0ZS53c2l6ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzdGF0ZS53bmV4dCArPSBkaXN0O1xuICAgICAgaWYgKHN0YXRlLnduZXh0ID09PSBzdGF0ZS53c2l6ZSkgeyBzdGF0ZS53bmV4dCA9IDA7IH1cbiAgICAgIGlmIChzdGF0ZS53aGF2ZSA8IHN0YXRlLndzaXplKSB7IHN0YXRlLndoYXZlICs9IGRpc3Q7IH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIDA7XG59XG5cbmZ1bmN0aW9uIGluZmxhdGUoc3RybSwgZmx1c2gpIHtcbiAgdmFyIHN0YXRlO1xuICB2YXIgaW5wdXQsIG91dHB1dDsgICAgICAgICAgLy8gaW5wdXQvb3V0cHV0IGJ1ZmZlcnNcbiAgdmFyIG5leHQ7ICAgICAgICAgICAgICAgICAgIC8qIG5leHQgaW5wdXQgSU5ERVggKi9cbiAgdmFyIHB1dDsgICAgICAgICAgICAgICAgICAgIC8qIG5leHQgb3V0cHV0IElOREVYICovXG4gIHZhciBoYXZlLCBsZWZ0OyAgICAgICAgICAgICAvKiBhdmFpbGFibGUgaW5wdXQgYW5kIG91dHB1dCAqL1xuICB2YXIgaG9sZDsgICAgICAgICAgICAgICAgICAgLyogYml0IGJ1ZmZlciAqL1xuICB2YXIgYml0czsgICAgICAgICAgICAgICAgICAgLyogYml0cyBpbiBiaXQgYnVmZmVyICovXG4gIHZhciBfaW4sIF9vdXQ7ICAgICAgICAgICAgICAvKiBzYXZlIHN0YXJ0aW5nIGF2YWlsYWJsZSBpbnB1dCBhbmQgb3V0cHV0ICovXG4gIHZhciBjb3B5OyAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2Ygc3RvcmVkIG9yIG1hdGNoIGJ5dGVzIHRvIGNvcHkgKi9cbiAgdmFyIGZyb207ICAgICAgICAgICAgICAgICAgIC8qIHdoZXJlIHRvIGNvcHkgbWF0Y2ggYnl0ZXMgZnJvbSAqL1xuICB2YXIgZnJvbV9zb3VyY2U7XG4gIHZhciBoZXJlID0gMDsgICAgICAgICAgICAgICAvKiBjdXJyZW50IGRlY29kaW5nIHRhYmxlIGVudHJ5ICovXG4gIHZhciBoZXJlX2JpdHMsIGhlcmVfb3AsIGhlcmVfdmFsOyAvLyBwYWtlZCBcImhlcmVcIiBkZW5vcm1hbGl6ZWQgKEpTIHNwZWNpZmljKVxuICAvL3ZhciBsYXN0OyAgICAgICAgICAgICAgICAgICAvKiBwYXJlbnQgdGFibGUgZW50cnkgKi9cbiAgdmFyIGxhc3RfYml0cywgbGFzdF9vcCwgbGFzdF92YWw7IC8vIHBha2VkIFwibGFzdFwiIGRlbm9ybWFsaXplZCAoSlMgc3BlY2lmaWMpXG4gIHZhciBsZW47ICAgICAgICAgICAgICAgICAgICAvKiBsZW5ndGggdG8gY29weSBmb3IgcmVwZWF0cywgYml0cyB0byBkcm9wICovXG4gIHZhciByZXQ7ICAgICAgICAgICAgICAgICAgICAvKiByZXR1cm4gY29kZSAqL1xuICB2YXIgaGJ1ZiA9IG5ldyB1dGlscy5CdWY4KDQpOyAgICAvKiBidWZmZXIgZm9yIGd6aXAgaGVhZGVyIGNyYyBjYWxjdWxhdGlvbiAqL1xuICB2YXIgb3B0cztcblxuICB2YXIgbjsgLy8gdGVtcG9yYXJ5IHZhciBmb3IgTkVFRF9CSVRTXG5cbiAgdmFyIG9yZGVyID0gLyogcGVybXV0YXRpb24gb2YgY29kZSBsZW5ndGhzICovXG4gICAgWyAxNiwgMTcsIDE4LCAwLCA4LCA3LCA5LCA2LCAxMCwgNSwgMTEsIDQsIDEyLCAzLCAxMywgMiwgMTQsIDEsIDE1IF07XG5cblxuICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUgfHwgIXN0cm0ub3V0cHV0IHx8XG4gICAgICAoIXN0cm0uaW5wdXQgJiYgc3RybS5hdmFpbF9pbiAhPT0gMCkpIHtcbiAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gIH1cblxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG4gIGlmIChzdGF0ZS5tb2RlID09PSBUWVBFKSB7IHN0YXRlLm1vZGUgPSBUWVBFRE87IH0gICAgLyogc2tpcCBjaGVjayAqL1xuXG5cbiAgLy8tLS0gTE9BRCgpIC0tLVxuICBwdXQgPSBzdHJtLm5leHRfb3V0O1xuICBvdXRwdXQgPSBzdHJtLm91dHB1dDtcbiAgbGVmdCA9IHN0cm0uYXZhaWxfb3V0O1xuICBuZXh0ID0gc3RybS5uZXh0X2luO1xuICBpbnB1dCA9IHN0cm0uaW5wdXQ7XG4gIGhhdmUgPSBzdHJtLmF2YWlsX2luO1xuICBob2xkID0gc3RhdGUuaG9sZDtcbiAgYml0cyA9IHN0YXRlLmJpdHM7XG4gIC8vLS0tXG5cbiAgX2luID0gaGF2ZTtcbiAgX291dCA9IGxlZnQ7XG4gIHJldCA9IFpfT0s7XG5cbiAgaW5mX2xlYXZlOiAvLyBnb3RvIGVtdWxhdGlvblxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChzdGF0ZS5tb2RlKSB7XG4gICAgICBjYXNlIEhFQUQ6XG4gICAgICAgIGlmIChzdGF0ZS53cmFwID09PSAwKSB7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IFRZUEVETztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLz09PSBORUVEQklUUygxNik7XG4gICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgaWYgKChzdGF0ZS53cmFwICYgMikgJiYgaG9sZCA9PT0gMHg4YjFmKSB7ICAvKiBnemlwIGhlYWRlciAqL1xuICAgICAgICAgIHN0YXRlLmNoZWNrID0gMC8qY3JjMzIoMEwsIFpfTlVMTCwgMCkqLztcbiAgICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTtcbiAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7XG4gICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7XG4gICAgICAgICAgLy89PT0vL1xuXG4gICAgICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgICAgICBob2xkID0gMDtcbiAgICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgICAvLz09PS8vXG4gICAgICAgICAgc3RhdGUubW9kZSA9IEZMQUdTO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmZsYWdzID0gMDsgICAgICAgICAgIC8qIGV4cGVjdCB6bGliIGhlYWRlciAqL1xuICAgICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICAgIHN0YXRlLmhlYWQuZG9uZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKHN0YXRlLndyYXAgJiAxKSB8fCAgIC8qIGNoZWNrIGlmIHpsaWIgaGVhZGVyIGFsbG93ZWQgKi9cbiAgICAgICAgICAoKChob2xkICYgMHhmZikvKkJJVFMoOCkqLyA8PCA4KSArIChob2xkID4+IDgpKSAlIDMxKSB7XG4gICAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGhlYWRlciBjaGVjayc7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGhvbGQgJiAweDBmKS8qQklUUyg0KSovICE9PSBaX0RFRkxBVEVEKSB7XG4gICAgICAgICAgc3RybS5tc2cgPSAndW5rbm93biBjb21wcmVzc2lvbiBtZXRob2QnO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy8tLS0gRFJPUEJJVFMoNCkgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IDQ7XG4gICAgICAgIGJpdHMgLT0gNDtcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICBsZW4gPSAoaG9sZCAmIDB4MGYpLypCSVRTKDQpKi8gKyA4O1xuICAgICAgICBpZiAoc3RhdGUud2JpdHMgPT09IDApIHtcbiAgICAgICAgICBzdGF0ZS53Yml0cyA9IGxlbjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsZW4gPiBzdGF0ZS53Yml0cykge1xuICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgd2luZG93IHNpemUnO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuZG1heCA9IDEgPDwgbGVuO1xuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgemxpYiBoZWFkZXIgb2tcXG5cIikpO1xuICAgICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSAxLyphZGxlcjMyKDBMLCBaX05VTEwsIDApKi87XG4gICAgICAgIHN0YXRlLm1vZGUgPSBob2xkICYgMHgyMDAgPyBESUNUSUQgOiBUWVBFO1xuICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICBob2xkID0gMDtcbiAgICAgICAgYml0cyA9IDA7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIEZMQUdTOlxuICAgICAgICAvLz09PSBORUVEQklUUygxNik7ICovXG4gICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUuZmxhZ3MgPSBob2xkO1xuICAgICAgICBpZiAoKHN0YXRlLmZsYWdzICYgMHhmZikgIT09IFpfREVGTEFURUQpIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICd1bmtub3duIGNvbXByZXNzaW9uIG1ldGhvZCc7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweGUwMDApIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICd1bmtub3duIGhlYWRlciBmbGFncyBzZXQnO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgICBzdGF0ZS5oZWFkLnRleHQgPSAoKGhvbGQgPj4gOCkgJiAxKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTtcbiAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7XG4gICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICB9XG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdGF0ZS5tb2RlID0gVElNRTtcbiAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSBUSU1FOlxuICAgICAgICAvLz09PSBORUVEQklUUygzMik7ICovXG4gICAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgICBzdGF0ZS5oZWFkLnRpbWUgPSBob2xkO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAgIC8vPT09IENSQzQoc3RhdGUuY2hlY2ssIGhvbGQpXG4gICAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmO1xuICAgICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmO1xuICAgICAgICAgIGhidWZbMl0gPSAoaG9sZCA+Pj4gMTYpICYgMHhmZjtcbiAgICAgICAgICBoYnVmWzNdID0gKGhvbGQgPj4+IDI0KSAmIDB4ZmY7XG4gICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgNCwgMCk7XG4gICAgICAgICAgLy89PT1cbiAgICAgICAgfVxuICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICBob2xkID0gMDtcbiAgICAgICAgYml0cyA9IDA7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUubW9kZSA9IE9TO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIE9TOlxuICAgICAgICAvLz09PSBORUVEQklUUygxNik7ICovXG4gICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgICBzdGF0ZS5oZWFkLnhmbGFncyA9IChob2xkICYgMHhmZik7XG4gICAgICAgICAgc3RhdGUuaGVhZC5vcyA9IChob2xkID4+IDgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAgIC8vPT09IENSQzIoc3RhdGUuY2hlY2ssIGhvbGQpO1xuICAgICAgICAgIGhidWZbMF0gPSBob2xkICYgMHhmZjtcbiAgICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjtcbiAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBoYnVmLCAyLCAwKTtcbiAgICAgICAgICAvLz09PS8vXG4gICAgICAgIH1cbiAgICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAvLz09PS8vXG4gICAgICAgIHN0YXRlLm1vZGUgPSBFWExFTjtcbiAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSBFWExFTjpcbiAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwNDAwKSB7XG4gICAgICAgICAgLy89PT0gTkVFREJJVFMoMTYpOyAqL1xuICAgICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHtcbiAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICBzdGF0ZS5sZW5ndGggPSBob2xkO1xuICAgICAgICAgIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhX2xlbiA9IGhvbGQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAgICAgLy89PT0gQ1JDMihzdGF0ZS5jaGVjaywgaG9sZCk7XG4gICAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjtcbiAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApO1xuICAgICAgICAgICAgLy89PT0vL1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICAgIGhvbGQgPSAwO1xuICAgICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgICAgc3RhdGUuaGVhZC5leHRyYSA9IG51bGwvKlpfTlVMTCovO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLm1vZGUgPSBFWFRSQTtcbiAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSBFWFRSQTpcbiAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwNDAwKSB7XG4gICAgICAgICAgY29weSA9IHN0YXRlLmxlbmd0aDtcbiAgICAgICAgICBpZiAoY29weSA+IGhhdmUpIHsgY29weSA9IGhhdmU7IH1cbiAgICAgICAgICBpZiAoY29weSkge1xuICAgICAgICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgICAgICAgbGVuID0gc3RhdGUuaGVhZC5leHRyYV9sZW4gLSBzdGF0ZS5sZW5ndGg7XG4gICAgICAgICAgICAgIGlmICghc3RhdGUuaGVhZC5leHRyYSkge1xuICAgICAgICAgICAgICAgIC8vIFVzZSB1bnR5cGVkIGFycmF5IGZvciBtb3JlIGNvbnZlbmllbnQgcHJvY2Vzc2luZyBsYXRlclxuICAgICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEgPSBuZXcgQXJyYXkoc3RhdGUuaGVhZC5leHRyYV9sZW4pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHV0aWxzLmFycmF5U2V0KFxuICAgICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEsXG4gICAgICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICAgICAgbmV4dCxcbiAgICAgICAgICAgICAgICAvLyBleHRyYSBmaWVsZCBpcyBsaW1pdGVkIHRvIDY1NTM2IGJ5dGVzXG4gICAgICAgICAgICAgICAgLy8gLSBubyBuZWVkIGZvciBhZGRpdGlvbmFsIHNpemUgY2hlY2tcbiAgICAgICAgICAgICAgICBjb3B5LFxuICAgICAgICAgICAgICAgIC8qbGVuICsgY29weSA+IHN0YXRlLmhlYWQuZXh0cmFfbWF4IC0gbGVuID8gc3RhdGUuaGVhZC5leHRyYV9tYXggOiBjb3B5LCovXG4gICAgICAgICAgICAgICAgbGVuXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIC8vem1lbWNweShzdGF0ZS5oZWFkLmV4dHJhICsgbGVuLCBuZXh0LFxuICAgICAgICAgICAgICAvLyAgICAgICAgbGVuICsgY29weSA+IHN0YXRlLmhlYWQuZXh0cmFfbWF4ID9cbiAgICAgICAgICAgICAgLy8gICAgICAgIHN0YXRlLmhlYWQuZXh0cmFfbWF4IC0gbGVuIDogY29weSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaW5wdXQsIGNvcHksIG5leHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGF2ZSAtPSBjb3B5O1xuICAgICAgICAgICAgbmV4dCArPSBjb3B5O1xuICAgICAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdGF0ZS5sZW5ndGgpIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUubGVuZ3RoID0gMDtcbiAgICAgICAgc3RhdGUubW9kZSA9IE5BTUU7XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgTkFNRTpcbiAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwODAwKSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgY29weSA9IDA7XG4gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgLy8gVE9ETzogMiBvciAxIGJ5dGVzP1xuICAgICAgICAgICAgbGVuID0gaW5wdXRbbmV4dCArIGNvcHkrK107XG4gICAgICAgICAgICAvKiB1c2UgY29uc3RhbnQgbGltaXQgYmVjYXVzZSBpbiBqcyB3ZSBzaG91bGQgbm90IHByZWFsbG9jYXRlIG1lbW9yeSAqL1xuICAgICAgICAgICAgaWYgKHN0YXRlLmhlYWQgJiYgbGVuICYmXG4gICAgICAgICAgICAgICAgKHN0YXRlLmxlbmd0aCA8IDY1NTM2IC8qc3RhdGUuaGVhZC5uYW1lX21heCovKSkge1xuICAgICAgICAgICAgICBzdGF0ZS5oZWFkLm5hbWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShsZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gd2hpbGUgKGxlbiAmJiBjb3B5IDwgaGF2ZSk7XG5cbiAgICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGlucHV0LCBjb3B5LCBuZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaGF2ZSAtPSBjb3B5O1xuICAgICAgICAgIG5leHQgKz0gY29weTtcbiAgICAgICAgICBpZiAobGVuKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgICBzdGF0ZS5oZWFkLm5hbWUgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHN0YXRlLmxlbmd0aCA9IDA7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBDT01NRU5UO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIENPTU1FTlQ6XG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MTAwMCkge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGNvcHkgPSAwO1xuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgIGxlbiA9IGlucHV0W25leHQgKyBjb3B5KytdO1xuICAgICAgICAgICAgLyogdXNlIGNvbnN0YW50IGxpbWl0IGJlY2F1c2UgaW4ganMgd2Ugc2hvdWxkIG5vdCBwcmVhbGxvY2F0ZSBtZW1vcnkgKi9cbiAgICAgICAgICAgIGlmIChzdGF0ZS5oZWFkICYmIGxlbiAmJlxuICAgICAgICAgICAgICAgIChzdGF0ZS5sZW5ndGggPCA2NTUzNiAvKnN0YXRlLmhlYWQuY29tbV9tYXgqLykpIHtcbiAgICAgICAgICAgICAgc3RhdGUuaGVhZC5jb21tZW50ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUobGVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IHdoaWxlIChsZW4gJiYgY29weSA8IGhhdmUpO1xuICAgICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaW5wdXQsIGNvcHksIG5leHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBoYXZlIC09IGNvcHk7XG4gICAgICAgICAgbmV4dCArPSBjb3B5O1xuICAgICAgICAgIGlmIChsZW4pIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICAgIHN0YXRlLmhlYWQuY29tbWVudCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUubW9kZSA9IEhDUkM7XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgSENSQzpcbiAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgICAgLy89PT0gTkVFREJJVFMoMTYpOyAqL1xuICAgICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHtcbiAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICBpZiAoaG9sZCAhPT0gKHN0YXRlLmNoZWNrICYgMHhmZmZmKSkge1xuICAgICAgICAgICAgc3RybS5tc2cgPSAnaGVhZGVyIGNyYyBtaXNtYXRjaCc7XG4gICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgICAgYml0cyA9IDA7XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdGF0ZS5oZWFkKSB7XG4gICAgICAgICAgc3RhdGUuaGVhZC5oY3JjID0gKChzdGF0ZS5mbGFncyA+PiA5KSAmIDEpO1xuICAgICAgICAgIHN0YXRlLmhlYWQuZG9uZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMDtcbiAgICAgICAgc3RhdGUubW9kZSA9IFRZUEU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBESUNUSUQ6XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDMyKTsgKi9cbiAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSB6c3dhcDMyKGhvbGQpO1xuICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICBob2xkID0gMDtcbiAgICAgICAgYml0cyA9IDA7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUubW9kZSA9IERJQ1Q7XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgRElDVDpcbiAgICAgICAgaWYgKHN0YXRlLmhhdmVkaWN0ID09PSAwKSB7XG4gICAgICAgICAgLy8tLS0gUkVTVE9SRSgpIC0tLVxuICAgICAgICAgIHN0cm0ubmV4dF9vdXQgPSBwdXQ7XG4gICAgICAgICAgc3RybS5hdmFpbF9vdXQgPSBsZWZ0O1xuICAgICAgICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7XG4gICAgICAgICAgc3RybS5hdmFpbF9pbiA9IGhhdmU7XG4gICAgICAgICAgc3RhdGUuaG9sZCA9IGhvbGQ7XG4gICAgICAgICAgc3RhdGUuYml0cyA9IGJpdHM7XG4gICAgICAgICAgLy8tLS1cbiAgICAgICAgICByZXR1cm4gWl9ORUVEX0RJQ1Q7XG4gICAgICAgIH1cbiAgICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMS8qYWRsZXIzMigwTCwgWl9OVUxMLCAwKSovO1xuICAgICAgICBzdGF0ZS5tb2RlID0gVFlQRTtcbiAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSBUWVBFOlxuICAgICAgICBpZiAoZmx1c2ggPT09IFpfQkxPQ0sgfHwgZmx1c2ggPT09IFpfVFJFRVMpIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgVFlQRURPOlxuICAgICAgICBpZiAoc3RhdGUubGFzdCkge1xuICAgICAgICAgIC8vLS0tIEJZVEVCSVRTKCkgLS0tLy9cbiAgICAgICAgICBob2xkID4+Pj0gYml0cyAmIDc7XG4gICAgICAgICAgYml0cyAtPSBiaXRzICYgNztcbiAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgc3RhdGUubW9kZSA9IENIRUNLO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDMpOyAqL1xuICAgICAgICB3aGlsZSAoYml0cyA8IDMpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUubGFzdCA9IChob2xkICYgMHgwMSkvKkJJVFMoMSkqLztcbiAgICAgICAgLy8tLS0gRFJPUEJJVFMoMSkgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IDE7XG4gICAgICAgIGJpdHMgLT0gMTtcbiAgICAgICAgLy8tLS0vL1xuXG4gICAgICAgIHN3aXRjaCAoKGhvbGQgJiAweDAzKS8qQklUUygyKSovKSB7XG4gICAgICAgICAgY2FzZSAwOiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogc3RvcmVkIGJsb2NrICovXG4gICAgICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICBzdG9yZWQgYmxvY2slc1xcblwiLFxuICAgICAgICAgICAgLy8gICAgICAgIHN0YXRlLmxhc3QgPyBcIiAobGFzdClcIiA6IFwiXCIpKTtcbiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBTVE9SRUQ7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIDE6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBmaXhlZCBibG9jayAqL1xuICAgICAgICAgICAgZml4ZWR0YWJsZXMoc3RhdGUpO1xuICAgICAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgZml4ZWQgY29kZXMgYmxvY2slc1xcblwiLFxuICAgICAgICAgICAgLy8gICAgICAgIHN0YXRlLmxhc3QgPyBcIiAobGFzdClcIiA6IFwiXCIpKTtcbiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBMRU5fOyAgICAgICAgICAgICAvKiBkZWNvZGUgY29kZXMgKi9cbiAgICAgICAgICAgIGlmIChmbHVzaCA9PT0gWl9UUkVFUykge1xuICAgICAgICAgICAgICAvLy0tLSBEUk9QQklUUygyKSAtLS0vL1xuICAgICAgICAgICAgICBob2xkID4+Pj0gMjtcbiAgICAgICAgICAgICAgYml0cyAtPSAyO1xuICAgICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgMjogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGR5bmFtaWMgYmxvY2sgKi9cbiAgICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgIGR5bmFtaWMgY29kZXMgYmxvY2slc1xcblwiLFxuICAgICAgICAgICAgLy8gICAgICAgIHN0YXRlLmxhc3QgPyBcIiAobGFzdClcIiA6IFwiXCIpKTtcbiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBUQUJMRTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgYmxvY2sgdHlwZSc7XG4gICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICB9XG4gICAgICAgIC8vLS0tIERST1BCSVRTKDIpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSAyO1xuICAgICAgICBiaXRzIC09IDI7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFNUT1JFRDpcbiAgICAgICAgLy8tLS0gQllURUJJVFMoKSAtLS0vLyAvKiBnbyB0byBieXRlIGJvdW5kYXJ5ICovXG4gICAgICAgIGhvbGQgPj4+PSBiaXRzICYgNztcbiAgICAgICAgYml0cyAtPSBiaXRzICYgNztcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICAvLz09PSBORUVEQklUUygzMik7ICovXG4gICAgICAgIHdoaWxlIChiaXRzIDwgMzIpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgaWYgKChob2xkICYgMHhmZmZmKSAhPT0gKChob2xkID4+PiAxNikgXiAweGZmZmYpKSB7XG4gICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBzdG9yZWQgYmxvY2sgbGVuZ3Rocyc7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5sZW5ndGggPSBob2xkICYgMHhmZmZmO1xuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgIHN0b3JlZCBsZW5ndGggJXVcXG5cIixcbiAgICAgICAgLy8gICAgICAgIHN0YXRlLmxlbmd0aCkpO1xuICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICBob2xkID0gMDtcbiAgICAgICAgYml0cyA9IDA7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUubW9kZSA9IENPUFlfO1xuICAgICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgQ09QWV86XG4gICAgICAgIHN0YXRlLm1vZGUgPSBDT1BZO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIENPUFk6XG4gICAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7XG4gICAgICAgIGlmIChjb3B5KSB7XG4gICAgICAgICAgaWYgKGNvcHkgPiBoYXZlKSB7IGNvcHkgPSBoYXZlOyB9XG4gICAgICAgICAgaWYgKGNvcHkgPiBsZWZ0KSB7IGNvcHkgPSBsZWZ0OyB9XG4gICAgICAgICAgaWYgKGNvcHkgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgLy8tLS0gem1lbWNweShwdXQsIG5leHQsIGNvcHkpOyAtLS1cbiAgICAgICAgICB1dGlscy5hcnJheVNldChvdXRwdXQsIGlucHV0LCBuZXh0LCBjb3B5LCBwdXQpO1xuICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICBoYXZlIC09IGNvcHk7XG4gICAgICAgICAgbmV4dCArPSBjb3B5O1xuICAgICAgICAgIGxlZnQgLT0gY29weTtcbiAgICAgICAgICBwdXQgKz0gY29weTtcbiAgICAgICAgICBzdGF0ZS5sZW5ndGggLT0gY29weTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgIHN0b3JlZCBlbmRcXG5cIikpO1xuICAgICAgICBzdGF0ZS5tb2RlID0gVFlQRTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFRBQkxFOlxuICAgICAgICAvLz09PSBORUVEQklUUygxNCk7ICovXG4gICAgICAgIHdoaWxlIChiaXRzIDwgMTQpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUubmxlbiA9IChob2xkICYgMHgxZikvKkJJVFMoNSkqLyArIDI1NztcbiAgICAgICAgLy8tLS0gRFJPUEJJVFMoNSkgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IDU7XG4gICAgICAgIGJpdHMgLT0gNTtcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICBzdGF0ZS5uZGlzdCA9IChob2xkICYgMHgxZikvKkJJVFMoNSkqLyArIDE7XG4gICAgICAgIC8vLS0tIERST1BCSVRTKDUpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSA1O1xuICAgICAgICBiaXRzIC09IDU7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgc3RhdGUubmNvZGUgPSAoaG9sZCAmIDB4MGYpLypCSVRTKDQpKi8gKyA0O1xuICAgICAgICAvLy0tLSBEUk9QQklUUyg0KSAtLS0vL1xuICAgICAgICBob2xkID4+Pj0gNDtcbiAgICAgICAgYml0cyAtPSA0O1xuICAgICAgICAvLy0tLS8vXG4vLyNpZm5kZWYgUEtaSVBfQlVHX1dPUktBUk9VTkRcbiAgICAgICAgaWYgKHN0YXRlLm5sZW4gPiAyODYgfHwgc3RhdGUubmRpc3QgPiAzMCkge1xuICAgICAgICAgIHN0cm0ubXNnID0gJ3RvbyBtYW55IGxlbmd0aCBvciBkaXN0YW5jZSBzeW1ib2xzJztcbiAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4vLyNlbmRpZlxuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgIHRhYmxlIHNpemVzIG9rXFxuXCIpKTtcbiAgICAgICAgc3RhdGUuaGF2ZSA9IDA7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBMRU5MRU5TO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIExFTkxFTlM6XG4gICAgICAgIHdoaWxlIChzdGF0ZS5oYXZlIDwgc3RhdGUubmNvZGUpIHtcbiAgICAgICAgICAvLz09PSBORUVEQklUUygzKTtcbiAgICAgICAgICB3aGlsZSAoYml0cyA8IDMpIHtcbiAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICBzdGF0ZS5sZW5zW29yZGVyW3N0YXRlLmhhdmUrK11dID0gKGhvbGQgJiAweDA3KTsvL0JJVFMoMyk7XG4gICAgICAgICAgLy8tLS0gRFJPUEJJVFMoMykgLS0tLy9cbiAgICAgICAgICBob2xkID4+Pj0gMztcbiAgICAgICAgICBiaXRzIC09IDM7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICB9XG4gICAgICAgIHdoaWxlIChzdGF0ZS5oYXZlIDwgMTkpIHtcbiAgICAgICAgICBzdGF0ZS5sZW5zW29yZGVyW3N0YXRlLmhhdmUrK11dID0gMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBoYXZlIHNlcGFyYXRlIHRhYmxlcyAmIG5vIHBvaW50ZXJzLiAyIGNvbW1lbnRlZCBsaW5lcyBiZWxvdyBub3QgbmVlZGVkLlxuICAgICAgICAvL3N0YXRlLm5leHQgPSBzdGF0ZS5jb2RlcztcbiAgICAgICAgLy9zdGF0ZS5sZW5jb2RlID0gc3RhdGUubmV4dDtcbiAgICAgICAgLy8gU3dpdGNoIHRvIHVzZSBkeW5hbWljIHRhYmxlXG4gICAgICAgIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5sZW5keW47XG4gICAgICAgIHN0YXRlLmxlbmJpdHMgPSA3O1xuXG4gICAgICAgIG9wdHMgPSB7IGJpdHM6IHN0YXRlLmxlbmJpdHMgfTtcbiAgICAgICAgcmV0ID0gaW5mbGF0ZV90YWJsZShDT0RFUywgc3RhdGUubGVucywgMCwgMTksIHN0YXRlLmxlbmNvZGUsIDAsIHN0YXRlLndvcmssIG9wdHMpO1xuICAgICAgICBzdGF0ZS5sZW5iaXRzID0gb3B0cy5iaXRzO1xuXG4gICAgICAgIGlmIChyZXQpIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGNvZGUgbGVuZ3RocyBzZXQnO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICBjb2RlIGxlbmd0aHMgb2tcXG5cIikpO1xuICAgICAgICBzdGF0ZS5oYXZlID0gMDtcbiAgICAgICAgc3RhdGUubW9kZSA9IENPREVMRU5TO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIENPREVMRU5TOlxuICAgICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IHN0YXRlLm5sZW4gKyBzdGF0ZS5uZGlzdCkge1xuICAgICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgIGhlcmUgPSBzdGF0ZS5sZW5jb2RlW2hvbGQgJiAoKDEgPDwgc3RhdGUubGVuYml0cykgLSAxKV07LypCSVRTKHN0YXRlLmxlbmJpdHMpKi9cbiAgICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0O1xuICAgICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgMHhmZmZmO1xuXG4gICAgICAgICAgICBpZiAoKGhlcmVfYml0cykgPD0gYml0cykgeyBicmVhazsgfVxuICAgICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGhlcmVfdmFsIDwgMTYpIHtcbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy9cbiAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0cztcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICAgIHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSsrXSA9IGhlcmVfdmFsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChoZXJlX3ZhbCA9PT0gMTYpIHtcbiAgICAgICAgICAgICAgLy89PT0gTkVFREJJVFMoaGVyZS5iaXRzICsgMik7XG4gICAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyAyO1xuICAgICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHtcbiAgICAgICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vL1xuICAgICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0cztcbiAgICAgICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgICAgICBpZiAoc3RhdGUuaGF2ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgYml0IGxlbmd0aCByZXBlYXQnO1xuICAgICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgbGVuID0gc3RhdGUubGVuc1tzdGF0ZS5oYXZlIC0gMV07XG4gICAgICAgICAgICAgIGNvcHkgPSAzICsgKGhvbGQgJiAweDAzKTsvL0JJVFMoMik7XG4gICAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDIpIC0tLS8vXG4gICAgICAgICAgICAgIGhvbGQgPj4+PSAyO1xuICAgICAgICAgICAgICBiaXRzIC09IDI7XG4gICAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGhlcmVfdmFsID09PSAxNykge1xuICAgICAgICAgICAgICAvLz09PSBORUVEQklUUyhoZXJlLmJpdHMgKyAzKTtcbiAgICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDM7XG4gICAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikge1xuICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy89PT0vL1xuICAgICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgICAgICAgIGJpdHMgLT0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgICAgIGxlbiA9IDA7XG4gICAgICAgICAgICAgIGNvcHkgPSAzICsgKGhvbGQgJiAweDA3KTsvL0JJVFMoMyk7XG4gICAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDMpIC0tLS8vXG4gICAgICAgICAgICAgIGhvbGQgPj4+PSAzO1xuICAgICAgICAgICAgICBiaXRzIC09IDM7XG4gICAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAvLz09PSBORUVEQklUUyhoZXJlLmJpdHMgKyA3KTtcbiAgICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDc7XG4gICAgICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikge1xuICAgICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgLy89PT0vL1xuICAgICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgICAgICAgIGJpdHMgLT0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgICAgIGxlbiA9IDA7XG4gICAgICAgICAgICAgIGNvcHkgPSAxMSArIChob2xkICYgMHg3Zik7Ly9CSVRTKDcpO1xuICAgICAgICAgICAgICAvLy0tLSBEUk9QQklUUyg3KSAtLS0vL1xuICAgICAgICAgICAgICBob2xkID4+Pj0gNztcbiAgICAgICAgICAgICAgYml0cyAtPSA3O1xuICAgICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3RhdGUuaGF2ZSArIGNvcHkgPiBzdGF0ZS5ubGVuICsgc3RhdGUubmRpc3QpIHtcbiAgICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdCc7XG4gICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgd2hpbGUgKGNvcHktLSkge1xuICAgICAgICAgICAgICBzdGF0ZS5sZW5zW3N0YXRlLmhhdmUrK10gPSBsZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyogaGFuZGxlIGVycm9yIGJyZWFrcyBpbiB3aGlsZSAqL1xuICAgICAgICBpZiAoc3RhdGUubW9kZSA9PT0gQkFEKSB7IGJyZWFrOyB9XG5cbiAgICAgICAgLyogY2hlY2sgZm9yIGVuZC1vZi1ibG9jayBjb2RlIChiZXR0ZXIgaGF2ZSBvbmUpICovXG4gICAgICAgIGlmIChzdGF0ZS5sZW5zWzI1Nl0gPT09IDApIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGNvZGUgLS0gbWlzc2luZyBlbmQtb2YtYmxvY2snO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICAvKiBidWlsZCBjb2RlIHRhYmxlcyAtLSBub3RlOiBkbyBub3QgY2hhbmdlIHRoZSBsZW5iaXRzIG9yIGRpc3RiaXRzXG4gICAgICAgICAgIHZhbHVlcyBoZXJlICg5IGFuZCA2KSB3aXRob3V0IHJlYWRpbmcgdGhlIGNvbW1lbnRzIGluIGluZnRyZWVzLmhcbiAgICAgICAgICAgY29uY2VybmluZyB0aGUgRU5PVUdIIGNvbnN0YW50cywgd2hpY2ggZGVwZW5kIG9uIHRob3NlIHZhbHVlcyAqL1xuICAgICAgICBzdGF0ZS5sZW5iaXRzID0gOTtcblxuICAgICAgICBvcHRzID0geyBiaXRzOiBzdGF0ZS5sZW5iaXRzIH07XG4gICAgICAgIHJldCA9IGluZmxhdGVfdGFibGUoTEVOUywgc3RhdGUubGVucywgMCwgc3RhdGUubmxlbiwgc3RhdGUubGVuY29kZSwgMCwgc3RhdGUud29yaywgb3B0cyk7XG4gICAgICAgIC8vIFdlIGhhdmUgc2VwYXJhdGUgdGFibGVzICYgbm8gcG9pbnRlcnMuIDIgY29tbWVudGVkIGxpbmVzIGJlbG93IG5vdCBuZWVkZWQuXG4gICAgICAgIC8vIHN0YXRlLm5leHRfaW5kZXggPSBvcHRzLnRhYmxlX2luZGV4O1xuICAgICAgICBzdGF0ZS5sZW5iaXRzID0gb3B0cy5iaXRzO1xuICAgICAgICAvLyBzdGF0ZS5sZW5jb2RlID0gc3RhdGUubmV4dDtcblxuICAgICAgICBpZiAocmV0KSB7XG4gICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBsaXRlcmFsL2xlbmd0aHMgc2V0JztcbiAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUuZGlzdGJpdHMgPSA2O1xuICAgICAgICAvL3N0YXRlLmRpc3Rjb2RlLmNvcHkoc3RhdGUuY29kZXMpO1xuICAgICAgICAvLyBTd2l0Y2ggdG8gdXNlIGR5bmFtaWMgdGFibGVcbiAgICAgICAgc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5kaXN0ZHluO1xuICAgICAgICBvcHRzID0geyBiaXRzOiBzdGF0ZS5kaXN0Yml0cyB9O1xuICAgICAgICByZXQgPSBpbmZsYXRlX3RhYmxlKERJU1RTLCBzdGF0ZS5sZW5zLCBzdGF0ZS5ubGVuLCBzdGF0ZS5uZGlzdCwgc3RhdGUuZGlzdGNvZGUsIDAsIHN0YXRlLndvcmssIG9wdHMpO1xuICAgICAgICAvLyBXZSBoYXZlIHNlcGFyYXRlIHRhYmxlcyAmIG5vIHBvaW50ZXJzLiAyIGNvbW1lbnRlZCBsaW5lcyBiZWxvdyBub3QgbmVlZGVkLlxuICAgICAgICAvLyBzdGF0ZS5uZXh0X2luZGV4ID0gb3B0cy50YWJsZV9pbmRleDtcbiAgICAgICAgc3RhdGUuZGlzdGJpdHMgPSBvcHRzLmJpdHM7XG4gICAgICAgIC8vIHN0YXRlLmRpc3Rjb2RlID0gc3RhdGUubmV4dDtcblxuICAgICAgICBpZiAocmV0KSB7XG4gICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZXMgc2V0JztcbiAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vVHJhY2V2KChzdGRlcnIsICdpbmZsYXRlOiAgICAgICBjb2RlcyBva1xcbicpKTtcbiAgICAgICAgc3RhdGUubW9kZSA9IExFTl87XG4gICAgICAgIGlmIChmbHVzaCA9PT0gWl9UUkVFUykgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSBMRU5fOlxuICAgICAgICBzdGF0ZS5tb2RlID0gTEVOO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIExFTjpcbiAgICAgICAgaWYgKGhhdmUgPj0gNiAmJiBsZWZ0ID49IDI1OCkge1xuICAgICAgICAgIC8vLS0tIFJFU1RPUkUoKSAtLS1cbiAgICAgICAgICBzdHJtLm5leHRfb3V0ID0gcHV0O1xuICAgICAgICAgIHN0cm0uYXZhaWxfb3V0ID0gbGVmdDtcbiAgICAgICAgICBzdHJtLm5leHRfaW4gPSBuZXh0O1xuICAgICAgICAgIHN0cm0uYXZhaWxfaW4gPSBoYXZlO1xuICAgICAgICAgIHN0YXRlLmhvbGQgPSBob2xkO1xuICAgICAgICAgIHN0YXRlLmJpdHMgPSBiaXRzO1xuICAgICAgICAgIC8vLS0tXG4gICAgICAgICAgaW5mbGF0ZV9mYXN0KHN0cm0sIF9vdXQpO1xuICAgICAgICAgIC8vLS0tIExPQUQoKSAtLS1cbiAgICAgICAgICBwdXQgPSBzdHJtLm5leHRfb3V0O1xuICAgICAgICAgIG91dHB1dCA9IHN0cm0ub3V0cHV0O1xuICAgICAgICAgIGxlZnQgPSBzdHJtLmF2YWlsX291dDtcbiAgICAgICAgICBuZXh0ID0gc3RybS5uZXh0X2luO1xuICAgICAgICAgIGlucHV0ID0gc3RybS5pbnB1dDtcbiAgICAgICAgICBoYXZlID0gc3RybS5hdmFpbF9pbjtcbiAgICAgICAgICBob2xkID0gc3RhdGUuaG9sZDtcbiAgICAgICAgICBiaXRzID0gc3RhdGUuYml0cztcbiAgICAgICAgICAvLy0tLVxuXG4gICAgICAgICAgaWYgKHN0YXRlLm1vZGUgPT09IFRZUEUpIHtcbiAgICAgICAgICAgIHN0YXRlLmJhY2sgPSAtMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuYmFjayA9IDA7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICBoZXJlID0gc3RhdGUubGVuY29kZVtob2xkICYgKCgxIDw8IHN0YXRlLmxlbmJpdHMpIC0gMSldOyAgLypCSVRTKHN0YXRlLmxlbmJpdHMpKi9cbiAgICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDtcbiAgICAgICAgICBoZXJlX29wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgMHhmZmZmO1xuXG4gICAgICAgICAgaWYgKGhlcmVfYml0cyA8PSBiaXRzKSB7IGJyZWFrOyB9XG4gICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICB9XG4gICAgICAgIGlmIChoZXJlX29wICYmIChoZXJlX29wICYgMHhmMCkgPT09IDApIHtcbiAgICAgICAgICBsYXN0X2JpdHMgPSBoZXJlX2JpdHM7XG4gICAgICAgICAgbGFzdF9vcCA9IGhlcmVfb3A7XG4gICAgICAgICAgbGFzdF92YWwgPSBoZXJlX3ZhbDtcbiAgICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICBoZXJlID0gc3RhdGUubGVuY29kZVtsYXN0X3ZhbCArXG4gICAgICAgICAgICAgICAgICAgICgoaG9sZCAmICgoMSA8PCAobGFzdF9iaXRzICsgbGFzdF9vcCkpIC0gMSkpLypCSVRTKGxhc3QuYml0cyArIGxhc3Qub3ApKi8gPj4gbGFzdF9iaXRzKV07XG4gICAgICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDtcbiAgICAgICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjtcbiAgICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICAgICAgaWYgKChsYXN0X2JpdHMgKyBoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH1cbiAgICAgICAgICAgIC8vLS0tIFBVTExCWVRFKCkgLS0tLy9cbiAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgfVxuICAgICAgICAgIC8vLS0tIERST1BCSVRTKGxhc3QuYml0cykgLS0tLy9cbiAgICAgICAgICBob2xkID4+Pj0gbGFzdF9iaXRzO1xuICAgICAgICAgIGJpdHMgLT0gbGFzdF9iaXRzO1xuICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICBzdGF0ZS5iYWNrICs9IGxhc3RfYml0cztcbiAgICAgICAgfVxuICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgIGJpdHMgLT0gaGVyZV9iaXRzO1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIHN0YXRlLmJhY2sgKz0gaGVyZV9iaXRzO1xuICAgICAgICBzdGF0ZS5sZW5ndGggPSBoZXJlX3ZhbDtcbiAgICAgICAgaWYgKGhlcmVfb3AgPT09IDApIHtcbiAgICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgaGVyZS52YWwgPj0gMHgyMCAmJiBoZXJlLnZhbCA8IDB4N2YgP1xuICAgICAgICAgIC8vICAgICAgICBcImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAnJWMnXFxuXCIgOlxuICAgICAgICAgIC8vICAgICAgICBcImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAweCUwMnhcXG5cIiwgaGVyZS52YWwpKTtcbiAgICAgICAgICBzdGF0ZS5tb2RlID0gTElUO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoZXJlX29wICYgMzIpIHtcbiAgICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGVuZCBvZiBibG9ja1xcblwiKSk7XG4gICAgICAgICAgc3RhdGUuYmFjayA9IC0xO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChoZXJlX29wICYgNjQpIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGUnO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUuZXh0cmEgPSBoZXJlX29wICYgMTU7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBMRU5FWFQ7XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGNhc2UgTEVORVhUOlxuICAgICAgICBpZiAoc3RhdGUuZXh0cmEpIHtcbiAgICAgICAgICAvLz09PSBORUVEQklUUyhzdGF0ZS5leHRyYSk7XG4gICAgICAgICAgbiA9IHN0YXRlLmV4dHJhO1xuICAgICAgICAgIHdoaWxlIChiaXRzIDwgbikge1xuICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICAgIHN0YXRlLmxlbmd0aCArPSBob2xkICYgKCgxIDw8IHN0YXRlLmV4dHJhKSAtIDEpLypCSVRTKHN0YXRlLmV4dHJhKSovO1xuICAgICAgICAgIC8vLS0tIERST1BCSVRTKHN0YXRlLmV4dHJhKSAtLS0vL1xuICAgICAgICAgIGhvbGQgPj4+PSBzdGF0ZS5leHRyYTtcbiAgICAgICAgICBiaXRzIC09IHN0YXRlLmV4dHJhO1xuICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICBzdGF0ZS5iYWNrICs9IHN0YXRlLmV4dHJhO1xuICAgICAgICB9XG4gICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgICAgbGVuZ3RoICV1XFxuXCIsIHN0YXRlLmxlbmd0aCkpO1xuICAgICAgICBzdGF0ZS53YXMgPSBzdGF0ZS5sZW5ndGg7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBESVNUO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIERJU1Q6XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICBoZXJlID0gc3RhdGUuZGlzdGNvZGVbaG9sZCAmICgoMSA8PCBzdGF0ZS5kaXN0Yml0cykgLSAxKV07LypCSVRTKHN0YXRlLmRpc3RiaXRzKSovXG4gICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7XG4gICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICAgIGlmICgoaGVyZV9iaXRzKSA8PSBiaXRzKSB7IGJyZWFrOyB9XG4gICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICB9XG4gICAgICAgIGlmICgoaGVyZV9vcCAmIDB4ZjApID09PSAwKSB7XG4gICAgICAgICAgbGFzdF9iaXRzID0gaGVyZV9iaXRzO1xuICAgICAgICAgIGxhc3Rfb3AgPSBoZXJlX29wO1xuICAgICAgICAgIGxhc3RfdmFsID0gaGVyZV92YWw7XG4gICAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgaGVyZSA9IHN0YXRlLmRpc3Rjb2RlW2xhc3RfdmFsICtcbiAgICAgICAgICAgICAgICAgICAgKChob2xkICYgKCgxIDw8IChsYXN0X2JpdHMgKyBsYXN0X29wKSkgLSAxKSkvKkJJVFMobGFzdC5iaXRzICsgbGFzdC5vcCkqLyA+PiBsYXN0X2JpdHMpXTtcbiAgICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0O1xuICAgICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICAgICAgaGVyZV92YWwgPSBoZXJlICYgMHhmZmZmO1xuXG4gICAgICAgICAgICBpZiAoKGxhc3RfYml0cyArIGhlcmVfYml0cykgPD0gYml0cykgeyBicmVhazsgfVxuICAgICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8tLS0gRFJPUEJJVFMobGFzdC5iaXRzKSAtLS0vL1xuICAgICAgICAgIGhvbGQgPj4+PSBsYXN0X2JpdHM7XG4gICAgICAgICAgYml0cyAtPSBsYXN0X2JpdHM7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIHN0YXRlLmJhY2sgKz0gbGFzdF9iaXRzO1xuICAgICAgICB9XG4gICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IGhlcmVfYml0cztcbiAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgc3RhdGUuYmFjayArPSBoZXJlX2JpdHM7XG4gICAgICAgIGlmIChoZXJlX29wICYgNjQpIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIGNvZGUnO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgc3RhdGUub2Zmc2V0ID0gaGVyZV92YWw7XG4gICAgICAgIHN0YXRlLmV4dHJhID0gKGhlcmVfb3ApICYgMTU7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBESVNURVhUO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIERJU1RFWFQ6XG4gICAgICAgIGlmIChzdGF0ZS5leHRyYSkge1xuICAgICAgICAgIC8vPT09IE5FRURCSVRTKHN0YXRlLmV4dHJhKTtcbiAgICAgICAgICBuID0gc3RhdGUuZXh0cmE7XG4gICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7XG4gICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLz09PS8vXG4gICAgICAgICAgc3RhdGUub2Zmc2V0ICs9IGhvbGQgJiAoKDEgPDwgc3RhdGUuZXh0cmEpIC0gMSkvKkJJVFMoc3RhdGUuZXh0cmEpKi87XG4gICAgICAgICAgLy8tLS0gRFJPUEJJVFMoc3RhdGUuZXh0cmEpIC0tLS8vXG4gICAgICAgICAgaG9sZCA+Pj49IHN0YXRlLmV4dHJhO1xuICAgICAgICAgIGJpdHMgLT0gc3RhdGUuZXh0cmE7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIHN0YXRlLmJhY2sgKz0gc3RhdGUuZXh0cmE7XG4gICAgICAgIH1cbi8vI2lmZGVmIElORkxBVEVfU1RSSUNUXG4gICAgICAgIGlmIChzdGF0ZS5vZmZzZXQgPiBzdGF0ZS5kbWF4KSB7XG4gICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2snO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbi8vI2VuZGlmXG4gICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgICAgZGlzdGFuY2UgJXVcXG5cIiwgc3RhdGUub2Zmc2V0KSk7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBNQVRDSDtcbiAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSBNQVRDSDpcbiAgICAgICAgaWYgKGxlZnQgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGNvcHkgPSBfb3V0IC0gbGVmdDtcbiAgICAgICAgaWYgKHN0YXRlLm9mZnNldCA+IGNvcHkpIHsgICAgICAgICAvKiBjb3B5IGZyb20gd2luZG93ICovXG4gICAgICAgICAgY29weSA9IHN0YXRlLm9mZnNldCAtIGNvcHk7XG4gICAgICAgICAgaWYgKGNvcHkgPiBzdGF0ZS53aGF2ZSkge1xuICAgICAgICAgICAgaWYgKHN0YXRlLnNhbmUpIHtcbiAgICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2snO1xuICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbi8vICghKSBUaGlzIGJsb2NrIGlzIGRpc2FibGVkIGluIHpsaWIgZGVmYXVsdHMsXG4vLyBkb24ndCBlbmFibGUgaXQgZm9yIGJpbmFyeSBjb21wYXRpYmlsaXR5XG4vLyNpZmRlZiBJTkZMQVRFX0FMTE9XX0lOVkFMSURfRElTVEFOQ0VfVE9PRkFSX0FSUlJcbi8vICAgICAgICAgIFRyYWNlKChzdGRlcnIsIFwiaW5mbGF0ZS5jIHRvbyBmYXJcXG5cIikpO1xuLy8gICAgICAgICAgY29weSAtPSBzdGF0ZS53aGF2ZTtcbi8vICAgICAgICAgIGlmIChjb3B5ID4gc3RhdGUubGVuZ3RoKSB7IGNvcHkgPSBzdGF0ZS5sZW5ndGg7IH1cbi8vICAgICAgICAgIGlmIChjb3B5ID4gbGVmdCkgeyBjb3B5ID0gbGVmdDsgfVxuLy8gICAgICAgICAgbGVmdCAtPSBjb3B5O1xuLy8gICAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7XG4vLyAgICAgICAgICBkbyB7XG4vLyAgICAgICAgICAgIG91dHB1dFtwdXQrK10gPSAwO1xuLy8gICAgICAgICAgfSB3aGlsZSAoLS1jb3B5KTtcbi8vICAgICAgICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHsgc3RhdGUubW9kZSA9IExFTjsgfVxuLy8gICAgICAgICAgYnJlYWs7XG4vLyNlbmRpZlxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29weSA+IHN0YXRlLnduZXh0KSB7XG4gICAgICAgICAgICBjb3B5IC09IHN0YXRlLnduZXh0O1xuICAgICAgICAgICAgZnJvbSA9IHN0YXRlLndzaXplIC0gY29weTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmcm9tID0gc3RhdGUud25leHQgLSBjb3B5O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29weSA+IHN0YXRlLmxlbmd0aCkgeyBjb3B5ID0gc3RhdGUubGVuZ3RoOyB9XG4gICAgICAgICAgZnJvbV9zb3VyY2UgPSBzdGF0ZS53aW5kb3c7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogY29weSBmcm9tIG91dHB1dCAqL1xuICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0O1xuICAgICAgICAgIGZyb20gPSBwdXQgLSBzdGF0ZS5vZmZzZXQ7XG4gICAgICAgICAgY29weSA9IHN0YXRlLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29weSA+IGxlZnQpIHsgY29weSA9IGxlZnQ7IH1cbiAgICAgICAgbGVmdCAtPSBjb3B5O1xuICAgICAgICBzdGF0ZS5sZW5ndGggLT0gY29weTtcbiAgICAgICAgZG8ge1xuICAgICAgICAgIG91dHB1dFtwdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgICB9IHdoaWxlICgtLWNvcHkpO1xuICAgICAgICBpZiAoc3RhdGUubGVuZ3RoID09PSAwKSB7IHN0YXRlLm1vZGUgPSBMRU47IH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIExJVDpcbiAgICAgICAgaWYgKGxlZnQgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIG91dHB1dFtwdXQrK10gPSBzdGF0ZS5sZW5ndGg7XG4gICAgICAgIGxlZnQtLTtcbiAgICAgICAgc3RhdGUubW9kZSA9IExFTjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIENIRUNLOlxuICAgICAgICBpZiAoc3RhdGUud3JhcCkge1xuICAgICAgICAgIC8vPT09IE5FRURCSVRTKDMyKTtcbiAgICAgICAgICB3aGlsZSAoYml0cyA8IDMyKSB7XG4gICAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAgIC8vIFVzZSAnfCcgaW5zdGVhZCBvZiAnKycgdG8gbWFrZSBzdXJlIHRoYXQgcmVzdWx0IGlzIHNpZ25lZFxuICAgICAgICAgICAgaG9sZCB8PSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICBfb3V0IC09IGxlZnQ7XG4gICAgICAgICAgc3RybS50b3RhbF9vdXQgKz0gX291dDtcbiAgICAgICAgICBzdGF0ZS50b3RhbCArPSBfb3V0O1xuICAgICAgICAgIGlmIChfb3V0KSB7XG4gICAgICAgICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPVxuICAgICAgICAgICAgICAgIC8qVVBEQVRFKHN0YXRlLmNoZWNrLCBwdXQgLSBfb3V0LCBfb3V0KTsqL1xuICAgICAgICAgICAgICAgIChzdGF0ZS5mbGFncyA/IGNyYzMyKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHB1dCAtIF9vdXQpIDogYWRsZXIzMihzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBwdXQgLSBfb3V0KSk7XG5cbiAgICAgICAgICB9XG4gICAgICAgICAgX291dCA9IGxlZnQ7XG4gICAgICAgICAgLy8gTkI6IGNyYzMyIHN0b3JlZCBhcyBzaWduZWQgMzItYml0IGludCwgenN3YXAzMiByZXR1cm5zIHNpZ25lZCB0b29cbiAgICAgICAgICBpZiAoKHN0YXRlLmZsYWdzID8gaG9sZCA6IHpzd2FwMzIoaG9sZCkpICE9PSBzdGF0ZS5jaGVjaykge1xuICAgICAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGRhdGEgY2hlY2snO1xuICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICAgIGhvbGQgPSAwO1xuICAgICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgY2hlY2sgbWF0Y2hlcyB0cmFpbGVyXFxuXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5tb2RlID0gTEVOR1RIO1xuICAgICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIExFTkdUSDpcbiAgICAgICAgaWYgKHN0YXRlLndyYXAgJiYgc3RhdGUuZmxhZ3MpIHtcbiAgICAgICAgICAvLz09PSBORUVEQklUUygzMik7XG4gICAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICAgIGlmIChob2xkICE9PSAoc3RhdGUudG90YWwgJiAweGZmZmZmZmZmKSkge1xuICAgICAgICAgICAgc3RybS5tc2cgPSAnaW5jb3JyZWN0IGxlbmd0aCBjaGVjayc7XG4gICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgICAgYml0cyA9IDA7XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICBsZW5ndGggbWF0Y2hlcyB0cmFpbGVyXFxuXCIpKTtcbiAgICAgICAgfVxuICAgICAgICBzdGF0ZS5tb2RlID0gRE9ORTtcbiAgICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgICAgY2FzZSBET05FOlxuICAgICAgICByZXQgPSBaX1NUUkVBTV9FTkQ7XG4gICAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICAgIGNhc2UgQkFEOlxuICAgICAgICByZXQgPSBaX0RBVEFfRVJST1I7XG4gICAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICAgIGNhc2UgTUVNOlxuICAgICAgICByZXR1cm4gWl9NRU1fRVJST1I7XG4gICAgICBjYXNlIFNZTkM6XG4gICAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgICB9XG4gIH1cblxuICAvLyBpbmZfbGVhdmUgPC0gaGVyZSBpcyByZWFsIHBsYWNlIGZvciBcImdvdG8gaW5mX2xlYXZlXCIsIGVtdWxhdGVkIHZpYSBcImJyZWFrIGluZl9sZWF2ZVwiXG5cbiAgLypcbiAgICAgUmV0dXJuIGZyb20gaW5mbGF0ZSgpLCB1cGRhdGluZyB0aGUgdG90YWwgY291bnRzIGFuZCB0aGUgY2hlY2sgdmFsdWUuXG4gICAgIElmIHRoZXJlIHdhcyBubyBwcm9ncmVzcyBkdXJpbmcgdGhlIGluZmxhdGUoKSBjYWxsLCByZXR1cm4gYSBidWZmZXJcbiAgICAgZXJyb3IuICBDYWxsIHVwZGF0ZXdpbmRvdygpIHRvIGNyZWF0ZSBhbmQvb3IgdXBkYXRlIHRoZSB3aW5kb3cgc3RhdGUuXG4gICAgIE5vdGU6IGEgbWVtb3J5IGVycm9yIGZyb20gaW5mbGF0ZSgpIGlzIG5vbi1yZWNvdmVyYWJsZS5cbiAgICovXG5cbiAgLy8tLS0gUkVTVE9SRSgpIC0tLVxuICBzdHJtLm5leHRfb3V0ID0gcHV0O1xuICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7XG4gIHN0cm0ubmV4dF9pbiA9IG5leHQ7XG4gIHN0cm0uYXZhaWxfaW4gPSBoYXZlO1xuICBzdGF0ZS5ob2xkID0gaG9sZDtcbiAgc3RhdGUuYml0cyA9IGJpdHM7XG4gIC8vLS0tXG5cbiAgaWYgKHN0YXRlLndzaXplIHx8IChfb3V0ICE9PSBzdHJtLmF2YWlsX291dCAmJiBzdGF0ZS5tb2RlIDwgQkFEICYmXG4gICAgICAgICAgICAgICAgICAgICAgKHN0YXRlLm1vZGUgPCBDSEVDSyB8fCBmbHVzaCAhPT0gWl9GSU5JU0gpKSkge1xuICAgIGlmICh1cGRhdGV3aW5kb3coc3RybSwgc3RybS5vdXRwdXQsIHN0cm0ubmV4dF9vdXQsIF9vdXQgLSBzdHJtLmF2YWlsX291dCkpIHtcbiAgICAgIHN0YXRlLm1vZGUgPSBNRU07XG4gICAgICByZXR1cm4gWl9NRU1fRVJST1I7XG4gICAgfVxuICB9XG4gIF9pbiAtPSBzdHJtLmF2YWlsX2luO1xuICBfb3V0IC09IHN0cm0uYXZhaWxfb3V0O1xuICBzdHJtLnRvdGFsX2luICs9IF9pbjtcbiAgc3RybS50b3RhbF9vdXQgKz0gX291dDtcbiAgc3RhdGUudG90YWwgKz0gX291dDtcbiAgaWYgKHN0YXRlLndyYXAgJiYgX291dCkge1xuICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IC8qVVBEQVRFKHN0YXRlLmNoZWNrLCBzdHJtLm5leHRfb3V0IC0gX291dCwgX291dCk7Ki9cbiAgICAgIChzdGF0ZS5mbGFncyA/IGNyYzMyKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHN0cm0ubmV4dF9vdXQgLSBfb3V0KSA6IGFkbGVyMzIoc3RhdGUuY2hlY2ssIG91dHB1dCwgX291dCwgc3RybS5uZXh0X291dCAtIF9vdXQpKTtcbiAgfVxuICBzdHJtLmRhdGFfdHlwZSA9IHN0YXRlLmJpdHMgKyAoc3RhdGUubGFzdCA/IDY0IDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAoc3RhdGUubW9kZSA9PT0gVFlQRSA/IDEyOCA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgKHN0YXRlLm1vZGUgPT09IExFTl8gfHwgc3RhdGUubW9kZSA9PT0gQ09QWV8gPyAyNTYgOiAwKTtcbiAgaWYgKCgoX2luID09PSAwICYmIF9vdXQgPT09IDApIHx8IGZsdXNoID09PSBaX0ZJTklTSCkgJiYgcmV0ID09PSBaX09LKSB7XG4gICAgcmV0ID0gWl9CVUZfRVJST1I7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZUVuZChzdHJtKSB7XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlIC8qfHwgc3RybS0+emZyZWUgPT0gKGZyZWVfZnVuYykwKi8pIHtcbiAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gIH1cblxuICB2YXIgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICBpZiAoc3RhdGUud2luZG93KSB7XG4gICAgc3RhdGUud2luZG93ID0gbnVsbDtcbiAgfVxuICBzdHJtLnN0YXRlID0gbnVsbDtcbiAgcmV0dXJuIFpfT0s7XG59XG5cbmZ1bmN0aW9uIGluZmxhdGVHZXRIZWFkZXIoc3RybSwgaGVhZCkge1xuICB2YXIgc3RhdGU7XG5cbiAgLyogY2hlY2sgc3RhdGUgKi9cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG4gIGlmICgoc3RhdGUud3JhcCAmIDIpID09PSAwKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuXG4gIC8qIHNhdmUgaGVhZGVyIHN0cnVjdHVyZSAqL1xuICBzdGF0ZS5oZWFkID0gaGVhZDtcbiAgaGVhZC5kb25lID0gZmFsc2U7XG4gIHJldHVybiBaX09LO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlU2V0RGljdGlvbmFyeShzdHJtLCBkaWN0aW9uYXJ5KSB7XG4gIHZhciBkaWN0TGVuZ3RoID0gZGljdGlvbmFyeS5sZW5ndGg7XG5cbiAgdmFyIHN0YXRlO1xuICB2YXIgZGljdGlkO1xuICB2YXIgcmV0O1xuXG4gIC8qIGNoZWNrIHN0YXRlICovXG4gIGlmICghc3RybSAvKiA9PSBaX05VTEwgKi8gfHwgIXN0cm0uc3RhdGUgLyogPT0gWl9OVUxMICovKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG5cbiAgaWYgKHN0YXRlLndyYXAgIT09IDAgJiYgc3RhdGUubW9kZSAhPT0gRElDVCkge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuXG4gIC8qIGNoZWNrIGZvciBjb3JyZWN0IGRpY3Rpb25hcnkgaWRlbnRpZmllciAqL1xuICBpZiAoc3RhdGUubW9kZSA9PT0gRElDVCkge1xuICAgIGRpY3RpZCA9IDE7IC8qIGFkbGVyMzIoMCwgbnVsbCwgMCkqL1xuICAgIC8qIGRpY3RpZCA9IGFkbGVyMzIoZGljdGlkLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoKTsgKi9cbiAgICBkaWN0aWQgPSBhZGxlcjMyKGRpY3RpZCwgZGljdGlvbmFyeSwgZGljdExlbmd0aCwgMCk7XG4gICAgaWYgKGRpY3RpZCAhPT0gc3RhdGUuY2hlY2spIHtcbiAgICAgIHJldHVybiBaX0RBVEFfRVJST1I7XG4gICAgfVxuICB9XG4gIC8qIGNvcHkgZGljdGlvbmFyeSB0byB3aW5kb3cgdXNpbmcgdXBkYXRld2luZG93KCksIHdoaWNoIHdpbGwgYW1lbmQgdGhlXG4gICBleGlzdGluZyBkaWN0aW9uYXJ5IGlmIGFwcHJvcHJpYXRlICovXG4gIHJldCA9IHVwZGF0ZXdpbmRvdyhzdHJtLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoLCBkaWN0TGVuZ3RoKTtcbiAgaWYgKHJldCkge1xuICAgIHN0YXRlLm1vZGUgPSBNRU07XG4gICAgcmV0dXJuIFpfTUVNX0VSUk9SO1xuICB9XG4gIHN0YXRlLmhhdmVkaWN0ID0gMTtcbiAgLy8gVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICBkaWN0aW9uYXJ5IHNldFxcblwiKSk7XG4gIHJldHVybiBaX09LO1xufVxuXG5leHBvcnRzLmluZmxhdGVSZXNldCA9IGluZmxhdGVSZXNldDtcbmV4cG9ydHMuaW5mbGF0ZVJlc2V0MiA9IGluZmxhdGVSZXNldDI7XG5leHBvcnRzLmluZmxhdGVSZXNldEtlZXAgPSBpbmZsYXRlUmVzZXRLZWVwO1xuZXhwb3J0cy5pbmZsYXRlSW5pdCA9IGluZmxhdGVJbml0O1xuZXhwb3J0cy5pbmZsYXRlSW5pdDIgPSBpbmZsYXRlSW5pdDI7XG5leHBvcnRzLmluZmxhdGUgPSBpbmZsYXRlO1xuZXhwb3J0cy5pbmZsYXRlRW5kID0gaW5mbGF0ZUVuZDtcbmV4cG9ydHMuaW5mbGF0ZUdldEhlYWRlciA9IGluZmxhdGVHZXRIZWFkZXI7XG5leHBvcnRzLmluZmxhdGVTZXREaWN0aW9uYXJ5ID0gaW5mbGF0ZVNldERpY3Rpb25hcnk7XG5leHBvcnRzLmluZmxhdGVJbmZvID0gJ3Bha28gaW5mbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdCknO1xuXG4vKiBOb3QgaW1wbGVtZW50ZWRcbmV4cG9ydHMuaW5mbGF0ZUNvcHkgPSBpbmZsYXRlQ29weTtcbmV4cG9ydHMuaW5mbGF0ZUdldERpY3Rpb25hcnkgPSBpbmZsYXRlR2V0RGljdGlvbmFyeTtcbmV4cG9ydHMuaW5mbGF0ZU1hcmsgPSBpbmZsYXRlTWFyaztcbmV4cG9ydHMuaW5mbGF0ZVByaW1lID0gaW5mbGF0ZVByaW1lO1xuZXhwb3J0cy5pbmZsYXRlU3luYyA9IGluZmxhdGVTeW5jO1xuZXhwb3J0cy5pbmZsYXRlU3luY1BvaW50ID0gaW5mbGF0ZVN5bmNQb2ludDtcbmV4cG9ydHMuaW5mbGF0ZVVuZGVybWluZSA9IGluZmxhdGVVbmRlcm1pbmU7XG4qL1xuXG5cbi8qKiovIH0pLFxuLyogMTUgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5cblxuLy8gKEMpIDE5OTUtMjAxMyBKZWFuLWxvdXAgR2FpbGx5IGFuZCBNYXJrIEFkbGVyXG4vLyAoQykgMjAxNC0yMDE3IFZpdGFseSBQdXpyaW4gYW5kIEFuZHJleSBUdXBpdHNpblxuLy9cbi8vIFRoaXMgc29mdHdhcmUgaXMgcHJvdmlkZWQgJ2FzLWlzJywgd2l0aG91dCBhbnkgZXhwcmVzcyBvciBpbXBsaWVkXG4vLyB3YXJyYW50eS4gSW4gbm8gZXZlbnQgd2lsbCB0aGUgYXV0aG9ycyBiZSBoZWxkIGxpYWJsZSBmb3IgYW55IGRhbWFnZXNcbi8vIGFyaXNpbmcgZnJvbSB0aGUgdXNlIG9mIHRoaXMgc29mdHdhcmUuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBncmFudGVkIHRvIGFueW9uZSB0byB1c2UgdGhpcyBzb2Z0d2FyZSBmb3IgYW55IHB1cnBvc2UsXG4vLyBpbmNsdWRpbmcgY29tbWVyY2lhbCBhcHBsaWNhdGlvbnMsIGFuZCB0byBhbHRlciBpdCBhbmQgcmVkaXN0cmlidXRlIGl0XG4vLyBmcmVlbHksIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyByZXN0cmljdGlvbnM6XG4vL1xuLy8gMS4gVGhlIG9yaWdpbiBvZiB0aGlzIHNvZnR3YXJlIG11c3Qgbm90IGJlIG1pc3JlcHJlc2VudGVkOyB5b3UgbXVzdCBub3Rcbi8vICAgY2xhaW0gdGhhdCB5b3Ugd3JvdGUgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLiBJZiB5b3UgdXNlIHRoaXMgc29mdHdhcmVcbi8vICAgaW4gYSBwcm9kdWN0LCBhbiBhY2tub3dsZWRnbWVudCBpbiB0aGUgcHJvZHVjdCBkb2N1bWVudGF0aW9uIHdvdWxkIGJlXG4vLyAgIGFwcHJlY2lhdGVkIGJ1dCBpcyBub3QgcmVxdWlyZWQuXG4vLyAyLiBBbHRlcmVkIHNvdXJjZSB2ZXJzaW9ucyBtdXN0IGJlIHBsYWlubHkgbWFya2VkIGFzIHN1Y2gsIGFuZCBtdXN0IG5vdCBiZVxuLy8gICBtaXNyZXByZXNlbnRlZCBhcyBiZWluZyB0aGUgb3JpZ2luYWwgc29mdHdhcmUuXG4vLyAzLiBUaGlzIG5vdGljZSBtYXkgbm90IGJlIHJlbW92ZWQgb3IgYWx0ZXJlZCBmcm9tIGFueSBzb3VyY2UgZGlzdHJpYnV0aW9uLlxuXG4vLyBTZWUgc3RhdGUgZGVmcyBmcm9tIGluZmxhdGUuanNcbnZhciBCQUQgPSAzMDsgICAgICAgLyogZ290IGEgZGF0YSBlcnJvciAtLSByZW1haW4gaGVyZSB1bnRpbCByZXNldCAqL1xudmFyIFRZUEUgPSAxMjsgICAgICAvKiBpOiB3YWl0aW5nIGZvciB0eXBlIGJpdHMsIGluY2x1ZGluZyBsYXN0LWZsYWcgYml0ICovXG5cbi8qXG4gICBEZWNvZGUgbGl0ZXJhbCwgbGVuZ3RoLCBhbmQgZGlzdGFuY2UgY29kZXMgYW5kIHdyaXRlIG91dCB0aGUgcmVzdWx0aW5nXG4gICBsaXRlcmFsIGFuZCBtYXRjaCBieXRlcyB1bnRpbCBlaXRoZXIgbm90IGVub3VnaCBpbnB1dCBvciBvdXRwdXQgaXNcbiAgIGF2YWlsYWJsZSwgYW4gZW5kLW9mLWJsb2NrIGlzIGVuY291bnRlcmVkLCBvciBhIGRhdGEgZXJyb3IgaXMgZW5jb3VudGVyZWQuXG4gICBXaGVuIGxhcmdlIGVub3VnaCBpbnB1dCBhbmQgb3V0cHV0IGJ1ZmZlcnMgYXJlIHN1cHBsaWVkIHRvIGluZmxhdGUoKSwgZm9yXG4gICBleGFtcGxlLCBhIDE2SyBpbnB1dCBidWZmZXIgYW5kIGEgNjRLIG91dHB1dCBidWZmZXIsIG1vcmUgdGhhbiA5NSUgb2YgdGhlXG4gICBpbmZsYXRlIGV4ZWN1dGlvbiB0aW1lIGlzIHNwZW50IGluIHRoaXMgcm91dGluZS5cblxuICAgRW50cnkgYXNzdW1wdGlvbnM6XG5cbiAgICAgICAgc3RhdGUubW9kZSA9PT0gTEVOXG4gICAgICAgIHN0cm0uYXZhaWxfaW4gPj0gNlxuICAgICAgICBzdHJtLmF2YWlsX291dCA+PSAyNThcbiAgICAgICAgc3RhcnQgPj0gc3RybS5hdmFpbF9vdXRcbiAgICAgICAgc3RhdGUuYml0cyA8IDhcblxuICAgT24gcmV0dXJuLCBzdGF0ZS5tb2RlIGlzIG9uZSBvZjpcblxuICAgICAgICBMRU4gLS0gcmFuIG91dCBvZiBlbm91Z2ggb3V0cHV0IHNwYWNlIG9yIGVub3VnaCBhdmFpbGFibGUgaW5wdXRcbiAgICAgICAgVFlQRSAtLSByZWFjaGVkIGVuZCBvZiBibG9jayBjb2RlLCBpbmZsYXRlKCkgdG8gaW50ZXJwcmV0IG5leHQgYmxvY2tcbiAgICAgICAgQkFEIC0tIGVycm9yIGluIGJsb2NrIGRhdGFcblxuICAgTm90ZXM6XG5cbiAgICAtIFRoZSBtYXhpbXVtIGlucHV0IGJpdHMgdXNlZCBieSBhIGxlbmd0aC9kaXN0YW5jZSBwYWlyIGlzIDE1IGJpdHMgZm9yIHRoZVxuICAgICAgbGVuZ3RoIGNvZGUsIDUgYml0cyBmb3IgdGhlIGxlbmd0aCBleHRyYSwgMTUgYml0cyBmb3IgdGhlIGRpc3RhbmNlIGNvZGUsXG4gICAgICBhbmQgMTMgYml0cyBmb3IgdGhlIGRpc3RhbmNlIGV4dHJhLiAgVGhpcyB0b3RhbHMgNDggYml0cywgb3Igc2l4IGJ5dGVzLlxuICAgICAgVGhlcmVmb3JlIGlmIHN0cm0uYXZhaWxfaW4gPj0gNiwgdGhlbiB0aGVyZSBpcyBlbm91Z2ggaW5wdXQgdG8gYXZvaWRcbiAgICAgIGNoZWNraW5nIGZvciBhdmFpbGFibGUgaW5wdXQgd2hpbGUgZGVjb2RpbmcuXG5cbiAgICAtIFRoZSBtYXhpbXVtIGJ5dGVzIHRoYXQgYSBzaW5nbGUgbGVuZ3RoL2Rpc3RhbmNlIHBhaXIgY2FuIG91dHB1dCBpcyAyNThcbiAgICAgIGJ5dGVzLCB3aGljaCBpcyB0aGUgbWF4aW11bSBsZW5ndGggdGhhdCBjYW4gYmUgY29kZWQuICBpbmZsYXRlX2Zhc3QoKVxuICAgICAgcmVxdWlyZXMgc3RybS5hdmFpbF9vdXQgPj0gMjU4IGZvciBlYWNoIGxvb3AgdG8gYXZvaWQgY2hlY2tpbmcgZm9yXG4gICAgICBvdXRwdXQgc3BhY2UuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5mbGF0ZV9mYXN0KHN0cm0sIHN0YXJ0KSB7XG4gIHZhciBzdGF0ZTtcbiAgdmFyIF9pbjsgICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uaW5wdXQgKi9cbiAgdmFyIGxhc3Q7ICAgICAgICAgICAgICAgICAgIC8qIGhhdmUgZW5vdWdoIGlucHV0IHdoaWxlIGluIDwgbGFzdCAqL1xuICB2YXIgX291dDsgICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5vdXRwdXQgKi9cbiAgdmFyIGJlZzsgICAgICAgICAgICAgICAgICAgIC8qIGluZmxhdGUoKSdzIGluaXRpYWwgc3RybS5vdXRwdXQgKi9cbiAgdmFyIGVuZDsgICAgICAgICAgICAgICAgICAgIC8qIHdoaWxlIG91dCA8IGVuZCwgZW5vdWdoIHNwYWNlIGF2YWlsYWJsZSAqL1xuLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1RcbiAgdmFyIGRtYXg7ICAgICAgICAgICAgICAgICAgIC8qIG1heGltdW0gZGlzdGFuY2UgZnJvbSB6bGliIGhlYWRlciAqL1xuLy8jZW5kaWZcbiAgdmFyIHdzaXplOyAgICAgICAgICAgICAgICAgIC8qIHdpbmRvdyBzaXplIG9yIHplcm8gaWYgbm90IHVzaW5nIHdpbmRvdyAqL1xuICB2YXIgd2hhdmU7ICAgICAgICAgICAgICAgICAgLyogdmFsaWQgYnl0ZXMgaW4gdGhlIHdpbmRvdyAqL1xuICB2YXIgd25leHQ7ICAgICAgICAgICAgICAgICAgLyogd2luZG93IHdyaXRlIGluZGV4ICovXG4gIC8vIFVzZSBgc193aW5kb3dgIGluc3RlYWQgYHdpbmRvd2AsIGF2b2lkIGNvbmZsaWN0IHdpdGggaW5zdHJ1bWVudGF0aW9uIHRvb2xzXG4gIHZhciBzX3dpbmRvdzsgICAgICAgICAgICAgICAvKiBhbGxvY2F0ZWQgc2xpZGluZyB3aW5kb3csIGlmIHdzaXplICE9IDAgKi9cbiAgdmFyIGhvbGQ7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uaG9sZCAqL1xuICB2YXIgYml0czsgICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5iaXRzICovXG4gIHZhciBsY29kZTsgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmxlbmNvZGUgKi9cbiAgdmFyIGRjb2RlOyAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uZGlzdGNvZGUgKi9cbiAgdmFyIGxtYXNrOyAgICAgICAgICAgICAgICAgIC8qIG1hc2sgZm9yIGZpcnN0IGxldmVsIG9mIGxlbmd0aCBjb2RlcyAqL1xuICB2YXIgZG1hc2s7ICAgICAgICAgICAgICAgICAgLyogbWFzayBmb3IgZmlyc3QgbGV2ZWwgb2YgZGlzdGFuY2UgY29kZXMgKi9cbiAgdmFyIGhlcmU7ICAgICAgICAgICAgICAgICAgIC8qIHJldHJpZXZlZCB0YWJsZSBlbnRyeSAqL1xuICB2YXIgb3A7ICAgICAgICAgICAgICAgICAgICAgLyogY29kZSBiaXRzLCBvcGVyYXRpb24sIGV4dHJhIGJpdHMsIG9yICovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiAgd2luZG93IHBvc2l0aW9uLCB3aW5kb3cgYnl0ZXMgdG8gY29weSAqL1xuICB2YXIgbGVuOyAgICAgICAgICAgICAgICAgICAgLyogbWF0Y2ggbGVuZ3RoLCB1bnVzZWQgYnl0ZXMgKi9cbiAgdmFyIGRpc3Q7ICAgICAgICAgICAgICAgICAgIC8qIG1hdGNoIGRpc3RhbmNlICovXG4gIHZhciBmcm9tOyAgICAgICAgICAgICAgICAgICAvKiB3aGVyZSB0byBjb3B5IG1hdGNoIGZyb20gKi9cbiAgdmFyIGZyb21fc291cmNlO1xuXG5cbiAgdmFyIGlucHV0LCBvdXRwdXQ7IC8vIEpTIHNwZWNpZmljLCBiZWNhdXNlIHdlIGhhdmUgbm8gcG9pbnRlcnNcblxuICAvKiBjb3B5IHN0YXRlIHRvIGxvY2FsIHZhcmlhYmxlcyAqL1xuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG4gIC8vaGVyZSA9IHN0YXRlLmhlcmU7XG4gIF9pbiA9IHN0cm0ubmV4dF9pbjtcbiAgaW5wdXQgPSBzdHJtLmlucHV0O1xuICBsYXN0ID0gX2luICsgKHN0cm0uYXZhaWxfaW4gLSA1KTtcbiAgX291dCA9IHN0cm0ubmV4dF9vdXQ7XG4gIG91dHB1dCA9IHN0cm0ub3V0cHV0O1xuICBiZWcgPSBfb3V0IC0gKHN0YXJ0IC0gc3RybS5hdmFpbF9vdXQpO1xuICBlbmQgPSBfb3V0ICsgKHN0cm0uYXZhaWxfb3V0IC0gMjU3KTtcbi8vI2lmZGVmIElORkxBVEVfU1RSSUNUXG4gIGRtYXggPSBzdGF0ZS5kbWF4O1xuLy8jZW5kaWZcbiAgd3NpemUgPSBzdGF0ZS53c2l6ZTtcbiAgd2hhdmUgPSBzdGF0ZS53aGF2ZTtcbiAgd25leHQgPSBzdGF0ZS53bmV4dDtcbiAgc193aW5kb3cgPSBzdGF0ZS53aW5kb3c7XG4gIGhvbGQgPSBzdGF0ZS5ob2xkO1xuICBiaXRzID0gc3RhdGUuYml0cztcbiAgbGNvZGUgPSBzdGF0ZS5sZW5jb2RlO1xuICBkY29kZSA9IHN0YXRlLmRpc3Rjb2RlO1xuICBsbWFzayA9ICgxIDw8IHN0YXRlLmxlbmJpdHMpIC0gMTtcbiAgZG1hc2sgPSAoMSA8PCBzdGF0ZS5kaXN0Yml0cykgLSAxO1xuXG5cbiAgLyogZGVjb2RlIGxpdGVyYWxzIGFuZCBsZW5ndGgvZGlzdGFuY2VzIHVudGlsIGVuZC1vZi1ibG9jayBvciBub3QgZW5vdWdoXG4gICAgIGlucHV0IGRhdGEgb3Igb3V0cHV0IHNwYWNlICovXG5cbiAgdG9wOlxuICBkbyB7XG4gICAgaWYgKGJpdHMgPCAxNSkge1xuICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0cztcbiAgICAgIGJpdHMgKz0gODtcbiAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICBiaXRzICs9IDg7XG4gICAgfVxuXG4gICAgaGVyZSA9IGxjb2RlW2hvbGQgJiBsbWFza107XG5cbiAgICBkb2xlbjpcbiAgICBmb3IgKDs7KSB7IC8vIEdvdG8gZW11bGF0aW9uXG4gICAgICBvcCA9IGhlcmUgPj4+IDI0LypoZXJlLmJpdHMqLztcbiAgICAgIGhvbGQgPj4+PSBvcDtcbiAgICAgIGJpdHMgLT0gb3A7XG4gICAgICBvcCA9IChoZXJlID4+PiAxNikgJiAweGZmLypoZXJlLm9wKi87XG4gICAgICBpZiAob3AgPT09IDApIHsgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGxpdGVyYWwgKi9cbiAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIGhlcmUudmFsID49IDB4MjAgJiYgaGVyZS52YWwgPCAweDdmID9cbiAgICAgICAgLy8gICAgICAgIFwiaW5mbGF0ZTogICAgICAgICBsaXRlcmFsICclYydcXG5cIiA6XG4gICAgICAgIC8vICAgICAgICBcImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAweCUwMnhcXG5cIiwgaGVyZS52YWwpKTtcbiAgICAgICAgb3V0cHV0W19vdXQrK10gPSBoZXJlICYgMHhmZmZmLypoZXJlLnZhbCovO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAob3AgJiAxNikgeyAgICAgICAgICAgICAgICAgICAgIC8qIGxlbmd0aCBiYXNlICovXG4gICAgICAgIGxlbiA9IGhlcmUgJiAweGZmZmYvKmhlcmUudmFsKi87XG4gICAgICAgIG9wICY9IDE1OyAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBleHRyYSBiaXRzICovXG4gICAgICAgIGlmIChvcCkge1xuICAgICAgICAgIGlmIChiaXRzIDwgb3ApIHtcbiAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgfVxuICAgICAgICAgIGxlbiArPSBob2xkICYgKCgxIDw8IG9wKSAtIDEpO1xuICAgICAgICAgIGhvbGQgPj4+PSBvcDtcbiAgICAgICAgICBiaXRzIC09IG9wO1xuICAgICAgICB9XG4gICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgICAgbGVuZ3RoICV1XFxuXCIsIGxlbikpO1xuICAgICAgICBpZiAoYml0cyA8IDE1KSB7XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtfaW4rK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgaGVyZSA9IGRjb2RlW2hvbGQgJiBkbWFza107XG5cbiAgICAgICAgZG9kaXN0OlxuICAgICAgICBmb3IgKDs7KSB7IC8vIGdvdG8gZW11bGF0aW9uXG4gICAgICAgICAgb3AgPSBoZXJlID4+PiAyNC8qaGVyZS5iaXRzKi87XG4gICAgICAgICAgaG9sZCA+Pj49IG9wO1xuICAgICAgICAgIGJpdHMgLT0gb3A7XG4gICAgICAgICAgb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZi8qaGVyZS5vcCovO1xuXG4gICAgICAgICAgaWYgKG9wICYgMTYpIHsgICAgICAgICAgICAgICAgICAgICAgLyogZGlzdGFuY2UgYmFzZSAqL1xuICAgICAgICAgICAgZGlzdCA9IGhlcmUgJiAweGZmZmYvKmhlcmUudmFsKi87XG4gICAgICAgICAgICBvcCAmPSAxNTsgICAgICAgICAgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBleHRyYSBiaXRzICovXG4gICAgICAgICAgICBpZiAoYml0cyA8IG9wKSB7XG4gICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgICAgaWYgKGJpdHMgPCBvcCkge1xuICAgICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXN0ICs9IGhvbGQgJiAoKDEgPDwgb3ApIC0gMSk7XG4vLyNpZmRlZiBJTkZMQVRFX1NUUklDVFxuICAgICAgICAgICAgaWYgKGRpc3QgPiBkbWF4KSB7XG4gICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJztcbiAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgICAgYnJlYWsgdG9wO1xuICAgICAgICAgICAgfVxuLy8jZW5kaWZcbiAgICAgICAgICAgIGhvbGQgPj4+PSBvcDtcbiAgICAgICAgICAgIGJpdHMgLT0gb3A7XG4gICAgICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGRpc3RhbmNlICV1XFxuXCIsIGRpc3QpKTtcbiAgICAgICAgICAgIG9wID0gX291dCAtIGJlZzsgICAgICAgICAgICAgICAgLyogbWF4IGRpc3RhbmNlIGluIG91dHB1dCAqL1xuICAgICAgICAgICAgaWYgKGRpc3QgPiBvcCkgeyAgICAgICAgICAgICAgICAvKiBzZWUgaWYgY29weSBmcm9tIHdpbmRvdyAqL1xuICAgICAgICAgICAgICBvcCA9IGRpc3QgLSBvcDsgICAgICAgICAgICAgICAvKiBkaXN0YW5jZSBiYWNrIGluIHdpbmRvdyAqL1xuICAgICAgICAgICAgICBpZiAob3AgPiB3aGF2ZSkge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5zYW5lKSB7XG4gICAgICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayc7XG4gICAgICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgICAgICAgYnJlYWsgdG9wO1xuICAgICAgICAgICAgICAgIH1cblxuLy8gKCEpIFRoaXMgYmxvY2sgaXMgZGlzYWJsZWQgaW4gemxpYiBkZWZhdWx0cyxcbi8vIGRvbid0IGVuYWJsZSBpdCBmb3IgYmluYXJ5IGNvbXBhdGliaWxpdHlcbi8vI2lmZGVmIElORkxBVEVfQUxMT1dfSU5WQUxJRF9ESVNUQU5DRV9UT09GQVJfQVJSUlxuLy8gICAgICAgICAgICAgICAgaWYgKGxlbiA8PSBvcCAtIHdoYXZlKSB7XG4vLyAgICAgICAgICAgICAgICAgIGRvIHtcbi8vICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IDA7XG4vLyAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tbGVuKTtcbi8vICAgICAgICAgICAgICAgICAgY29udGludWUgdG9wO1xuLy8gICAgICAgICAgICAgICAgfVxuLy8gICAgICAgICAgICAgICAgbGVuIC09IG9wIC0gd2hhdmU7XG4vLyAgICAgICAgICAgICAgICBkbyB7XG4vLyAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gMDtcbi8vICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3AgPiB3aGF2ZSk7XG4vLyAgICAgICAgICAgICAgICBpZiAob3AgPT09IDApIHtcbi8vICAgICAgICAgICAgICAgICAgZnJvbSA9IF9vdXQgLSBkaXN0O1xuLy8gICAgICAgICAgICAgICAgICBkbyB7XG4vLyAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTtcbi8vICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1sZW4pO1xuLy8gICAgICAgICAgICAgICAgICBjb250aW51ZSB0b3A7XG4vLyAgICAgICAgICAgICAgICB9XG4vLyNlbmRpZlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGZyb20gPSAwOyAvLyB3aW5kb3cgaW5kZXhcbiAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBzX3dpbmRvdztcbiAgICAgICAgICAgICAgaWYgKHduZXh0ID09PSAwKSB7ICAgICAgICAgICAvKiB2ZXJ5IGNvbW1vbiBjYXNlICovXG4gICAgICAgICAgICAgICAgZnJvbSArPSB3c2l6ZSAtIG9wO1xuICAgICAgICAgICAgICAgIGlmIChvcCA8IGxlbikgeyAgICAgICAgIC8qIHNvbWUgZnJvbSB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICAgIGxlbiAtPSBvcDtcbiAgICAgICAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBzX3dpbmRvd1tmcm9tKytdO1xuICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCk7XG4gICAgICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAvKiByZXN0IGZyb20gb3V0cHV0ICovXG4gICAgICAgICAgICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiAod25leHQgPCBvcCkgeyAgICAgIC8qIHdyYXAgYXJvdW5kIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgIGZyb20gKz0gd3NpemUgKyB3bmV4dCAtIG9wO1xuICAgICAgICAgICAgICAgIG9wIC09IHduZXh0O1xuICAgICAgICAgICAgICAgIGlmIChvcCA8IGxlbikgeyAgICAgICAgIC8qIHNvbWUgZnJvbSBlbmQgb2Ygd2luZG93ICovXG4gICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7XG4gICAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApO1xuICAgICAgICAgICAgICAgICAgZnJvbSA9IDA7XG4gICAgICAgICAgICAgICAgICBpZiAod25leHQgPCBsZW4pIHsgIC8qIHNvbWUgZnJvbSBzdGFydCBvZiB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICAgICAgb3AgPSB3bmV4dDtcbiAgICAgICAgICAgICAgICAgICAgbGVuIC09IG9wO1xuICAgICAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBzX3dpbmRvd1tmcm9tKytdO1xuICAgICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTtcbiAgICAgICAgICAgICAgICAgICAgZnJvbSA9IF9vdXQgLSBkaXN0OyAgICAgIC8qIHJlc3QgZnJvbSBvdXRwdXQgKi9cbiAgICAgICAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgeyAgICAgICAgICAgICAgICAgICAgICAvKiBjb250aWd1b3VzIGluIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgIGZyb20gKz0gd25leHQgLSBvcDtcbiAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4pIHsgICAgICAgICAvKiBzb21lIGZyb20gd2luZG93ICovXG4gICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7XG4gICAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApO1xuICAgICAgICAgICAgICAgICAgZnJvbSA9IF9vdXQgLSBkaXN0OyAgLyogcmVzdCBmcm9tIG91dHB1dCAqL1xuICAgICAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHdoaWxlIChsZW4gPiAyKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICAgICAgICAgICAgbGVuIC09IDM7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGxlbikge1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBpZiAobGVuID4gMSkge1xuICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgICAgICAgICAgLyogY29weSBkaXJlY3QgZnJvbSBvdXRwdXQgKi9cbiAgICAgICAgICAgICAgZG8geyAgICAgICAgICAgICAgICAgICAgICAgIC8qIG1pbmltdW0gbGVuZ3RoIGlzIHRocmVlICovXG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdO1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgbGVuIC09IDM7XG4gICAgICAgICAgICAgIH0gd2hpbGUgKGxlbiA+IDIpO1xuICAgICAgICAgICAgICBpZiAobGVuKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBpZiAobGVuID4gMSkge1xuICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoKG9wICYgNjQpID09PSAwKSB7ICAgICAgICAgIC8qIDJuZCBsZXZlbCBkaXN0YW5jZSBjb2RlICovXG4gICAgICAgICAgICBoZXJlID0gZGNvZGVbKGhlcmUgJiAweGZmZmYpLypoZXJlLnZhbCovICsgKGhvbGQgJiAoKDEgPDwgb3ApIC0gMSkpXTtcbiAgICAgICAgICAgIGNvbnRpbnVlIGRvZGlzdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIGNvZGUnO1xuICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgIGJyZWFrIHRvcDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVhazsgLy8gbmVlZCB0byBlbXVsYXRlIGdvdG8gdmlhIFwiY29udGludWVcIlxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmICgob3AgJiA2NCkgPT09IDApIHsgICAgICAgICAgICAgIC8qIDJuZCBsZXZlbCBsZW5ndGggY29kZSAqL1xuICAgICAgICBoZXJlID0gbGNvZGVbKGhlcmUgJiAweGZmZmYpLypoZXJlLnZhbCovICsgKGhvbGQgJiAoKDEgPDwgb3ApIC0gMSkpXTtcbiAgICAgICAgY29udGludWUgZG9sZW47XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChvcCAmIDMyKSB7ICAgICAgICAgICAgICAgICAgICAgLyogZW5kLW9mLWJsb2NrICovXG4gICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgICAgZW5kIG9mIGJsb2NrXFxuXCIpKTtcbiAgICAgICAgc3RhdGUubW9kZSA9IFRZUEU7XG4gICAgICAgIGJyZWFrIHRvcDtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGUnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhayB0b3A7XG4gICAgICB9XG5cbiAgICAgIGJyZWFrOyAvLyBuZWVkIHRvIGVtdWxhdGUgZ290byB2aWEgXCJjb250aW51ZVwiXG4gICAgfVxuICB9IHdoaWxlIChfaW4gPCBsYXN0ICYmIF9vdXQgPCBlbmQpO1xuXG4gIC8qIHJldHVybiB1bnVzZWQgYnl0ZXMgKG9uIGVudHJ5LCBiaXRzIDwgOCwgc28gaW4gd29uJ3QgZ28gdG9vIGZhciBiYWNrKSAqL1xuICBsZW4gPSBiaXRzID4+IDM7XG4gIF9pbiAtPSBsZW47XG4gIGJpdHMgLT0gbGVuIDw8IDM7XG4gIGhvbGQgJj0gKDEgPDwgYml0cykgLSAxO1xuXG4gIC8qIHVwZGF0ZSBzdGF0ZSBhbmQgcmV0dXJuICovXG4gIHN0cm0ubmV4dF9pbiA9IF9pbjtcbiAgc3RybS5uZXh0X291dCA9IF9vdXQ7XG4gIHN0cm0uYXZhaWxfaW4gPSAoX2luIDwgbGFzdCA/IDUgKyAobGFzdCAtIF9pbikgOiA1IC0gKF9pbiAtIGxhc3QpKTtcbiAgc3RybS5hdmFpbF9vdXQgPSAoX291dCA8IGVuZCA/IDI1NyArIChlbmQgLSBfb3V0KSA6IDI1NyAtIChfb3V0IC0gZW5kKSk7XG4gIHN0YXRlLmhvbGQgPSBob2xkO1xuICBzdGF0ZS5iaXRzID0gYml0cztcbiAgcmV0dXJuO1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDE2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbi8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlclxuLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW5cbi8vXG4vLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxuLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4vLyBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuLy8gaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuLy9cbi8vIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4vLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4vLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuLy8gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbi8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuLy8gMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cblxudmFyIHV0aWxzID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcblxudmFyIE1BWEJJVFMgPSAxNTtcbnZhciBFTk9VR0hfTEVOUyA9IDg1MjtcbnZhciBFTk9VR0hfRElTVFMgPSA1OTI7XG4vL3ZhciBFTk9VR0ggPSAoRU5PVUdIX0xFTlMrRU5PVUdIX0RJU1RTKTtcblxudmFyIENPREVTID0gMDtcbnZhciBMRU5TID0gMTtcbnZhciBESVNUUyA9IDI7XG5cbnZhciBsYmFzZSA9IFsgLyogTGVuZ3RoIGNvZGVzIDI1Ny4uMjg1IGJhc2UgKi9cbiAgMywgNCwgNSwgNiwgNywgOCwgOSwgMTAsIDExLCAxMywgMTUsIDE3LCAxOSwgMjMsIDI3LCAzMSxcbiAgMzUsIDQzLCA1MSwgNTksIDY3LCA4MywgOTksIDExNSwgMTMxLCAxNjMsIDE5NSwgMjI3LCAyNTgsIDAsIDBcbl07XG5cbnZhciBsZXh0ID0gWyAvKiBMZW5ndGggY29kZXMgMjU3Li4yODUgZXh0cmEgKi9cbiAgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNywgMTcsIDE3LCAxNywgMTgsIDE4LCAxOCwgMTgsXG4gIDE5LCAxOSwgMTksIDE5LCAyMCwgMjAsIDIwLCAyMCwgMjEsIDIxLCAyMSwgMjEsIDE2LCA3MiwgNzhcbl07XG5cbnZhciBkYmFzZSA9IFsgLyogRGlzdGFuY2UgY29kZXMgMC4uMjkgYmFzZSAqL1xuICAxLCAyLCAzLCA0LCA1LCA3LCA5LCAxMywgMTcsIDI1LCAzMywgNDksIDY1LCA5NywgMTI5LCAxOTMsXG4gIDI1NywgMzg1LCA1MTMsIDc2OSwgMTAyNSwgMTUzNywgMjA0OSwgMzA3MywgNDA5NywgNjE0NSxcbiAgODE5MywgMTIyODksIDE2Mzg1LCAyNDU3NywgMCwgMFxuXTtcblxudmFyIGRleHQgPSBbIC8qIERpc3RhbmNlIGNvZGVzIDAuLjI5IGV4dHJhICovXG4gIDE2LCAxNiwgMTYsIDE2LCAxNywgMTcsIDE4LCAxOCwgMTksIDE5LCAyMCwgMjAsIDIxLCAyMSwgMjIsIDIyLFxuICAyMywgMjMsIDI0LCAyNCwgMjUsIDI1LCAyNiwgMjYsIDI3LCAyNyxcbiAgMjgsIDI4LCAyOSwgMjksIDY0LCA2NFxuXTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbmZsYXRlX3RhYmxlKHR5cGUsIGxlbnMsIGxlbnNfaW5kZXgsIGNvZGVzLCB0YWJsZSwgdGFibGVfaW5kZXgsIHdvcmssIG9wdHMpXG57XG4gIHZhciBiaXRzID0gb3B0cy5iaXRzO1xuICAgICAgLy9oZXJlID0gb3B0cy5oZXJlOyAvKiB0YWJsZSBlbnRyeSBmb3IgZHVwbGljYXRpb24gKi9cblxuICB2YXIgbGVuID0gMDsgICAgICAgICAgICAgICAvKiBhIGNvZGUncyBsZW5ndGggaW4gYml0cyAqL1xuICB2YXIgc3ltID0gMDsgICAgICAgICAgICAgICAvKiBpbmRleCBvZiBjb2RlIHN5bWJvbHMgKi9cbiAgdmFyIG1pbiA9IDAsIG1heCA9IDA7ICAgICAgICAgIC8qIG1pbmltdW0gYW5kIG1heGltdW0gY29kZSBsZW5ndGhzICovXG4gIHZhciByb290ID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciByb290IHRhYmxlICovXG4gIHZhciBjdXJyID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciBjdXJyZW50IHRhYmxlICovXG4gIHZhciBkcm9wID0gMDsgICAgICAgICAgICAgIC8qIGNvZGUgYml0cyB0byBkcm9wIGZvciBzdWItdGFibGUgKi9cbiAgdmFyIGxlZnQgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgcHJlZml4IGNvZGVzIGF2YWlsYWJsZSAqL1xuICB2YXIgdXNlZCA9IDA7ICAgICAgICAgICAgICAvKiBjb2RlIGVudHJpZXMgaW4gdGFibGUgdXNlZCAqL1xuICB2YXIgaHVmZiA9IDA7ICAgICAgICAgICAgICAvKiBIdWZmbWFuIGNvZGUgKi9cbiAgdmFyIGluY3I7ICAgICAgICAgICAgICAvKiBmb3IgaW5jcmVtZW50aW5nIGNvZGUsIGluZGV4ICovXG4gIHZhciBmaWxsOyAgICAgICAgICAgICAgLyogaW5kZXggZm9yIHJlcGxpY2F0aW5nIGVudHJpZXMgKi9cbiAgdmFyIGxvdzsgICAgICAgICAgICAgICAvKiBsb3cgYml0cyBmb3IgY3VycmVudCByb290IGVudHJ5ICovXG4gIHZhciBtYXNrOyAgICAgICAgICAgICAgLyogbWFzayBmb3IgbG93IHJvb3QgYml0cyAqL1xuICB2YXIgbmV4dDsgICAgICAgICAgICAgLyogbmV4dCBhdmFpbGFibGUgc3BhY2UgaW4gdGFibGUgKi9cbiAgdmFyIGJhc2UgPSBudWxsOyAgICAgLyogYmFzZSB2YWx1ZSB0YWJsZSB0byB1c2UgKi9cbiAgdmFyIGJhc2VfaW5kZXggPSAwO1xuLy8gIHZhciBzaG9leHRyYTsgICAgLyogZXh0cmEgYml0cyB0YWJsZSB0byB1c2UgKi9cbiAgdmFyIGVuZDsgICAgICAgICAgICAgICAgICAgIC8qIHVzZSBiYXNlIGFuZCBleHRyYSBmb3Igc3ltYm9sID4gZW5kICovXG4gIHZhciBjb3VudCA9IG5ldyB1dGlscy5CdWYxNihNQVhCSVRTICsgMSk7IC8vW01BWEJJVFMrMV07ICAgIC8qIG51bWJlciBvZiBjb2RlcyBvZiBlYWNoIGxlbmd0aCAqL1xuICB2YXIgb2ZmcyA9IG5ldyB1dGlscy5CdWYxNihNQVhCSVRTICsgMSk7IC8vW01BWEJJVFMrMV07ICAgICAvKiBvZmZzZXRzIGluIHRhYmxlIGZvciBlYWNoIGxlbmd0aCAqL1xuICB2YXIgZXh0cmEgPSBudWxsO1xuICB2YXIgZXh0cmFfaW5kZXggPSAwO1xuXG4gIHZhciBoZXJlX2JpdHMsIGhlcmVfb3AsIGhlcmVfdmFsO1xuXG4gIC8qXG4gICBQcm9jZXNzIGEgc2V0IG9mIGNvZGUgbGVuZ3RocyB0byBjcmVhdGUgYSBjYW5vbmljYWwgSHVmZm1hbiBjb2RlLiAgVGhlXG4gICBjb2RlIGxlbmd0aHMgYXJlIGxlbnNbMC4uY29kZXMtMV0uICBFYWNoIGxlbmd0aCBjb3JyZXNwb25kcyB0byB0aGVcbiAgIHN5bWJvbHMgMC4uY29kZXMtMS4gIFRoZSBIdWZmbWFuIGNvZGUgaXMgZ2VuZXJhdGVkIGJ5IGZpcnN0IHNvcnRpbmcgdGhlXG4gICBzeW1ib2xzIGJ5IGxlbmd0aCBmcm9tIHNob3J0IHRvIGxvbmcsIGFuZCByZXRhaW5pbmcgdGhlIHN5bWJvbCBvcmRlclxuICAgZm9yIGNvZGVzIHdpdGggZXF1YWwgbGVuZ3Rocy4gIFRoZW4gdGhlIGNvZGUgc3RhcnRzIHdpdGggYWxsIHplcm8gYml0c1xuICAgZm9yIHRoZSBmaXJzdCBjb2RlIG9mIHRoZSBzaG9ydGVzdCBsZW5ndGgsIGFuZCB0aGUgY29kZXMgYXJlIGludGVnZXJcbiAgIGluY3JlbWVudHMgZm9yIHRoZSBzYW1lIGxlbmd0aCwgYW5kIHplcm9zIGFyZSBhcHBlbmRlZCBhcyB0aGUgbGVuZ3RoXG4gICBpbmNyZWFzZXMuICBGb3IgdGhlIGRlZmxhdGUgZm9ybWF0LCB0aGVzZSBiaXRzIGFyZSBzdG9yZWQgYmFja3dhcmRzXG4gICBmcm9tIHRoZWlyIG1vcmUgbmF0dXJhbCBpbnRlZ2VyIGluY3JlbWVudCBvcmRlcmluZywgYW5kIHNvIHdoZW4gdGhlXG4gICBkZWNvZGluZyB0YWJsZXMgYXJlIGJ1aWx0IGluIHRoZSBsYXJnZSBsb29wIGJlbG93LCB0aGUgaW50ZWdlciBjb2Rlc1xuICAgYXJlIGluY3JlbWVudGVkIGJhY2t3YXJkcy5cblxuICAgVGhpcyByb3V0aW5lIGFzc3VtZXMsIGJ1dCBkb2VzIG5vdCBjaGVjaywgdGhhdCBhbGwgb2YgdGhlIGVudHJpZXMgaW5cbiAgIGxlbnNbXSBhcmUgaW4gdGhlIHJhbmdlIDAuLk1BWEJJVFMuICBUaGUgY2FsbGVyIG11c3QgYXNzdXJlIHRoaXMuXG4gICAxLi5NQVhCSVRTIGlzIGludGVycHJldGVkIGFzIHRoYXQgY29kZSBsZW5ndGguICB6ZXJvIG1lYW5zIHRoYXQgdGhhdFxuICAgc3ltYm9sIGRvZXMgbm90IG9jY3VyIGluIHRoaXMgY29kZS5cblxuICAgVGhlIGNvZGVzIGFyZSBzb3J0ZWQgYnkgY29tcHV0aW5nIGEgY291bnQgb2YgY29kZXMgZm9yIGVhY2ggbGVuZ3RoLFxuICAgY3JlYXRpbmcgZnJvbSB0aGF0IGEgdGFibGUgb2Ygc3RhcnRpbmcgaW5kaWNlcyBmb3IgZWFjaCBsZW5ndGggaW4gdGhlXG4gICBzb3J0ZWQgdGFibGUsIGFuZCB0aGVuIGVudGVyaW5nIHRoZSBzeW1ib2xzIGluIG9yZGVyIGluIHRoZSBzb3J0ZWRcbiAgIHRhYmxlLiAgVGhlIHNvcnRlZCB0YWJsZSBpcyB3b3JrW10sIHdpdGggdGhhdCBzcGFjZSBiZWluZyBwcm92aWRlZCBieVxuICAgdGhlIGNhbGxlci5cblxuICAgVGhlIGxlbmd0aCBjb3VudHMgYXJlIHVzZWQgZm9yIG90aGVyIHB1cnBvc2VzIGFzIHdlbGwsIGkuZS4gZmluZGluZ1xuICAgdGhlIG1pbmltdW0gYW5kIG1heGltdW0gbGVuZ3RoIGNvZGVzLCBkZXRlcm1pbmluZyBpZiB0aGVyZSBhcmUgYW55XG4gICBjb2RlcyBhdCBhbGwsIGNoZWNraW5nIGZvciBhIHZhbGlkIHNldCBvZiBsZW5ndGhzLCBhbmQgbG9va2luZyBhaGVhZFxuICAgYXQgbGVuZ3RoIGNvdW50cyB0byBkZXRlcm1pbmUgc3ViLXRhYmxlIHNpemVzIHdoZW4gYnVpbGRpbmcgdGhlXG4gICBkZWNvZGluZyB0YWJsZXMuXG4gICAqL1xuXG4gIC8qIGFjY3VtdWxhdGUgbGVuZ3RocyBmb3IgY29kZXMgKGFzc3VtZXMgbGVuc1tdIGFsbCBpbiAwLi5NQVhCSVRTKSAqL1xuICBmb3IgKGxlbiA9IDA7IGxlbiA8PSBNQVhCSVRTOyBsZW4rKykge1xuICAgIGNvdW50W2xlbl0gPSAwO1xuICB9XG4gIGZvciAoc3ltID0gMDsgc3ltIDwgY29kZXM7IHN5bSsrKSB7XG4gICAgY291bnRbbGVuc1tsZW5zX2luZGV4ICsgc3ltXV0rKztcbiAgfVxuXG4gIC8qIGJvdW5kIGNvZGUgbGVuZ3RocywgZm9yY2Ugcm9vdCB0byBiZSB3aXRoaW4gY29kZSBsZW5ndGhzICovXG4gIHJvb3QgPSBiaXRzO1xuICBmb3IgKG1heCA9IE1BWEJJVFM7IG1heCA+PSAxOyBtYXgtLSkge1xuICAgIGlmIChjb3VudFttYXhdICE9PSAwKSB7IGJyZWFrOyB9XG4gIH1cbiAgaWYgKHJvb3QgPiBtYXgpIHtcbiAgICByb290ID0gbWF4O1xuICB9XG4gIGlmIChtYXggPT09IDApIHsgICAgICAgICAgICAgICAgICAgICAvKiBubyBzeW1ib2xzIHRvIGNvZGUgYXQgYWxsICovXG4gICAgLy90YWJsZS5vcFtvcHRzLnRhYmxlX2luZGV4XSA9IDY0OyAgLy9oZXJlLm9wID0gKHZhciBjaGFyKTY0OyAgICAvKiBpbnZhbGlkIGNvZGUgbWFya2VyICovXG4gICAgLy90YWJsZS5iaXRzW29wdHMudGFibGVfaW5kZXhdID0gMTsgICAvL2hlcmUuYml0cyA9ICh2YXIgY2hhcikxO1xuICAgIC8vdGFibGUudmFsW29wdHMudGFibGVfaW5kZXgrK10gPSAwOyAgIC8vaGVyZS52YWwgPSAodmFyIHNob3J0KTA7XG4gICAgdGFibGVbdGFibGVfaW5kZXgrK10gPSAoMSA8PCAyNCkgfCAoNjQgPDwgMTYpIHwgMDtcblxuXG4gICAgLy90YWJsZS5vcFtvcHRzLnRhYmxlX2luZGV4XSA9IDY0O1xuICAgIC8vdGFibGUuYml0c1tvcHRzLnRhYmxlX2luZGV4XSA9IDE7XG4gICAgLy90YWJsZS52YWxbb3B0cy50YWJsZV9pbmRleCsrXSA9IDA7XG4gICAgdGFibGVbdGFibGVfaW5kZXgrK10gPSAoMSA8PCAyNCkgfCAoNjQgPDwgMTYpIHwgMDtcblxuICAgIG9wdHMuYml0cyA9IDE7XG4gICAgcmV0dXJuIDA7ICAgICAvKiBubyBzeW1ib2xzLCBidXQgd2FpdCBmb3IgZGVjb2RpbmcgdG8gcmVwb3J0IGVycm9yICovXG4gIH1cbiAgZm9yIChtaW4gPSAxOyBtaW4gPCBtYXg7IG1pbisrKSB7XG4gICAgaWYgKGNvdW50W21pbl0gIT09IDApIHsgYnJlYWs7IH1cbiAgfVxuICBpZiAocm9vdCA8IG1pbikge1xuICAgIHJvb3QgPSBtaW47XG4gIH1cblxuICAvKiBjaGVjayBmb3IgYW4gb3Zlci1zdWJzY3JpYmVkIG9yIGluY29tcGxldGUgc2V0IG9mIGxlbmd0aHMgKi9cbiAgbGVmdCA9IDE7XG4gIGZvciAobGVuID0gMTsgbGVuIDw9IE1BWEJJVFM7IGxlbisrKSB7XG4gICAgbGVmdCA8PD0gMTtcbiAgICBsZWZ0IC09IGNvdW50W2xlbl07XG4gICAgaWYgKGxlZnQgPCAwKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfSAgICAgICAgLyogb3Zlci1zdWJzY3JpYmVkICovXG4gIH1cbiAgaWYgKGxlZnQgPiAwICYmICh0eXBlID09PSBDT0RFUyB8fCBtYXggIT09IDEpKSB7XG4gICAgcmV0dXJuIC0xOyAgICAgICAgICAgICAgICAgICAgICAvKiBpbmNvbXBsZXRlIHNldCAqL1xuICB9XG5cbiAgLyogZ2VuZXJhdGUgb2Zmc2V0cyBpbnRvIHN5bWJvbCB0YWJsZSBmb3IgZWFjaCBsZW5ndGggZm9yIHNvcnRpbmcgKi9cbiAgb2Zmc1sxXSA9IDA7XG4gIGZvciAobGVuID0gMTsgbGVuIDwgTUFYQklUUzsgbGVuKyspIHtcbiAgICBvZmZzW2xlbiArIDFdID0gb2Zmc1tsZW5dICsgY291bnRbbGVuXTtcbiAgfVxuXG4gIC8qIHNvcnQgc3ltYm9scyBieSBsZW5ndGgsIGJ5IHN5bWJvbCBvcmRlciB3aXRoaW4gZWFjaCBsZW5ndGggKi9cbiAgZm9yIChzeW0gPSAwOyBzeW0gPCBjb2Rlczsgc3ltKyspIHtcbiAgICBpZiAobGVuc1tsZW5zX2luZGV4ICsgc3ltXSAhPT0gMCkge1xuICAgICAgd29ya1tvZmZzW2xlbnNbbGVuc19pbmRleCArIHN5bV1dKytdID0gc3ltO1xuICAgIH1cbiAgfVxuXG4gIC8qXG4gICBDcmVhdGUgYW5kIGZpbGwgaW4gZGVjb2RpbmcgdGFibGVzLiAgSW4gdGhpcyBsb29wLCB0aGUgdGFibGUgYmVpbmdcbiAgIGZpbGxlZCBpcyBhdCBuZXh0IGFuZCBoYXMgY3VyciBpbmRleCBiaXRzLiAgVGhlIGNvZGUgYmVpbmcgdXNlZCBpcyBodWZmXG4gICB3aXRoIGxlbmd0aCBsZW4uICBUaGF0IGNvZGUgaXMgY29udmVydGVkIHRvIGFuIGluZGV4IGJ5IGRyb3BwaW5nIGRyb3BcbiAgIGJpdHMgb2ZmIG9mIHRoZSBib3R0b20uICBGb3IgY29kZXMgd2hlcmUgbGVuIGlzIGxlc3MgdGhhbiBkcm9wICsgY3VycixcbiAgIHRob3NlIHRvcCBkcm9wICsgY3VyciAtIGxlbiBiaXRzIGFyZSBpbmNyZW1lbnRlZCB0aHJvdWdoIGFsbCB2YWx1ZXMgdG9cbiAgIGZpbGwgdGhlIHRhYmxlIHdpdGggcmVwbGljYXRlZCBlbnRyaWVzLlxuXG4gICByb290IGlzIHRoZSBudW1iZXIgb2YgaW5kZXggYml0cyBmb3IgdGhlIHJvb3QgdGFibGUuICBXaGVuIGxlbiBleGNlZWRzXG4gICByb290LCBzdWItdGFibGVzIGFyZSBjcmVhdGVkIHBvaW50ZWQgdG8gYnkgdGhlIHJvb3QgZW50cnkgd2l0aCBhbiBpbmRleFxuICAgb2YgdGhlIGxvdyByb290IGJpdHMgb2YgaHVmZi4gIFRoaXMgaXMgc2F2ZWQgaW4gbG93IHRvIGNoZWNrIGZvciB3aGVuIGFcbiAgIG5ldyBzdWItdGFibGUgc2hvdWxkIGJlIHN0YXJ0ZWQuICBkcm9wIGlzIHplcm8gd2hlbiB0aGUgcm9vdCB0YWJsZSBpc1xuICAgYmVpbmcgZmlsbGVkLCBhbmQgZHJvcCBpcyByb290IHdoZW4gc3ViLXRhYmxlcyBhcmUgYmVpbmcgZmlsbGVkLlxuXG4gICBXaGVuIGEgbmV3IHN1Yi10YWJsZSBpcyBuZWVkZWQsIGl0IGlzIG5lY2Vzc2FyeSB0byBsb29rIGFoZWFkIGluIHRoZVxuICAgY29kZSBsZW5ndGhzIHRvIGRldGVybWluZSB3aGF0IHNpemUgc3ViLXRhYmxlIGlzIG5lZWRlZC4gIFRoZSBsZW5ndGhcbiAgIGNvdW50cyBhcmUgdXNlZCBmb3IgdGhpcywgYW5kIHNvIGNvdW50W10gaXMgZGVjcmVtZW50ZWQgYXMgY29kZXMgYXJlXG4gICBlbnRlcmVkIGluIHRoZSB0YWJsZXMuXG5cbiAgIHVzZWQga2VlcHMgdHJhY2sgb2YgaG93IG1hbnkgdGFibGUgZW50cmllcyBoYXZlIGJlZW4gYWxsb2NhdGVkIGZyb20gdGhlXG4gICBwcm92aWRlZCAqdGFibGUgc3BhY2UuICBJdCBpcyBjaGVja2VkIGZvciBMRU5TIGFuZCBESVNUIHRhYmxlcyBhZ2FpbnN0XG4gICB0aGUgY29uc3RhbnRzIEVOT1VHSF9MRU5TIGFuZCBFTk9VR0hfRElTVFMgdG8gZ3VhcmQgYWdhaW5zdCBjaGFuZ2VzIGluXG4gICB0aGUgaW5pdGlhbCByb290IHRhYmxlIHNpemUgY29uc3RhbnRzLiAgU2VlIHRoZSBjb21tZW50cyBpbiBpbmZ0cmVlcy5oXG4gICBmb3IgbW9yZSBpbmZvcm1hdGlvbi5cblxuICAgc3ltIGluY3JlbWVudHMgdGhyb3VnaCBhbGwgc3ltYm9scywgYW5kIHRoZSBsb29wIHRlcm1pbmF0ZXMgd2hlblxuICAgYWxsIGNvZGVzIG9mIGxlbmd0aCBtYXgsIGkuZS4gYWxsIGNvZGVzLCBoYXZlIGJlZW4gcHJvY2Vzc2VkLiAgVGhpc1xuICAgcm91dGluZSBwZXJtaXRzIGluY29tcGxldGUgY29kZXMsIHNvIGFub3RoZXIgbG9vcCBhZnRlciB0aGlzIG9uZSBmaWxsc1xuICAgaW4gdGhlIHJlc3Qgb2YgdGhlIGRlY29kaW5nIHRhYmxlcyB3aXRoIGludmFsaWQgY29kZSBtYXJrZXJzLlxuICAgKi9cblxuICAvKiBzZXQgdXAgZm9yIGNvZGUgdHlwZSAqL1xuICAvLyBwb29yIG1hbiBvcHRpbWl6YXRpb24gLSB1c2UgaWYtZWxzZSBpbnN0ZWFkIG9mIHN3aXRjaCxcbiAgLy8gdG8gYXZvaWQgZGVvcHRzIGluIG9sZCB2OFxuICBpZiAodHlwZSA9PT0gQ09ERVMpIHtcbiAgICBiYXNlID0gZXh0cmEgPSB3b3JrOyAgICAvKiBkdW1teSB2YWx1ZS0tbm90IHVzZWQgKi9cbiAgICBlbmQgPSAxOTtcblxuICB9IGVsc2UgaWYgKHR5cGUgPT09IExFTlMpIHtcbiAgICBiYXNlID0gbGJhc2U7XG4gICAgYmFzZV9pbmRleCAtPSAyNTc7XG4gICAgZXh0cmEgPSBsZXh0O1xuICAgIGV4dHJhX2luZGV4IC09IDI1NztcbiAgICBlbmQgPSAyNTY7XG5cbiAgfSBlbHNlIHsgICAgICAgICAgICAgICAgICAgIC8qIERJU1RTICovXG4gICAgYmFzZSA9IGRiYXNlO1xuICAgIGV4dHJhID0gZGV4dDtcbiAgICBlbmQgPSAtMTtcbiAgfVxuXG4gIC8qIGluaXRpYWxpemUgb3B0cyBmb3IgbG9vcCAqL1xuICBodWZmID0gMDsgICAgICAgICAgICAgICAgICAgLyogc3RhcnRpbmcgY29kZSAqL1xuICBzeW0gPSAwOyAgICAgICAgICAgICAgICAgICAgLyogc3RhcnRpbmcgY29kZSBzeW1ib2wgKi9cbiAgbGVuID0gbWluOyAgICAgICAgICAgICAgICAgIC8qIHN0YXJ0aW5nIGNvZGUgbGVuZ3RoICovXG4gIG5leHQgPSB0YWJsZV9pbmRleDsgICAgICAgICAgICAgIC8qIGN1cnJlbnQgdGFibGUgdG8gZmlsbCBpbiAqL1xuICBjdXJyID0gcm9vdDsgICAgICAgICAgICAgICAgLyogY3VycmVudCB0YWJsZSBpbmRleCBiaXRzICovXG4gIGRyb3AgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBjdXJyZW50IGJpdHMgdG8gZHJvcCBmcm9tIGNvZGUgZm9yIGluZGV4ICovXG4gIGxvdyA9IC0xOyAgICAgICAgICAgICAgICAgICAvKiB0cmlnZ2VyIG5ldyBzdWItdGFibGUgd2hlbiBsZW4gPiByb290ICovXG4gIHVzZWQgPSAxIDw8IHJvb3Q7ICAgICAgICAgIC8qIHVzZSByb290IHRhYmxlIGVudHJpZXMgKi9cbiAgbWFzayA9IHVzZWQgLSAxOyAgICAgICAgICAgIC8qIG1hc2sgZm9yIGNvbXBhcmluZyBsb3cgKi9cblxuICAvKiBjaGVjayBhdmFpbGFibGUgdGFibGUgc3BhY2UgKi9cbiAgaWYgKCh0eXBlID09PSBMRU5TICYmIHVzZWQgPiBFTk9VR0hfTEVOUykgfHxcbiAgICAodHlwZSA9PT0gRElTVFMgJiYgdXNlZCA+IEVOT1VHSF9ESVNUUykpIHtcbiAgICByZXR1cm4gMTtcbiAgfVxuXG4gIC8qIHByb2Nlc3MgYWxsIGNvZGVzIGFuZCBtYWtlIHRhYmxlIGVudHJpZXMgKi9cbiAgZm9yICg7Oykge1xuICAgIC8qIGNyZWF0ZSB0YWJsZSBlbnRyeSAqL1xuICAgIGhlcmVfYml0cyA9IGxlbiAtIGRyb3A7XG4gICAgaWYgKHdvcmtbc3ltXSA8IGVuZCkge1xuICAgICAgaGVyZV9vcCA9IDA7XG4gICAgICBoZXJlX3ZhbCA9IHdvcmtbc3ltXTtcbiAgICB9XG4gICAgZWxzZSBpZiAod29ya1tzeW1dID4gZW5kKSB7XG4gICAgICBoZXJlX29wID0gZXh0cmFbZXh0cmFfaW5kZXggKyB3b3JrW3N5bV1dO1xuICAgICAgaGVyZV92YWwgPSBiYXNlW2Jhc2VfaW5kZXggKyB3b3JrW3N5bV1dO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGhlcmVfb3AgPSAzMiArIDY0OyAgICAgICAgIC8qIGVuZCBvZiBibG9jayAqL1xuICAgICAgaGVyZV92YWwgPSAwO1xuICAgIH1cblxuICAgIC8qIHJlcGxpY2F0ZSBmb3IgdGhvc2UgaW5kaWNlcyB3aXRoIGxvdyBsZW4gYml0cyBlcXVhbCB0byBodWZmICovXG4gICAgaW5jciA9IDEgPDwgKGxlbiAtIGRyb3ApO1xuICAgIGZpbGwgPSAxIDw8IGN1cnI7XG4gICAgbWluID0gZmlsbDsgICAgICAgICAgICAgICAgIC8qIHNhdmUgb2Zmc2V0IHRvIG5leHQgdGFibGUgKi9cbiAgICBkbyB7XG4gICAgICBmaWxsIC09IGluY3I7XG4gICAgICB0YWJsZVtuZXh0ICsgKGh1ZmYgPj4gZHJvcCkgKyBmaWxsXSA9IChoZXJlX2JpdHMgPDwgMjQpIHwgKGhlcmVfb3AgPDwgMTYpIHwgaGVyZV92YWwgfDA7XG4gICAgfSB3aGlsZSAoZmlsbCAhPT0gMCk7XG5cbiAgICAvKiBiYWNrd2FyZHMgaW5jcmVtZW50IHRoZSBsZW4tYml0IGNvZGUgaHVmZiAqL1xuICAgIGluY3IgPSAxIDw8IChsZW4gLSAxKTtcbiAgICB3aGlsZSAoaHVmZiAmIGluY3IpIHtcbiAgICAgIGluY3IgPj49IDE7XG4gICAgfVxuICAgIGlmIChpbmNyICE9PSAwKSB7XG4gICAgICBodWZmICY9IGluY3IgLSAxO1xuICAgICAgaHVmZiArPSBpbmNyO1xuICAgIH0gZWxzZSB7XG4gICAgICBodWZmID0gMDtcbiAgICB9XG5cbiAgICAvKiBnbyB0byBuZXh0IHN5bWJvbCwgdXBkYXRlIGNvdW50LCBsZW4gKi9cbiAgICBzeW0rKztcbiAgICBpZiAoLS1jb3VudFtsZW5dID09PSAwKSB7XG4gICAgICBpZiAobGVuID09PSBtYXgpIHsgYnJlYWs7IH1cbiAgICAgIGxlbiA9IGxlbnNbbGVuc19pbmRleCArIHdvcmtbc3ltXV07XG4gICAgfVxuXG4gICAgLyogY3JlYXRlIG5ldyBzdWItdGFibGUgaWYgbmVlZGVkICovXG4gICAgaWYgKGxlbiA+IHJvb3QgJiYgKGh1ZmYgJiBtYXNrKSAhPT0gbG93KSB7XG4gICAgICAvKiBpZiBmaXJzdCB0aW1lLCB0cmFuc2l0aW9uIHRvIHN1Yi10YWJsZXMgKi9cbiAgICAgIGlmIChkcm9wID09PSAwKSB7XG4gICAgICAgIGRyb3AgPSByb290O1xuICAgICAgfVxuXG4gICAgICAvKiBpbmNyZW1lbnQgcGFzdCBsYXN0IHRhYmxlICovXG4gICAgICBuZXh0ICs9IG1pbjsgICAgICAgICAgICAvKiBoZXJlIG1pbiBpcyAxIDw8IGN1cnIgKi9cblxuICAgICAgLyogZGV0ZXJtaW5lIGxlbmd0aCBvZiBuZXh0IHRhYmxlICovXG4gICAgICBjdXJyID0gbGVuIC0gZHJvcDtcbiAgICAgIGxlZnQgPSAxIDw8IGN1cnI7XG4gICAgICB3aGlsZSAoY3VyciArIGRyb3AgPCBtYXgpIHtcbiAgICAgICAgbGVmdCAtPSBjb3VudFtjdXJyICsgZHJvcF07XG4gICAgICAgIGlmIChsZWZ0IDw9IDApIHsgYnJlYWs7IH1cbiAgICAgICAgY3VycisrO1xuICAgICAgICBsZWZ0IDw8PSAxO1xuICAgICAgfVxuXG4gICAgICAvKiBjaGVjayBmb3IgZW5vdWdoIHNwYWNlICovXG4gICAgICB1c2VkICs9IDEgPDwgY3VycjtcbiAgICAgIGlmICgodHlwZSA9PT0gTEVOUyAmJiB1c2VkID4gRU5PVUdIX0xFTlMpIHx8XG4gICAgICAgICh0eXBlID09PSBESVNUUyAmJiB1c2VkID4gRU5PVUdIX0RJU1RTKSkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICAgIH1cblxuICAgICAgLyogcG9pbnQgZW50cnkgaW4gcm9vdCB0YWJsZSB0byBzdWItdGFibGUgKi9cbiAgICAgIGxvdyA9IGh1ZmYgJiBtYXNrO1xuICAgICAgLyp0YWJsZS5vcFtsb3ddID0gY3VycjtcbiAgICAgIHRhYmxlLmJpdHNbbG93XSA9IHJvb3Q7XG4gICAgICB0YWJsZS52YWxbbG93XSA9IG5leHQgLSBvcHRzLnRhYmxlX2luZGV4OyovXG4gICAgICB0YWJsZVtsb3ddID0gKHJvb3QgPDwgMjQpIHwgKGN1cnIgPDwgMTYpIHwgKG5leHQgLSB0YWJsZV9pbmRleCkgfDA7XG4gICAgfVxuICB9XG5cbiAgLyogZmlsbCBpbiByZW1haW5pbmcgdGFibGUgZW50cnkgaWYgY29kZSBpcyBpbmNvbXBsZXRlIChndWFyYW50ZWVkIHRvIGhhdmVcbiAgIGF0IG1vc3Qgb25lIHJlbWFpbmluZyBlbnRyeSwgc2luY2UgaWYgdGhlIGNvZGUgaXMgaW5jb21wbGV0ZSwgdGhlXG4gICBtYXhpbXVtIGNvZGUgbGVuZ3RoIHRoYXQgd2FzIGFsbG93ZWQgdG8gZ2V0IHRoaXMgZmFyIGlzIG9uZSBiaXQpICovXG4gIGlmIChodWZmICE9PSAwKSB7XG4gICAgLy90YWJsZS5vcFtuZXh0ICsgaHVmZl0gPSA2NDsgICAgICAgICAgICAvKiBpbnZhbGlkIGNvZGUgbWFya2VyICovXG4gICAgLy90YWJsZS5iaXRzW25leHQgKyBodWZmXSA9IGxlbiAtIGRyb3A7XG4gICAgLy90YWJsZS52YWxbbmV4dCArIGh1ZmZdID0gMDtcbiAgICB0YWJsZVtuZXh0ICsgaHVmZl0gPSAoKGxlbiAtIGRyb3ApIDw8IDI0KSB8ICg2NCA8PCAxNikgfDA7XG4gIH1cblxuICAvKiBzZXQgcmV0dXJuIHBhcmFtZXRlcnMgKi9cbiAgLy9vcHRzLnRhYmxlX2luZGV4ICs9IHVzZWQ7XG4gIG9wdHMuYml0cyA9IHJvb3Q7XG4gIHJldHVybiAwO1xufTtcblxuXG4vKioqLyB9KSxcbi8qIDE3ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuXG5cbi8vIChDKSAxOTk1LTIwMTMgSmVhbi1sb3VwIEdhaWxseSBhbmQgTWFyayBBZGxlclxuLy8gKEMpIDIwMTQtMjAxNyBWaXRhbHkgUHV6cmluIGFuZCBBbmRyZXkgVHVwaXRzaW5cbi8vXG4vLyBUaGlzIHNvZnR3YXJlIGlzIHByb3ZpZGVkICdhcy1pcycsIHdpdGhvdXQgYW55IGV4cHJlc3Mgb3IgaW1wbGllZFxuLy8gd2FycmFudHkuIEluIG5vIGV2ZW50IHdpbGwgdGhlIGF1dGhvcnMgYmUgaGVsZCBsaWFibGUgZm9yIGFueSBkYW1hZ2VzXG4vLyBhcmlzaW5nIGZyb20gdGhlIHVzZSBvZiB0aGlzIHNvZnR3YXJlLlxuLy9cbi8vIFBlcm1pc3Npb24gaXMgZ3JhbnRlZCB0byBhbnlvbmUgdG8gdXNlIHRoaXMgc29mdHdhcmUgZm9yIGFueSBwdXJwb3NlLFxuLy8gaW5jbHVkaW5nIGNvbW1lcmNpYWwgYXBwbGljYXRpb25zLCBhbmQgdG8gYWx0ZXIgaXQgYW5kIHJlZGlzdHJpYnV0ZSBpdFxuLy8gZnJlZWx5LCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcgcmVzdHJpY3Rpb25zOlxuLy9cbi8vIDEuIFRoZSBvcmlnaW4gb2YgdGhpcyBzb2Z0d2FyZSBtdXN0IG5vdCBiZSBtaXNyZXByZXNlbnRlZDsgeW91IG11c3Qgbm90XG4vLyAgIGNsYWltIHRoYXQgeW91IHdyb3RlIHRoZSBvcmlnaW5hbCBzb2Z0d2FyZS4gSWYgeW91IHVzZSB0aGlzIHNvZnR3YXJlXG4vLyAgIGluIGEgcHJvZHVjdCwgYW4gYWNrbm93bGVkZ21lbnQgaW4gdGhlIHByb2R1Y3QgZG9jdW1lbnRhdGlvbiB3b3VsZCBiZVxuLy8gICBhcHByZWNpYXRlZCBidXQgaXMgbm90IHJlcXVpcmVkLlxuLy8gMi4gQWx0ZXJlZCBzb3VyY2UgdmVyc2lvbnMgbXVzdCBiZSBwbGFpbmx5IG1hcmtlZCBhcyBzdWNoLCBhbmQgbXVzdCBub3QgYmVcbi8vICAgbWlzcmVwcmVzZW50ZWQgYXMgYmVpbmcgdGhlIG9yaWdpbmFsIHNvZnR3YXJlLlxuLy8gMy4gVGhpcyBub3RpY2UgbWF5IG5vdCBiZSByZW1vdmVkIG9yIGFsdGVyZWQgZnJvbSBhbnkgc291cmNlIGRpc3RyaWJ1dGlvbi5cblxuZnVuY3Rpb24gR1poZWFkZXIoKSB7XG4gIC8qIHRydWUgaWYgY29tcHJlc3NlZCBkYXRhIGJlbGlldmVkIHRvIGJlIHRleHQgKi9cbiAgdGhpcy50ZXh0ICAgICAgID0gMDtcbiAgLyogbW9kaWZpY2F0aW9uIHRpbWUgKi9cbiAgdGhpcy50aW1lICAgICAgID0gMDtcbiAgLyogZXh0cmEgZmxhZ3MgKG5vdCB1c2VkIHdoZW4gd3JpdGluZyBhIGd6aXAgZmlsZSkgKi9cbiAgdGhpcy54ZmxhZ3MgICAgID0gMDtcbiAgLyogb3BlcmF0aW5nIHN5c3RlbSAqL1xuICB0aGlzLm9zICAgICAgICAgPSAwO1xuICAvKiBwb2ludGVyIHRvIGV4dHJhIGZpZWxkIG9yIFpfTlVMTCBpZiBub25lICovXG4gIHRoaXMuZXh0cmEgICAgICA9IG51bGw7XG4gIC8qIGV4dHJhIGZpZWxkIGxlbmd0aCAodmFsaWQgaWYgZXh0cmEgIT0gWl9OVUxMKSAqL1xuICB0aGlzLmV4dHJhX2xlbiAgPSAwOyAvLyBBY3R1YWxseSwgd2UgZG9uJ3QgbmVlZCBpdCBpbiBKUyxcbiAgICAgICAgICAgICAgICAgICAgICAgLy8gYnV0IGxlYXZlIGZvciBmZXcgY29kZSBtb2RpZmljYXRpb25zXG5cbiAgLy9cbiAgLy8gU2V0dXAgbGltaXRzIGlzIG5vdCBuZWNlc3NhcnkgYmVjYXVzZSBpbiBqcyB3ZSBzaG91bGQgbm90IHByZWFsbG9jYXRlIG1lbW9yeVxuICAvLyBmb3IgaW5mbGF0ZSB1c2UgY29uc3RhbnQgbGltaXQgaW4gNjU1MzYgYnl0ZXNcbiAgLy9cblxuICAvKiBzcGFjZSBhdCBleHRyYSAob25seSB3aGVuIHJlYWRpbmcgaGVhZGVyKSAqL1xuICAvLyB0aGlzLmV4dHJhX21heCAgPSAwO1xuICAvKiBwb2ludGVyIHRvIHplcm8tdGVybWluYXRlZCBmaWxlIG5hbWUgb3IgWl9OVUxMICovXG4gIHRoaXMubmFtZSAgICAgICA9ICcnO1xuICAvKiBzcGFjZSBhdCBuYW1lIChvbmx5IHdoZW4gcmVhZGluZyBoZWFkZXIpICovXG4gIC8vIHRoaXMubmFtZV9tYXggICA9IDA7XG4gIC8qIHBvaW50ZXIgdG8gemVyby10ZXJtaW5hdGVkIGNvbW1lbnQgb3IgWl9OVUxMICovXG4gIHRoaXMuY29tbWVudCAgICA9ICcnO1xuICAvKiBzcGFjZSBhdCBjb21tZW50IChvbmx5IHdoZW4gcmVhZGluZyBoZWFkZXIpICovXG4gIC8vIHRoaXMuY29tbV9tYXggICA9IDA7XG4gIC8qIHRydWUgaWYgdGhlcmUgd2FzIG9yIHdpbGwgYmUgYSBoZWFkZXIgY3JjICovXG4gIHRoaXMuaGNyYyAgICAgICA9IDA7XG4gIC8qIHRydWUgd2hlbiBkb25lIHJlYWRpbmcgZ3ppcCBoZWFkZXIgKG5vdCB1c2VkIHdoZW4gd3JpdGluZyBhIGd6aXAgZmlsZSkgKi9cbiAgdGhpcy5kb25lICAgICAgID0gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gR1poZWFkZXI7XG5cblxuLyoqKi8gfSlcbi8qKioqKiovIF0pO1xufSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1leGNhbGlidXItdGlsZWQuanMubWFwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/@excaliburjs/excalibur-tiled/dist/excalibur-tiled.js\n");

/***/ }),

/***/ "./node_modules/excalibur/dist/excalibur.min.js":
/*!******************************************************!*\
  !*** ./node_modules/excalibur/dist/excalibur.min.js ***!
  \******************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*!\r\n * excalibur - 0.19.1 - 2018-10-23\r\n * https://github.com/excaliburjs/Excalibur\r\n * Copyright (c) 2018 Excalibur.js <https://github.com/excaliburjs/Excalibur/graphs/contributors>\r\n * Licensed BSD-2-Clause\r\n * @preserve\r\n */\r\n!function(t,e){ true?module.exports=e():undefined}(window,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,\"__esModule\",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=0)}([function(t,e,i){\"use strict\";i.r(e);var n={};i.d(n,\"GameEvent\",function(){return U}),i.d(n,\"KillEvent\",function(){return N}),i.d(n,\"PreKillEvent\",function(){return q}),i.d(n,\"PostKillEvent\",function(){return X}),i.d(n,\"GameStartEvent\",function(){return V}),i.d(n,\"GameStopEvent\",function(){return G}),i.d(n,\"PreDrawEvent\",function(){return Y}),i.d(n,\"PostDrawEvent\",function(){return K}),i.d(n,\"PreDebugDrawEvent\",function(){return Q}),i.d(n,\"PostDebugDrawEvent\",function(){return Z}),i.d(n,\"PreUpdateEvent\",function(){return J}),i.d(n,\"PostUpdateEvent\",function(){return $}),i.d(n,\"PreFrameEvent\",function(){return tt}),i.d(n,\"PostFrameEvent\",function(){return et}),i.d(n,\"GamepadConnectEvent\",function(){return it}),i.d(n,\"GamepadDisconnectEvent\",function(){return nt}),i.d(n,\"GamepadButtonEvent\",function(){return ot}),i.d(n,\"GamepadAxisEvent\",function(){return rt}),i.d(n,\"SubscribeEvent\",function(){return st}),i.d(n,\"UnsubscribeEvent\",function(){return at}),i.d(n,\"VisibleEvent\",function(){return ht}),i.d(n,\"HiddenEvent\",function(){return ct}),i.d(n,\"PreCollisionEvent\",function(){return ut}),i.d(n,\"PostCollisionEvent\",function(){return lt}),i.d(n,\"CollisionStartEvent\",function(){return pt}),i.d(n,\"CollisionEndEvent\",function(){return dt}),i.d(n,\"InitializeEvent\",function(){return ft}),i.d(n,\"ActivateEvent\",function(){return _t}),i.d(n,\"DeactivateEvent\",function(){return gt}),i.d(n,\"ExitViewPortEvent\",function(){return yt}),i.d(n,\"EnterViewPortEvent\",function(){return vt}),i.d(n,\"EnterTriggerEvent\",function(){return mt}),i.d(n,\"ExitTriggerEvent\",function(){return bt});var o={};i.d(o,\"Grayscale\",function(){return It}),i.d(o,\"Invert\",function(){return Lt}),i.d(o,\"Opacity\",function(){return Ht}),i.d(o,\"Colorize\",function(){return zt}),i.d(o,\"Lighten\",function(){return Wt}),i.d(o,\"Darken\",function(){return jt}),i.d(o,\"Saturate\",function(){return Ut}),i.d(o,\"Desaturate\",function(){return Nt}),i.d(o,\"Fill\",function(){return qt});var r={};i.d(r,\"EaseTo\",function(){return Jt}),i.d(r,\"MoveTo\",function(){return $t}),i.d(r,\"MoveBy\",function(){return te}),i.d(r,\"Follow\",function(){return ee}),i.d(r,\"Meet\",function(){return ie}),i.d(r,\"RotateTo\",function(){return ne}),i.d(r,\"RotateBy\",function(){return oe}),i.d(r,\"ScaleTo\",function(){return re}),i.d(r,\"ScaleBy\",function(){return se}),i.d(r,\"Delay\",function(){return ae}),i.d(r,\"Blink\",function(){return he}),i.d(r,\"Fade\",function(){return ce}),i.d(r,\"Die\",function(){return ue}),i.d(r,\"CallMethod\",function(){return le}),i.d(r,\"Repeat\",function(){return pe}),i.d(r,\"RepeatForever\",function(){return de}),i.d(r,\"ActionQueue\",function(){return fe});var s={};i.d(s,\"line\",function(){return ye}),i.d(s,\"point\",function(){return ve}),i.d(s,\"vector\",function(){return me}),i.d(s,\"roundRect\",function(){return be}),i.d(s,\"circle\",function(){return we});var a={};i.d(a,\"Gamepads\",function(){return $i}),i.d(a,\"Gamepad\",function(){return tn}),i.d(a,\"Buttons\",function(){return Yi}),i.d(a,\"Axes\",function(){return Ki}),i.d(a,\"PointerType\",function(){return Di}),i.d(a,\"PointerButton\",function(){return Oi}),i.d(a,\"WheelDeltaMode\",function(){return Bi}),i.d(a,\"PointerScope\",function(){return ki}),i.d(a,\"PointerEvent\",function(){return Li}),i.d(a,\"PointerEventFactory\",function(){return Hi}),i.d(a,\"PointerDragEvent\",function(){return zi}),i.d(a,\"PointerUpEvent\",function(){return Wi}),i.d(a,\"PointerDownEvent\",function(){return ji}),i.d(a,\"PointerMoveEvent\",function(){return Ui}),i.d(a,\"PointerEnterEvent\",function(){return Ni}),i.d(a,\"PointerLeaveEvent\",function(){return qi}),i.d(a,\"PointerCancelEvent\",function(){return Xi}),i.d(a,\"WheelEvent\",function(){return Vi}),i.d(a,\"Pointers\",function(){return Qi}),i.d(a,\"Pointer\",function(){return Zi}),i.d(a,\"Keys\",function(){return Pi}),i.d(a,\"KeyEvent\",function(){return Ri}),i.d(a,\"Keyboard\",function(){return Fi});var h={};i.d(h,\"CapturePointer\",function(){return Ce}),i.d(h,\"EulerMovement\",function(){return Ln}),i.d(h,\"OffscreenCulling\",function(){return Ee}),i.d(h,\"TileMapCollisionDetection\",function(){return Te});var c,u={};i.d(u,\"DrawUtil\",function(){return s}),i.d(u,\"TwoPI\",function(){return f}),i.d(u,\"extend\",function(){return _}),i.d(u,\"base64Encode\",function(){return g}),i.d(u,\"clamp\",function(){return y}),i.d(u,\"randomInRange\",function(){return v}),i.d(u,\"randomIntInRange\",function(){return m}),i.d(u,\"canonicalizeAngle\",function(){return b}),i.d(u,\"toDegrees\",function(){return w}),i.d(u,\"toRadians\",function(){return x}),i.d(u,\"getPosition\",function(){return P}),i.d(u,\"addItemToArray\",function(){return S}),i.d(u,\"removeItemFromArray\",function(){return A}),i.d(u,\"contains\",function(){return E}),i.d(u,\"getOppositeSide\",function(){return C}),i.d(u,\"getSideFromVector\",function(){return T}),i.d(u,\"Collection\",function(){return B}),function(t){t[t.Resolved=0]=\"Resolved\",t[t.Rejected=1]=\"Rejected\",t[t.Pending=2]=\"Pending\"}(c||(c={}));var l,p=function(){function t(){this._state=c.Pending,this._successCallbacks=[],this._rejectCallback=function(){}}return t.resolve=function(e){return(new t).resolve(e)},t.reject=function(e){return(new t).reject(e)},t.join=function(){var e=[];if(arguments.length>0&&!Array.isArray(arguments[0]))for(var i=0;i<arguments.length;i++)e[i-0]=arguments[i];else 1===arguments.length&&Array.isArray(arguments[0])&&(e=arguments[0]);var n=new t;if(!e||!e.length)return n.resolve();var o=e.length,r=0,s=0,a=[];return e.forEach(function(t){t.then(function(){(r+=1)===o?n.resolve():r+s+a.length===o&&n.reject(a)},function(){r+(s+=1)+a.length===o&&n.reject(a)}).error(function(t){a.push(t),a.length+r+s===o&&n.reject(a)})}),n},t.prototype.then=function(t,e){if(t&&(this._successCallbacks.push(t),this.state()===c.Resolved))try{t.call(this,this._value)}catch(t){this._handleError(t)}if(e&&(this._rejectCallback=e,this.state()===c.Rejected))try{e.call(this,this._value)}catch(t){this._handleError(t)}return this},t.prototype.error=function(t){return t&&(this._errorCallback=t),this},t.prototype.resolve=function(t){var e=this;if(this._state!==c.Pending)throw new Error(\"Cannot resolve a promise that is not in a pending state!\");this._value=t;try{this._state=c.Resolved,this._successCallbacks.forEach(function(t){t.call(e,e._value)})}catch(t){this._handleError(t)}return this},t.prototype.reject=function(t){if(this._state!==c.Pending)throw new Error(\"Cannot reject a promise that is not in a pending state!\");this._value=t;try{this._state=c.Rejected,this._rejectCallback.call(this,this._value)}catch(t){this._handleError(t)}return this},t.prototype.state=function(){return this._state},t.prototype._handleError=function(t){if(!this._errorCallback)throw t;this._errorCallback.call(this,t)},t}(),d=function(){function t(t){this.seed=t,this._lowerMask=2147483647,this._upperMask=2147483648,this._w=32,this._n=624,this._m=397,this._a=2567483615,this._u=11,this._s=7,this._b=2636928640,this._t=15,this._c=4022730752,this._l=18,this._f=1812433253,this._mt=new Array(this._n),this._mt[0]=(t||Date.now())>>>0;for(var e=1;e<this._n;e++){var i=this._mt[e-1]^this._mt[e-1]>>>this._w-2;this._mt[e]=(this._f*((4294901760&i)>>>16)<<16)+this._f*(65535&i)+e>>>0}this._index=this._n}return t.prototype._twist=function(){for(var t=[0,this._a],e=0,i=0;i<this._n-this._m;i++)e=this._mt[i]&this._upperMask|this._mt[i+1]&this._lowerMask,this._mt[i]=this._mt[i+this._m]^e>>>1^4294967295&t[1&e];for(;i<this._n-1;i++)e=this._mt[i]&this._upperMask|this._mt[i+1]&this._lowerMask,this._mt[i]=this._mt[i+(this._m-this._n)]^e>>>1^4294967295&t[1&e];e=this._mt[this._n-1]&this._upperMask|this._mt[0]&this._lowerMask,this._mt[this._n-1]=this._mt[this._m-1]^e>>>1^4294967295&t[1&e],this._index=0},t.prototype.nextInt=function(){this._index>=this._n&&this._twist();var t=this._mt[this._index++];return t^=t>>>this._u,t^=t<<this._s&this._b,t^=t<<this._t&this._c,(t^=t>>>this._l)>>>0},t.prototype.next=function(){return this.nextInt()*(1/4294967296)},t.prototype.floating=function(t,e){return(e-t)*this.next()+t},t.prototype.integer=function(t,e){return Math.floor((e-t+1)*this.next()+t)},t.prototype.bool=function(t){return void 0===t&&(t=.5),this.next()<=t},t.prototype.pickOne=function(t){return t[this.integer(0,t.length-1)]},t.prototype.pickSet=function(t,e,i){return void 0===i&&(i=!1),i?this._pickSetWithDuplicates(t,e):this._pickSetWithoutDuplicates(t,e)},t.prototype._pickSetWithoutDuplicates=function(t,e){if(e>t.length||e<0)throw new Error(\"Invalid number of elements to pick, must pick a value 0 < n <= length\");if(e===t.length)return t;for(var i=new Array(e),n=0,o=t.slice(0);n<e;){var r=this.integer(0,o.length-1);i[n++]=o[r],o.splice(r,1)}return i},t.prototype._pickSetWithDuplicates=function(t,e){if(e<0)throw new Error(\"Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT\");for(var i=new Array(e),n=0;n<e;n++)i[n]=this.pickOne(t);return i},t.prototype.shuffle=function(t){for(var e=t.slice(0),i=null,n=0;n<e.length-2;n++){var o=this.integer(n,e.length-1);i=e[n],e[n]=e[o],e[o]=i}return e},t.prototype.range=function(t,e,i){for(var n=new Array(t),o=0;o<t;o++)n[o]=this.integer(e,i);return n},t.prototype.d4=function(){return this.integer(1,4)},t.prototype.d6=function(){return this.integer(1,6)},t.prototype.d8=function(){return this.integer(1,8)},t.prototype.d10=function(){return this.integer(1,10)},t.prototype.d12=function(){return this.integer(1,12)},t.prototype.d20=function(){return this.integer(1,20)},t}();!function(t){t[t.None=0]=\"None\",t[t.Top=1]=\"Top\",t[t.Bottom=2]=\"Bottom\",t[t.Left=3]=\"Left\",t[t.Right=4]=\"Right\"}(l||(l={}));var f=2*Math.PI;function _(){var t={},e=!1,i=0,n=arguments.length;\"[object Boolean]\"===Object.prototype.toString.call(arguments[0])&&(e=arguments[0],i++);var o=\"function\"==typeof Object.assign,r=null;for(r=o?Object.assign:function(i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e&&\"[object Object]\"===Object.prototype.toString.call(i[n])?t[n]=_(!0,t[n],i[n]):t[n]=i[n])};i<n;i++){var s=arguments[i];o?r(t,s):r(s)}return t}function g(t){for(var e=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",i=\"\",n=0;n<t.length;){var o,r,s=255&t.charCodeAt(n++),a=255&t.charCodeAt(n++),h=255&t.charCodeAt(n++),c=s>>2,u=(3&s)<<4|a>>4;isNaN(a)?o=r=64:(o=(15&a)<<2|h>>6,r=isNaN(h)?64:63&h),i+=e.charAt(c)+e.charAt(u)+e.charAt(o)+e.charAt(r)}return i}function y(t,e,i){return Math.min(Math.max(e,t),i)}function v(t,e,i){return void 0===i&&(i=new d),i?i.floating(t,e):t+Math.random()*(e-t)}function m(t,e,i){return void 0===i&&(i=new d),i?i.integer(t,e):Math.round(v(t,e))}function b(t){var e=t;if(t>f)for(;e>f;)e-=f;if(t<0)for(;e<0;)e+=f;return e}function w(t){return 180/Math.PI*t}function x(t){return t/180*Math.PI}function P(t){var e=0,i=0,n=function(t){e+=t.offsetLeft,t.offsetParent&&n(t.offsetParent)},o=function(t){i+=t.offsetTop,t.offsetParent&&o(t.offsetParent)};return n(t),o(t),new k(e,i)}function S(t,e){return-1===e.indexOf(t)&&(e.push(t),!0)}function A(t,e){var i;return(i=e.indexOf(t))>-1&&(e.splice(i,1),!0)}function E(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return!0;return!1}function C(t){return t===l.Top?l.Bottom:t===l.Bottom?l.Top:t===l.Left?l.Right:t===l.Right?l.Left:l.None}function T(t){for(var e=[k.Left,k.Right,k.Up,k.Down],i=[l.Left,l.Right,l.Top,l.Bottom],n=-Number.MAX_VALUE,o=-1,r=0;r<e.length;r++)e[r].dot(t)>n&&(n=e[r].dot(t),o=r);return i[o]}var M,D,O,B=function(){function t(e){void 0===e&&(e=t.DefaultSize),this._internalArray=null,this._endPointer=0,this._internalArray=new Array(e)}return t.prototype._resize=function(){for(var t=2*this._internalArray.length,e=new Array(t),i=this.count(),n=0;n<i;n++)e[n]=this._internalArray[n];delete this._internalArray,this._internalArray=e},t.prototype.push=function(t){return this._endPointer===this._internalArray.length&&this._resize(),this._internalArray[this._endPointer++]=t},t.prototype.pop=function(){return this._endPointer=this._endPointer-1<0?0:this._endPointer-1,this._internalArray[this._endPointer]},t.prototype.count=function(){return this._endPointer},t.prototype.clear=function(){this._endPointer=0},t.prototype.internalSize=function(){return this._internalArray.length},t.prototype.elementAt=function(t){if(t>=this.count())throw new Error(\"Invalid index \"+t);return this._internalArray[t]},t.prototype.insert=function(t,e){return t>=this.count()&&this._resize(),this._internalArray[t]=e},t.prototype.remove=function(t){var e=this.count();if(0===e)throw new Error(\"Invalid parameter \"+t);for(var i=this._internalArray[t],n=t;n<e;n++)this._internalArray[n]=this._internalArray[n+1];return this._endPointer--,i},t.prototype.removeElement=function(t){var e=this._internalArray.indexOf(t);this.remove(e)},t.prototype.toArray=function(){return this._internalArray.slice(0,this._endPointer)},t.prototype.forEach=function(t){for(var e=0,i=this.count();e<i;e++)t.call(this,this._internalArray[e],e)},t.prototype.map=function(t){for(var e=this.count(),i=0;i<e;i++)this._internalArray[i]=t.call(this,this._internalArray[i],i)},t.DefaultSize=200,t}(),k=function(){function t(t,e){this.x=t,this.y=e}return t.fromAngle=function(e){return new t(Math.cos(e),Math.sin(e))},t.isValid=function(t){return null!==t&&void 0!==t&&(!isNaN(t.x)&&!isNaN(t.y)&&(t.x!==1/0&&t.y!==1/0&&t.x!==-1/0&&t.y!==-1/0))},t.distance=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},t.prototype.setTo=function(t,e){this.x=t,this.y=e},t.prototype.equals=function(t,e){return void 0===e&&(e=.001),Math.abs(this.x-t.x)<=e&&Math.abs(this.y-t.y)<=e},t.prototype.distance=function(e){return e||(e=t.Zero),Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))},t.prototype.magnitude=function(){return this.distance()},t.prototype.normalize=function(){var e=this.distance();return e>0?new t(this.x/e,this.y/e):new t(0,1)},t.prototype.average=function(t){return this.add(t).scale(.5)},t.prototype.scale=function(e){return new t(this.x*e,this.y*e)},t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.sub=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.addEqual=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.subEqual=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.scaleEqual=function(t){return this.x*=t,this.y*=t,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.cross=function(e){return e instanceof t?this.x*e.y-this.y*e.x:\"number\"==typeof e?new t(e*this.y,-e*this.x):void 0},t.prototype.perpendicular=function(){return new t(this.y,-this.x)},t.prototype.normal=function(){return this.perpendicular().normalize()},t.prototype.negate=function(){return this.scale(-1)},t.prototype.toAngle=function(){return Math.atan2(this.y,this.x)},t.prototype.rotate=function(e,i){i||(i=new t(0,0));var n=Math.sin(e),o=Math.cos(e);return new t(o*(this.x-i.x)-n*(this.y-i.y)+i.x,n*(this.x-i.x)+o*(this.y-i.y)+i.y)},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.toString=function(){return\"(\"+this.x+\", \"+this.y+\")\"},t.Zero=new t(0,0),t.One=new t(1,1),t.Half=new t(.5,.5),t.Up=new t(0,-1),t.Down=new t(0,1),t.Left=new t(-1,0),t.Right=new t(1,0),t}(),R=function(){function t(t,e){this.pos=t,this.dir=e.normalize()}return t.prototype.intersect=function(t){var e=t.begin.sub(this.pos);if(0===this.dir.cross(t.getSlope())&&0!==e.cross(this.dir))return-1;var i=this.dir.cross(t.getSlope());if(0===i)return-1;var n=e.cross(t.getSlope())/i;if(n>=0){var o=e.cross(this.dir)/i/t.getLength();if(o>=0&&o<=1)return n}return-1},t.prototype.getPoint=function(t){return this.pos.add(this.dir.scale(t))},t}(),F=function(){function t(t,e){this.begin=t,this.end=e}return Object.defineProperty(t.prototype,\"slope\",{get:function(){return(this.end.y-this.begin.y)/(this.end.x-this.begin.x)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"intercept\",{get:function(){return this.begin.y-this.slope*this.begin.x},enumerable:!0,configurable:!0}),t.prototype.normal=function(){return this.end.sub(this.begin).normal()},t.prototype.getSlope=function(){var t=this.begin,e=this.end,i=t.distance(e);return e.sub(t).scale(1/i)},t.prototype.getLength=function(){var t=this.begin,e=this.end;return t.distance(e)},t.prototype.distanceToPoint=function(t){var e=t.x,i=t.y,n=this.getLength(),o=this.end.y-this.begin.y,r=this.end.x-this.begin.x;return Math.abs(o*e-r*i+this.end.x*this.begin.y-this.end.y*this.begin.x)/n},t.prototype.findPoint=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null);var i=this.slope,n=this.intercept;if(null!==t)return new k(t,i*t+n);if(null!==e)return new k((e-n)/i,e);throw new Error(\"You must provide an X or a Y value\")},t.prototype.hasPoint=function(){var t,e=0;if(\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1])t=new k(arguments[0],arguments[1]),e=arguments[2]||0;else{if(!(arguments[0]instanceof k))throw\"Could not determine the arguments for Vector.hasPoint\";t=arguments[0],e=arguments[1]||0}var i=t.x-this.begin.x,n=t.y-this.begin.y,o=this.end.x-this.begin.x,r=this.end.y-this.begin.y,s=i*r-n*o;return!(Math.abs(s)>e)&&(Math.abs(o)>=Math.abs(r)?o>0?this.begin.x<=t.x&&t.x<=this.end.x:this.end.x<=t.x&&t.x<=this.begin.x:r>0?this.begin.y<=t.y&&t.y<=this.end.y:this.end.y<=t.y&&t.y<=this.begin.y)},t}(),I=function(){function t(t,e){this.min=t,this.max=e}return t.prototype.overlaps=function(t){return this.max>t.min&&t.max>this.min},t.prototype.getOverlap=function(t){return this.overlaps(t)?this.max>t.max?t.max-this.min:this.max-t.min:0},t}(),L=function(){function t(t,e,i){this.worldPos=t,this.pagePos=e,this.screenPos=i}return t.fromPagePosition=function(e,i,n){var o,r,s,a;3===arguments.length?(s=new k(o=e,r=i),a=n):(o=(s=e).x,r=s.y,a=i);var h=o-P(a.canvas).x,c=r-P(a.canvas).y,u=new k(h,c);return new t(a.screenToWorldCoordinates(u),s,u)},t}();!function(t){t[t.Box=0]=\"Box\",t[t.RigidBody=1]=\"RigidBody\"}(M||(M={})),function(t){t[t.Naive=0]=\"Naive\",t[t.DynamicAABBTree=1]=\"DynamicAABBTree\"}(D||(D={})),function(t){t[t.Euler=0]=\"Euler\"}(O||(O={}));var H,z,W=function(){function t(){}return t.useBoxPhysics=function(){t.collisionResolutionStrategy=M.Box},t.useRigidBodyPhysics=function(){t.collisionResolutionStrategy=M.RigidBody},t.acc=new k(0,0),t.enabled=!0,t.collisionPasses=5,t.broadphaseStrategy=D.DynamicAABBTree,t.broadphaseDebug=!1,t.showCollisionNormals=!1,t.showMotionVectors=!1,t.showBounds=!1,t.showArea=!1,t.showContacts=!1,t.showNormals=!1,t.collisionResolutionStrategy=M.Box,t.defaultMass=10,t.integrator=O.Euler,t.integrationSteps=1,t.allowRigidBodyRotation=!0,t.collisionShift=.001,t.dynamicTreeVelocityMultiplyer=2,t.boundsPadding=5,t.surfaceEpsilon=.1,t.checkForFastBodies=!0,t.disableMinimumSpeedForFastBody=!1,t}(),j=(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}H(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),U=function(){function t(){this.bubbles=!0,this._path=[],this._name=\"\"}return Object.defineProperty(t.prototype,\"eventPath\",{get:function(){return this._path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"name\",{get:function(){return this._name},enumerable:!0,configurable:!0}),t.prototype.stopPropagation=function(){this.bubbles=!1},t.prototype.action=function(){var t=this.eventPath.pop();t&&(this._onActionStart(t),t.eventDispatcher.emit(this._name,this),this._onActionEnd(t))},t.prototype.propagate=function(){this.eventPath.length&&(this.action(),this.bubbles&&this.propagate())},t.prototype.layPath=function(t){var e=t.getAncestors();this._path=e.length>this._path.length?e:this._path},t.prototype._onActionStart=function(t){},t.prototype._onActionEnd=function(t){},t}(),N=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return j(e,t),e}(U),q=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return j(e,t),e}(U),X=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return j(e,t),e}(U),V=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return j(e,t),e}(U),G=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return j(e,t),e}(U),Y=function(t){function e(e,i,n){var o=t.call(this)||this;return o.ctx=e,o.delta=i,o.target=n,o}return j(e,t),e}(U),K=function(t){function e(e,i,n){var o=t.call(this)||this;return o.ctx=e,o.delta=i,o.target=n,o}return j(e,t),e}(U),Q=function(t){function e(e,i){var n=t.call(this)||this;return n.ctx=e,n.target=i,n}return j(e,t),e}(U),Z=function(t){function e(e,i){var n=t.call(this)||this;return n.ctx=e,n.target=i,n}return j(e,t),e}(U),J=function(t){function e(e,i,n){var o=t.call(this)||this;return o.engine=e,o.delta=i,o.target=n,o}return j(e,t),e}(U),$=function(t){function e(e,i,n){var o=t.call(this)||this;return o.engine=e,o.delta=i,o.target=n,o}return j(e,t),e}(U),tt=function(t){function e(e,i){var n=t.call(this)||this;return n.engine=e,n.prevStats=i,n.target=e,n}return j(e,t),e}(U),et=function(t){function e(e,i){var n=t.call(this)||this;return n.engine=e,n.stats=i,n.target=e,n}return j(e,t),e}(U),it=function(t){function e(e,i){var n=t.call(this)||this;return n.index=e,n.gamepad=i,n.target=i,n}return j(e,t),e}(U),nt=function(t){function e(e,i){var n=t.call(this)||this;return n.index=e,n.gamepad=i,n.target=i,n}return j(e,t),e}(U),ot=function(t){function e(e,i,n){var o=t.call(this)||this;return o.button=e,o.value=i,o.target=n,o}return j(e,t),e}(U),rt=function(t){function e(e,i,n){var o=t.call(this)||this;return o.axis=e,o.value=i,o.target=n,o}return j(e,t),e}(U),st=function(t){function e(e,i){var n=t.call(this)||this;return n.topic=e,n.handler=i,n}return j(e,t),e}(U),at=function(t){function e(e,i){var n=t.call(this)||this;return n.topic=e,n.handler=i,n}return j(e,t),e}(U),ht=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return j(e,t),e}(U),ct=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return j(e,t),e}(U),ut=function(t){function e(e,i,n,o){var r=t.call(this)||this;return r.actor=e,r.other=i,r.side=n,r.intersection=o,r.target=e,r}return j(e,t),e}(U),lt=function(t){function e(e,i,n,o){var r=t.call(this)||this;return r.actor=e,r.other=i,r.side=n,r.intersection=o,r.target=e,r}return j(e,t),e}(U),pt=function(t){function e(e,i,n){var o=t.call(this)||this;return o.actor=e,o.other=i,o.pair=n,o.target=e,o}return j(e,t),e}(U),dt=function(t){function e(e,i){var n=t.call(this)||this;return n.actor=e,n.other=i,n.target=e,n}return j(e,t),e}(U),ft=function(t){function e(e,i){var n=t.call(this)||this;return n.engine=e,n.target=i,n}return j(e,t),e}(U),_t=function(t){function e(e,i){var n=t.call(this)||this;return n.oldScene=e,n.target=i,n}return j(e,t),e}(U),gt=function(t){function e(e,i){var n=t.call(this)||this;return n.newScene=e,n.target=i,n}return j(e,t),e}(U),yt=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return j(e,t),e}(U),vt=function(t){function e(e){var i=t.call(this)||this;return i.target=e,i}return j(e,t),e}(U),mt=function(t){function e(e,i){var n=t.call(this)||this;return n.target=e,n.actor=i,n}return j(e,t),e}(U),bt=function(t){function e(e,i){var n=t.call(this)||this;return n.target=e,n.actor=i,n}return j(e,t),e}(U),wt=function(){function t(t){this._handlers={},this._wiredEventDispatchers=[],this._target=t}return t.prototype.emit=function(t,e){if(t){t=t.toLowerCase();var i,n,o=this._target;if(e||(e=new U),e.target=o,this._handlers[t])for(i=0,n=this._handlers[t].length;i<n;i++)this._handlers[t][i].call(o,e);for(i=0,n=this._wiredEventDispatchers.length;i<n;i++)this._wiredEventDispatchers[i].emit(t,e)}},t.prototype.on=function(t,e){t=t.toLowerCase(),this._handlers[t]||(this._handlers[t]=[]),this._handlers[t].push(e),\"unsubscribe\"!==t&&\"subscribe\"!==t&&this.emit(\"subscribe\",new st(t,e))},t.prototype.off=function(t,e){t=t.toLowerCase();var i=this._handlers[t];if(i)if(e){var n=i.indexOf(e);this._handlers[t].splice(n,1)}else this._handlers[t].length=0;\"unsubscribe\"!==t&&\"subscribe\"!==t&&this.emit(\"unsubscribe\",new at(t,e))},t.prototype.once=function(t,e){var i=this;this.on(t,function(n){var o=n||new U;o.target=o.target||i._target,i.off(t,e),e.call(o.target,o)})},t.prototype.wire=function(t){t._wiredEventDispatchers.push(this)},t.prototype.unwire=function(t){var e=t._wiredEventDispatchers.indexOf(this);e>-1&&t._wiredEventDispatchers.splice(e,1)},t}(),xt=function(){function t(){this.eventDispatcher=new wt(this)}return t.prototype.on=function(t,e){this.eventDispatcher.on(t,e)},t.prototype.off=function(t,e){this.eventDispatcher.off(t,e)},t.prototype.emit=function(t,e){this.eventDispatcher.emit(t,e)},t.prototype.once=function(t,e){this.eventDispatcher.once(t,e)},t.extend=function(e){var i,n=this;i=e&&e.hasOwnProperty(\"constructor\")?e.constructor:function(){return n.apply(this,arguments)};var o=function(){this.constructor=i};if(o.prototype=n.prototype,i.prototype=new o,e)for(var r in e)e.hasOwnProperty(r)&&(i.prototype[r]=e[r]);return i.extend=t.extend,i},t}(),Pt=function(){function t(t,e,i,n){this.r=t,this.g=e,this.b=i,this.a=null!=n?n:1}return t.fromRGB=function(e,i,n,o){return new t(e,i,n,o)},t.fromHex=function(e){var i;if(i=e.match(/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i)){var n=parseInt(i[1],16),o=parseInt(i[2],16),r=parseInt(i[3],16),s=1;return i[4]&&(s=parseInt(i[4],16)/255),new t(n,o,r,s)}throw new Error(\"Invalid hex string: \"+e)},t.fromHSL=function(t,e,i,n){return void 0===n&&(n=1),new St(t,e,i,n).toRGBA()},t.prototype.lighten=function(t){void 0===t&&(t=.1);var e=St.fromRGBA(this.r,this.g,this.b,this.a);return e.l+=e.l*t,e.toRGBA()},t.prototype.darken=function(t){void 0===t&&(t=.1);var e=St.fromRGBA(this.r,this.g,this.b,this.a);return e.l-=e.l*t,e.toRGBA()},t.prototype.saturate=function(t){void 0===t&&(t=.1);var e=St.fromRGBA(this.r,this.g,this.b,this.a);return e.s+=e.s*t,e.toRGBA()},t.prototype.desaturate=function(t){void 0===t&&(t=.1);var e=St.fromRGBA(this.r,this.g,this.b,this.a);return e.s-=e.s*t,e.toRGBA()},t.prototype.mulitiply=function(e){return new t(e.r/255*this.r/255*255,e.g/255*this.g/255*255,e.b/255*this.b/255*255,e.a*this.a)},t.prototype.screen=function(t){var e=t.invert(),i=t.invert();return e.mulitiply(i).invert()},t.prototype.invert=function(){return new t(255-this.r,255-this.g,255-this.b,1-this.a)},t.prototype.average=function(e){return new t((e.r+this.r)/2,(e.g+this.g)/2,(e.b+this.b)/2,(e.a+this.a)/2)},t.prototype.toString=function(t){switch(void 0===t&&(t=\"rgb\"),t){case\"rgb\":return this.toRGBA();case\"hsl\":return this.toHSLA();case\"hex\":return this.toHex();default:throw new Error(\"Invalid Color format\")}},t.prototype._componentToHex=function(t){var e=t.toString(16);return 1===e.length?\"0\"+e:e},t.prototype.toHex=function(){return\"#\"+this._componentToHex(this.r)+this._componentToHex(this.g)+this._componentToHex(this.b)},t.prototype.toRGBA=function(){var t=String(this.r.toFixed(0))+\", \"+String(this.g.toFixed(0))+\", \"+String(this.b.toFixed(0));return void 0!==this.a||null!==this.a?\"rgba(\"+t+\", \"+String(this.a)+\")\":\"rgb(\"+t+\")\"},t.prototype.toHSLA=function(){return St.fromRGBA(this.r,this.g,this.b,this.a).toString()},t.prototype.fillStyle=function(){return this.toString()},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a)},t.Black=t.fromHex(\"#000000\"),t.White=t.fromHex(\"#FFFFFF\"),t.Gray=t.fromHex(\"#808080\"),t.LightGray=t.fromHex(\"#D3D3D3\"),t.DarkGray=t.fromHex(\"#A9A9A9\"),t.Yellow=t.fromHex(\"#FFFF00\"),t.Orange=t.fromHex(\"#FFA500\"),t.Red=t.fromHex(\"#FF0000\"),t.Vermillion=t.fromHex(\"#FF5B31\"),t.Rose=t.fromHex(\"#FF007F\"),t.Magenta=t.fromHex(\"#FF00FF\"),t.Violet=t.fromHex(\"#7F00FF\"),t.Blue=t.fromHex(\"#0000FF\"),t.Azure=t.fromHex(\"#007FFF\"),t.Cyan=t.fromHex(\"#00FFFF\"),t.Viridian=t.fromHex(\"#59978F\"),t.Green=t.fromHex(\"#00FF00\"),t.Chartreuse=t.fromHex(\"#7FFF00\"),t.Transparent=t.fromHex(\"#FFFFFF00\"),t}(),St=function(){function t(t,e,i,n){this.h=t,this.s=e,this.l=i,this.a=n}return t.hue2rgb=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t},t.fromRGBA=function(e,i,n,o){e/=255,i/=255,n/=255;var r,s,a=Math.max(e,i,n),h=Math.min(e,i,n),c=(a+h)/2;if(a===h)r=s=0;else{var u=a-h;switch(s=c>.5?u/(2-a-h):u/(a+h),a){case e:r=(i-n)/u+(i<n?6:0);break;case i:r=(n-e)/u+2;break;case n:r=(e-i)/u+4}r/=6}return new t(r,s,c,o)},t.prototype.toRGBA=function(){var e,i,n;if(0===this.s)e=i=n=this.l;else{var o=this.l<.5?this.l*(1+this.s):this.l+this.s-this.l*this.s,r=2*this.l-o;e=t.hue2rgb(r,o,this.h+1/3),i=t.hue2rgb(r,o,this.h),n=t.hue2rgb(r,o,this.h-1/3)}return new Pt(255*e,255*i,255*n,this.a)},t.prototype.toString=function(){return\"hsla(\"+this.h.toFixed(0)+\", \"+this.s.toFixed(0)+\", \"+this.l.toFixed(0)+\", \"+this.a.toFixed(0)+\")\"},t}(),At=function(){function t(t,e,i,n,o){this.bodyA=t,this.bodyB=e,this.mtv=i,this.point=n,this.normal=o}return t.prototype.resolve=function(t){if(t===M.RigidBody)this._resolveRigidBodyCollision();else{if(t!==M.Box)throw new Error(\"Unknown collision resolution strategy\");this._resolveBoxCollision()}},t.prototype._applyBoxImpulse=function(t,e,i){if(t.collisionType===xe.Active&&e.collisionType!==xe.Passive){t.collisionType===xe.Active&&e.collisionType===xe.Active&&(i=i.scale(.5)),t.pos.y+=i.y,t.pos.x+=i.x;var n=i.normalize();if(n.dot(t.vel)<0){var o=n.scale(n.dot(t.vel.negate()));t.vel=t.vel.add(o)}t.emit(\"postcollision\",new lt(t,e,T(i),i))}},t.prototype._resolveBoxCollision=function(){var t=this.bodyA.body.actor,e=this.bodyB.body.actor,i=T(this.mtv),n=this.mtv.negate();t.emit(\"precollision\",new ut(t,e,i,n)),e.emit(\"precollision\",new ut(e,t,C(i),n.negate())),this._applyBoxImpulse(t,e,n),this._applyBoxImpulse(e,t,n.negate())},t.prototype._resolveRigidBodyCollision=function(){var t=this.bodyA.body,e=this.bodyB.body,i=this.mtv,n=this.normal;if(t.actor!==e.actor){var o=T(this.mtv);if(t.actor.emit(\"precollision\",new ut(this.bodyA.body.actor,this.bodyB.body.actor,o,this.mtv)),e.actor.emit(\"precollision\",new ut(this.bodyB.body.actor,this.bodyA.body.actor,C(o),this.mtv.negate())),t.actor.collisionType!==xe.Passive&&e.actor.collisionType!==xe.Passive){var r=t.actor.collisionType===xe.Fixed?0:1/t.mass,s=e.actor.collisionType===xe.Fixed?0:1/e.mass,a=t.actor.collisionType===xe.Fixed?0:1/t.moi,h=e.actor.collisionType===xe.Fixed?0:1/e.moi,c=Math.min(t.restitution,e.restitution),u=Math.min(t.friction,e.friction),l=(n=n.normalize()).normal().normalize(),p=this.point.sub(this.bodyA.getCenter()),d=this.point.sub(this.bodyB.getCenter()),f=e.vel.add(d.cross(-e.rx)).sub(t.vel.sub(p.cross(t.rx))),_=f.dot(n),g=f.dot(l),y=p.dot(l),v=p.dot(n),m=d.dot(l),b=d.dot(n);if(!(_>0)){var w=-(1+c)*_/(r+s+a*y*y+h*m*m);if(t.actor.collisionType===xe.Fixed?(e.vel=e.vel.add(n.scale(w*s)),W.allowRigidBodyRotation&&(e.rx-=w*h*-d.cross(n)),e.addMtv(i)):e.actor.collisionType===xe.Fixed?(t.vel=t.vel.sub(n.scale(w*r)),W.allowRigidBodyRotation&&(t.rx+=w*a*-p.cross(n)),t.addMtv(i.negate())):(e.vel=e.vel.add(n.scale(w*s)),t.vel=t.vel.sub(n.scale(w*r)),W.allowRigidBodyRotation&&(e.rx-=w*h*-d.cross(n),t.rx+=w*a*-p.cross(n)),e.addMtv(i.scale(.5)),t.addMtv(i.scale(-.5))),u&&g){var x=f.sub(n.scale(f.dot(n))).normalize(),P=f.dot(x)/(r+s+v*v*a+b*b*h),S=new k(0,0);S=Math.abs(P)<=w*u?x.scale(P).negate():x.scale(-w*u),t.actor.collisionType===xe.Fixed?(e.vel=e.vel.add(S.scale(s)),W.allowRigidBodyRotation&&(e.rx+=S.dot(x)*h*d.cross(x))):e.actor.collisionType===xe.Fixed?(t.vel=t.vel.sub(S.scale(r)),W.allowRigidBodyRotation&&(t.rx-=S.dot(x)*a*p.cross(x))):(e.vel=e.vel.add(S.scale(s)),t.vel=t.vel.sub(S.scale(r)),W.allowRigidBodyRotation&&(e.rx+=S.dot(x)*h*d.cross(x),t.rx-=S.dot(x)*a*p.cross(x)))}t.actor.emit(\"postcollision\",new lt(this.bodyA.body.actor,this.bodyB.body.actor,o,this.mtv)),e.actor.emit(\"postcollision\",new lt(this.bodyB.body.actor,this.bodyA.body.actor,C(o),this.mtv.negate()))}}}},t}(),Et={CollideCircleCircle:function(t,e){var i=t.radius+e.radius,n=t.body.pos.add(t.pos),o=e.body.pos.add(e.pos);if(n.distance(o)>i)return null;var r=o.sub(n).normalize(),s=r.scale(i-o.distance(n)),a=t.getFurthestPoint(r);return new At(t,e,s,a,r)},CollideCirclePolygon:function(t,e){var i=t.testSeparatingAxisTheorem(e);if(!i)return null;i=i.dot(e.getCenter().sub(t.getCenter()))<0?i.negate():i;var n=[],o=e.getFurthestPoint(i.negate()),r=t.getFurthestPoint(i);return t.contains(o)&&n.push(o),e.contains(r)&&n.push(r),0===n.length?null:new At(t,e,i,2===n.length?n[0].average(n[1]):n[0],i.normalize())},CollideCircleEdge:function(t,e){var i=t.getCenter(),n=e.end.sub(e.begin),o=n.dot(e.end.sub(i)),r=n.dot(i.sub(e.begin));if(r<=0){var s=e.begin.sub(i),a=s.dot(s);return a>t.radius*t.radius?null:new At(t,e,s.normalize().scale(t.radius-Math.sqrt(a)),e.begin,s.normalize())}if(o<=0){var h=e.end.sub(i),c=h.dot(h);return c>t.radius*t.radius?null:new At(t,e,h.normalize().scale(t.radius-Math.sqrt(c)),e.end,h.normalize())}var u=n.dot(n),l=e.begin.scale(o).add(e.end.scale(r)).scale(1/u),p=i.sub(l),d=p.dot(p);if(d>t.radius*t.radius)return null;var f=n.perpendicular();f.dot(i.sub(e.begin))<0&&(f.x=-f.x,f.y=-f.y);var _=(f=f.normalize()).scale(Math.abs(t.radius-Math.sqrt(d)));return new At(t,e,_.negate(),l,f.negate())},CollideEdgeEdge:function(){return null},CollidePolygonEdge:function(t,e){var i=e.end.sub(e.begin).normal();if(t.contains(e.begin)){var n=t.getClosestFace(e.begin),o=n.distance,r=n.face;if(o)return new At(t,e,o.negate(),e.begin.add(o.negate()),r.normal().negate())}if(t.contains(e.end)){var s=t.getClosestFace(e.end);o=s.distance,r=s.face;if(o)return new At(t,e,o.negate(),e.end.add(o.negate()),r.normal().negate())}var a=t.getCenter(),h=e.getCenter().sub(a).normalize(),c=new Mt({points:[e.begin,e.end,e.end.add(h.scale(30)),e.begin.add(h.scale(30))]}),u=t.testSeparatingAxisTheorem(c);return u?(i=i.dot(h)<0?i.negate():i,u=u.dot(h)<0?u.negate():u,new At(t,e,u,t.getFurthestPoint(i),i)):null},CollidePolygonPolygon:function(t,e){var i=t.testSeparatingAxisTheorem(e);if(!i)return null;i=i.dot(e.getCenter().sub(t.getCenter()))<0?i.negate():i;var n=[],o=t.getFurthestPoint(i),r=e.getFurthestPoint(i.negate());e.contains(o)&&n.push(o),t.contains(r)&&n.push(r),0===n.length&&n.push(r);var s=2===n.length?n[0].add(n[1]).scale(.5):n[0];return new At(t,e,i,s,i.normalize())}},Ct=function(){function t(t){this.pos=k.Zero.clone(),this.pos=t.pos||k.Zero.clone(),this.radius=t.radius||0,this.body=t.body||null}return t.prototype.getCenter=function(){return this.body?this.pos.add(this.body.pos):this.pos},t.prototype.contains=function(t){return this.body.pos.distance(t)<=this.radius},t.prototype.rayCast=function(t,e){void 0===e&&(e=1/0);var i=this.getCenter(),n=t.dir,o=t.pos,r=Math.sqrt(Math.pow(n.dot(o.sub(i)),2)-Math.pow(o.sub(i).distance(),2)+Math.pow(this.radius,2));if(r<0)return null;var s=0;if(0===r)return(s=-n.dot(o.sub(i)))>0&&s<e?t.getPoint(s):null;var a=-n.dot(o.sub(i))+r,h=-n.dot(o.sub(i))-r,c=Math.min(a,h);return c<=e?t.getPoint(c):null},t.prototype.collide=function(e){if(e instanceof t)return Et.CollideCircleCircle(this,e);if(e instanceof Mt)return Et.CollideCirclePolygon(this,e);if(e instanceof Tt)return Et.CollideCircleEdge(this,e);throw new Error(\"Circle could not collide with unknown ICollisionArea \"+typeof e)},t.prototype.getFurthestPoint=function(t){return this.getCenter().add(t.normalize().scale(this.radius))},t.prototype.getBounds=function(){return new Dt(this.pos.x+this.body.pos.x-this.radius,this.pos.y+this.body.pos.y-this.radius,this.pos.x+this.body.pos.x+this.radius,this.pos.y+this.body.pos.y+this.radius)},t.prototype.getAxes=function(){return null},t.prototype.getMomentOfInertia=function(){return(this.body?this.body.mass:W.defaultMass)*this.radius*this.radius/2},t.prototype.testSeparatingAxisTheorem=function(t){var e=t.getAxes(),i=t.getCenter(),n=t.getFurthestPoint(this.pos.sub(i));e.push(this.pos.sub(n).normalize());for(var o=Number.MAX_VALUE,r=null,s=-1,a=0;a<e.length;a++){var h=t.project(e[a]),c=this.project(e[a]),u=h.getOverlap(c);if(u<=0)return null;u<o&&(o=u,r=e[a],s=a)}return s<0?null:r.normalize().scale(o)},t.prototype.recalc=function(){},t.prototype.project=function(t){var e=[],i=this.getCenter().dot(t);return e.push(i),e.push(i+this.radius),e.push(i-this.radius),new I(Math.min.apply(Math,e),Math.max.apply(Math,e))},t.prototype.debugDraw=function(t,e){void 0===e&&(e=Pt.Green.clone());var i=this.body?this.body.pos.add(this.pos):this.pos,n=this.body?this.body.rotation:0;t.beginPath(),t.strokeStyle=e.toString(),t.arc(i.x,i.y,this.radius,0,2*Math.PI),t.closePath(),t.stroke(),t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(Math.cos(n)*this.radius+i.x,Math.sin(n)*this.radius+i.y),t.closePath(),t.stroke()},t}(),Tt=function(){function t(t){this.begin=t.begin||k.Zero.clone(),this.end=t.end||k.Zero.clone(),this.body=t.body||null,this.pos=this.getCenter()}return t.prototype.getCenter=function(){return this.begin.average(this.end).add(this._getBodyPos())},t.prototype._getBodyPos=function(){var t=k.Zero.clone();return this.body.pos&&(t=this.body.pos),t},t.prototype._getTransformedBegin=function(){var t=this.body?this.body.rotation:0;return this.begin.rotate(t).add(this._getBodyPos())},t.prototype._getTransformedEnd=function(){var t=this.body?this.body.rotation:0;return this.end.rotate(t).add(this._getBodyPos())},t.prototype.getSlope=function(){var t=this._getTransformedBegin(),e=this._getTransformedEnd(),i=t.distance(e);return e.sub(t).scale(1/i)},t.prototype.getLength=function(){var t=this._getTransformedBegin(),e=this._getTransformedEnd();return t.distance(e)},t.prototype.contains=function(){return!1},t.prototype.rayCast=function(t,e){void 0===e&&(e=1/0);var i=this._getTransformedBegin().sub(t.pos);if(0===t.dir.cross(this.getSlope())&&0!==i.cross(t.dir))return null;var n=t.dir.cross(this.getSlope());if(0===n)return null;var o=i.cross(this.getSlope())/n;if(o>=0&&o<=e){var r=i.cross(t.dir)/n/this.getLength();if(r>=0&&r<=1)return t.getPoint(o)}return null},t.prototype.collide=function(e){if(e instanceof Ct)return Et.CollideCircleEdge(e,this);if(e instanceof Mt)return Et.CollidePolygonEdge(e,this);if(e instanceof t)return Et.CollideEdgeEdge();throw new Error(\"Edge could not collide with unknown ICollisionArea \"+typeof e)},t.prototype.getFurthestPoint=function(t){var e=this._getTransformedBegin(),i=this._getTransformedEnd();return t.dot(e)>0?e:i},t.prototype.getBounds=function(){var t=this._getTransformedBegin(),e=this._getTransformedEnd();return new Dt(Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y))},t.prototype.getAxes=function(){var t=this._getTransformedEnd().sub(this._getTransformedBegin()).normal(),e=[];return e.push(t),e.push(t.negate()),e.push(t.normal()),e.push(t.normal().negate()),e},t.prototype.getMomentOfInertia=function(){var t=this.body?this.body.mass:W.defaultMass,e=this.end.sub(this.begin).distance()/2;return t*e*e},t.prototype.recalc=function(){},t.prototype.project=function(t){for(var e=[],i=[this._getTransformedBegin(),this._getTransformedEnd()],n=i.length,o=0;o<n;o++)e.push(i[o].dot(t));return new I(Math.min.apply(Math,e),Math.max.apply(Math,e))},t.prototype.debugDraw=function(t,e){void 0===e&&(e=Pt.Red.clone()),t.strokeStyle=e.toString(),t.beginPath(),t.moveTo(this.begin.x,this.begin.y),t.lineTo(this.end.x,this.end.y),t.closePath(),t.stroke()},t}(),Mt=function(){function t(t){this._transformedPoints=[],this._axes=[],this._sides=[],this.pos=t.pos||k.Zero.clone();var e=!!t.clockwiseWinding;this.points=(e?t.points.reverse():t.points)||[],this.body=t.body||null,this._calculateTransformation()}return t.prototype.getCenter=function(){return this.body?this.body.pos.add(this.pos):this.pos},t.prototype._calculateTransformation=function(){var t=this.body?this.body.pos.add(this.pos):this.pos,e=this.body?this.body.rotation:0,i=this.points.length;this._transformedPoints.length=0;for(var n=0;n<i;n++)this._transformedPoints[n]=this.points[n].rotate(e).add(t)},t.prototype.getTransformedPoints=function(){return this._transformedPoints.length||this._calculateTransformation(),this._transformedPoints},t.prototype.getSides=function(){if(this._sides.length)return this._sides;for(var t=[],e=this.getTransformedPoints(),i=e.length,n=0;n<i;n++)t.push(new F(e[n],e[(n-1+i)%i]));return this._sides=t,this._sides},t.prototype.recalc=function(){this._sides.length=0,this._axes.length=0,this._transformedPoints.length=0,this.getTransformedPoints(),this.getAxes(),this.getSides()},t.prototype.contains=function(t){var e=new R(t,new k(1,0));return this.getSides().reduce(function(t,i){return e.intersect(i)>=0?t+1:t},0)%2!=0},t.prototype.collide=function(e){if(e instanceof Ct)return Et.CollideCirclePolygon(e,this);if(e instanceof t)return Et.CollidePolygonPolygon(this,e);if(e instanceof Tt)return Et.CollidePolygonEdge(this,e);throw new Error(\"Polygon could not collide with unknown ICollisionArea \"+typeof e)},t.prototype.getFurthestPoint=function(t){for(var e=this.getTransformedPoints(),i=null,n=-Number.MAX_VALUE,o=0;o<e.length;o++){var r=t.dot(e[o]);r>n&&(n=r,i=e[o])}return i},t.prototype.getClosestFace=function(t){for(var e=this.getSides(),i=Number.POSITIVE_INFINITY,n=-1,o=-1,r=0;r<e.length;r++){var s=e[r].distanceToPoint(t);s<i&&(i=s,n=r,o=s)}return-1!==n?{distance:e[n].normal().scale(o),face:e[n]}:null},t.prototype.getBounds=function(){var t=this.getTransformedPoints(),e=t.reduce(function(t,e){return Math.min(t,e.x)},999999999),i=t.reduce(function(t,e){return Math.max(t,e.x)},-99999999),n=t.reduce(function(t,e){return Math.min(t,e.y)},9999999999),o=t.reduce(function(t,e){return Math.max(t,e.y)},-9999999999);return new Dt(e,n,i,o)},t.prototype.getMomentOfInertia=function(){for(var t=this.body?this.body.mass:W.defaultMass,e=0,i=0,n=0;n<this.points.length;n++){var o=(n+1)%this.points.length,r=this.points[o].cross(this.points[n]);e+=r*(this.points[n].dot(this.points[n])+this.points[n].dot(this.points[o])+this.points[o].dot(this.points[o])),i+=r}return t/6*(e/i)},t.prototype.rayCast=function(t,e){void 0===e&&(e=1/0);for(var i=this.getSides(),n=i.length,o=Number.MAX_VALUE,r=-1,s=0;s<n;s++){var a=t.intersect(i[s]);a>=0&&a<o&&a<=e&&(o=a,r=s)}return r>=0?t.getPoint(o):null},t.prototype.getAxes=function(){if(this._axes.length)return this._axes;for(var t=[],e=this.getTransformedPoints(),i=e.length,n=0;n<i;n++)t.push(e[n].sub(e[(n+1)%i]).normal());return this._axes=t,this._axes},t.prototype.testSeparatingAxisTheorem=function(t){for(var e=t,i=this.getAxes().concat(e.getAxes()),n=Number.MAX_VALUE,o=null,r=-1,s=0;s<i.length;s++){var a=this.project(i[s]),h=e.project(i[s]),c=a.getOverlap(h);if(c<=0)return null;c<n&&(n=c,o=i[s],r=s)}return-1===r?null:o.normalize().scale(n)},t.prototype.project=function(t){for(var e=this.getTransformedPoints(),i=e.length,n=Number.MAX_VALUE,o=-Number.MAX_VALUE,r=0;r<i;r++){var s=e[r].dot(t);n=Math.min(n,s),o=Math.max(o,s)}return new I(n,o)},t.prototype.debugDraw=function(t,e){void 0===e&&(e=Pt.Red.clone()),t.beginPath(),t.strokeStyle=e.toString();var i=this.getTransformedPoints()[0];t.moveTo(i.x,i.y),this.getTransformedPoints().forEach(function(e){t.lineTo(e.x,e.y)}),t.lineTo(i.x,i.y),t.closePath(),t.stroke()},t}(),Dt=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.left=t,this.top=e,this.right=i,this.bottom=n}return t.fromPoints=function(e){for(var i=1/0,n=1/0,o=-1/0,r=-1/0,s=0;s<e.length;s++)e[s].x<i&&(i=e[s].x),e[s].x>o&&(o=e[s].x),e[s].y<n&&(n=e[s].y),e[s].y>r&&(r=e[s].y);return new t(i,n,o,r)},t.prototype.getWidth=function(){return this.right-this.left},t.prototype.getHeight=function(){return this.bottom-this.top},t.prototype.rotate=function(e,i){void 0===i&&(i=k.Zero.clone());var n=this.getPoints().map(function(t){return t.rotate(e,i)});return t.fromPoints(n)},t.prototype.getPerimeter=function(){return 2*(this.getWidth()+this.getHeight())},t.prototype.getPoints=function(){var t=[];return t.push(new k(this.left,this.top)),t.push(new k(this.right,this.top)),t.push(new k(this.right,this.bottom)),t.push(new k(this.left,this.bottom)),t},t.prototype.toPolygon=function(t){return new Mt({body:t?t.body:null,points:this.getPoints(),pos:k.Zero.clone()})},t.prototype.rayCast=function(t,e){void 0===e&&(e=1/0);var i=-1/0,n=1/0,o=0===t.dir.x?Number.MAX_VALUE:1/t.dir.x,r=0===t.dir.y?Number.MAX_VALUE:1/t.dir.y,s=(this.left-t.pos.x)*o,a=(this.right-t.pos.x)*o;i=Math.min(s,a),n=Math.max(s,a);var h=(this.top-t.pos.y)*r,c=(this.bottom-t.pos.y)*r;return i=Math.max(i,Math.min(h,c)),(n=Math.min(n,Math.max(h,c)))>=Math.max(0,i)&&i<e},t.prototype.rayCastTime=function(t,e){void 0===e&&(e=1/0);var i=-1/0,n=1/0,o=0===t.dir.x?Number.MAX_VALUE:1/t.dir.x,r=0===t.dir.y?Number.MAX_VALUE:1/t.dir.y,s=(this.left-t.pos.x)*o,a=(this.right-t.pos.x)*o;i=Math.min(s,a),n=Math.max(s,a);var h=(this.top-t.pos.y)*r,c=(this.bottom-t.pos.y)*r;return i=Math.max(i,Math.min(h,c)),(n=Math.min(n,Math.max(h,c)))>=Math.max(0,i)&&i<e?i:-1},t.prototype.contains=function(e){return e instanceof k?this.left<=e.x&&this.top<=e.y&&this.bottom>=e.y&&this.right>=e.x:e instanceof t&&(this.left<e.left&&this.top<e.top&&e.bottom<this.bottom&&e.right<this.right)},t.prototype.combine=function(e){return new t(Math.min(this.left,e.left),Math.min(this.top,e.top),Math.max(this.right,e.right),Math.max(this.bottom,e.bottom))},t.prototype.collides=function(e){if(e instanceof t){var i=e,n=this.combine(i);if(n.getWidth()<i.getWidth()+this.getWidth()&&n.getHeight()<i.getHeight()+this.getHeight()){var o=0;o=this.right>=i.left&&this.right<=i.right?i.left-this.right:i.right-this.left;var r=0;return r=this.top<=i.bottom&&this.top>=i.top?i.bottom-this.top:i.top-this.bottom,Math.abs(o)<Math.abs(r)?new k(o,0):new k(0,r)}return null}return null},t.prototype.debugDraw=function(t,e){void 0===e&&(e=Pt.Yellow),t.strokeStyle=e.toString(),t.strokeRect(this.left,this.top,this.getWidth(),this.getHeight())},t}();!function(t){t[t.Debug=0]=\"Debug\",t[t.Info=1]=\"Info\",t[t.Warn=2]=\"Warn\",t[t.Error=3]=\"Error\",t[t.Fatal=4]=\"Fatal\"}(z||(z={}));var Ot=function(){function t(){if(this._appenders=[],this.defaultLevel=z.Info,t._instance)throw new Error(\"Logger is a singleton\");return t._instance=this,t._instance.addAppender(new Bt),t._instance}return t.getInstance=function(){return null==t._instance&&(t._instance=new t),t._instance},t.prototype.addAppender=function(t){this._appenders.push(t)},t.prototype.clearAppenders=function(){this._appenders.length=0},t.prototype._log=function(t,e){null==t&&(t=this.defaultLevel);for(var i=0,n=this._appenders.length;i<n;i++)t>=this.defaultLevel&&this._appenders[i].log(t,e)},t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log(z.Debug,t)},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log(z.Info,t)},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log(z.Warn,t)},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log(z.Error,t)},t.prototype.fatal=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._log(z.Fatal,t)},t._instance=null,t}(),Bt=function(){function t(){}return t.prototype.log=function(t,e){if(console||console.log||!console.warn||!console.error){var i=[];i.unshift.apply(i,e),i.unshift(\"[\"+z[t]+\"] : \"),t<z.Warn?console.log.apply?console.log.apply(console,i):console.log(i.join(\" \")):t<z.Error?console.warn.apply?console.warn.apply(console,i):console.warn(i.join(\" \")):console.error.apply?console.error.apply(console,i):console.error(i.join(\" \"))}},t}(),kt=function(){function t(t,e){this._messages=[],this._canvas=document.createElement(\"canvas\"),this._canvas.width=t||window.innerWidth,this._canvas.height=e||window.innerHeight,this._canvas.style.position=\"absolute\",this._ctx=this._canvas.getContext(\"2d\"),document.body.appendChild(this._canvas)}return t.prototype.log=function(t,e){var i=e.join(\",\");this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._messages.unshift(\"[\"+z[t]+\"] : \"+i);for(var n=10,o=1,r=0;r<this._messages.length;r++)this._ctx.fillStyle=\"rgba(255,255,255,\"+o.toFixed(2)+\")\",this._ctx.fillText(this._messages[r],200,n),n+=10,o=o>0?o-.05:0},t}(),Rt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ft=function(t){function e(e,i,n){void 0===n&&(n=!0);var o=t.call(this)||this;return o.path=e,o.responseType=i,o.bustCache=n,o.data=null,o.logger=Ot.getInstance(),o.onprogress=function(){},o.oncomplete=function(){},o.onerror=function(){},o}return Rt(e,t),e.prototype.isLoaded=function(){return null!==this.data},e.prototype.wireEngine=function(t){},e.prototype._cacheBust=function(t){return/\\?\\w*=\\w*/.test(t)?t+=\"&__=\"+Date.now():t+=\"?__=\"+Date.now(),t},e.prototype._start=function(){this.logger.debug(\"Started loading resource \"+this.path)},e.prototype.load=function(){var t=this,e=new p;if(null!==this.data)return this.logger.debug(\"Already have data for resource\",this.path),e.resolve(this.data),this.oncomplete(),e;var i=new XMLHttpRequest;return i.open(\"GET\",this.bustCache?this._cacheBust(this.path):this.path,!0),i.responseType=this.responseType,i.onloadstart=function(){t._start()},i.onprogress=this.onprogress,i.onerror=this.onerror,i.onload=function(){if(0!==i.status&&200!==i.status)return t.logger.error(\"Failed to load resource \",t.path,\" server responded with error code\",i.status),t.onerror(i.response),void e.resolve(i.response);t.data=t.processData(i.response),t.oncomplete(),t.logger.debug(\"Completed loading resource\",t.path),e.resolve(t.data)},i.send(),e},e.prototype.getData=function(){return this.data},e.prototype.setData=function(t){this.data=this.processData(t)},e.prototype.processData=function(t){return\"blob\"===this.responseType?URL.createObjectURL(t):t},e}(xt),It=function(){function t(){}return t.prototype.updatePixel=function(t,e,i){var n=4*(t+e*i.width),o=i.data,r=(o[n+0]+o[n+1]+o[n+2])/3;o[n+0]=r,o[n+1]=r,o[n+2]=r},t}(),Lt=function(){function t(){}return t.prototype.updatePixel=function(t,e,i){var n=4*(t+e*i.width),o=i.data;o[n+0]=255-o[n+0],o[n+1]=255-o[n+1],o[n+2]=255-o[n+2]},t}(),Ht=function(){function t(t){this.opacity=t}return t.prototype.updatePixel=function(t,e,i){var n=4*(t+e*i.width),o=i.data;0!==o[n+3]&&(o[n+3]=Math.round(this.opacity*o[n+3]))},t}(),zt=function(){function t(t){this.color=t}return t.prototype.updatePixel=function(t,e,i){var n=4*(t+e*i.width),o=i.data;0!==o[n+3]&&(o[n+0]=(o[n+0]+this.color.r)/2,o[n+1]=(o[n+1]+this.color.g)/2,o[n+2]=(o[n+2]+this.color.b)/2)},t}(),Wt=function(){function t(t){void 0===t&&(t=.1),this.factor=t}return t.prototype.updatePixel=function(t,e,i){var n=4*(t+e*i.width),o=i.data,r=Pt.fromRGB(o[n+0],o[n+1],o[n+2],o[n+3]).lighten(this.factor);o[n+0]=r.r,o[n+1]=r.g,o[n+2]=r.b,o[n+3]=r.a},t}(),jt=function(){function t(t){void 0===t&&(t=.1),this.factor=t}return t.prototype.updatePixel=function(t,e,i){var n=4*(t+e*i.width),o=i.data,r=Pt.fromRGB(o[n+0],o[n+1],o[n+2],o[n+3]).darken(this.factor);o[n+0]=r.r,o[n+1]=r.g,o[n+2]=r.b,o[n+3]=r.a},t}(),Ut=function(){function t(t){void 0===t&&(t=.1),this.factor=t}return t.prototype.updatePixel=function(t,e,i){var n=4*(t+e*i.width),o=i.data,r=Pt.fromRGB(o[n+0],o[n+1],o[n+2],o[n+3]).saturate(this.factor);o[n+0]=r.r,o[n+1]=r.g,o[n+2]=r.b,o[n+3]=r.a},t}(),Nt=function(){function t(t){void 0===t&&(t=.1),this.factor=t}return t.prototype.updatePixel=function(t,e,i){var n=4*(t+e*i.width),o=i.data,r=Pt.fromRGB(o[n+0],o[n+1],o[n+2],o[n+3]).desaturate(this.factor);o[n+0]=r.r,o[n+1]=r.g,o[n+2]=r.b,o[n+3]=r.a},t}(),qt=function(){function t(t){this.color=t}return t.prototype.updatePixel=function(t,e,i){var n=4*(t+e*i.width),o=i.data;0!==o[n+3]&&(o[n+0]=this.color.r,o[n+1]=this.color.g,o[n+2]=this.color.b)},t}(),Xt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function Vt(t){return function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.apply(this,e)||this;return 1!==e.filter(function(t){return void 0!==t}).length||!e[0]||\"object\"!=typeof e[0]||e[0]instanceof Array||n.assign(e[0]),n}return Xt(e,t),e.prototype.assign=function(t){for(var e in t)\"function\"!=typeof this[e]&&(this[e]=t[e])},e}(t)}var Gt,Yt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Kt=function(t){function e(e,i,n,o,r){return t.call(this,e,i,n,o,r)||this}return Yt(e,t),e}(Vt(function(){function t(t,e,i,n,o){var r=this;this.x=0,this.y=0,this.rotation=0,this.anchor=new k(0,0),this.scale=new k(1,1),this.logger=Ot.getInstance(),this.flipVertical=!1,this.flipHorizontal=!1,this.effects=[],this.width=0,this.height=0,this._spriteCanvas=null,this._spriteCtx=null,this._pixelData=null,this._pixelsLoaded=!1,this._dirtyEffect=!1;var s=t;if(t&&!(t instanceof Zt)&&(e=0|t.x,i=0|t.y,n=0|t.width,o=0|t.height,!(s=t.image))){throw new Error(\"An image texture is required to contsruct a sprite\")}this.x=e||0,this.y=i||0,this._texture=s,this._spriteCanvas=document.createElement(\"canvas\"),this._spriteCanvas.width=n,this._spriteCanvas.height=o,this._spriteCtx=this._spriteCanvas.getContext(\"2d\"),this._texture.loaded.then(function(){r.width=r.width||r._texture.image.naturalWidth,r.height=r.height||r._texture.image.naturalHeight,r._spriteCanvas.width=r._spriteCanvas.width||r._texture.image.naturalWidth,r._spriteCanvas.height=r._spriteCanvas.height||r._texture.image.naturalHeight,r._loadPixels(),r._dirtyEffect=!0}).error(function(t){r.logger.error(\"Error loading texture \",r._texture.path,t)}),this.width=n,this.height=o}return Object.defineProperty(t.prototype,\"drawWidth\",{get:function(){return this.width*this.scale.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"drawHeight\",{get:function(){return this.height*this.scale.y},enumerable:!0,configurable:!0}),t.prototype._loadPixels=function(){if(this._texture.isLoaded()&&!this._pixelsLoaded){var t=this._texture.image.naturalWidth||0,e=this._texture.image.naturalHeight||0;if(this.width>t&&this.logger.warn(\"The sprite width \"+this.width+\" exceeds the width \\n                              \"+t+\" of the backing texture \"+this._texture.path),this.width<=0||t<=0)throw new Error(\"The width of a sprite cannot be 0 or negative, sprite width: \"+this.width+\", original width: \"+t);if(this.height>e&&this.logger.warn(\"The sprite height \"+this.height+\" exceeds the height \\n                              \"+e+\" of the backing texture \"+this._texture.path),this.height<=0||e<=0)throw new Error(\"The height of a sprite cannot be 0 or negative, sprite height: \"+this.height+\", original height: \"+e);this._spriteCtx.drawImage(this._texture.image,y(this.x,0,t),y(this.y,0,e),y(this.width,0,t),y(this.height,0,e),0,0,this.width,this.height),this._pixelsLoaded=!0}},t.prototype.opacity=function(t){this.addEffect(new Ht(t))},t.prototype.grayscale=function(){this.addEffect(new It)},t.prototype.invert=function(){this.addEffect(new Lt)},t.prototype.fill=function(t){this.addEffect(new qt(t))},t.prototype.colorize=function(t){this.addEffect(new zt(t))},t.prototype.lighten=function(t){void 0===t&&(t=.1),this.addEffect(new Wt(t))},t.prototype.darken=function(t){void 0===t&&(t=.1),this.addEffect(new jt(t))},t.prototype.saturate=function(t){void 0===t&&(t=.1),this.addEffect(new Ut(t))},t.prototype.desaturate=function(t){void 0===t&&(t=.1),this.addEffect(new Nt(t))},t.prototype.addEffect=function(t){this.effects.push(t),this._texture.isLoaded()&&this._pixelsLoaded?this._applyEffects():this._dirtyEffect=!0},t.prototype.removeEffect=function(t){var e=-1;(e=\"number\"==typeof t?t:this.effects.indexOf(t))<0||e>=this.effects.length||(this.effects.splice(e,1),this._texture.isLoaded()&&this._pixelsLoaded?this._applyEffects():this._dirtyEffect=!0)},t.prototype._applyEffects=function(){var t=this._texture.image.naturalWidth||0,e=this._texture.image.naturalHeight||0;this._spriteCtx.clearRect(0,0,this.width,this.height),this._spriteCtx.drawImage(this._texture.image,y(this.x,0,t),y(this.y,0,e),y(this.width,0,t),y(this.height,0,e),0,0,this.width,this.height),this._pixelData=this._spriteCtx.getImageData(0,0,this.width,this.height);for(var i=0,n=0,o=0,r=this.effects.length;i<r;i++)for(o=0;o<this.height;o++)for(n=0;n<this.width;n++)this.effects[i].updatePixel(n,o,this._pixelData);this._spriteCtx.clearRect(0,0,this.width,this.height),this._spriteCtx.putImageData(this._pixelData,0,0),this._dirtyEffect=!1},t.prototype.clearEffects=function(){this.effects.length=0,this._applyEffects()},t.prototype.reset=function(){},t.prototype.debugDraw=function(t,e,i){t.save(),t.translate(e,i),t.rotate(this.rotation);var n=this.drawWidth*this.anchor.x,o=this.drawHeight*this.anchor.y;t.strokeStyle=Pt.Black.toString(),t.strokeRect(-n,-o,this.drawWidth,this.drawHeight),t.restore()},t.prototype.draw=function(t,e,i){this._dirtyEffect&&this._applyEffects(),t.save();var n=this.drawWidth*this.anchor.x,o=this.drawHeight*this.anchor.y;t.translate(e,i),t.rotate(this.rotation),this.flipHorizontal&&(t.translate(this.drawWidth,0),t.scale(-1,1)),this.flipVertical&&(t.translate(0,this.drawHeight),t.scale(1,-1)),t.drawImage(this._spriteCanvas,0,0,this.width,this.height,-n,-o,this.drawWidth,this.drawHeight),t.restore()},t.prototype.clone=function(){var t=new Kt(this._texture,this.x,this.y,this.width,this.height);t.scale=this.scale.clone(),t.rotation=this.rotation,t.flipHorizontal=this.flipHorizontal,t.flipVertical=this.flipVertical;for(var e=0,i=this.effects.length;e<i;e++)t.addEffect(this.effects[e]);return t},t}())),Qt=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Zt=function(t){function e(e,i){void 0===i&&(i=!0);var n=t.call(this,e,\"blob\",i)||this;return n.path=e,n.bustCache=i,n.loaded=new p,n._isLoaded=!1,n._sprite=null,n._sprite=new Kt(n,0,0,0,0),n}return Qt(e,t),e.prototype.isLoaded=function(){return this._isLoaded},e.prototype.load=function(){var e=this,i=new p;return t.prototype.load.call(this).then(function(){e.image=new Image,e.image.addEventListener(\"load\",function(){e._isLoaded=!0,e.width=e._sprite.width=e.image.naturalWidth,e.height=e._sprite.height=e.image.naturalHeight,e.loaded.resolve(e.image),i.resolve(e.image)}),e.image.src=t.prototype.getData.call(e)},function(){i.reject(\"Error loading texture.\")}),i},e.prototype.asSprite=function(){return this._sprite},e}(Ft);!function(t){t[t.ShortestPath=0]=\"ShortestPath\",t[t.LongestPath=1]=\"LongestPath\",t[t.Clockwise=2]=\"Clockwise\",t[t.CounterClockwise=3]=\"CounterClockwise\"}(Gt||(Gt={}));var Jt=function(){function t(t,e,i,n,o){this.actor=t,this.easingFcn=o,this._currentLerpTime=0,this._lerpDuration=1e3,this._lerpStart=new k(0,0),this._lerpEnd=new k(0,0),this._initialized=!1,this._stopped=!1,this._distance=0,this._lerpDuration=n,this._lerpEnd=new k(e,i)}return t.prototype._initialize=function(){this._lerpStart=new k(this.actor.pos.x,this.actor.pos.y),this._currentLerpTime=0,this._distance=this._lerpStart.distance(this._lerpEnd)},t.prototype.update=function(t){this._initialized||(this._initialize(),this._initialized=!0);var e=this.actor.pos.x,i=this.actor.pos.y;this._currentLerpTime<this._lerpDuration?(e=this._lerpEnd.x<this._lerpStart.x?this._lerpStart.x-(this.easingFcn(this._currentLerpTime,this._lerpEnd.x,this._lerpStart.x,this._lerpDuration)-this._lerpEnd.x):this.easingFcn(this._currentLerpTime,this._lerpStart.x,this._lerpEnd.x,this._lerpDuration),i=this._lerpEnd.y<this._lerpStart.y?this._lerpStart.y-(this.easingFcn(this._currentLerpTime,this._lerpEnd.y,this._lerpStart.y,this._lerpDuration)-this._lerpEnd.y):this.easingFcn(this._currentLerpTime,this._lerpStart.y,this._lerpEnd.y,this._lerpDuration),this.actor.pos.x=e,this.actor.pos.y=i,this._currentLerpTime+=t):(this.actor.pos.x=this._lerpEnd.x,this.actor.pos.y=this._lerpEnd.y)},t.prototype.isComplete=function(t){return this._stopped||new k(t.pos.x,t.pos.y).distance(this._lerpStart)>=this._distance},t.prototype.reset=function(){this._initialized=!1},t.prototype.stop=function(){this._stopped=!0},t}(),$t=function(){function t(t,e,i,n){this._started=!1,this._stopped=!1,this._actor=t,this._end=new k(e,i),this._speed=n}return t.prototype.update=function(t){this._started||(this._started=!0,this._start=new k(this._actor.pos.x,this._actor.pos.y),this._distance=this._start.distance(this._end),this._dir=this._end.sub(this._start).normalize());var e=this._dir.scale(this._speed);this._actor.vel.x=e.x,this._actor.vel.y=e.y,this.isComplete(this._actor)&&(this._actor.pos.x=this._end.x,this._actor.pos.y=this._end.y,this._actor.vel.y=0,this._actor.vel.x=0)},t.prototype.isComplete=function(t){return this._stopped||new k(t.pos.x,t.pos.y).distance(this._start)>=this._distance},t.prototype.stop=function(){this._actor.vel.y=0,this._actor.vel.x=0,this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}(),te=function(){function t(t,e,i,n){if(this._started=!1,this._stopped=!1,this._actor=t,this._end=new k(e,i),n<=0)throw Ot.getInstance().error(\"Attempted to moveBy time less than or equal to zero : \"+n),new Error(\"Cannot move in time <= 0\");this._time=n}return t.prototype.update=function(t){this._started||(this._started=!0,this._start=new k(this._actor.pos.x,this._actor.pos.y),this._distance=this._start.distance(this._end),this._dir=this._end.sub(this._start).normalize(),this._speed=this._distance/(this._time/1e3));var e=this._dir.scale(this._speed);this._actor.vel.x=e.x,this._actor.vel.y=e.y,this.isComplete(this._actor)&&(this._actor.pos.x=this._end.x,this._actor.pos.y=this._end.y,this._actor.vel.y=0,this._actor.vel.x=0)},t.prototype.isComplete=function(t){return this._stopped||new k(t.pos.x,t.pos.y).distance(this._start)>=this._distance},t.prototype.stop=function(){this._actor.vel.y=0,this._actor.vel.x=0,this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}(),ee=function(){function t(t,e,i){this._started=!1,this._stopped=!1,this._actor=t,this._actorToFollow=e,this._current=new k(this._actor.pos.x,this._actor.pos.y),this._end=new k(e.pos.x,e.pos.y),this._maximumDistance=void 0!==i?i:this._current.distance(this._end),this._speed=0}return t.prototype.update=function(t){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());var e=Math.sqrt(Math.pow(this._actorToFollow.vel.x,2)+Math.pow(this._actorToFollow.vel.y,2));if(0!==e&&(this._speed=e),this._current.x=this._actor.pos.x,this._current.y=this._actor.pos.y,this._end.x=this._actorToFollow.pos.x,this._end.y=this._actorToFollow.pos.y,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize(),this._distanceBetween>=this._maximumDistance){var i=this._dir.scale(this._speed);this._actor.vel.x=i.x,this._actor.vel.y=i.y}else this._actor.vel.x=0,this._actor.vel.y=0;this.isComplete()&&(this._actor.pos.x=this._end.x,this._actor.pos.y=this._end.y,this._actor.vel.y=0,this._actor.vel.x=0)},t.prototype.stop=function(){this._actor.vel.y=0,this._actor.vel.x=0,this._stopped=!0},t.prototype.isComplete=function(){return this._stopped},t.prototype.reset=function(){this._started=!1},t}(),ie=function(){function t(t,e,i){this._started=!1,this._stopped=!1,this._speedWasSpecified=!1,this._actor=t,this._actorToMeet=e,this._current=new k(this._actor.pos.x,this._actor.pos.y),this._end=new k(e.pos.x,e.pos.y),this._speed=i||0,void 0!==i&&(this._speedWasSpecified=!0)}return t.prototype.update=function(t){this._started||(this._started=!0,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize());var e=Math.sqrt(Math.pow(this._actorToMeet.vel.x,2)+Math.pow(this._actorToMeet.vel.y,2));0===e||this._speedWasSpecified||(this._speed=e),this._current.x=this._actor.pos.x,this._current.y=this._actor.pos.y,this._end.x=this._actorToMeet.pos.x,this._end.y=this._actorToMeet.pos.y,this._distanceBetween=this._current.distance(this._end),this._dir=this._end.sub(this._current).normalize();var i=this._dir.scale(this._speed);this._actor.vel.x=i.x,this._actor.vel.y=i.y,this.isComplete()&&(this._actor.pos.x=this._end.x,this._actor.pos.y=this._end.y,this._actor.vel.y=0,this._actor.vel.x=0)},t.prototype.isComplete=function(){return this._stopped||this._distanceBetween<=1},t.prototype.stop=function(){this._actor.vel.y=0,this._actor.vel.x=0,this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}(),ne=function(){function t(t,e,i,n){this._started=!1,this._stopped=!1,this._actor=t,this._end=e,this._speed=i,this._rotationType=n||Gt.ShortestPath}return t.prototype.update=function(t){if(!this._started){this._started=!0,this._start=this._actor.rotation;var e=Math.abs(this._end-this._start),i=f-e;switch(e>i?(this._shortDistance=i,this._longDistance=e):(this._shortDistance=e,this._longDistance=i),this._shortestPathIsPositive=(this._start-this._end+f)%f>=Math.PI,this._rotationType){case Gt.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case Gt.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case Gt.Clockwise:this._direction=1,this._shortestPathIsPositive?this._distance=this._shortDistance:this._distance=this._longDistance;break;case Gt.CounterClockwise:this._direction=-1,this._shortestPathIsPositive?this._distance=this._longDistance:this._distance=this._shortDistance}}this._actor.rx=this._direction*this._speed,this.isComplete()&&(this._actor.rotation=this._end,this._actor.rx=0,this._stopped=!0)},t.prototype.isComplete=function(){var t=Math.abs(this._actor.rotation-this._start);return this._stopped||t>=Math.abs(this._distance)},t.prototype.stop=function(){this._actor.rx=0,this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}(),oe=function(){function t(t,e,i,n){this._started=!1,this._stopped=!1,this._actor=t,this._end=e,this._time=i,this._rotationType=n||Gt.ShortestPath}return t.prototype.update=function(t){if(!this._started){this._started=!0,this._start=this._actor.rotation;var e=Math.abs(this._end-this._start),i=f-e;switch(e>i?(this._shortDistance=i,this._longDistance=e):(this._shortDistance=e,this._longDistance=i),this._shortestPathIsPositive=(this._start-this._end+f)%f>=Math.PI,this._rotationType){case Gt.ShortestPath:this._distance=this._shortDistance,this._shortestPathIsPositive?this._direction=1:this._direction=-1;break;case Gt.LongestPath:this._distance=this._longDistance,this._shortestPathIsPositive?this._direction=-1:this._direction=1;break;case Gt.Clockwise:this._direction=1,this._shortDistance>=0?this._distance=this._shortDistance:this._distance=this._longDistance;break;case Gt.CounterClockwise:this._direction=-1,this._shortDistance<=0?this._distance=this._shortDistance:this._distance=this._longDistance}this._speed=Math.abs(this._distance/this._time*1e3)}this._actor.rx=this._direction*this._speed,this.isComplete()&&(this._actor.rotation=this._end,this._actor.rx=0,this._stopped=!0)},t.prototype.isComplete=function(){var t=Math.abs(this._actor.rotation-this._start);return this._stopped||t>=Math.abs(this._distance)},t.prototype.stop=function(){this._actor.rx=0,this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}(),re=function(){function t(t,e,i,n,o){this._started=!1,this._stopped=!1,this._actor=t,this._endX=e,this._endY=i,this._speedX=n,this._speedY=o}return t.prototype.update=function(t){if(this._started||(this._started=!0,this._startX=this._actor.scale.x,this._startY=this._actor.scale.y,this._distanceX=Math.abs(this._endX-this._startX),this._distanceY=Math.abs(this._endY-this._startY)),Math.abs(this._actor.scale.x-this._startX)>=this._distanceX)this._actor.sx=0;else{var e=this._endY<this._startY?-1:1;this._actor.sx=this._speedX*e}if(Math.abs(this._actor.scale.y-this._startY)>=this._distanceY)this._actor.sy=0;else{var i=this._endY<this._startY?-1:1;this._actor.sy=this._speedY*i}this.isComplete()&&(this._actor.scale.x=this._endX,this._actor.scale.y=this._endY,this._actor.sx=0,this._actor.sy=0)},t.prototype.isComplete=function(){return this._stopped||Math.abs(this._actor.scale.y-this._startX)>=this._distanceX&&Math.abs(this._actor.scale.y-this._startY)>=this._distanceY},t.prototype.stop=function(){this._actor.sx=0,this._actor.sy=0,this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}(),se=function(){function t(t,e,i,n){this._started=!1,this._stopped=!1,this._actor=t,this._endX=e,this._endY=i,this._speedX=(this._endX-this._actor.scale.x)/n*1e3,this._speedY=(this._endY-this._actor.scale.y)/n*1e3}return t.prototype.update=function(t){this._started||(this._started=!0,this._startX=this._actor.scale.x,this._startY=this._actor.scale.y,this._distanceX=Math.abs(this._endX-this._startX),this._distanceY=Math.abs(this._endY-this._startY));var e=this._endX<this._startX?-1:1,i=this._endY<this._startY?-1:1;this._actor.sx=this._speedX*e,this._actor.sy=this._speedY*i,this.isComplete()&&(this._actor.scale.x=this._endX,this._actor.scale.y=this._endY,this._actor.sx=0,this._actor.sy=0)},t.prototype.isComplete=function(){return this._stopped||Math.abs(this._actor.scale.x-this._startX)>=this._distanceX&&Math.abs(this._actor.scale.y-this._startY)>=this._distanceY},t.prototype.stop=function(){this._actor.sx=0,this._actor.sy=0,this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}(),ae=function(){function t(t,e){this._elapsedTime=0,this._started=!1,this._stopped=!1,this._actor=t,this._delay=e}return t.prototype.update=function(t){this._started||(this._started=!0),this.x=this._actor.pos.x,this.y=this._actor.pos.y,this._elapsedTime+=t},t.prototype.isComplete=function(){return this._stopped||this._elapsedTime>=this._delay},t.prototype.stop=function(){this._stopped=!0},t.prototype.reset=function(){this._elapsedTime=0,this._started=!1},t}(),he=function(){function t(t,e,i,n){void 0===n&&(n=1),this._timeVisible=0,this._timeNotVisible=0,this._elapsedTime=0,this._totalTime=0,this._stopped=!1,this._started=!1,this._actor=t,this._timeVisible=e,this._timeNotVisible=i,this._duration=(e+i)*n}return t.prototype.update=function(t){this._started||(this._started=!0),this._elapsedTime+=t,this._totalTime+=t,this._actor.visible&&this._elapsedTime>=this._timeVisible&&(this._actor.visible=!1,this._elapsedTime=0),!this._actor.visible&&this._elapsedTime>=this._timeNotVisible&&(this._actor.visible=!0,this._elapsedTime=0),this.isComplete()&&(this._actor.visible=!0)},t.prototype.isComplete=function(){return this._stopped||this._totalTime>=this._duration},t.prototype.stop=function(){this._actor.visible=!0,this._stopped=!0},t.prototype.reset=function(){this._started=!1,this._elapsedTime=0,this._totalTime=0},t}(),ce=function(){function t(t,e,i){this._multiplier=1,this._started=!1,this._stopped=!1,this._actor=t,this._endOpacity=e,this._speed=i}return t.prototype.update=function(t){this._started||(this._started=!0,this._endOpacity<this._actor.opacity?this._multiplier=-1:this._multiplier=1),this._speed>0&&(this._actor.opacity+=this._multiplier*(Math.abs(this._actor.opacity-this._endOpacity)*t)/this._speed),this._speed-=t,this.isComplete()&&(this._actor.opacity=this._endOpacity),Ot.getInstance().debug(\"[Action fade] Actor opacity:\",this._actor.opacity)},t.prototype.isComplete=function(){return this._stopped||Math.abs(this._actor.opacity-this._endOpacity)<.05},t.prototype.stop=function(){this._stopped=!0},t.prototype.reset=function(){this._started=!1},t}(),ue=function(){function t(t){this._stopped=!1,this._actor=t}return t.prototype.update=function(t){this._actor.actionQueue.clearActions(),this._actor.kill(),this._stopped=!0},t.prototype.isComplete=function(){return this._stopped},t.prototype.stop=function(){},t.prototype.reset=function(){},t}(),le=function(){function t(t,e){this._method=null,this._actor=null,this._hasBeenCalled=!1,this._actor=t,this._method=e}return t.prototype.update=function(t){this._method.call(this._actor),this._hasBeenCalled=!0},t.prototype.isComplete=function(){return this._hasBeenCalled},t.prototype.reset=function(){this._hasBeenCalled=!1},t.prototype.stop=function(){this._hasBeenCalled=!0},t}(),pe=function(){function t(t,e,i){this._stopped=!1,this._actor=t,this._actionQueue=new fe(t),this._repeat=e,this._originalRepeat=e;for(var n=0,o=i.length;n<o;n++)i[n].reset(),this._actionQueue.add(i[n])}return t.prototype.update=function(t){this.x=this._actor.pos.x,this.y=this._actor.pos.y,this._actionQueue.hasNext()||(this._actionQueue.reset(),this._repeat--),this._actionQueue.update(t)},t.prototype.isComplete=function(){return this._stopped||this._repeat<=0},t.prototype.stop=function(){this._stopped=!0},t.prototype.reset=function(){this._repeat=this._originalRepeat},t}(),de=function(){function t(t,e){this._stopped=!1,this._actor=t,this._actionQueue=new fe(t);for(var i=0,n=e.length;i<n;i++)e[i].reset(),this._actionQueue.add(e[i])}return t.prototype.update=function(t){this.x=this._actor.pos.x,this.y=this._actor.pos.y,this._stopped||(this._actionQueue.hasNext()||this._actionQueue.reset(),this._actionQueue.update(t))},t.prototype.isComplete=function(){return this._stopped},t.prototype.stop=function(){this._stopped=!0,this._actionQueue.clearActions()},t.prototype.reset=function(){},t}(),fe=function(){function t(t){this._actions=[],this._completedActions=[],this._actor=t}return t.prototype.add=function(t){this._actions.push(t)},t.prototype.remove=function(t){var e=this._actions.indexOf(t);this._actions.splice(e,1)},t.prototype.clearActions=function(){this._actions.length=0,this._completedActions.length=0,this._currentAction&&this._currentAction.stop()},t.prototype.getActions=function(){return this._actions.concat(this._completedActions)},t.prototype.hasNext=function(){return this._actions.length>0},t.prototype.reset=function(){this._actions=this.getActions();for(var t=0,e=this._actions.length;t<e;t++)this._actions[t].reset();this._completedActions=[]},t.prototype.update=function(t){this._actions.length>0&&(this._currentAction=this._actions[0],this._currentAction.update(t),this._currentAction.isComplete(this._actor)&&this._completedActions.push(this._actions.shift()))},t}(),_e=function(){function t(){}return t.CreateReversableEasingFunction=function(t){return function(e,i,n,o){return n<i?i-(t(e,n,i,o)-n):t(e,i,n,o)}},t.CreateVectorEasingFunction=function(t){return function(e,i,n,o){return new k(t(e,i.x,n.x,o),t(e,i.y,n.y,o))}},t.Linear=t.CreateReversableEasingFunction(function(t,e,i,n){return(i-=e)*t/n+e}),t.EaseInQuad=t.CreateReversableEasingFunction(function(t,e,i,n){return(i-=e)*(t/=n)*t+e}),t.EaseOutQuad=t.CreateReversableEasingFunction(function(t,e,i,n){return-(i-=e)*(t/=n)*(t-2)+e}),t.EaseInOutQuad=t.CreateReversableEasingFunction(function(t,e,i,n){return i-=e,(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e}),t.EaseInCubic=t.CreateReversableEasingFunction(function(t,e,i,n){return(i-=e)*(t/=n)*t*t+e}),t.EaseOutCubic=t.CreateReversableEasingFunction(function(t,e,i,n){return t/=n,(i-=e)*(--t*t*t+1)+e}),t.EaseInOutCubic=t.CreateReversableEasingFunction(function(t,e,i,n){return i-=e,(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}),t}(),ge=function(){function t(){this._actors=[],this._queues=[],null!==arguments&&(this._actors=Array.prototype.slice.call(arguments,0),this._queues=this._actors.map(function(t){return t.actionQueue}))}return t.prototype.clearActions=function(){for(var t=0,e=this._queues.length;t<e;t++)this._queues[t].clearActions()},t.prototype.addActorToContext=function(t){this._actors.push(t),this._queues.push(t.actionQueue)},t.prototype.removeActorFromContext=function(t){var e=this._actors.indexOf(t);e>-1&&(this._actors.splice(e,1),this._queues.splice(e,1))},t.prototype.easeTo=function(t,e,i,n){void 0===n&&(n=_e.Linear);for(var o=0,r=this._queues.length;o<r;o++)this._queues[o].add(new Jt(this._actors[o],t,e,i,n));return this},t.prototype.moveTo=function(t,e,i){for(var n=0,o=this._queues.length;n<o;n++)this._queues[n].add(new $t(this._actors[n],t,e,i));return this},t.prototype.moveBy=function(t,e,i){for(var n=0,o=this._queues.length;n<o;n++)this._queues[n].add(new te(this._actors[n],t,e,i));return this},t.prototype.rotateTo=function(t,e,i){for(var n=0,o=this._queues.length;n<o;n++)this._queues[n].add(new ne(this._actors[n],t,e,i));return this},t.prototype.rotateBy=function(t,e,i){for(var n=0,o=this._queues.length;n<o;n++)this._queues[n].add(new oe(this._actors[n],t,e,i));return this},t.prototype.scaleTo=function(t,e,i,n){for(var o=0,r=this._queues.length;o<r;o++)this._queues[o].add(new re(this._actors[o],t,e,i,n));return this},t.prototype.scaleBy=function(t,e,i){for(var n=0,o=this._queues.length;n<o;n++)this._queues[n].add(new se(this._actors[n],t,e,i));return this},t.prototype.blink=function(t,e,i){void 0===i&&(i=1);for(var n=0,o=this._queues.length;n<o;n++)this._queues[n].add(new he(this._actors[n],t,e,i));return this},t.prototype.fade=function(t,e){for(var i=0,n=this._queues.length;i<n;i++)this._queues[i].add(new ce(this._actors[i],t,e));return this},t.prototype.delay=function(t){for(var e=0,i=this._queues.length;e<i;e++)this._queues[e].add(new ae(this._actors[e],t));return this},t.prototype.die=function(){for(var t=0,e=this._queues.length;t<e;t++)this._queues[t].add(new ue(this._actors[t]));return this},t.prototype.callMethod=function(t){for(var e=0,i=this._queues.length;e<i;e++)this._queues[e].add(new le(this._actors[e],t));return this},t.prototype.repeat=function(t){if(!t)return this.repeatForever(),this;for(var e=0,i=this._queues.length;e<i;e++)this._queues[e].add(new pe(this._actors[e],t,this._actors[e].actionQueue.getActions()));return this},t.prototype.repeatForever=function(){for(var t=0,e=this._queues.length;t<e;t++)this._queues[t].add(new de(this._actors[t],this._actors[t].actionQueue.getActions()));return this},t.prototype.follow=function(t,e){for(var i=0,n=this._queues.length;i<n;i++)void 0===e?this._queues[i].add(new ee(this._actors[i],t)):this._queues[i].add(new ee(this._actors[i],t,e));return this},t.prototype.meet=function(t,e){for(var i=0,n=this._queues.length;i<n;i++)void 0===e?this._queues[i].add(new ie(this._actors[i],t)):this._queues[i].add(new ie(this._actors[i],t,e));return this},t.prototype.asPromise=function(){var t=this,e=this._queues.map(function(e,i){var n=new p;return e.add(new le(t._actors[i],function(){n.resolve()})),n});return p.join.apply(this,e)},t}();function ye(t,e,i,n,o,r,s,a){void 0===e&&(e=Pt.Red.clone()),void 0===s&&(s=1),void 0===a&&(a=\"butt\"),t.beginPath(),t.lineWidth=s,t.lineCap=a,t.strokeStyle=e.toString(),t.moveTo(i,n),t.lineTo(o,r),t.closePath(),t.stroke()}function ve(t,e,i){void 0===e&&(e=Pt.Red.clone()),t.beginPath(),t.strokeStyle=e.toString(),t.arc(i.x,i.y,5,0,2*Math.PI),t.closePath(),t.stroke()}function me(t,e,i,n,o){void 0===o&&(o=1);var r=e?e.toString():\"blue\",s=n.scale(o);t.beginPath(),t.strokeStyle=r,t.moveTo(i.x,i.y),t.lineTo(i.x+s.x,i.y+s.y),t.closePath(),t.stroke()}function be(t,e,i,n,o,r,s,a){var h;if(void 0===r&&(r=5),void 0===s&&(s=Pt.White),void 0===a&&(a=null),\"number\"==typeof r)h={tl:r,tr:r,br:r,bl:r};else{var c={tl:0,tr:0,br:0,bl:0};for(var u in c)if(c.hasOwnProperty(u)){var l=u;h[l]=r[l]||c[l]}}t.beginPath(),t.moveTo(e+h.tl,i),t.lineTo(e+n-h.tr,i),t.quadraticCurveTo(e+n,i,e+n,i+h.tr),t.lineTo(e+n,i+o-h.br),t.quadraticCurveTo(e+n,i+o,e+n-h.br,i+o),t.lineTo(e+h.bl,i+o),t.quadraticCurveTo(e,i+o,e,i+o-h.bl),t.lineTo(e,i+h.tl),t.quadraticCurveTo(e,i,e+h.tl,i),t.closePath(),a&&(t.fillStyle=a.toString(),t.fill()),s&&(t.strokeStyle=s.toString(),t.stroke())}function we(t,e,i,n,o,r){void 0===o&&(o=Pt.White),void 0===r&&(r=null),t.beginPath(),t.arc(e,i,n,0,2*Math.PI),t.closePath(),r&&(t.fillStyle=r.toString(),t.fill()),o&&(t.strokeStyle=o.toString(),t.stroke())}var xe,Pe=function(){function t(e,i){this.bodyA=e,this.bodyB=i,this.id=null,this.collision=null,this.id=t.calculatePairHash(e,i)}return t.canCollide=function(t,e){return(t.collisionType!==xe.Fixed||e.collisionType!==xe.Fixed)&&(e.collisionType!==xe.PreventCollision&&t.collisionType!==xe.PreventCollision&&(!t.isKilled()&&!e.isKilled()))},Object.defineProperty(t.prototype,\"canCollide\",{get:function(){var e=this.bodyA.actor,i=this.bodyB.actor;return t.canCollide(e,i)},enumerable:!0,configurable:!0}),t.prototype.collide=function(){this.collision=this.bodyA.collisionArea.collide(this.bodyB.collisionArea)},t.prototype.resolve=function(t){this.collision&&this.collision.resolve(t)},t.calculatePairHash=function(t,e){return t.actor.id<e.actor.id?\"#\"+t.actor.id+\"+\"+e.actor.id:\"#\"+e.actor.id+\"+\"+t.actor.id},t.prototype.debugDraw=function(t){this.collision&&(W.showContacts&&ve(t,Pt.Red,this.collision.point),W.showCollisionNormals&&me(t,Pt.Cyan,this.collision.point,this.collision.normal,30))},t}(),Se=function(){function t(t){this.actor=t,this.collisionArea=null,this.pos=new k(0,0),this.oldPos=new k(0,0),this.vel=new k(0,0),this.oldVel=new k(0,0),this.acc=new k(0,0),this.torque=0,this.mass=1,this.moi=1e3,this.motion=10,this.friction=.99,this.restitution=.2,this.rotation=0,this.rx=0,this._totalMtv=k.Zero.clone()}return t.prototype.addMtv=function(t){this._totalMtv.addEqual(t)},t.prototype.applyMtv=function(){this.pos.addEqual(this._totalMtv),this._totalMtv.setTo(0,0)},t.prototype.getBounds=function(){return W.collisionResolutionStrategy===M.Box?this.actor.getBounds():this.collisionArea.getBounds()},t.prototype.getRelativeBounds=function(){return W.collisionResolutionStrategy,M.Box,this.actor.getRelativeBounds()},t.prototype.update=function(){this.collisionArea&&(this.actor&&this.actor.isGeometryDirty&&this.collisionArea instanceof Mt&&(this.collisionArea.points=this.actor.getRelativeGeometry()),this.collisionArea.recalc())},t.prototype.useBoxCollision=function(t){void 0===t&&(t=k.Zero.clone()),this.collisionArea=new Mt({body:this,points:this.actor.getRelativeGeometry(),pos:t}),this.moi=this.collisionArea.getMomentOfInertia()||this.moi},t.prototype.usePolygonCollision=function(t,e){void 0===e&&(e=k.Zero.clone()),this.collisionArea=new Mt({body:this,points:t,pos:e}),this.moi=this.collisionArea.getMomentOfInertia()||this.moi},t.prototype.useCircleCollision=function(t,e){void 0===e&&(e=k.Zero.clone()),t||(t=this.actor.getWidth()/2),this.collisionArea=new Ct({body:this,radius:t,pos:e}),this.moi=this.collisionArea.getMomentOfInertia()||this.moi},t.prototype.useEdgeCollision=function(t,e){this.collisionArea=new Tt({begin:t,end:e,body:this}),this.moi=this.collisionArea.getMomentOfInertia()||this.moi},t.prototype.debugDraw=function(t){W.showMotionVectors&&(me(t,Pt.Yellow,this.pos,this.acc.add(W.acc)),me(t,Pt.Red,this.pos,this.vel),ve(t,Pt.Red,this.pos)),W.showBounds&&this.getBounds().debugDraw(t,Pt.Yellow),W.showArea&&this.collisionArea.debugDraw(t,Pt.Green)},t.prototype.touching=function(t){var e=new Pe(this,t.body);return e.collide(),!!e.collision},t}(),Ae=function(){function t(){this._topLeft=new k(0,0),this._topRight=new k(0,0),this._bottomLeft=new k(0,0),this._bottomRight=new k(0,0)}return t.prototype.isSpriteOffScreen=function(t,e){var i=t.currentDrawing.drawWidth,n=t.currentDrawing.drawHeight,o=t.rotation,r=t.getCenter(),s=t.getWorldPos();this._topLeft.x=s.x-i/2,this._topLeft.y=s.y-n/2,this._topLeft=this._topLeft.rotate(o,r),this._topRight.x=s.x+i/2,this._topRight.y=s.y-n/2,this._topRight=this._topRight.rotate(o,r),this._bottomLeft.x=s.x-i/2,this._bottomLeft.y=s.y+n/2,this._bottomLeft=this._bottomLeft.rotate(o,r),this._bottomRight.x=s.x+i/2,this._bottomRight.y=s.y+n/2,this._bottomRight=this._bottomRight.rotate(o,r);var a=e.worldToScreenCoordinates(this._topLeft),h=e.worldToScreenCoordinates(this._topRight),c=e.worldToScreenCoordinates(this._bottomLeft),u=e.worldToScreenCoordinates(this._bottomRight);this._xCoords=[],this._yCoords=[],this._xCoords.push(a.x,h.x,c.x,u.x),this._yCoords.push(a.y,h.y,c.y,u.y),this._xMin=Math.min.apply(null,this._xCoords),this._yMin=Math.min.apply(null,this._yCoords),this._xMax=Math.max.apply(null,this._xCoords),this._yMax=Math.max.apply(null,this._yCoords);var l=e.screenToWorldCoordinates(new k(this._xMin,this._yMin)),p=e.screenToWorldCoordinates(new k(this._xMax,this._yMax));this._xMinWorld=l.x,this._yMinWorld=l.y,this._xMaxWorld=p.x,this._yMaxWorld=p.y;var d=[new k(this._xMin,this._yMin),new k(this._xMax,this._yMin),new k(this._xMin,this._yMax),new k(this._xMax,this._yMax)];if(d[0].x<0&&d[1].x>e.canvas.clientWidth&&(d[0].y>0||d[2].y<e.canvas.clientHeight))return!1;if(d[0].y<0&&d[2].y>e.canvas.clientHeight&&(d[1].x>0||d[0].x<e.canvas.clientWidth))return!1;for(var f=0;f<d.length;f++)if(d[f].x>0&&d[f].y>0&&d[f].x<e.canvas.clientWidth&&d[f].y<e.canvas.clientHeight)return!1;return!0},t.prototype.debugDraw=function(t){t.beginPath(),t.strokeStyle=Pt.White.toString(),t.rect(this._xMinWorld,this._yMinWorld,this._xMaxWorld-this._xMinWorld,this._yMaxWorld-this._yMinWorld),t.stroke(),t.fillStyle=Pt.Red.toString(),t.beginPath(),t.arc(this._topLeft.x,this._topLeft.y,5,0,2*Math.PI),t.closePath(),t.fill(),t.fillStyle=Pt.Green.toString(),t.beginPath(),t.arc(this._topRight.x,this._topRight.y,5,0,2*Math.PI),t.closePath(),t.fill(),t.fillStyle=Pt.Blue.toString(),t.beginPath(),t.arc(this._bottomLeft.x,this._bottomLeft.y,5,0,2*Math.PI),t.closePath(),t.fill(),t.fillStyle=Pt.Magenta.toString(),t.beginPath(),t.arc(this._bottomRight.x,this._bottomRight.y,5,0,2*Math.PI),t.closePath(),t.fill()},t}(),Ee=function(){function t(){this.cullingBox=new Ae}return t.prototype.update=function(t,e){var i=t.eventDispatcher,n=t.anchor,o=t.getGlobalScale(),r=o.x*t.getWidth()/t.scale.x,s=o.y*t.getHeight()/t.scale.y,a=e.currentScene.camera.pos,h=t.getWorldPos(),c=e.worldToScreenCoordinates(new k(h.x-n.x*r,h.y-n.y*s)),u=e.worldToScreenCoordinates(a),l=1;t.scene&&t.scene.camera&&(l=Math.abs(t.scene.camera.getZoom()));var p=!0;null!=t.currentDrawing&&(p=this.cullingBox.isSpriteOffScreen(t,e)),t.isOffScreen?(c.x+r*l>0&&c.y+s*l>0&&c.x<e.halfDrawWidth+u.x&&c.y<e.halfDrawHeight+u.y||!p)&&(i.emit(\"enterviewport\",new vt(t)),t.isOffScreen=!1):(c.x+r*l<0||c.y+s*l<0||c.x>e.halfDrawWidth+u.x||c.y>e.halfDrawHeight+u.y)&&p&&(i.emit(\"exitviewport\",new yt(t)),t.isOffScreen=!0)},t}(),Ce=function(){function t(){}return t.prototype.update=function(t,e){t.enableCapturePointer&&(t.isKilled()||e.input.pointers.revisePointerEventsPaths(t))},t}(),Te=function(){function t(){}return t.prototype.update=function(t,e){var i=t.eventDispatcher;if(t.collisionType!==xe.PreventCollision&&e.currentScene&&e.currentScene.tileMaps)for(var n=0;n<e.currentScene.tileMaps.length;n++)for(var o,r=e.currentScene.tileMaps[n],s=l.None,a=2;(o=r.collides(t))&&!(a--<0);)s=t.getSideFromIntersect(o),i.emit(\"precollision\",new ut(t,null,s,o)),t.collisionType===xe.Active&&(t.pos.y+=o.y,t.pos.x+=o.x,i.emit(\"postcollision\",new lt(t,null,s,o)))},t}(),Me=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),De=function(t){function e(e,i,n,o,r){return t.call(this,e,i,n,o,r)||this}return Me(e,t),e}(Vt(function(t){function e(i,n,o,r,s){var a=t.call(this)||this;if(a.id=e.maxId++,a.body=new Se(a),a.oldAcc=k.Zero.clone(),a._height=0,a._width=0,a.scale=k.One.clone(),a.oldScale=k.One.clone(),a.sx=0,a.sy=0,a.isOffScreen=!1,a.visible=!0,a.opacity=1,a.previousOpacity=1,a.logger=Ot.getInstance(),a.scene=null,a.parent=null,a.children=[],a.collisionType=xe.PreventCollision,a.collisionGroups=[],a._geometryDirty=!1,a._collisionHandlers={},a._isInitialized=!1,a.frames={},a._effectsDirty=!1,a.currentDrawing=null,a.traits=[],a.enableCapturePointer=!1,a.capturePointer={captureMoveEvents:!1,captureDragEvents:!1},a._zIndex=0,a._isKilled=!1,a._opacityFx=new Ht(a.opacity),a._capturePointerEvents=[\"pointerup\",\"pointerdown\",\"pointermove\",\"pointerenter\",\"pointerleave\",\"pointerdragstart\",\"pointerdragend\",\"pointerdragmove\",\"pointerdragenter\",\"pointerdragleave\"],a._captureMoveEvents=[\"pointermove\",\"pointerenter\",\"pointerleave\",\"pointerdragmove\",\"pointerdragenter\",\"pointerdragleave\"],a._captureDragEvents=[\"pointerdragstart\",\"pointerdragend\",\"pointerdragmove\",\"pointerdragenter\",\"pointerdragleave\"],i&&\"object\"==typeof i){var h=i;i=h.pos?h.pos.x:h.x,n=h.pos?h.pos.y:h.y,o=h.width,r=h.height}return a.pos.x=i||0,a.pos.y=n||0,a._width=o||0,a._height=r||0,s&&(a.color=s,a.opacity=s.a),a.traits.push(new Te),a.traits.push(new Ee),a.traits.push(new Ce),a.actionQueue=new fe(a),a.actions=new ge(a),a._initDefaults(),a.body.useBoxCollision(),a}return Me(e,t),Object.defineProperty(e.prototype,\"collisionArea\",{get:function(){return this.body.collisionArea},set:function(t){this.body.collisionArea=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"x\",{get:function(){return this.body.pos.x},set:function(t){this.body.pos.x=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"y\",{get:function(){return this.body.pos.y},set:function(t){this.body.pos.y=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"pos\",{get:function(){return this.body.pos},set:function(t){this.body.pos.setTo(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"oldPos\",{get:function(){return this.body.oldPos},set:function(t){this.body.oldPos.setTo(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"vel\",{get:function(){return this.body.vel},set:function(t){this.body.vel.setTo(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"oldVel\",{get:function(){return this.body.oldVel},set:function(t){this.body.oldVel.setTo(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"acc\",{get:function(){return this.body.acc},set:function(t){this.body.acc.setTo(t.x,t.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"rotation\",{get:function(){return this.body.rotation},set:function(t){this.body.rotation=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"rx\",{get:function(){return this.body.rx},set:function(t){this.body.rx=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"torque\",{get:function(){return this.body.torque},set:function(t){this.body.torque=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"mass\",{get:function(){return this.body.mass},set:function(t){this.body.mass=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"moi\",{get:function(){return this.body.moi},set:function(t){this.body.moi=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"friction\",{get:function(){return this.body.friction},set:function(t){this.body.friction=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"restitution\",{get:function(){return this.body.restitution},set:function(t){this.body.restitution=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"color\",{get:function(){return this._color},set:function(t){this._color=t.clone()},enumerable:!0,configurable:!0}),e.prototype.onInitialize=function(t){},Object.defineProperty(e.prototype,\"isInitialized\",{get:function(){return this._isInitialized},enumerable:!0,configurable:!0}),e.prototype._initialize=function(e){this.isInitialized||(this.onInitialize(e),t.prototype.emit.call(this,\"initialize\",new ft(e,this)),this._isInitialized=!0);for(var i=0,n=this.children;i<n.length;i++){n[i]._initialize(e)}},e.prototype._initDefaults=function(){this.anchor=De.defaults.anchor.clone()},e.prototype._checkForPointerOptIn=function(t){if(t){var e=t.toLowerCase();-1!==this._capturePointerEvents.indexOf(e)&&(this.enableCapturePointer=!0,-1!==this._captureMoveEvents.indexOf(e)&&(this.capturePointer.captureMoveEvents=!0),-1!==this._captureDragEvents.indexOf(e)&&(this.capturePointer.captureDragEvents=!0))}},e.prototype.on=function(e,i){this._checkForPointerOptIn(e),t.prototype.on.call(this,e,i)},e.prototype.once=function(e,i){this._checkForPointerOptIn(e),t.prototype.once.call(this,e,i)},e.prototype.off=function(e,i){t.prototype.off.call(this,e,i)},e.prototype._prekill=function(e){t.prototype.emit.call(this,\"prekill\",new q(this)),this.onPreKill(e)},e.prototype.onPreKill=function(t){},e.prototype._postkill=function(e){t.prototype.emit.call(this,\"postkill\",new X(this)),this.onPostKill(e)},e.prototype.onPostKill=function(t){},e.prototype.kill=function(){this.scene?(this._prekill(this.scene),this.emit(\"kill\",new N(this)),this._isKilled=!0,this.scene.remove(this),this._postkill(this.scene)):this.logger.warn(\"Cannot kill actor, it was never added to the Scene\")},e.prototype.unkill=function(){this._isKilled=!1},e.prototype.isKilled=function(){return this._isKilled},e.prototype.add=function(t){t.collisionType=xe.PreventCollision,S(t,this.children)&&(t.parent=this)},e.prototype.remove=function(t){A(t,this.children)&&(t.parent=null)},e.prototype.setDrawing=function(t){t=t.toString(),this.currentDrawing!==this.frames[t]&&(null!=this.frames[t]?(this.frames[t].reset(),this.currentDrawing=this.frames[t]):Ot.getInstance().error(\"the specified drawing key \"+t+\" does not exist\"))},e.prototype.addDrawing=function(){2===arguments.length?(this.frames[arguments[0]]=arguments[1],this.currentDrawing||(this.currentDrawing=arguments[1]),this._effectsDirty=!0):(arguments[0]instanceof Kt&&this.addDrawing(\"default\",arguments[0]),arguments[0]instanceof Zt&&this.addDrawing(\"default\",arguments[0].asSprite()))},Object.defineProperty(e.prototype,\"z\",{get:function(){return this.getZIndex()},set:function(t){this.setZIndex(t)},enumerable:!0,configurable:!0}),e.prototype.getZIndex=function(){return this._zIndex},e.prototype.setZIndex=function(t){this.scene.cleanupDrawTree(this),this._zIndex=t,this.scene.updateDrawTree(this)},e.prototype.addCollisionGroup=function(t){this.collisionGroups.push(t)},e.prototype.removeCollisionGroup=function(t){var e=this.collisionGroups.indexOf(t);-1!==e&&this.collisionGroups.splice(e,1)},e.prototype.getCenter=function(){return new k(this.pos.x+this.getWidth()/2-this.anchor.x*this.getWidth(),this.pos.y+this.getHeight()/2-this.anchor.y*this.getHeight())},e.prototype.getWidth=function(){return this._width*this.getGlobalScale().x},e.prototype.setWidth=function(t){this._width=t/this.scale.x,this._geometryDirty=!0},e.prototype.getHeight=function(){return this._height*this.getGlobalScale().y},e.prototype.setHeight=function(t){this._height=t/this.scale.y,this._geometryDirty=!0},e.prototype.getLeft=function(){return this.getBounds().left},e.prototype.getRight=function(){return this.getBounds().right},e.prototype.getTop=function(){return this.getBounds().top},e.prototype.getBottom=function(){return this.getBounds().bottom},e.prototype.getWorldRotation=function(){return this.parent?this.rotation+this.parent.getWorldRotation():this.rotation},e.prototype.getWorldPos=function(){if(!this.parent)return this.pos.clone();var t=[],e=this;for(t.push(this);e.parent;)e=e.parent,t.push(e);var i=t.reduceRight(function(t,e){return e.parent?t+e.pos.x*e.getGlobalScale().x:t+e.pos.x},0),n=t.reduceRight(function(t,e){return e.parent?t+e.pos.y*e.getGlobalScale().y:t+e.pos.y},0),o=e.getWorldPos(),r=this.getWorldRotation();return new k(i,n).rotate(r,o)},e.prototype.getGlobalScale=function(){if(!this.parent)return new k(this.scale.x,this.scale.y);var t=this.parent.getGlobalScale();return new k(this.scale.x*t.x,this.scale.y*t.y)},e.prototype.getBounds=function(t){void 0===t&&(t=!0);var e=this._getCalculatedAnchor(),i=this.getWorldPos(),n=new Dt(i.x-e.x,i.y-e.y,i.x+this.getWidth()-e.x,i.y+this.getHeight()-e.y);return t?n.rotate(this.rotation,i):n},e.prototype.getRelativeBounds=function(t){void 0===t&&(t=!0);var e=this._getCalculatedAnchor(),i=new Dt(-e.x,-e.y,this.getWidth()-e.x,this.getHeight()-e.y);return t?i.rotate(this.rotation):i},e.prototype.getGeometry=function(){return this.getBounds(!1).getPoints()},e.prototype.getRelativeGeometry=function(){return this.getRelativeBounds(!1).getPoints()},Object.defineProperty(e.prototype,\"isGeometryDirty\",{get:function(){return this._geometryDirty},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e,i){void 0===i&&(i=!1);var n=this.getBounds().contains(new k(t,e));return i?n||this.children.some(function(i){return i.contains(t,e,!0)}):n},e.prototype.getSideFromIntersect=function(t){return t?Math.abs(t.x)>Math.abs(t.y)?t.x<0?l.Right:l.Left:t.y<0?l.Bottom:l.Top:l.None},e.prototype.collidesWithSide=function(t){var e=this.collides(t);return e?Math.abs(e.x)>Math.abs(e.y)?this.pos.x<t.pos.x?l.Right:l.Left:this.pos.y<t.pos.y?l.Bottom:l.Top:l.None},e.prototype.collides=function(t){var e=this.getBounds(),i=t.getBounds();return e.collides(i)},e.prototype.onCollidesWith=function(t,e){this._collisionHandlers[t]||(this._collisionHandlers[t]=[]),this._collisionHandlers[t].push(e)},e.prototype.getCollisionHandlers=function(){return this._collisionHandlers},e.prototype.removeCollidesWith=function(t){this._collisionHandlers[t]=[]},e.prototype.within=function(t,e){return Math.sqrt(Math.pow(this.pos.x-t.pos.x,2)+Math.pow(this.pos.y-t.pos.y,2))<=e},e.prototype._getCalculatedAnchor=function(){return new k(this.getWidth()*this.anchor.x,this.getHeight()*this.anchor.y)},e.prototype._reapplyEffects=function(t){t.removeEffect(this._opacityFx),t.addEffect(this._opacityFx)},e.prototype.integrate=function(t){var e=t/1e3,i=this.acc.clone();this.collisionType===xe.Active&&i.addEqual(W.acc),this.vel.addEqual(i.scale(e)),this.pos.addEqual(this.vel.scale(e)).addEqual(i.scale(.5*e*e)),this.rx+=this.torque*(1/this.moi)*e,this.rotation+=this.rx*e,this.scale.x+=this.sx*t/1e3,this.scale.y+=this.sy*t/1e3,this.scale.equals(this.oldScale)||(this._geometryDirty=!0),this.body.update(),this._geometryDirty=!1},e.prototype.update=function(t,e){this._initialize(t),this._preupdate(t,e),this.actionQueue.update(e),this.color&&(this.color.a=this.opacity),this.previousOpacity!==this.opacity&&(this.previousOpacity=this.opacity,this._opacityFx.opacity=this.opacity,this._effectsDirty=!0),this.oldVel.setTo(this.vel.x,this.vel.y),this.oldPos.setTo(this.pos.x,this.pos.y),this.oldAcc.setTo(this.acc.x,this.acc.y),this.oldScale.setTo(this.scale.x,this.scale.y),this.integrate(e);for(var i=0,n=this.traits;i<n.length;i++){n[i].update(this,t,e)}for(var o=0;o<this.children.length;o++)this.children[o].update(t,e);this._postupdate(t,e)},e.prototype.onPreUpdate=function(t,e){},e.prototype.onPostUpdate=function(t,e){},e.prototype._preupdate=function(t,e){this.emit(\"preupdate\",new J(t,e,this)),this.onPreUpdate(t,e)},e.prototype._postupdate=function(t,e){this.emit(\"postupdate\",new J(t,e,this)),this.onPostUpdate(t,e)},e.prototype.draw=function(t,e){if(t.save(),t.translate(this.pos.x,this.pos.y),t.rotate(this.rotation),t.scale(this.scale.x,this.scale.y),t.save(),t.translate(-this._width*this.anchor.x,-this._height*this.anchor.y),this._predraw(t,e),this.currentDrawing){var i=this.currentDrawing,n=(this._width-i.width*i.scale.x)*this.anchor.x,o=(this._height-i.height*i.scale.y)*this.anchor.y;this._effectsDirty&&(this._reapplyEffects(this.currentDrawing),this._effectsDirty=!1),this.currentDrawing.draw(t,n,o)}else this.color&&(t.fillStyle=this.color.toString(),t.fillRect(0,0,this._width,this._height));t.restore();for(var r=0;r<this.children.length;r++)this.children[r].visible&&this.children[r].draw(t,e);this._postdraw(t,e),t.restore()},e.prototype.onPreDraw=function(t,e){},e.prototype.onPostDraw=function(t,e){},e.prototype._predraw=function(t,e){this.emit(\"predraw\",new Y(t,e,this)),this.onPreDraw(t,e)},e.prototype._postdraw=function(t,e){this.emit(\"postdraw\",new Y(t,e,this)),this.onPostDraw(t,e)},e.prototype.debugDraw=function(t){this.emit(\"predebugdraw\",new Q(t,this)),this.body.debugDraw(t);var e=this.getBounds();e.debugDraw(t),t.fillText(\"id: \"+this.id,e.left+3,e.top+10),t.fillStyle=Pt.Yellow.toString(),t.beginPath(),t.arc(this.getWorldPos().x,this.getWorldPos().y,3,0,2*Math.PI),t.closePath(),t.fill();for(var i=0;i<this.traits.length;i++)this.traits[i]instanceof Ee&&this.traits[i].cullingBox.debugDraw(t);t.strokeStyle=Pt.Yellow.toString(),t.beginPath();var n=Math.min(this.getWidth(),this.getHeight());t.arc(this.getWorldPos().x,this.getWorldPos().y,n,0,2*Math.PI),t.closePath(),t.stroke();var o={\"0 Pi\":0,\"Pi/2\":Math.PI/2,Pi:Math.PI,\"3/2 Pi\":3*Math.PI/2},r=t.font;for(var s in o)t.fillStyle=Pt.Yellow.toString(),t.font=\"14px\",t.textAlign=\"center\",t.fillText(s,this.getWorldPos().x+Math.cos(o[s])*(n+10),this.getWorldPos().y+Math.sin(o[s])*(n+10));t.font=r;for(var a=0;a<this.children.length;a++)this.children[a].debugDraw(t);this.emit(\"postdebugdraw\",new Z(t,this))},e.prototype.getAncestors=function(){for(var t,e=[this],i=this;t=i.parent;)i=t,e.push(i);return e.reverse()},e.defaults={anchor:k.Half.clone()},e.maxId=0,e}(xt)));!function(t){t[t.PreventCollision=0]=\"PreventCollision\",t[t.Passive=1]=\"Passive\",t[t.Active=2]=\"Active\",t[t.Fixed=3]=\"Fixed\"}(xe||(xe={}));var Oe=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Be=function(t){function e(e,i,n,o){var r=this;return(r=\"object\"!=typeof e?t.call(this,e,i,n,o)||this:t.call(this,e)||this).traits=[],r.traits.push(new Ce),r.anchor.setTo(0,0),r.collisionType=xe.PreventCollision,r.enableCapturePointer=!0,r}return Oe(e,t),e.prototype._initialize=function(e){this._engine=e,t.prototype._initialize.call(this,e)},e.prototype.contains=function(e,i,n){if(void 0===n&&(n=!0),n)return t.prototype.contains.call(this,e,i);var o=this._engine.worldToScreenCoordinates(new k(e,i));return t.prototype.contains.call(this,o.x,o.y)},e}(De),ke=function(){function t(e,i,n,o){if(this.id=0,this.interval=10,this.fcn=function(){},this.repeats=!1,this.maxNumberOfRepeats=-1,this._elapsedTime=0,this._totalTimeAlive=0,this._paused=!1,this._numberOfTicks=0,this.complete=!1,this.scene=null,o&&o>=0&&(this.maxNumberOfRepeats=o,!n))throw new Error(\"repeats must be set to true if numberOfRepeats is set\");this.id=t.id++,this.interval=i||this.interval,this.fcn=e||this.fcn,this.repeats=n||this.repeats}return t.prototype.update=function(t){this._paused||(this._totalTimeAlive+=t,this._elapsedTime+=t,this.maxNumberOfRepeats>-1&&this._numberOfTicks>=this.maxNumberOfRepeats&&(this.complete=!0),!this.complete&&this._elapsedTime>=this.interval&&(this.fcn.call(this),this._numberOfTicks++,this.repeats?this._elapsedTime=0:this.complete=!0))},t.prototype.reset=function(t,e){if(t&&t>=0&&(this.interval=t),this.maxNumberOfRepeats&&this.maxNumberOfRepeats>=0&&(this.maxNumberOfRepeats=e,!this.repeats))throw new Error(\"repeats must be set to true if numberOfRepeats is set\");this.complete=!1,this._elapsedTime=0,this._numberOfTicks=0},Object.defineProperty(t.prototype,\"timesRepeated\",{get:function(){return this._numberOfTicks},enumerable:!0,configurable:!0}),t.prototype.getTimeRunning=function(){return this._totalTimeAlive},t.prototype.pause=function(){this._paused=!0},t.prototype.unpause=function(){this._paused=!1},t.prototype.cancel=function(){this.scene&&this.scene.cancelTimer(this)},t.id=0,t}(),Re=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Fe=function(t){function e(e,i,n,o,r,s){return t.call(this,e,i,n,o,r,s)||this}return Re(e,t),e}(Vt(function(t){function e(e,i,n,o,r,s){var a,h=t.call(this)||this;if(h._collidingX=-1,h._collidingY=-1,h._onScreenXStart=0,h._onScreenXEnd=9999,h._onScreenYStart=0,h._onScreenYEnd=9999,h._spriteSheets={},h.logger=Ot.getInstance(),h.data=[],e&&\"object\"==typeof e){var c=e;e=c.x,i=c.y,n=c.cellWidth,o=c.cellHeight,r=c.rows,s=c.cols}h.x=e,h.y=i,h.cellWidth=n,h.cellHeight=o,h.rows=r,h.cols=s,h.data=new Array(r*s);for(var u=0;u<s;u++)for(var l=0;l<r;l++)void 0,a=new Le(u*n+e,l*o+i,n,o,u+l*s),h.data[u+l*s]=a;return h}return Re(e,t),e.prototype.on=function(e,i){t.prototype.on.call(this,e,i)},e.prototype.registerSpriteSheet=function(t,e){this._spriteSheets[t]=e},e.prototype.collides=function(t){for(var e=t.pos.x+t.getWidth(),i=t.pos.y+t.getHeight(),n=t.getBounds(),o=[],r=n.left;r<=e;r+=Math.min(t.getWidth()/2,this.cellWidth/2))for(var s=n.top;s<=i;s+=Math.min(t.getHeight()/2,this.cellHeight/2)){var a=this.getCellByPoint(r,s);if(a&&a.solid){var h=n.collides(a.getBounds()),c=t.getCenter().sub(a.getCenter());h&&h.dot(c)>0&&o.push(h)}}return 0===o.length?null:o.reduce(function(t,e){var i=t.x,n=t.y;return Math.abs(t.x)<Math.abs(e.x)&&(i=e.x),Math.abs(t.y)<Math.abs(e.y)&&(n=e.y),new k(i,n)})},e.prototype.getCellByIndex=function(t){return this.data[t]},e.prototype.getCell=function(t,e){return t<0||e<0||t>=this.cols||e>=this.rows?null:this.data[t+e*this.cols]},e.prototype.getCellByPoint=function(t,e){t=Math.floor((t-this.x)/this.cellWidth),e=Math.floor((e-this.y)/this.cellHeight);var i=this.getCell(t,e);return t>=0&&e>=0&&t<this.cols&&e<this.rows&&i?i:null},e.prototype.update=function(t,e){this.emit(\"preupdate\",new J(t,e,this));var i=t.screenToWorldCoordinates(new k(0,0)),n=t.screenToWorldCoordinates(new k(t.canvas.clientWidth,t.canvas.clientHeight));this._onScreenXStart=Math.max(Math.floor((i.x-this.x)/this.cellWidth)-2,0),this._onScreenYStart=Math.max(Math.floor((i.y-this.y)/this.cellHeight)-2,0),this._onScreenXEnd=Math.max(Math.floor((n.x-this.x)/this.cellWidth)+2,0),this._onScreenYEnd=Math.max(Math.floor((n.y-this.y)/this.cellHeight)+2,0),this.emit(\"postupdate\",new $(t,e,this))},e.prototype.draw=function(t,e){this.emit(\"predraw\",new Y(t,e,this)),t.save(),t.translate(this.x,this.y);for(var i,n,o,r=this._onScreenXStart,s=Math.min(this._onScreenXEnd,this.cols),a=this._onScreenYStart,h=Math.min(this._onScreenYEnd,this.rows);r<s;r++){for(;a<h;a++)for(n=0,o=(i=this.getCell(r,a).sprites.filter(function(t){return t.spriteId>-1})).length;n<o;n++){var c=this._spriteSheets[i[n].spriteSheetKey];if(c){var u=c.getSprite(i[n].spriteId);u?u.draw(t,r*this.cellWidth,a*this.cellHeight):this.logger.warn(\"Sprite does not exist for id\",i[n].spriteId,\"in sprite sheet\",i[n].spriteSheetKey,u,c)}else this.logger.warn(\"Sprite sheet\",i[n].spriteSheetKey,\"does not exist\",c)}a=this._onScreenYStart}t.restore(),this.emit(\"postdraw\",new K(t,e,this))},e.prototype.debugDraw=function(t){var e=this.cols*this.cellWidth,i=this.rows*this.cellHeight;t.save(),t.strokeStyle=Pt.Red.toString();for(var n=0;n<this.cols+1;n++)t.beginPath(),t.moveTo(this.x+n*this.cellWidth,this.y),t.lineTo(this.x+n*this.cellWidth,this.y+i),t.stroke();for(var o=0;o<this.rows+1;o++)t.beginPath(),t.moveTo(this.x,this.y+o*this.cellHeight),t.lineTo(this.x+e,this.y+o*this.cellHeight),t.stroke();var r=Pt.Red.clone();r.a=.3,this.data.filter(function(t){return t.solid}).forEach(function(e){t.fillStyle=r.toString(),t.fillRect(e.x,e.y,e.width,e.height)}),this._collidingY>-1&&this._collidingX>-1&&(t.fillStyle=Pt.Cyan.toString(),t.fillRect(this.x+this._collidingX*this.cellWidth,this.y+this._collidingY*this.cellHeight,this.cellWidth,this.cellHeight)),t.restore()},e}(xt))),Ie=function(){return function(t,e){this.spriteSheetKey=t,this.spriteId=e}}(),Le=function(t){function e(e,i,n,o,r,s,a){return t.call(this,e,i,n,o,r,s,a)||this}return Re(e,t),e}(Vt(function(){function t(t,e,i,n,o,r,s){if(void 0===r&&(r=!1),void 0===s&&(s=[]),this.solid=!1,this.sprites=[],t&&\"object\"==typeof t){var a=t;t=a.x,e=a.y,i=a.width,n=a.height,o=a.index,r=a.solid,s=a.sprites}this.x=t,this.y=e,this.width=i,this.height=n,this.index=o,this.solid=r,this.sprites=s,this._bounds=new Dt(this.x,this.y,this.x+this.width,this.y+this.height)}return t.prototype.getBounds=function(){return this._bounds},t.prototype.getCenter=function(){return new k(this.x+this.width/2,this.y+this.height/2)},t.prototype.pushSprite=function(t){this.sprites.push(t)},t.prototype.removeSprite=function(t){var e;(e=this.sprites.indexOf(t))>-1&&this.sprites.splice(e,1)},t.prototype.clearSprites=function(){this.sprites.length=0},t}())),He=function(){function t(){}return t.create=function(){return this._INSTANCE||(window.AudioContext||window.webkitAudioContext)&&(this._INSTANCE=new window.AudioContext),this._INSTANCE},t._INSTANCE=null,t}();var ze=function(){function t(){}return t.unlock=function(){var e=new p;if(t._unlocked||!He.create())return e.resolve(!0);var i=He.create();return i.resume().then(function(){var n=i.createBuffer(1,1,22050),o=i.createBufferSource(),r=!1;o.buffer=n,o.connect(i.destination),o.onended=function(){return r=!0},o.noteOn?o.noteOn(0):o.start(0),setTimeout(function(){!function(t){return!!t.playbackState}(o)?(i.currentTime>0||r)&&(t._unlocked=!0):o.playbackState!==o.PLAYING_STATE&&o.playbackState!==o.FINISHED_STATE||(t._unlocked=!0)},0),e.resolve()},function(){e.reject(!1)}),e},t.isUnlocked=function(){return this._unlocked},t._unlocked=!1,t}();function We(t){return t=_({},{message:\"This method will be removed in future versions of Excalibur.\",alternateMethod:null},t),function(e,i,n){if(\"function\"!=typeof n.value&&\"function\"!=typeof n.get&&\"function\"!=typeof n.set)throw new SyntaxError(\"Only functions/getters/setters can be marked as obsolete\");var o=(e.name||\"\")+(e.name?\".\":\"\")+i+\" is marked obsolete: \"+t.message+(t.alternateMethod?\" Use \"+t.alternateMethod+\" instead\":\"\"),r=_({},n);return n.value?(r.value=function(){return Ot.getInstance().warn(o),n.value.apply(this,arguments)},r):(n.get&&(r.get=function(){return Ot.getInstance().warn(o),n.get.apply(this,arguments)}),n.set&&(r.set=function(){return Ot.getInstance().warn(o),n.set.apply(this,arguments)}),r)}}var je,Ue=i(4),Ne=i.n(Ue),qe=i(3),Xe=i.n(qe),Ve=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ge=function(t,e,i,n){var o,r=arguments.length,s=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,i,s):o(e,i))||s);return r>3&&s&&Object.defineProperty(e,i,s),s},Ye=function(t){function e(e){var i=t.call(this)||this;return i._resourceList=[],i._index=0,i._playButtonShown=!1,i._resourceCount=0,i._numLoaded=0,i._progressCounts={},i._totalCounts={},i.logo=Ne.a,i.logoWidth=468,i.logoHeight=118,i.backgroundColor=\"#176BAA\",i.suppressPlayButton=!1,i._playButtonStyles=Xe.a.toString(),i.playButtonText=\"Play game\",i.startButtonFactory=function(){var t=document.createElement(\"button\");return t.id=\"excalibur-play\",t.textContent=i.playButtonText,t.style.display=\"none\",t},i.getData=function(){},i.setData=function(){},i.processData=function(){},i.onprogress=function(t){Ot.getInstance().debug(\"[ex.Loader] Loading \"+(100*t.loaded/t.total).toFixed(0))},i.oncomplete=function(){},i.onerror=function(){},e&&i.addResources(e),i}return Ve(e,t),Object.defineProperty(e.prototype,\"_image\",{get:function(){return this._imageElement||(this._imageElement=new Image,this._imageElement.src=this.logo),this._imageElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"_playButton\",{get:function(){return this._playButtonRootElement||(this._playButtonRootElement=document.createElement(\"div\"),this._playButtonRootElement.style.position=\"absolute\",document.body.appendChild(this._playButtonRootElement)),this._styleBlock||(this._styleBlock=document.createElement(\"style\"),this._styleBlock.textContent=this._playButtonStyles,document.head.appendChild(this._styleBlock)),this._playButtonElement||(this._playButtonElement=this.startButtonFactory(),this._playButtonRootElement.appendChild(this._playButtonElement)),this._playButtonElement},enumerable:!0,configurable:!0}),e.prototype.wireEngine=function(t){this._engine=t},e.prototype.addResource=function(t){var e=this._index++;this._resourceList.push(t),this._progressCounts[e]=0,this._totalCounts[e]=1,this._resourceCount++},e.prototype.addResources=function(t){for(var e=0,i=t.length;e<i;e++)this.addResource(t[e])},e.prototype.isLoaded=function(){return this._numLoaded===this._resourceCount},e.prototype.showPlayButton=function(){if(this.suppressPlayButton)return p.resolve();this._playButtonShown=!0,this._playButton.style.display=\"block\";var t=new p;return this._playButton.addEventListener(\"click\",function(){return t.state()===c.Pending?t.resolve():t}),this._playButton.addEventListener(\"touchend\",function(){return t.state()===c.Pending?t.resolve():t}),this._playButton.addEventListener(\"pointerup\",function(){return t.state()===c.Pending?t.resolve():t}),t},e.prototype.hidePlayButton=function(){this._playButtonShown=!1,this._playButton.style.display=\"none\"},e.prototype.load=function(){var t=this,e=new p,i=this;if(0===this._resourceList.length)return i.showPlayButton().then(function(){ze.unlock().then(function(){i.hidePlayButton(),i.oncomplete.call(i),e.resolve()})}),e;var n=new Array(this._resourceList.length),o=this._resourceList.length;return this._resourceList.forEach(function(r,s){t._engine&&r.wireEngine(t._engine),r.onprogress=function(t){var e=t.total,r=t.loaded;n[s]={loaded:r/e*(100/o),total:100};var a=n.reduce(function(t,e){return{loaded:t.loaded+e.loaded,total:100}},{loaded:0,total:100});i.onprogress.call(i,a)},r.oncomplete=r.onerror=function(){i._numLoaded++,i._numLoaded===i._resourceCount&&setTimeout(function(){i.showPlayButton().then(function(){ze.unlock().then(function(){i.hidePlayButton(),i.oncomplete.call(i),e.resolve()})})},200)}}),function t(e,i){e[i]&&e[i].load().then(function(){t(e,i+1)})}(this._resourceList,0),e},e.prototype.draw=function(t){var e=this._engine.canvasHeight/window.devicePixelRatio,i=this._engine.canvasWidth/window.devicePixelRatio;if(this._playButtonRootElement){var n=t.canvas.offsetLeft,o=t.canvas.offsetTop,r=this._playButton.clientWidth,s=this._playButton.clientHeight;this._playButtonRootElement.style.left=n+i/2-r/2+\"px\",this._playButtonRootElement.style.top=o+e/2-s/2+100+\"px\"}t.fillStyle=this.backgroundColor,t.fillRect(0,0,i,e);var a=e/2,h=Math.min(this.logoWidth,.75*i),c=i/2-h/2,u=Math.floor(h*(this.logoHeight/this.logoWidth)),l=this._engine.getAntialiasing();if(this._engine.setAntialiasing(!0),t.drawImage(this._image,0,0,this.logoWidth,this.logoHeight,c,a-u-20,h,u),this.suppressPlayButton||!this._playButtonShown){t.lineWidth=2,be(t,c,a,h,20,10);var p=h*(this._numLoaded/this._resourceCount)-10;be(t,c+5,a+5,p>0?p:0,10,5,null,Pt.White),this._engine.setAntialiasing(l)}else this._engine.setAntialiasing(l)},e.prototype.update=function(t,e){},e}(xt),Ke=function(t){function e(e,i){var n=t.call(this,i)||this;return n._handleOnTrigger=function(){return n._waitPromise.state()===c.Pending&&(ze.unlock(),n._waitPromise.resolve(n._loadedValue),n._playTrigger.style.display=\"none\",!1)},n._playTrigger=document.getElementById(e),n._playTrigger.addEventListener(\"click\",n._handleOnTrigger),n}return Ve(e,t),e.prototype.load=function(){var e=this;return this._waitPromise=new p,t.prototype.load.call(this).then(function(t){e._loadedValue=t,e._playTrigger.style.display=\"block\"},function(t){e._waitPromise.reject(t)}),this._waitPromise},Ge([We({message:\"Deprecated in v0.20.0\",alternateMethod:\"Use ex.Loader instead\"})],e.prototype,\"load\",null),e}(Ye),Qe={webgl:\"WebGL\",webaudio:\"WebAudio\",gamepadapi:\"Gamepad API\"},Ze=function(){function t(){this._features=null,this.failedTests=[],this._criticalTests={canvasSupport:function(){var t=document.createElement(\"canvas\");return!(!t.getContext||!t.getContext(\"2d\"))},arrayBufferSupport:function(){var t=new XMLHttpRequest;t.open(\"GET\",\"/\");try{t.responseType=\"arraybuffer\"}catch(t){return!1}return\"arraybuffer\"===t.responseType},dataUrlSupport:function(){return 0===document.createElement(\"canvas\").toDataURL(\"image/png\").indexOf(\"data:image/png\")},objectUrlSupport:function(){return\"URL\"in window&&\"revokeObjectURL\"in URL&&\"createObjectURL\"in URL},rgbaSupport:function(){var t=document.createElement(\"a\").style;return t.cssText=\"background-color:rgba(150,255,150,.5)\",(\"\"+t.backgroundColor).indexOf(\"rgba\")>-1}},this._warningTest={webAudioSupport:function(){return!!(window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext||window.oAudioContext)},webglSupport:function(){var t=document.createElement(\"canvas\");return!(!t.getContext||!t.getContext(\"webgl\"))}},this._features=this._loadBrowserFeatures()}return t.prototype.getBrowserFeatures=function(){return null===this._features&&(this._features=this._loadBrowserFeatures()),this._features},t.prototype.logBrowserFeatures=function(){for(var t=\"%cSUPPORTED BROWSER FEATURES\\n==========================%c\\n\",e=[\"font-weight: bold; color: navy\",\"font-weight: normal; color: inherit\"],i=this.getBrowserFeatures(),n=0,o=Object.keys(Qe);n<o.length;n++){var r=o[n];i[r]?(t+=\"(%c%c)\",e.push(\"font-weight: bold; color: green\"),e.push(\"font-weight: normal; color: inherit\")):(t+=\"(%c%c)\",e.push(\"font-weight: bold; color: red\"),e.push(\"font-weight: normal; color: inherit\")),t+=\" \"+Qe[r]+\"\\n\"}e.unshift(t),console.log.apply(console,e)},t.prototype._loadBrowserFeatures=function(){var t=this;return{canvas:t._criticalTests.canvasSupport(),arraybuffer:t._criticalTests.arrayBufferSupport(),dataurl:t._criticalTests.dataUrlSupport(),objecturl:t._criticalTests.objectUrlSupport(),rgba:t._criticalTests.rgbaSupport(),webaudio:t._warningTest.webAudioSupport(),webgl:t._warningTest.webglSupport(),gamepadapi:!!navigator.getGamepads}},t.prototype.test=function(){var t=!1;for(var e in this._criticalTests)this._criticalTests[e].call(this)||(this.failedTests.push(e),Ot.getInstance().error(\"Critical browser feature missing, Excalibur requires:\",e),t=!0);if(t)return!1;for(var i in this._warningTest)this._warningTest[i]()||Ot.getInstance().warn(\"Warning browser feature missing, Excalibur will have reduced performance:\",i);return!0},t}(),Je=function(){function t(t){this.parent=t,this.parent=t||null,this.body=null,this.bounds=new Dt,this.left=null,this.right=null,this.height=0}return t.prototype.isLeaf=function(){return!this.left&&!this.right},t}(),$e=function(){function t(t){void 0===t&&(t=new Dt(-Number.MAX_VALUE,-Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)),this.worldBounds=t,this.root=null,this.nodes={}}return t.prototype._insert=function(t){if(null===this.root)return this.root=t,void(this.root.parent=null);for(var e=t.bounds,i=this.root;!i.isLeaf();){var n,o=i.left,r=i.right,s=i.bounds.getPerimeter(),a=i.bounds.combine(e).getPerimeter(),h=2*a,c=2*(a-s),u=0,l=e.combine(o.bounds);o.isLeaf()?u=l.getPerimeter()+c:(n=o.bounds.getPerimeter(),u=l.getPerimeter()-n+c);var p=0,d=e.combine(r.bounds);if(r.isLeaf()?p=d.getPerimeter()+c:(n=r.bounds.getPerimeter(),p=d.getPerimeter()-n+c),h<u&&h<p)break;i=u<p?o:r}var f=i.parent,_=new Je(f);_.bounds=e.combine(i.bounds),_.height=i.height+1,null!==f?(f.left===i?f.left=_:f.right=_,_.left=i,_.right=t,i.parent=_,t.parent=_):(_.left=i,_.right=t,i.parent=_,t.parent=_,this.root=_);for(var g=t.parent;g;){if(!(g=this._balance(g)).left)throw new Error(\"Parent of current leaf cannot have a null left child\"+g);if(!g.right)throw new Error(\"Parent of current leaf cannot have a null right child\"+g);g.height=1+Math.max(g.left.height,g.right.height),g.bounds=g.left.bounds.combine(g.right.bounds),g=g.parent}},t.prototype._remove=function(t){if(t!==this.root){var e,i=t.parent,n=i.parent;if(e=i.left===t?i.right:i.left,n){n.left===i?n.left=e:n.right=e,e.parent=n;for(var o=n;o;)(o=this._balance(o)).bounds=o.left.bounds.combine(o.right.bounds),o.height=1+Math.max(o.left.height,o.right.height),o=o.parent}else this.root=e,e.parent=null}else this.root=null},t.prototype.trackBody=function(t){var e=new Je;e.body=t,e.bounds=t.getBounds(),e.bounds.left-=2,e.bounds.top-=2,e.bounds.right+=2,e.bounds.bottom+=2,this.nodes[t.actor.id]=e,this._insert(e)},t.prototype.updateBody=function(t){var e=this.nodes[t.actor.id];if(!e)return!1;var i=t.getBounds();if(!this.worldBounds.contains(i))return Ot.getInstance().warn(\"Actor with id \"+t.actor.id+\" is outside the world bounds and will no longer be tracked for physics\"),this.untrackBody(t),!1;if(e.bounds.contains(i))return!1;this._remove(e),i.left-=W.boundsPadding,i.top-=W.boundsPadding,i.right+=W.boundsPadding,i.bottom+=W.boundsPadding;var n=t.vel.x*W.dynamicTreeVelocityMultiplyer,o=t.vel.y*W.dynamicTreeVelocityMultiplyer;return n<0?i.left+=n:i.right+=n,o<0?i.top+=o:i.bottom+=o,e.bounds=i,this._insert(e),!0},t.prototype.untrackBody=function(t){var e=this.nodes[t.actor.id];e&&(this._remove(e),this.nodes[t.actor.id]=null,delete this.nodes[t.actor.id])},t.prototype._balance=function(t){if(null===t)throw new Error(\"Cannot balance at null node\");if(t.isLeaf()||t.height<2)return t;var e=t.left,i=t.right,n=t,o=e,r=i,s=e.left,a=e.right,h=i.left,c=i.right,u=r.height-o.height;if(u>1)return r.left=n,r.parent=n.parent,n.parent=r,r.parent?r.parent.left===n?r.parent.left=r:r.parent.right=r:this.root=r,h.height>c.height?(r.right=h,n.right=c,c.parent=n,n.bounds=o.bounds.combine(c.bounds),r.bounds=n.bounds.combine(h.bounds),n.height=1+Math.max(o.height,c.height),r.height=1+Math.max(n.height,h.height)):(r.right=c,n.right=h,h.parent=n,n.bounds=o.bounds.combine(h.bounds),r.bounds=n.bounds.combine(c.bounds),n.height=1+Math.max(o.height,h.height),r.height=1+Math.max(n.height,c.height)),r;if(u<-1){if(o.left=n,o.parent=n.parent,n.parent=o,o.parent)if(o.parent.left===n)o.parent.left=o;else{if(o.parent.right!==n)throw\"Error rotating Dynamic Tree\";o.parent.right=o}else this.root=o;return s.height>a.height?(o.right=s,n.left=a,a.parent=n,n.bounds=r.bounds.combine(a.bounds),o.bounds=n.bounds.combine(s.bounds),n.height=1+Math.max(r.height,a.height),o.height=1+Math.max(n.height,s.height)):(o.right=a,n.left=s,s.parent=n,n.bounds=r.bounds.combine(s.bounds),o.bounds=n.bounds.combine(a.bounds),n.height=1+Math.max(r.height,s.height),o.height=1+Math.max(n.height,a.height)),o}return t},t.prototype.getHeight=function(){return null===this.root?0:this.root.height},t.prototype.query=function(t,e){var i=t.getBounds(),n=function(o){if(o&&o.bounds.collides(i)){if(!o.isLeaf()||o.body===t)return n(o.left)||n(o.right);if(e.call(t,o.body))return!0}return!1};n(this.root)},t.prototype.rayCastQuery=function(t,e,i){void 0===e&&(e=1/0);var n=function(o){if(o&&o.bounds.rayCast(t,e)){if(!o.isLeaf())return n(o.left)||n(o.right);if(i.call(t,o.body))return!0}return!1};n(this.root)},t.prototype.getNodes=function(){var t=function(e){return e?[e].concat(t(e.left),t(e.right)):[]};return t(this.root)},t.prototype.debugDraw=function(t){var e=function(i){i&&(i.isLeaf()?(t.lineWidth=1,t.strokeStyle=\"green\"):(t.lineWidth=1,t.strokeStyle=\"white\"),i.bounds.debugDraw(t),i.left&&e(i.left),i.right&&e(i.right))};e(this.root)},t}(),ti=function(){function t(){this._dynamicCollisionTree=new $e,this._collisionHash={},this._collisionPairCache=[],this._lastFramePairs=[],this._lastFramePairsHash={}}return t.prototype.track=function(t){t?this._dynamicCollisionTree.trackBody(t):Ot.getInstance().warn(\"Cannot track null physics body\")},t.prototype.untrack=function(t){t?this._dynamicCollisionTree.untrackBody(t):Ot.getInstance().warn(\"Cannot untrack a null physics body\")},t.prototype._shouldGenerateCollisionPair=function(t,e){var i=Pe.calculatePairHash(t.body,e.body);return!this._collisionHash[i]&&Pe.canCollide(t,e)},t.prototype.broadphase=function(t,e,i){var n=this,o=e/1e3,r=t.filter(function(t){return!t.isKilled()&&t.collisionType!==xe.PreventCollision});this._collisionPairCache=[],this._collisionHash={};for(var s=0,a=r.length;s<a;s++)u=r[s],this._dynamicCollisionTree.query(u.body,function(t){if(n._shouldGenerateCollisionPair(u,t.actor)){var e=new Pe(u.body,t);n._collisionHash[e.id]=!0,n._collisionPairCache.push(e)}return!1});if(i&&(i.physics.pairs=this._collisionPairCache.length),W.checkForFastBodies)for(var h=0,c=r;h<c.length;h++){var u;if((u=c[h]).collisionType===xe.Active){var l=u.vel.magnitude()*o+.5*u.acc.magnitude()*o*o,p=Math.min(u.body.getBounds().getHeight(),u.body.getBounds().getWidth());if(W.disableMinimumSpeedForFastBody||l>p/2){i&&i.physics.fastBodies++;var d,f=u.pos.sub(u.oldPos),_=u.body.collisionArea.getCenter(),g=u.body.collisionArea.getFurthestPoint(u.vel),y=g.sub(f),v=new R(y,u.vel);v.pos=v.pos.add(v.dir.scale(-2*W.surfaceEpsilon));var m=new k(1/0,1/0);if(this._dynamicCollisionTree.rayCastQuery(v,l+2*W.surfaceEpsilon,function(t){if(u.body!==t&&t.collisionArea){var e=t.collisionArea.rayCast(v,l+10*W.surfaceEpsilon);if(e){var i=e.sub(y);i.magnitude()<m.magnitude()&&(m=i,d=t)}}return!1}),d&&k.isValid(m)){var b=new Pe(u.body,d);this._collisionHash[b.id]||(this._collisionHash[b.id]=!0,this._collisionPairCache.push(b));var w=_.sub(g);u.pos=y.add(w).add(m).add(v.dir.scale(2*W.surfaceEpsilon)),u.body.collisionArea.recalc(),i&&i.physics.fastBodyCollisions++}}}}return this._collisionPairCache},t.prototype.narrowphase=function(t,e){for(var i=0;i<t.length;i++)t[i].collide(),e&&t[i].collision&&(e.physics.collisions++,e.physics.collidersHash[t[i].id]=t[i]);return t.filter(function(t){return t.collision})},t.prototype.resolve=function(t,e,i){for(var n=0,o=t;n<o.length;n++){var r=o[n];r.resolve(i),r.collision&&(r.bodyA.applyMtv(),r.bodyB.applyMtv(),r.bodyA.actor.integrate(e*W.collisionShift),r.bodyB.actor.integrate(e*W.collisionShift))}return t.filter(function(t){return t.canCollide})},t.prototype.runCollisionStartEnd=function(t){for(var e={},i=0,n=t;i<n.length;i++){if(e[(h=n[i]).id]=h,!this._lastFramePairsHash[h.id]){var o=h.bodyA.actor,r=h.bodyB.actor;o.emit(\"collisionstart\",new pt(o,r,h)),r.emit(\"collisionstart\",new pt(r,o,h))}}for(var s=0,a=this._lastFramePairs;s<a.length;s++){var h;if(!e[(h=a[s]).id]){o=h.bodyA.actor,r=h.bodyB.actor;o.emit(\"collisionend\",new dt(o,r)),r.emit(\"collisionend\",new dt(r,o))}}this._lastFramePairs=t,this._lastFramePairsHash=e},t.prototype.update=function(t){for(var e=0,i=0,n=t.length;i<n;i++)this._dynamicCollisionTree.updateBody(t[i].body)&&e++;return e},t.prototype.debugDraw=function(t){if(W.broadphaseDebug&&this._dynamicCollisionTree.debugDraw(t),W.showContacts||W.showCollisionNormals)for(var e=0,i=this._collisionPairCache;e<i.length;e++){i[e].debugDraw(t)}},t}(),ei=function(){function t(t){this._getComparable=t}return t.prototype.find=function(t){return this._find(this._root,t)},t.prototype._find=function(t,e){return null!=t&&(this._getComparable.call(e)===t.getKey()?t.getData().indexOf(e)>-1:this._getComparable.call(e)<t.getKey()?this._find(t.getLeft(),e):this._find(t.getRight(),e))},t.prototype.get=function(t){return this._get(this._root,t)},t.prototype._get=function(t,e){return null==t?[]:e===t.getKey()?t.getData():e<t.getKey()?this._get(t.getLeft(),e):this._get(t.getRight(),e)},t.prototype.add=function(t){return null==this._root?(this._root=new ii(this._getComparable.call(t),[t],null,null),!0):this._insert(this._root,t)},t.prototype._insert=function(t,e){return null!=t&&(this._getComparable.call(e)===t.getKey()?!(t.getData().indexOf(e)>-1)&&(t.getData().push(e),!0):this._getComparable.call(e)<t.getKey()?null==t.getLeft()?(t.setLeft(new ii(this._getComparable.call(e),[e],null,null)),!0):this._insert(t.getLeft(),e):null==t.getRight()?(t.setRight(new ii(this._getComparable.call(e),[e],null,null)),!0):this._insert(t.getRight(),e))},t.prototype.removeByComparable=function(t){this._root=this._remove(this._root,t)},t.prototype._remove=function(t,e){if(null==t)return null;if(this._getComparable.call(e)!==t.getKey())return this._getComparable.call(e)<t.getKey()?(t.setLeft(this._remove(t.getLeft(),e)),t):(t.setRight(this._remove(t.getRight(),e)),t);var i=t.getData().indexOf(e);if(i>-1){if(t.getData().splice(i,1),0===t.getData().length){if(null==t.getLeft()&&null==t.getRight())return null;if(null==t.getLeft())return t.getRight();if(null==t.getRight())return t.getLeft();var n=this._findMinNode(t.getRight());return t.setKey(n.getKey()),t.setData(n.getData()),t.setRight(this._cleanup(t.getRight(),n)),t}return t}return null},t.prototype._cleanup=function(t,e){var i=e.getKey();if(null==t)return null;if(i===t.getKey()){if(null==t.getLeft()&&null==t.getRight())return null;if(null==t.getLeft())return t.getRight();if(null==t.getRight())return t.getLeft();var n=this._findMinNode(t.getRight());return t.setKey(n.getKey()),t.setData(n.getData()),t.setRight(this._cleanup(t.getRight(),n)),t}return this._getComparable.call(e)<t.getKey()?(t.setLeft(this._cleanup(t.getLeft(),e)),t):(t.setRight(this._cleanup(t.getRight(),e)),t)},t.prototype._findMinNode=function(t){for(var e=t;null!=e.getLeft();)e=e.getLeft();return e},t.prototype.list=function(){var t=new Array;return this._list(this._root,t),t},t.prototype._list=function(t,e){null!=t&&(this._list(t.getLeft(),e),t.getData().forEach(function(t){e.push(t)}),this._list(t.getRight(),e))},t}(),ii=function(){function t(t,e,i,n){this._key=t,this._data=e,this._left=i,this._right=n}return t.prototype.getKey=function(){return this._key},t.prototype.setKey=function(t){this._key=t},t.prototype.getData=function(){return this._data},t.prototype.setData=function(t){this._data=t},t.prototype.getLeft=function(){return this._left},t.prototype.setLeft=function(t){this._left=t},t.prototype.getRight=function(){return this._right},t.prototype.setRight=function(t){this._right=t},t}(),ni=function(){function t(t){this._key=0,this._key=t}return t.prototype.getTheKey=function(){return this._key},t.prototype.setKey=function(t){this._key=t},t}(),oi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ri=function(t){function e(e,i){var n=t.call(this)||this;(n.name=e,n.scene=i,n._logger=Ot.getInstance(),n._members=[],n.actions=new ge,null==i)?n._logger.error(\"Invalid constructor arguments passed to Group: \",e,\", scene must not be null!\"):(i.groups[e]&&n._logger.warn(\"Group with name\",e,\"already exists. This new group will replace it.\"),i.groups[e]=n);return n}return oi(e,t),e.prototype.add=function(t){t instanceof De&&(t=[].concat(t));for(var e=0,i=t.length;e<i;e++)-1===this.getMembers().indexOf(t[e])&&(this._members.push(t[e]),this.scene.add(t[e]),this.actions.addActorToContext(t[e]),this.eventDispatcher.wire(t[e].eventDispatcher))},e.prototype.remove=function(t){var e=this._members.indexOf(t);e>-1&&(this._members.splice(e,1),this.actions.removeActorFromContext(t),this.eventDispatcher.unwire(t.eventDispatcher))},e.prototype.move=function(t){var e=0,i=this.getMembers(),n=i.length;if(1===arguments.length&&t instanceof k)for(;e<n;e++)i[e].pos.x+=t.x,i[e].pos.y+=t.y;else if(\"number\"==typeof arguments[0]&&\"number\"==typeof arguments[1])for(var o=arguments[0],r=arguments[1];e<n;e++)i[e].pos.x+=o,i[e].pos.y+=r;else this._logger.error(\"Invalid arguments passed to group move\",this.name,\"args:\",arguments)},e.prototype.rotate=function(t){if(\"number\"==typeof t)for(var e=0,i=this.getMembers();e<i.length;e++){i[e].rotation+=t}else this._logger.error(\"Invalid arguments passed to group rotate\",this.name,\"args:\",arguments)},e.prototype.on=function(t,e){this.eventDispatcher.on(t,e)},e.prototype.off=function(t,e){this.eventDispatcher.off(t,e)},e.prototype.emit=function(t,e){this.eventDispatcher.emit(t,e)},e.prototype.contains=function(t){return this.getMembers().indexOf(t)>-1},e.prototype.getMembers=function(){return this._members},e.prototype.getRandomMember=function(){return this._members[Math.floor(Math.random()*this._members.length)]},e.prototype.getBounds=function(){return this.getMembers().map(function(t){return t.getBounds()}).reduce(function(t,e){return t.combine(e)})},e}(xt),si=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),ai=function(){function t(t){this.camera=t}return t.prototype.lockToActor=function(t){this.camera.addStrategy(new pi(t))},t.prototype.lockToActorAxis=function(t,e){this.camera.addStrategy(new di(t,e))},t.prototype.elasticToActor=function(t,e,i){this.camera.addStrategy(new fi(t,e,i))},t.prototype.radiusAroundActor=function(t,e){this.camera.addStrategy(new _i(t,e))},t}();!function(t){t[t.X=0]=\"X\",t[t.Y=1]=\"Y\"}(je||(je={}));var hi,ci,ui,li,pi=function(){return function(t){this.target=t,this.action=function(t,e,i,n){return t.getCenter()}}}(),di=function(){return function(t,e){var i=this;this.target=t,this.axis=e,this.action=function(t,e,n,o){var r=t.getCenter(),s=e.getFocus();return i.axis===je.X?new k(r.x,s.y):new k(s.x,r.y)}}}(),fi=function(){return function(t,e,i){var n=this;this.target=t,this.cameraElasticity=e,this.cameraFriction=i,this.action=function(t,e,i,o){var r=t.getCenter(),s=e.getFocus(),a=new k(e.dx,e.dy),h=r.sub(s).scale(n.cameraElasticity),c=(a=a.add(h)).scale(-1).scale(n.cameraFriction);return a=a.add(c),s=s.add(a)}}}(),_i=function(){return function(t,e){var i=this;this.target=t,this.radius=e,this.action=function(t,e,n,o){var r=t.getCenter(),s=e.getFocus(),a=r.sub(s),h=a.magnitude();if(h>=i.radius){var c=h-i.radius;return s.add(a.normalize().scale(c))}return s}}}(),gi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._cameraStrategies=[],e.strategy=new ai(e),e.z=1,e.dx=0,e.dy=0,e.dz=0,e.ax=0,e.ay=0,e.az=0,e.rotation=0,e.rx=0,e._x=0,e._y=0,e._cameraMoving=!1,e._currentLerpTime=0,e._lerpDuration=1e3,e._lerpStart=null,e._lerpEnd=null,e._isShaking=!1,e._shakeMagnitudeX=0,e._shakeMagnitudeY=0,e._shakeDuration=0,e._elapsedShakeTime=0,e._xShake=0,e._yShake=0,e._isZooming=!1,e._zoomStart=1,e._zoomEnd=1,e._currentZoomTime=0,e._zoomDuration=0,e._zoomEasing=_e.EaseInOutCubic,e._easing=_e.EaseInOutCubic,e._isInitialized=!1,e}return si(e,t),Object.defineProperty(e.prototype,\"x\",{get:function(){return this._x},set:function(t){this._follow||this._cameraMoving||(this._x=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"y\",{get:function(){return this._y},set:function(t){this._follow||this._cameraMoving||(this._y=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"pos\",{get:function(){return new k(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"vel\",{get:function(){return new k(this.dx,this.dy)},set:function(t){this.dx=t.x,this.dy=t.y},enumerable:!0,configurable:!0}),e.prototype.getFocus=function(){return new k(this.x,this.y)},e.prototype.move=function(t,e,i){if(void 0===i&&(i=_e.EaseInOutCubic),\"function\"!=typeof i)throw\"Please specify an EasingFunction\";return this._follow?(new p).reject(t):(this._lerpPromise&&this._lerpPromise.state()===c.Pending&&this._lerpPromise.resolve(t),this._lerpPromise=new p,this._lerpStart=this.getFocus().clone(),this._lerpDuration=e,this._lerpEnd=t,this._currentLerpTime=0,this._cameraMoving=!0,this._easing=i,this._lerpPromise)},e.prototype.shake=function(t,e,i){this._isShaking=!0,this._shakeMagnitudeX=t,this._shakeMagnitudeY=e,this._shakeDuration=i},e.prototype.zoom=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=_e.EaseInOutCubic),this._zoomPromise=new p,e?(this._isZooming=!0,this._zoomEasing=i,this._currentZoomTime=0,this._zoomDuration=e,this._zoomStart=this.z,this._zoomEnd=t):(this._isZooming=!1,this.z=t,this._zoomPromise.resolve(!0)),this._zoomPromise},e.prototype.getZoom=function(){return this.z},e.prototype.addStrategy=function(t){this._cameraStrategies.push(t)},e.prototype.removeStrategy=function(t){A(t,this._cameraStrategies)},e.prototype.clearAllStrategies=function(){this._cameraStrategies.length=0},e.prototype._preupdate=function(t,e){this.emit(\"preupdate\",new J(t,e,this)),this.onPreUpdate(t,e)},e.prototype.onPreUpdate=function(t,e){},e.prototype._postupdate=function(t,e){this.emit(\"postupdate\",new $(t,e,this)),this.onPostUpdate(t,e)},e.prototype.onPostUpdate=function(t,e){},Object.defineProperty(e.prototype,\"isInitialized\",{get:function(){return this._isInitialized},enumerable:!0,configurable:!0}),e.prototype._initialize=function(e){this.isInitialized||(this.onInitialize(e),t.prototype.emit.call(this,\"initialize\",new ft(e,this)),this._isInitialized=!0)},e.prototype.onInitialize=function(t){},e.prototype.on=function(e,i){t.prototype.on.call(this,e,i)},e.prototype.off=function(e,i){t.prototype.off.call(this,e,i)},e.prototype.once=function(e,i){t.prototype.once.call(this,e,i)},e.prototype.update=function(t,e){if(this._initialize(t),this._preupdate(t,e),this._x+=this.dx*e/1e3,this._y+=this.dy*e/1e3,this.z+=this.dz*e/1e3,this.dx+=this.ax*e/1e3,this.dy+=this.ay*e/1e3,this.dz+=this.az*e/1e3,this.rotation+=this.rx*e/1e3,this._isZooming)if(this._currentZoomTime<this._zoomDuration){var i=(0,this._zoomEasing)(this._currentZoomTime,this._zoomStart,this._zoomEnd,this._zoomDuration);this.z=i,this._currentZoomTime+=e}else this._isZooming=!1,this.z=this._zoomEnd,this._currentZoomTime=0,this._zoomPromise.resolve(!0);if(this._cameraMoving)if(this._currentLerpTime<this._lerpDuration){var n=_e.CreateVectorEasingFunction(this._easing)(this._currentLerpTime,this._lerpStart,this._lerpEnd,this._lerpDuration);this._x=n.x,this._y=n.y,this._currentLerpTime+=e}else{this._x=this._lerpEnd.x,this._y=this._lerpEnd.y;var o=this._lerpEnd.clone();this._lerpStart=null,this._lerpEnd=null,this._currentLerpTime=0,this._cameraMoving=!1,this._lerpPromise.resolve(o)}this._isDoneShaking()?(this._isShaking=!1,this._elapsedShakeTime=0,this._shakeMagnitudeX=0,this._shakeMagnitudeY=0,this._shakeDuration=0,this._xShake=0,this._yShake=0):(this._elapsedShakeTime+=e,this._xShake=1+(Math.random()*this._shakeMagnitudeX|0),this._yShake=1+(Math.random()*this._shakeMagnitudeY|0));for(var r=0,s=this._cameraStrategies;r<s.length;r++){var a=s[r];this.pos=a.action.call(a,a.target,this,t,e)}this._postupdate(t,e)},e.prototype.draw=function(t){var e=this.getFocus(),i=t.canvas.width,n=t.canvas.height,o=window.devicePixelRatio,r=this.getZoom(),s=i/r/o,a=n/r/o;t.scale(r,r),t.translate(-e.x+s/2+this._xShake,-e.y+a/2+this._yShake)},e.prototype.debugDraw=function(t){var e=this.getFocus();t.fillStyle=\"red\",t.strokeStyle=\"white\",t.lineWidth=3,t.beginPath(),t.arc(e.x,e.y,15,0,2*Math.PI),t.closePath(),t.stroke(),t.beginPath(),t.arc(e.x,e.y,5,0,2*Math.PI),t.closePath(),t.stroke()},e.prototype._isDoneShaking=function(){return!this._isShaking||this._elapsedShakeTime>=this._shakeDuration},e}(xt),yi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){t[t.Em=0]=\"Em\",t[t.Rem=1]=\"Rem\",t[t.Px=2]=\"Px\",t[t.Pt=3]=\"Pt\",t[t.Percent=4]=\"Percent\"}(hi||(hi={})),function(t){t[t.Left=0]=\"Left\",t[t.Right=1]=\"Right\",t[t.Center=2]=\"Center\",t[t.Start=3]=\"Start\",t[t.End=4]=\"End\"}(ci||(ci={})),function(t){t[t.Top=0]=\"Top\",t[t.Hanging=1]=\"Hanging\",t[t.Middle=2]=\"Middle\",t[t.Alphabetic=3]=\"Alphabetic\",t[t.Ideographic=4]=\"Ideographic\",t[t.Bottom=5]=\"Bottom\"}(ui||(ui={})),function(t){t[t.Normal=0]=\"Normal\",t[t.Italic=1]=\"Italic\",t[t.Oblique=2]=\"Oblique\"}(li||(li={}));var vi=function(t){function e(e,i,n,o,r){return t.call(this,e,i,n,o,r)||this}return yi(e,t),e}(Vt(function(t){function e(e,i,n,o,r){var s=t.call(this,e&&\"object\"==typeof e?{x:e.x,y:e.y}:{x:i,y:n})||this;s.bold=!1,s.fontSize=10,s.fontStyle=li.Normal,s.fontUnit=hi.Px,s.textAlign=ci.Left,s.baseAlign=ui.Bottom,s.letterSpacing=0,s.caseInsensitive=!0;var a=\"\";return e&&\"object\"==typeof e?(o=e.fontFamily,r=e.spriteFont,a=e.text):a=e,s.text=a||\"\",s.color=Pt.Black.clone(),s.spriteFont=r,s.collisionType=xe.PreventCollision,s.fontFamily=o||\"sans-serif\",s._textShadowOn=!1,s._shadowOffsetX=0,s._shadowOffsetY=0,s}return yi(e,t),e.prototype.getTextWidth=function(t){var e=t.font;t.font=this._fontString;var i=t.measureText(this.text).width;return t.font=e,i},e.prototype._lookupFontUnit=function(t){switch(t){case hi.Em:return\"em\";case hi.Rem:return\"rem\";case hi.Pt:return\"pt\";case hi.Px:return\"px\";case hi.Percent:return\"%\";default:return\"px\"}},e.prototype._lookupTextAlign=function(t){switch(t){case ci.Left:return\"left\";case ci.Right:return\"right\";case ci.Center:return\"center\";case ci.End:return\"end\";case ci.Start:default:return\"start\"}},e.prototype._lookupBaseAlign=function(t){switch(t){case ui.Alphabetic:return\"alphabetic\";case ui.Bottom:return\"bottom\";case ui.Hanging:return\"hangin\";case ui.Ideographic:return\"ideographic\";case ui.Middle:return\"middle\";case ui.Top:return\"top\";default:return\"alphabetic\"}},e.prototype._lookupFontStyle=function(t){var e=this.bold?\" bold\":\"\";switch(t){case li.Italic:return\"italic\"+e;case li.Normal:return\"normal\"+e;case li.Oblique:return\"oblique\"+e;default:return\"normal\"+e}},e.prototype.setTextShadow=function(t,e,i){this.spriteFont.setTextShadow(t,e,i)},e.prototype.useTextShadow=function(t){this.spriteFont.useTextShadow(t)},e.prototype.clearTextShadow=function(){this._textShadowOn=!1,this._shadowOffsetX=0,this._shadowOffsetY=0},e.prototype.update=function(e,i){t.prototype.update.call(this,e,i)},e.prototype.draw=function(e,i){e.save(),e.translate(this.pos.x,this.pos.y),e.scale(this.scale.x,this.scale.y),e.rotate(this.rotation),this._textShadowOn&&(e.save(),e.translate(this._shadowOffsetX,this._shadowOffsetY),this._fontDraw(e),e.restore()),this._fontDraw(e),t.prototype.draw.call(this,e,i),e.restore()},e.prototype._fontDraw=function(t){if(this.spriteFont)this.spriteFont.draw(t,this.text,0,0,{color:this.color.clone(),baseAlign:this.baseAlign,textAlign:this.textAlign,fontSize:this.fontSize,letterSpacing:this.letterSpacing,opacity:this.opacity});else{var e=t.textAlign,i=t.textBaseline;t.textAlign=this._lookupTextAlign(this.textAlign),t.textBaseline=this._lookupBaseAlign(this.baseAlign),this.color&&(this.color.a=this.opacity),t.fillStyle=this.color.toString(),t.font=this._fontString,this.maxWidth?t.fillText(this.text,0,0,this.maxWidth):t.fillText(this.text,0,0),t.textAlign=e,t.textBaseline=i}},Object.defineProperty(e.prototype,\"_fontString\",{get:function(){return this._lookupFontStyle(this.fontStyle)+\" \"+this.fontSize+this._lookupFontUnit(this.fontUnit)+\" \"+this.fontFamily},enumerable:!0,configurable:!0}),e.prototype.debugDraw=function(e){t.prototype.debugDraw.call(this,e)},e}(De))),mi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bi={pos:k.Zero.clone(),width:10,height:10,visible:!1,action:function(){},filter:function(){return!0},repeat:-1},wi=function(t){function e(e){var i=t.call(this,e.pos.x,e.pos.y,e.width,e.height)||this;return i.action=function(){},i.filter=function(){return!0},i.repeat=-1,e=_({},bi,e),i.filter=e.filter||i.filter,i.repeat=e.repeat||i.repeat,i.action=e.action||i.action,e.target&&(i.target=e.target),i.visible=e.visible,i.collisionType=xe.Passive,i.eventDispatcher=new wt(i),i.actionQueue=new fe(i),i.on(\"collisionstart\",function(t){i.filter(t.other)&&(i.emit(\"enter\",new mt(i,t.other)),i._dispatchAction(),0===i.repeat&&i.kill())}),i.on(\"collisionend\",function(t){i.filter(t.other)&&i.emit(\"exit\",new bt(i,t.other))}),i}return mi(e,t),Object.defineProperty(e.prototype,\"target\",{get:function(){return this._target},set:function(t){this._target=t,this.filter=function(e){return e===t}},enumerable:!0,configurable:!0}),e.prototype._initialize=function(e){t.prototype._initialize.call(this,e)},e.prototype._dispatchAction=function(){this.action.call(this),this.repeat--},e.prototype.debugDraw=function(e){t.prototype.debugDraw.call(this,e),e.save(),e.translate(this.pos.x,this.pos.y);var i=this.getBounds(),n=this.getWorldPos();i.left=i.left-n.x,i.right=i.right-n.x,i.top=i.top-n.y,i.bottom=i.bottom-n.y,e.fillStyle=Pt.Violet.toString(),e.strokeStyle=Pt.Violet.toString(),e.fillText(\"Trigger\",10,10),i.debugDraw(e),e.restore()},e}(De);function xi(t){return t instanceof Be}var Pi,Si=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Ai=function(t){function e(e){var i=t.call(this)||this;return i.actors=[],i.triggers=[],i.tileMaps=[],i.groups={},i.uiActors=[],i._isInitialized=!1,i._sortedDrawingTree=new ei(De.prototype.getZIndex),i._broadphase=new ti,i._killQueue=[],i._triggerKillQueue=[],i._timers=[],i._cancelQueue=[],i._logger=Ot.getInstance(),i.camera=new gi,e&&(i.camera.x=e.halfDrawWidth,i.camera.y=e.halfDrawHeight),i}return Si(e,t),e.prototype.on=function(e,i){t.prototype.on.call(this,e,i)},e.prototype.once=function(e,i){t.prototype.once.call(this,e,i)},e.prototype.off=function(e,i){t.prototype.off.call(this,e,i)},e.prototype.onInitialize=function(t){},e.prototype.onActivate=function(t,e){},e.prototype.onDeactivate=function(t,e){},e.prototype.onPreUpdate=function(t,e){},e.prototype.onPostUpdate=function(t,e){},e.prototype.onPreDraw=function(t,e){},e.prototype.onPostDraw=function(t,e){},e.prototype._initializeChildren=function(){for(var t=0,e=this.actors;t<e.length;t++){e[t]._initialize(this.engine)}},Object.defineProperty(e.prototype,\"isInitialized\",{get:function(){return this._isInitialized},enumerable:!0,configurable:!0}),e.prototype._initialize=function(t){this.isInitialized||(this.camera&&(this.camera.x=t.halfDrawWidth,this.camera.y=t.halfDrawHeight),this._initializeChildren(),this._logger.debug(\"Scene.onInitialize\",this,t),this.eventDispatcher.emit(\"initialize\",new ft(t,this)),this.onInitialize.call(this,t),this._isInitialized=!0)},e.prototype._activate=function(t,e){this._logger.debug(\"Scene.onActivate\",this),this.onActivate(t,e)},e.prototype._deactivate=function(t,e){this._logger.debug(\"Scene.onDectivate\",this),this.onDeactivate(t,e)},e.prototype._preupdate=function(t,e){this.emit(\"preupdate\",new J(t,e,this)),this.onPreUpdate(t,e)},e.prototype._postupdate=function(t,e){this.emit(\"postupdate\",new $(t,e,this)),this.onPostUpdate(t,e)},e.prototype._predraw=function(t,e){this.emit(\"predraw\",new Y(t,e,this)),this.onPreDraw(t,e)},e.prototype._postdraw=function(t,e){this.emit(\"postdraw\",new K(t,e,this)),this.onPostDraw(t,e)},e.prototype.update=function(t,e){var i,n;for(this._preupdate(t,e),i=0,n=this._cancelQueue.length;i<n;i++)this.removeTimer(this._cancelQueue[i]);this._cancelQueue.length=0;for(var o=0,r=this._timers;o<r.length;o++){r[o].update(e)}for(i=0,n=this.uiActors.length;i<n;i++)this.uiActors[i].update(t,e);for(i=0,n=this.tileMaps.length;i<n;i++)this.tileMaps[i].update(t,e);for(i=0,n=this.actors.length;i<n;i++)this.actors[i].update(t,e);for(i=0,n=this.triggers.length;i<n;i++)this.triggers[i].update(t,e);if(this._collectActorStats(t),t.input.pointers.propagate(),this._broadphase&&W.enabled){var s=Date.now();this._broadphase.update(this.actors,e);for(var a=this._broadphase.broadphase(this.actors,e,t.stats.currFrame),h=Date.now(),c=Date.now(),u=W.collisionPasses,l=e/u;u>0;)a=this._broadphase.narrowphase(a,t.stats.currFrame),a=this._broadphase.resolve(a,l,W.collisionResolutionStrategy),this._broadphase.runCollisionStartEnd(a),u--;var p=Date.now();t.stats.currFrame.physics.broadphase=h-s,t.stats.currFrame.physics.narrowphase=p-c}t.stats.currFrame.actors.killed=this._killQueue.length+this._triggerKillQueue.length,this._processKillQueue(this._killQueue,this.actors),this._processKillQueue(this._triggerKillQueue,this.triggers),this.camera&&this.camera.update(t,e),this._postupdate(t,e)},e.prototype._processKillQueue=function(t,e){for(var i,n=0,o=t;n<o.length;n++){var r=o[n];r.isKilled()&&(i=e.indexOf(r))>-1&&(this._sortedDrawingTree.removeByComparable(r),e.splice(i,1))}t.length=0},e.prototype.draw=function(t,e){var i,n;for(this._predraw(t,e),t.save(),this.camera&&this.camera.draw(t),i=0,n=this.tileMaps.length;i<n;i++)this.tileMaps[i].draw(t,e);var o=this._sortedDrawingTree.list();for(i=0,n=o.length;i<n;i++)o[i].visible&&!o[i].isOffScreen&&o[i].draw(t,e);for(this.engine&&this.engine.isDebug&&(t.strokeStyle=\"yellow\",this.debugDraw(t)),t.restore(),i=0,n=this.uiActors.length;i<n;i++)this.uiActors[i].visible&&this.uiActors[i].draw(t,e);if(this.engine&&this.engine.isDebug)for(i=0,n=this.uiActors.length;i<n;i++)this.uiActors[i].debugDraw(t);this._postdraw(t,e)},e.prototype.debugDraw=function(t){var e,i;for(this.emit(\"predebugdraw\",new Q(t,this)),e=0,i=this.tileMaps.length;e<i;e++)this.tileMaps[e].debugDraw(t);for(e=0,i=this.actors.length;e<i;e++)this.actors[e].debugDraw(t);for(e=0,i=this.triggers.length;e<i;e++)this.triggers[e].debugDraw(t);this._broadphase.debugDraw(t,20),this.camera.debugDraw(t),this.emit(\"postdebugdraw\",new Z(t,this))},e.prototype.contains=function(t){return this.actors.indexOf(t)>-1},e.prototype.add=function(t){t instanceof De&&t.unkill(),t instanceof Be?E(this.uiActors,t)||this.addUIActor(t):t instanceof De?E(this.actors,t)||this._addChild(t):t instanceof ke?E(this._timers,t)||this.addTimer(t):t instanceof Fe&&(E(this.tileMaps,t)||this.addTileMap(t))},e.prototype.remove=function(t){t instanceof Be?this.removeUIActor(t):(t instanceof De&&this._removeChild(t),t instanceof ke&&this.removeTimer(t),t instanceof Fe&&this.removeTileMap(t))},e.prototype.addUIActor=function(t){this.uiActors.push(t),t.scene=this},e.prototype.removeUIActor=function(t){var e=this.uiActors.indexOf(t);e>-1&&this.uiActors.splice(e,1)},e.prototype._addChild=function(t){this._broadphase.track(t.body),t.scene=this,t instanceof wi?this.triggers.push(t):this.actors.push(t),this._sortedDrawingTree.add(t)},e.prototype.addTileMap=function(t){this.tileMaps.push(t)},e.prototype.removeTileMap=function(t){var e=this.tileMaps.indexOf(t);e>-1&&this.tileMaps.splice(e,1)},e.prototype._removeChild=function(t){E(this.actors,t)&&(this._broadphase.untrack(t.body),t instanceof wi?this._triggerKillQueue.push(t):(t.isKilled()||t.kill(),this._killQueue.push(t)),t.parent=null)},e.prototype.addTimer=function(t){return this._timers.push(t),t.scene=this,t},e.prototype.removeTimer=function(t){var e=this._timers.indexOf(t);return-1!==e&&this._timers.splice(e,1),t},e.prototype.cancelTimer=function(t){return this._cancelQueue.push(t),t},e.prototype.isTimerActive=function(t){return this._timers.indexOf(t)>-1&&!t.complete},e.prototype.createGroup=function(t){return new ri(t,this)},e.prototype.getGroup=function(t){return this.groups[t]},e.prototype.removeGroup=function(t){\"string\"==typeof t?delete this.groups[t]:t instanceof ri?delete this.groups[t.name]:this._logger.error(\"Invalid arguments to removeGroup\",t)},e.prototype.cleanupDrawTree=function(t){this._sortedDrawingTree.removeByComparable(t)},e.prototype.updateDrawTree=function(t){this._sortedDrawingTree.add(t)},e.prototype.isActorInDrawTree=function(t){return this._sortedDrawingTree.find(t)},e.prototype.isCurrentScene=function(){return!!this.engine&&this.engine.currentScene===this},e.prototype._collectActorStats=function(t){for(var e=0,i=this.uiActors;e<i.length;e++){i[e];t.stats.currFrame.actors.ui++}for(var n=0,o=this.actors;n<o.length;n++){var r=o[n];t.stats.currFrame.actors.alive++;for(var s=0,a=r.children;s<a.length;s++){xi(a[s])?t.stats.currFrame.actors.ui++:t.stats.currFrame.actors.alive++}}},e}(xt),Ei=function(){return function(){this.stats={currFrame:new Ci,prevFrame:new Ci}}}(),Ci=function(){function t(){this._id=0,this._delta=0,this._fps=0,this._actorStats={alive:0,killed:0,ui:0,get remaining(){return this.alive-this.killed},get total(){return this.remaining+this.ui}},this._durationStats={update:0,draw:0,get total(){return this.update+this.draw}},this._physicsStats=new Ti}return t.prototype.reset=function(t){t?(this.id=t.id,this.delta=t.delta,this.fps=t.fps,this.actors.alive=t.actors.alive,this.actors.killed=t.actors.killed,this.actors.ui=t.actors.ui,this.duration.update=t.duration.update,this.duration.draw=t.duration.draw,this._physicsStats.reset(t.physics)):(this.id=this.delta=this.fps=0,this.actors.alive=this.actors.killed=this.actors.ui=0,this.duration.update=this.duration.draw=0,this._physicsStats.reset())},t.prototype.clone=function(){var e=new t;return e.reset(this),e},Object.defineProperty(t.prototype,\"id\",{get:function(){return this._id},set:function(t){this._id=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"delta\",{get:function(){return this._delta},set:function(t){this._delta=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"fps\",{get:function(){return this._fps},set:function(t){this._fps=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"actors\",{get:function(){return this._actorStats},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"duration\",{get:function(){return this._durationStats},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"physics\",{get:function(){return this._physicsStats},enumerable:!0,configurable:!0}),t}(),Ti=function(){function t(){this._pairs=0,this._collisions=0,this._collidersHash={},this._fastBodies=0,this._fastBodyCollisions=0,this._broadphase=0,this._narrowphase=0}return t.prototype.reset=function(t){t?(this.pairs=t.pairs,this.collisions=t.collisions,this.collidersHash=t.collidersHash,this.fastBodies=t.fastBodies,this.fastBodyCollisions=t.fastBodyCollisions,this.broadphase=t.broadphase,this.narrowphase=t.narrowphase):(this.pairs=this.collisions=this.fastBodies=0,this.fastBodyCollisions=this.broadphase=this.narrowphase=0,this.collidersHash={})},t.prototype.clone=function(){var e=new t;return e.reset(this),e},Object.defineProperty(t.prototype,\"pairs\",{get:function(){return this._pairs},set:function(t){this._pairs=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"collisions\",{get:function(){return this._collisions},set:function(t){this._collisions=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"collidersHash\",{get:function(){return this._collidersHash},set:function(t){this._collidersHash=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"fastBodies\",{get:function(){return this._fastBodies},set:function(t){this._fastBodies=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"fastBodyCollisions\",{get:function(){return this._fastBodyCollisions},set:function(t){this._fastBodyCollisions=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"broadphase\",{get:function(){return this._broadphase},set:function(t){this._broadphase=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"narrowphase\",{get:function(){return this._narrowphase},set:function(t){this._narrowphase=t},enumerable:!0,configurable:!0}),t}(),Mi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){t[t.Num1=97]=\"Num1\",t[t.Num2=98]=\"Num2\",t[t.Num3=99]=\"Num3\",t[t.Num4=100]=\"Num4\",t[t.Num5=101]=\"Num5\",t[t.Num6=102]=\"Num6\",t[t.Num7=103]=\"Num7\",t[t.Num8=104]=\"Num8\",t[t.Num9=105]=\"Num9\",t[t.Num0=96]=\"Num0\",t[t.Numlock=144]=\"Numlock\",t[t.Semicolon=186]=\"Semicolon\",t[t.A=65]=\"A\",t[t.B=66]=\"B\",t[t.C=67]=\"C\",t[t.D=68]=\"D\",t[t.E=69]=\"E\",t[t.F=70]=\"F\",t[t.G=71]=\"G\",t[t.H=72]=\"H\",t[t.I=73]=\"I\",t[t.J=74]=\"J\",t[t.K=75]=\"K\",t[t.L=76]=\"L\",t[t.M=77]=\"M\",t[t.N=78]=\"N\",t[t.O=79]=\"O\",t[t.P=80]=\"P\",t[t.Q=81]=\"Q\",t[t.R=82]=\"R\",t[t.S=83]=\"S\",t[t.T=84]=\"T\",t[t.U=85]=\"U\",t[t.V=86]=\"V\",t[t.W=87]=\"W\",t[t.X=88]=\"X\",t[t.Y=89]=\"Y\",t[t.Z=90]=\"Z\",t[t.Shift=16]=\"Shift\",t[t.Alt=18]=\"Alt\",t[t.Up=38]=\"Up\",t[t.Down=40]=\"Down\",t[t.Left=37]=\"Left\",t[t.Right=39]=\"Right\",t[t.Space=32]=\"Space\",t[t.Esc=27]=\"Esc\"}(Pi||(Pi={}));var Di,Oi,Bi,ki,Ri=function(t){function e(e){var i=t.call(this)||this;return i.key=e,i}return Mi(e,t),e}(U),Fi=function(t){function e(){var e=t.call(this)||this;return e._keys=[],e._keysUp=[],e._keysDown=[],e}return Mi(e,t),e.prototype.on=function(e,i){t.prototype.on.call(this,e,i)},e.prototype.init=function(t){var e=this;(t=t||window).addEventListener(\"blur\",function(){e._keys.length=0}),t.addEventListener(\"keyup\",function(t){var i=e._normalizeKeyCode(t.keyCode),n=e._keys.indexOf(i);e._keys.splice(n,1),e._keysUp.push(i);var o=new Ri(i);e.eventDispatcher.emit(\"up\",o),e.eventDispatcher.emit(\"release\",o)}),t.addEventListener(\"keydown\",function(t){var i=e._normalizeKeyCode(t.keyCode);if(-1===e._keys.indexOf(i)){e._keys.push(i),e._keysDown.push(i);var n=new Ri(i);e.eventDispatcher.emit(\"down\",n),e.eventDispatcher.emit(\"press\",n)}})},e.prototype.update=function(){this._keysDown.length=0,this._keysUp.length=0;for(var t=0;t<this._keys.length;t++)this.eventDispatcher.emit(\"hold\",new Ri(this._keys[t]))},e.prototype.getKeys=function(){return this._keys},e.prototype.wasPressed=function(t){return this._keysDown.indexOf(t)>-1},e.prototype.isHeld=function(t){return this._keys.indexOf(t)>-1},e.prototype.wasReleased=function(t){return this._keysUp.indexOf(t)>-1},e.prototype._normalizeKeyCode=function(t){switch(t){case 59:return Pi.Semicolon;default:return t}},e}(xt),Ii=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){t[t.Touch=0]=\"Touch\",t[t.Mouse=1]=\"Mouse\",t[t.Pen=2]=\"Pen\",t[t.Unknown=3]=\"Unknown\"}(Di||(Di={})),function(t){t[t.Left=0]=\"Left\",t[t.Middle=1]=\"Middle\",t[t.Right=2]=\"Right\",t[t.Unknown=3]=\"Unknown\"}(Oi||(Oi={})),function(t){t[t.Pixel=0]=\"Pixel\",t[t.Line=1]=\"Line\",t[t.Page=2]=\"Page\"}(Bi||(Bi={})),function(t){t[t.Canvas=0]=\"Canvas\",t[t.Document=1]=\"Document\"}(ki||(ki={}));var Li=function(t){function e(e,i,n,o,r,s){var a=t.call(this)||this;return a.coordinates=e,a.pointer=i,a.index=n,a.pointerType=o,a.button=r,a.ev=s,a}return Ii(e,t),Object.defineProperty(e.prototype,\"worldPos\",{get:function(){return this.coordinates.worldPos.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"pagePos\",{get:function(){return this.coordinates.pagePos.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"screenPos\",{get:function(){return this.coordinates.screenPos.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"pos\",{get:function(){return this.coordinates.worldPos.clone()},enumerable:!0,configurable:!0}),e.prototype.layPath=function(t){if(this.pointer.isActorUnderPointer(t)){var e=t.getAncestors();this._path=e.length>this._path.length?e:this._path}},e}(U),Hi=function(){function t(t){this._pointerEventType=t}return t.prototype.create=function(t,e,i,n,o,r){return new this._pointerEventType(t,e,i,n,o,r)},t}(),zi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ii(e,t),e}(Li),Wi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._name=\"pointerup\",e}return Ii(e,t),e.prototype._onActionEnd=function(t){this.pointer.isDragEnd&&t.capturePointer.captureDragEvents&&t.eventDispatcher.emit(\"pointerdragend\",this)},e}(Li),ji=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._name=\"pointerdown\",e}return Ii(e,t),e.prototype._onActionEnd=function(t){this.pointer.isDragStart&&t.capturePointer.captureDragEvents&&t.eventDispatcher.emit(\"pointerdragstart\",this)},e}(Li),Ui=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._name=\"pointermove\",e}return Ii(e,t),e.prototype.propagate=function(){var t=this;this.eventPath.length?(this.action(),this.bubbles&&this.propagate()):this.pointer.hasActorsUnderPointer&&this.pointer.getActorsUnderPointer().forEach(function(e){t.pointer.isActorUnderPointer(e)||t._onActorLeave(e)})},e.prototype.layPath=function(t){if(this.pointer.isDragging)t=this.pointer.dragTarget||t;else if(!this.pointer.isActorUnderPointer(t))return;var e=t.getAncestors();this._path=e.length>this._path.length?e:this._path},e.prototype._onActionStart=function(t){t.capturePointer.captureMoveEvents&&(this.pointer.isActorUnderPointer(t)&&!this.pointer.hasActorUnderPointerInList(t)&&this._onActorEnter(t),this.pointer.isDragging&&t.capturePointer.captureDragEvents&&t.eventDispatcher.emit(\"pointerdragmove\",this))},e.prototype._onActorEnter=function(t){var e=Gi(\"enter\",this.coordinates,this.pointer,this.index,this.pointerType,this.button,this.ev);e.layPath(t),e.propagate(),this.pointer.addActorUnderPointer(t),this.pointer.isDragging&&(this.pointer.dragTarget=t)},e.prototype._onActorLeave=function(t){var e=Gi(\"leave\",this.coordinates,this.pointer,this.index,this.pointerType,this.button,this.ev);e.layPath(t),e.propagate(),this.pointer.removeActorUnderPointer(t)},e}(Li),Ni=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._name=\"pointerenter\",e}return Ii(e,t),e.prototype._onActionStart=function(t){t.capturePointer.captureMoveEvents},e.prototype._onActionEnd=function(t){this.pointer.isDragging&&t.capturePointer.captureDragEvents&&t.eventDispatcher.emit(\"pointerdragenter\",this)},e}(Li),qi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._name=\"pointerleave\",e}return Ii(e,t),e.prototype.layPath=function(t){var e=t.getAncestors();this._path=e.length>this._path.length?e:this._path},e.prototype._onActionStart=function(t){t.capturePointer.captureMoveEvents},e.prototype._onActionEnd=function(t){this.pointer.isDragging&&t.capturePointer.captureDragEvents&&t.eventDispatcher.emit(\"pointerdragleave\",this)},e}(Li),Xi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._name=\"pointercancel\",e}return Ii(e,t),e}(Li),Vi=function(t){function e(e,i,n,o,r,s,a,h,c,u,l,p){var d=t.call(this)||this;return d.x=e,d.y=i,d.pageX=n,d.pageY=o,d.screenX=r,d.screenY=s,d.index=a,d.deltaX=h,d.deltaY=c,d.deltaZ=u,d.deltaMode=l,d.ev=p,d}return Ii(e,t),e}(U);function Gi(t,e,i,n,o,r,s){var a;switch(t){case\"up\":a=new Hi(Wi);break;case\"down\":a=new Hi(ji);break;case\"move\":a=new Hi(Ui);break;case\"cancel\":a=new Hi(Xi);break;case\"enter\":a=new Hi(Ni);break;case\"leave\":a=new Hi(qi)}return a.create(e,i,n,o,r,s)}var Yi,Ki,Qi=function(t){function e(e){var i=t.call(this)||this;return i._pointerDown=[],i._pointerUp=[],i._pointerMove=[],i._pointerCancel=[],i._wheel=[],i._pointers=[],i._activePointers=[],i._engine=e,i._pointers.push(new Zi),i._activePointers=[-1],i.primary=i._pointers[0],i}return Ii(e,t),e.prototype.on=function(e,i){t.prototype.on.call(this,e,i)},e.prototype.init=function(t){(t=t||this._engine.canvas).addEventListener(\"touchstart\",this._handleTouchEvent(\"down\",this._pointerDown)),t.addEventListener(\"touchend\",this._handleTouchEvent(\"up\",this._pointerUp)),t.addEventListener(\"touchmove\",this._handleTouchEvent(\"move\",this._pointerMove)),t.addEventListener(\"touchcancel\",this._handleTouchEvent(\"cancel\",this._pointerCancel)),window.PointerEvent?(this._engine.canvas.style.touchAction=\"none\",t.addEventListener(\"pointerdown\",this._handlePointerEvent(\"down\",this._pointerDown)),t.addEventListener(\"pointerup\",this._handlePointerEvent(\"up\",this._pointerUp)),t.addEventListener(\"pointermove\",this._handlePointerEvent(\"move\",this._pointerMove)),t.addEventListener(\"pointercancel\",this._handlePointerEvent(\"cancel\",this._pointerCancel))):window.MSPointerEvent?(this._engine.canvas.style.msTouchAction=\"none\",t.addEventListener(\"MSPointerDown\",this._handlePointerEvent(\"down\",this._pointerDown)),t.addEventListener(\"MSPointerUp\",this._handlePointerEvent(\"up\",this._pointerUp)),t.addEventListener(\"MSPointerMove\",this._handlePointerEvent(\"move\",this._pointerMove)),t.addEventListener(\"MSPointerCancel\",this._handlePointerEvent(\"cancel\",this._pointerCancel))):(t.addEventListener(\"mousedown\",this._handleMouseEvent(\"down\",this._pointerDown)),t.addEventListener(\"mouseup\",this._handleMouseEvent(\"up\",this._pointerUp)),t.addEventListener(\"mousemove\",this._handleMouseEvent(\"move\",this._pointerMove))),\"onwheel\"in document.createElement(\"div\")?t.addEventListener(\"wheel\",this._handleWheelEvent(\"wheel\",this._wheel)):void 0!==document.onmousewheel?t.addEventListener(\"mousewheel\",this._handleWheelEvent(\"wheel\",this._wheel)):t.addEventListener(\"MozMousePixelScroll\",this._handleWheelEvent(\"wheel\",this._wheel))},e.prototype.update=function(){this._pointerUp.length=0,this._pointerDown.length=0,this._pointerMove.length=0,this._pointerCancel.length=0,this._wheel.length=0;for(var t=0;t<this._pointers.length;t++)this._pointers[t].update()},e.prototype.at=function(t){if(t>=this._pointers.length)for(var e=this._pointers.length-1,i=t;e<i;e++)this._pointers.push(new Zi),this._activePointers.push(-1);return this._pointers[t]},e.prototype.count=function(){return this._pointers.length},e.prototype.propagate=function(){this._propagatePointerEvent(this._pointerDown),this._propagatePointerEvent(this._pointerUp),this._propagatePointerEvent(this._pointerMove),this._propagatePointerEvent(this._pointerCancel),this._propagateWheelEvent(\"pointerwheel\",this._wheel)},e.prototype.revisePointerEventsPaths=function(t){this._revisePointerEventPath(t,this._pointerDown),this._revisePointerEventPath(t,this._pointerUp),this._revisePointerEventPath(t,this._pointerMove),this._revisePointerEventPath(t,this._pointerCancel),this._validateWheelEventPath(this._wheel,t)},e.prototype._propagatePointerEvent=function(t){for(var e=t.length,i=0;i<e;i++)t[i].propagate()},e.prototype._revisePointerEventPath=function(t,e){for(var i=e.length,n=0;n<i;n++){e[n].layPath(t)}},e.prototype._validateWheelEventPath=function(t,e){for(var i=0;i<t.length;i++){var n=t[i],o=!xi(e);e.contains(n.x,n.y,o)&&n.layPath(e)}},e.prototype._propagateWheelEvent=function(t,e){for(var i,n=e.length,o=0;o<n;o++)switch(i=e[o],t){case\"pointerwheel\":this._propagateWheelPointerEvent(i)}},e.prototype._propagateWheelPointerEvent=function(t){t.eventPath.length&&(t.eventPath.pop().eventDispatcher.emit(\"pointerwheel\",t),t.bubbles&&this._propagateWheelPointerEvent(t))},e.prototype._handleMouseEvent=function(t,e){var i=this;return function(n){n.preventDefault();var o=i.at(0),r=L.fromPagePosition(n.pageX,n.pageY,i._engine),s=Gi(t,r,o,0,Di.Mouse,n.button,n);e.push(s),o.eventDispatcher.emit(t,s)}},e.prototype._handleTouchEvent=function(t,e){var i=this;return function(n){n.preventDefault();for(var o=0,r=n.changedTouches.length;o<r;o++){var s=i._pointers.length>1?i._getPointerIndex(n.changedTouches[o].identifier):0;if(-1!==s){var a=i.at(s),h=L.fromPagePosition(n.changedTouches[o].pageX,n.changedTouches[o].pageY,i._engine),c=Gi(t,h,a,s,Di.Touch,Oi.Unknown,n);e.push(c),a.eventDispatcher.emit(t,c),i._pointers.length>1&&(\"up\"===t?i._activePointers[s]=-1:\"down\"===t&&(i._activePointers[s]=n.changedTouches[o].identifier))}}}},e.prototype._handlePointerEvent=function(t,e){var i=this;return function(n){n.preventDefault();var o=i._pointers.length>1?i._getPointerIndex(n.pointerId):0;if(-1!==o){var r=i.at(o),s=L.fromPagePosition(n.pageX,n.pageY,i._engine),a=Gi(t,s,r,o,i._stringToPointerType(n.pointerType),n.button,n);e.push(a),r.eventDispatcher.emit(t,a),i._pointers.length>1&&(\"up\"===t?i._activePointers[o]=-1:\"down\"===t&&(i._activePointers[o]=n.pointerId))}}},e.prototype._handleWheelEvent=function(t,e){var i=this;return function(n){(i._engine.pageScrollPreventionMode===nn.All||i._engine.pageScrollPreventionMode===nn.Canvas&&n.target===i._engine.canvas)&&n.preventDefault();var o=n.pageX-P(i._engine.canvas).x,r=n.pageY-P(i._engine.canvas).y,s=i._engine.screenToWorldCoordinates(new k(o,r)),a=n.deltaX||-.025*n.wheelDeltaX||0,h=n.deltaY||-.025*n.wheelDeltaY||-.025*n.wheelDelta||n.detail||0,c=n.deltaZ||0,u=Bi.Pixel;n.deltaMode&&(1===n.deltaMode?u=Bi.Line:2===n.deltaMode&&(u=Bi.Page));var l=new Vi(s.x,s.y,n.pageX,n.pageY,o,r,0,a,h,c,u,n);e.push(l),i.at(0).eventDispatcher.emit(t,l)}},e.prototype._getPointerIndex=function(t){var e;if((e=this._activePointers.indexOf(t))>-1)return e;for(var i=0;i<this._activePointers.length;i++)if(-1===this._activePointers[i])return i;return-1},e.prototype._stringToPointerType=function(t){switch(t){case\"touch\":return Di.Touch;case\"mouse\":return Di.Mouse;case\"pen\":return Di.Pen;default:return Di.Unknown}},e}(xt),Zi=function(t){function e(){var e=t.call(this)||this;return e._isDown=!1,e._wasDown=!1,e._actorsUnderPointer={length:0},e.lastPagePos=null,e.lastScreenPos=null,e.lastWorldPos=null,e.dragTarget=null,e.on(\"move\",e._onPointerMove),e.on(\"down\",e._onPointerDown),e.on(\"up\",e._onPointerUp),e}return Ii(e,t),Object.defineProperty(e.prototype,\"isDragging\",{get:function(){return this._isDown},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isDragStart\",{get:function(){return!this._wasDown&&this._isDown},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isDragEnd\",{get:function(){return this._wasDown&&!this._isDown},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"hasActorsUnderPointer\",{get:function(){return!!this._actorsUnderPointer.length},enumerable:!0,configurable:!0}),e.prototype.update=function(){this._wasDown&&!this._isDown?this._wasDown=!1:!this._wasDown&&this._isDown&&(this._wasDown=!0)},e.prototype.addActorUnderPointer=function(t){this.hasActorUnderPointerInList(t)||(this._actorsUnderPointer[t.id]=t,this._actorsUnderPointer.length+=1)},e.prototype.removeActorUnderPointer=function(t){this.hasActorUnderPointerInList(t)&&(delete this._actorsUnderPointer[t.id],this._actorsUnderPointer.length-=1)},e.prototype.getActorsUnderPointer=function(){var t=[];for(var e in this._actorsUnderPointer)if(\"length\"!==e){var i=this._actorsUnderPointer[e];t.push(i)}return t},e.prototype.isActorUnderPointer=function(t){return!!this.lastWorldPos&&t.contains(this.lastWorldPos.x,this.lastWorldPos.y,!xi(t))},e.prototype.hasActorUnderPointerInList=function(t){return this._actorsUnderPointer.hasOwnProperty(t.id.toString())},e.prototype._onPointerMove=function(t){this.lastPagePos=new k(t.pagePos.x,t.pagePos.y),this.lastScreenPos=new k(t.screenPos.x,t.screenPos.y),this.lastWorldPos=new k(t.worldPos.x,t.worldPos.y)},e.prototype._onPointerDown=function(t){this.lastPagePos=new k(t.pagePos.x,t.pagePos.y),this.lastScreenPos=new k(t.screenPos.x,t.screenPos.y),this.lastWorldPos=new k(t.worldPos.x,t.worldPos.y),this._isDown=!0},e.prototype._onPointerUp=function(){this._isDown=!1,this.dragTarget=null},e}(xt),Ji=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$i=function(t){function e(){var e=t.call(this)||this;return e.enabled=!1,e.supported=!!navigator.getGamepads,e._gamePadTimeStamps=[0,0,0,0],e._oldPads=[],e._pads=[],e._initSuccess=!1,e._navigator=navigator,e._minimumConfiguration=null,e}return Ji(e,t),e.prototype.init=function(){this.supported&&(this._initSuccess||(this._oldPads=this._clonePads(this._navigator.getGamepads()),this._oldPads.length&&this._oldPads[0]&&(this._initSuccess=!0)))},e.prototype.setMinimumGamepadConfiguration=function(t){this._enableAndUpdate(),this._minimumConfiguration=t},e.prototype._enableAndUpdate=function(){this.enabled||(this.enabled=!0,this.update())},e.prototype._isGamepadValid=function(t){if(!this._minimumConfiguration)return!0;if(!t)return!1;var e=t.axes.filter(function(t){return void 0!==typeof t}).length,i=t.buttons.filter(function(t){return void 0!==typeof t}).length;return e>=this._minimumConfiguration.axis&&i>=this._minimumConfiguration.buttons&&t.connected},e.prototype.on=function(e,i){this._enableAndUpdate(),t.prototype.on.call(this,e,i)},e.prototype.off=function(e,i){this._enableAndUpdate(),t.prototype.off.call(this,e,i)},e.prototype.update=function(){if(this.enabled&&this.supported){this.init();for(var t=this._navigator.getGamepads(),e=0;e<t.length;e++)if(t[e]){if(!this.at(e).connected&&this._isGamepadValid(t[e])&&this.eventDispatcher.emit(\"connect\",new it(e,this.at(e))),this.at(e).connected=!0,!t[e].timestamp||t[e].timestamp!==this._gamePadTimeStamps[e]){var i,n,o,r,s;for(i in this._gamePadTimeStamps[e]=t[e].timestamp,this.at(e).navigatorGamepad=t[e],Yi)\"number\"==typeof(n=Yi[i])&&t[e].buttons[n]&&(s=t[e].buttons[n].value)!==this._oldPads[e].getButton(n)&&(t[e].buttons[n].pressed?(this.at(e).updateButton(n,s),this.at(e).eventDispatcher.emit(\"button\",new ot(n,s,this.at(e)))):this.at(e).updateButton(n,0));for(o in Ki)\"number\"==typeof(r=Ki[o])&&(s=t[e].axes[r])!==this._oldPads[e].getAxes(r)&&(this.at(e).updateAxes(r,s),this.at(e).eventDispatcher.emit(\"axis\",new rt(r,s,this.at(e))));this._oldPads[e]=this._clonePad(t[e])}}else{var a=this.at(e);a.connected&&this.eventDispatcher.emit(\"disconnect\",new nt(e,a)),a.connected=!1}}},e.prototype.at=function(t){if(this._enableAndUpdate(),t>=this._pads.length)for(var e=this._pads.length-1,i=t;e<i;e++)this._pads.push(new tn),this._oldPads.push(new tn);return this._pads[t]},e.prototype.getValidGamepads=function(){this._enableAndUpdate();for(var t=[],e=0;e<this._pads.length;e++)this._isGamepadValid(this.at(e).navigatorGamepad)&&this.at(e).connected&&t.push(this.at(e));return t},e.prototype.count=function(){return this._pads.filter(function(t){return t.connected}).length},e.prototype._clonePads=function(t){for(var e=[],i=0,n=t.length;i<n;i++)e.push(this._clonePad(t[i]));return e},e.prototype._clonePad=function(t){var e,i,n=new tn;if(!t)return n;for(e=0,i=t.buttons.length;e<i;e++)t.buttons[e]&&n.updateButton(e,t.buttons[e].value);for(e=0,i=t.axes.length;e<i;e++)n.updateAxes(e,t.axes[e]);return n},e.MinAxisMoveThreshold=.05,e}(xt),tn=function(t){function e(){var e,i=t.call(this)||this;for(i.connected=!1,i._buttons=new Array(16),i._axes=new Array(4),e=0;e<i._buttons.length;e++)i._buttons[e]=0;for(e=0;e<i._axes.length;e++)i._axes[e]=0;return i}return Ji(e,t),e.prototype.isButtonPressed=function(t,e){return void 0===e&&(e=1),this._buttons[t]>=e},e.prototype.getButton=function(t){return this._buttons[t]},e.prototype.getAxes=function(t){var e=this._axes[t];return Math.abs(e)<$i.MinAxisMoveThreshold?0:e},e.prototype.updateButton=function(t,e){this._buttons[t]=e},e.prototype.updateAxes=function(t,e){this._axes[t]=e},e}(xt);!function(t){t[t.Face1=0]=\"Face1\",t[t.Face2=1]=\"Face2\",t[t.Face3=2]=\"Face3\",t[t.Face4=3]=\"Face4\",t[t.LeftBumper=4]=\"LeftBumper\",t[t.RightBumper=5]=\"RightBumper\",t[t.LeftTrigger=6]=\"LeftTrigger\",t[t.RightTrigger=7]=\"RightTrigger\",t[t.Select=8]=\"Select\",t[t.Start=9]=\"Start\",t[t.LeftStick=10]=\"LeftStick\",t[t.RightStick=11]=\"RightStick\",t[t.DpadUp=12]=\"DpadUp\",t[t.DpadDown=13]=\"DpadDown\",t[t.DpadLeft=14]=\"DpadLeft\",t[t.DpadRight=15]=\"DpadRight\"}(Yi||(Yi={})),function(t){t[t.LeftStickX=0]=\"LeftStickX\",t[t.LeftStickY=1]=\"LeftStickY\",t[t.RightStickX=2]=\"RightStickX\",t[t.RightStickY=3]=\"RightStickY\"}(Ki||(Ki={}));var en,nn,on=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){t[t.FullScreen=0]=\"FullScreen\",t[t.Container=1]=\"Container\",t[t.Fixed=2]=\"Fixed\",t[t.Position=3]=\"Position\"}(en||(en={})),function(t){t[t.None=0]=\"None\",t[t.Canvas=1]=\"Canvas\",t[t.All=2]=\"All\"}(nn||(nn={}));var rn,sn=function(t){function e(i){var n=t.call(this)||this;n._hasStarted=!1,n.debug=new Ei,n.postProcessors=[],n.scenes={},n._animations=[],n.isFullscreen=!1,n.displayMode=en.FullScreen,n._suppressHiDPIScaling=!1,n._suppressPlayButton=!1,n.pauseAudioWhenHidden=!0,n.isDebug=!1,n.debugColor=new Pt(255,255,255),n.onFatalException=function(t){Ot.getInstance().fatal(t)},n._isSmoothingEnabled=!0,n._timescale=1,n._isLoading=!1,n._isInitialized=!1,i=_({},e._DefaultEngineOptions,i);var o=new Ze;if(!i.suppressMinimumBrowserFeatureDetection&&!(n._compatible=o.test())){var r=document.createElement(\"div\");if(r.innerText=\"Sorry, your browser does not support all the features needed for Excalibur\",document.body.appendChild(r),o.failedTests.forEach(function(t){var e=document.createElement(\"div\");e.innerText=\"Browser feature missing \"+t,document.body.appendChild(e)}),i.canvasElementId){var s=document.getElementById(i.canvasElementId);s&&s.parentElement.removeChild(s)}return n}return n._compatible=!0,console.log&&!i.suppressConsoleBootMessage&&(console.log(\"%cPowered by Excalibur.js (v\"+Hn+\")\",\"background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;\"),console.log(\"\\n      /| ________________\\nO|===|* >________________>\\n      \\\\|\"),console.log(\"Visit\",\"http://excaliburjs.com\",\"for more information\")),i.suppressPlayButton&&(n._suppressPlayButton=!0),n._logger=Ot.getInstance(),n._logger.defaultLevel===z.Debug&&o.logBrowserFeatures(),n._logger.debug(\"Building engine...\"),n.canvasElementId=i.canvasElementId,i.canvasElementId?(n._logger.debug(\"Using Canvas element specified: \"+i.canvasElementId),n.canvas=document.getElementById(i.canvasElementId)):(n._logger.debug(\"Using generated canvas element\"),n.canvas=document.createElement(\"canvas\")),i.width&&i.height?(void 0===i.displayMode&&(n.displayMode=en.Fixed),n._logger.debug(\"Engine viewport is size \"+i.width+\" x \"+i.height),n.canvas.width=i.width,n.canvas.height=i.height):i.displayMode||(n._logger.debug(\"Engine viewport is fullscreen\"),n.displayMode=en.FullScreen),i.backgroundColor&&(n.backgroundColor=i.backgroundColor.clone()),n._loader=new Ye,n._initialize(i),n.rootScene=n.currentScene=new Ai(n),n.addScene(\"root\",n.rootScene),n.goToScene(\"root\"),n}return on(e,t),Object.defineProperty(e.prototype,\"canvasWidth\",{get:function(){return this.canvas.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"halfCanvasWidth\",{get:function(){return this.canvas.width/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"canvasHeight\",{get:function(){return this.canvas.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"halfCanvasHeight\",{get:function(){return this.canvas.height/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"drawWidth\",{get:function(){return this.currentScene&&this.currentScene.camera?this.canvasWidth/this.currentScene.camera.getZoom()/this.pixelRatio:this.canvasWidth/this.pixelRatio},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"halfDrawWidth\",{get:function(){return this.drawWidth/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"drawHeight\",{get:function(){return this.currentScene&&this.currentScene.camera?this.canvasHeight/this.currentScene.camera.getZoom()/this.pixelRatio:this.canvasHeight/this.pixelRatio},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"halfDrawHeight\",{get:function(){return this.drawHeight/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isHiDpi\",{get:function(){return 1!==this.pixelRatio},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"stats\",{get:function(){return this.debug.stats},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"pixelRatio\",{get:function(){return this._suppressHiDPIScaling?1:window.devicePixelRatio<1?1:window.devicePixelRatio||1},enumerable:!0,configurable:!0}),e.prototype.on=function(e,i){t.prototype.on.call(this,e,i)},e.prototype.once=function(e,i){t.prototype.once.call(this,e,i)},e.prototype.off=function(e,i){t.prototype.off.call(this,e,i)},e.prototype.getWorldBounds=function(){var t=this.screenToWorldCoordinates(k.Zero).x,e=this.screenToWorldCoordinates(k.Zero).y,i=t+this.drawWidth,n=e+this.drawHeight;return new Dt(t,e,i,n)},Object.defineProperty(e.prototype,\"timescale\",{get:function(){return this._timescale},set:function(t){t<=0?Ot.getInstance().error(\"Cannot set engine.timescale to a value of 0 or less than 0.\"):this._timescale=t},enumerable:!0,configurable:!0}),e.prototype.playAnimation=function(t,e,i){this._animations.push(new an(t,e,i))},e.prototype.addTileMap=function(t){this.currentScene.addTileMap(t)},e.prototype.removeTileMap=function(t){this.currentScene.removeTileMap(t)},e.prototype.addTimer=function(t){return this.currentScene.addTimer(t)},e.prototype.removeTimer=function(t){return this.currentScene.removeTimer(t)},e.prototype.addScene=function(t,e){this.scenes[t]&&this._logger.warn(\"Scene\",t,\"already exists overwriting\"),this.scenes[t]=e,e.engine=this},e.prototype.removeScene=function(t){if(t instanceof Ai)for(var e in this.scenes)this.scenes.hasOwnProperty(e)&&this.scenes[e]===t&&delete this.scenes[e];\"string\"==typeof t&&delete this.scenes[t]},e.prototype.add=function(t){t instanceof Be?this.currentScene.addUIActor(t):(t instanceof De&&this._addChild(t),t instanceof ke&&this.addTimer(t),t instanceof Fe&&this.addTileMap(t),2===arguments.length&&this.addScene(arguments[0],arguments[1]))},e.prototype.remove=function(t){t instanceof Be?this.currentScene.removeUIActor(t):(t instanceof De&&this._removeChild(t),t instanceof ke&&this.removeTimer(t),t instanceof Fe&&this.removeTileMap(t),t instanceof Ai&&this.removeScene(t),\"string\"==typeof t&&this.removeScene(t))},e.prototype._addChild=function(t){this.currentScene.add(t)},e.prototype._removeChild=function(t){this.currentScene.remove(t)},e.prototype.goToScene=function(t){if(this.scenes[t]){var e=this.currentScene,i=this.scenes[t];this._logger.debug(\"Going to scene:\",t),this.currentScene.isInitialized&&(this.currentScene._deactivate.call(this.currentScene,[e,i]),this.currentScene.eventDispatcher.emit(\"deactivate\",new gt(i,this.currentScene))),this.currentScene=i,this.currentScene._initialize(this),this.currentScene._activate.call(this.currentScene,[e,i]),this.currentScene.eventDispatcher.emit(\"activate\",new _t(e,this.currentScene))}else this._logger.error(\"Scene\",t,\"does not exist!\")},e.prototype.screenToWorldCoordinates=function(t){var e=t.x,i=t.y;if(e=e/this.canvas.clientWidth*this.drawWidth,i=i/this.canvas.clientHeight*this.drawHeight,e-=this.halfDrawWidth,i-=this.halfDrawHeight,this.currentScene&&this.currentScene.camera){var n=this.currentScene.camera.getFocus();e+=n.x,i+=n.y}return new k(Math.floor(e),Math.floor(i))},e.prototype.worldToScreenCoordinates=function(t){var e=t.x,i=t.y;if(this.currentScene&&this.currentScene.camera){var n=this.currentScene.camera.getFocus();e-=n.x,i-=n.y}return e+=this.halfDrawWidth,i+=this.halfDrawHeight,e=e*this.canvas.clientWidth/this.drawWidth,i=i*this.canvas.clientHeight/this.drawHeight,new k(Math.floor(e),Math.floor(i))},e.prototype._setHeightByDisplayMode=function(t){this.displayMode===en.Container&&(this.canvas.width=t.clientWidth,this.canvas.height=t.clientHeight),this.displayMode===en.FullScreen&&(document.body.style.margin=\"0px\",document.body.style.overflow=\"hidden\",this.canvas.width=t.innerWidth,this.canvas.height=t.innerHeight)},e.prototype._initialize=function(t){var e,i,n=this;if(t.displayMode&&(this.displayMode=t.displayMode),this.displayMode===en.FullScreen||this.displayMode===en.Container){var o=this.displayMode===en.Container?this.canvas.parentElement||document.body:window;this._setHeightByDisplayMode(o),window.addEventListener(\"resize\",function(){n._logger.debug(\"View port resized\"),n._setHeightByDisplayMode(o),n._logger.info(\"parent.clientHeight \"+o.clientHeight),n.setAntialiasing(n._isSmoothingEnabled)})}else this.displayMode===en.Position&&this._intializeDisplayModePosition(t);this.input={keyboard:new Fi,pointers:new Qi(this),gamepads:new $i},this.input.keyboard.init(),this.input.pointers.init(t&&t.pointerScope===ki.Document?document:this.canvas),this.input.gamepads.init(),this.pageScrollPreventionMode=t.scrollPreventionMode,void 0!==document.hidden?(e=\"hidden\",i=\"visibilitychange\"):\"msHidden\"in document?(e=\"msHidden\",i=\"msvisibilitychange\"):\"webkitHidden\"in document&&(e=\"webkitHidden\",i=\"webkitvisibilitychange\"),document.addEventListener(i,function(){document[e]?(n.eventDispatcher.emit(\"hidden\",new ct(n)),n._logger.debug(\"Window hidden\")):(n.eventDispatcher.emit(\"visible\",new ht(n)),n._logger.debug(\"Window visible\"))}),this.ctx=this.canvas.getContext(\"2d\"),this._suppressHiDPIScaling=!!t.suppressHiDPIScaling,t.suppressHiDPIScaling||this._initializeHiDpi(),this.canvasElementId||document.body.appendChild(this.canvas)},e.prototype.onInitialize=function(t){},e.prototype._intializeDisplayModePosition=function(t){if(!t.position)throw new Error(\"DisplayMode of Position was selected but no position option was given\");if(this.canvas.style.display=\"block\",this.canvas.style.position=\"absolute\",\"string\"==typeof t.position){var e=t.position.split(\" \");switch(e[0]){case\"top\":this.canvas.style.top=\"0px\";break;case\"bottom\":this.canvas.style.bottom=\"0px\";break;case\"middle\":this.canvas.style.top=\"50%\";var i=-this.halfDrawHeight;this.canvas.style.marginTop=i.toString();break;default:throw new Error(\"Invalid Position Given\")}if(e[1])switch(e[1]){case\"left\":this.canvas.style.left=\"0px\";break;case\"right\":this.canvas.style.right=\"0px\";break;case\"center\":this.canvas.style.left=\"50%\";var n=-this.halfDrawWidth;this.canvas.style.marginLeft=n.toString();break;default:throw new Error(\"Invalid Position Given\")}}else t.position.top&&(\"number\"==typeof t.position.top?this.canvas.style.top=t.position.top.toString()+\"px\":this.canvas.style.top=t.position.top),t.position.right&&(\"number\"==typeof t.position.right?this.canvas.style.right=t.position.right.toString()+\"px\":this.canvas.style.right=t.position.right),t.position.bottom&&(\"number\"==typeof t.position.bottom?this.canvas.style.bottom=t.position.bottom.toString()+\"px\":this.canvas.style.bottom=t.position.bottom),t.position.left&&(\"number\"==typeof t.position.left?this.canvas.style.left=t.position.left.toString()+\"px\":this.canvas.style.left=t.position.left)},e.prototype._initializeHiDpi=function(){if(this.isHiDpi){var t=this.canvas.width,e=this.canvas.height;this.canvas.width=t*this.pixelRatio,this.canvas.height=e*this.pixelRatio,this.canvas.style.width=t+\"px\",this.canvas.style.height=e+\"px\",this._logger.warn(\"Hi DPI screen detected, resetting canvas resolution from \\n                           \"+t+\"x\"+e+\" to \"+this.canvas.width+\"x\"+this.canvas.height+\" \\n                           css size will remain \"+t+\"x\"+e),this.ctx.scale(this.pixelRatio,this.pixelRatio),this._logger.warn(\"Canvas drawing context was scaled by \"+this.pixelRatio)}},e.prototype.setAntialiasing=function(t){this._isSmoothingEnabled=t;var e=this.ctx;e.imageSmoothingEnabled=t;for(var i=0,n=[\"webkitImageSmoothingEnabled\",\"mozImageSmoothingEnabled\",\"msImageSmoothingEnabled\"];i<n.length;i++){var o=n[i];o in e&&(e[o]=t)}},e.prototype.getAntialiasing=function(){return this.ctx.imageSmoothingEnabled||this.ctx.webkitImageSmoothingEnabled||this.ctx.mozImageSmoothingEnabled||this.ctx.msImageSmoothingEnabled},Object.defineProperty(e.prototype,\"isInitialized\",{get:function(){return this._isInitialized},enumerable:!0,configurable:!0}),e.prototype._overrideInitialize=function(e){this.isInitialized||(this.onInitialize(e),t.prototype.emit.call(this,\"initialize\",new ft(e,this)),this._isInitialized=!0)},e.prototype._update=function(t){if(this._isLoading)return this._loader.update(this,t),this.input.keyboard.update(),this.input.pointers.update(),void this.input.gamepads.update();this._overrideInitialize(this),this._preupdate(t),this.currentScene.update(this,t),this._animations=this._animations.filter(function(t){return!t.animation.isDone()}),this.input.keyboard.update(),this.input.pointers.update(),this.input.gamepads.update(),this._postupdate(t)},e.prototype._preupdate=function(t){this.emit(\"preupdate\",new J(this,t,this)),this.onPreUpdate(this,t)},e.prototype.onPreUpdate=function(t,e){},e.prototype._postupdate=function(t){this.emit(\"postupdate\",new $(this,t,this)),this.onPostUpdate(this,t)},e.prototype.onPostUpdate=function(t,e){},e.prototype._draw=function(t){var e=this.ctx;if(this._predraw(e,t),this._isLoading)this._loader.draw(e,t);else{e.clearRect(0,0,this.canvasWidth,this.canvasHeight),e.fillStyle=this.backgroundColor.toString(),e.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.currentScene.draw(this.ctx,t);for(var i=0,n=this._animations.length;i<n;i++)this._animations[i].animation.draw(e,this._animations[i].x,this._animations[i].y);if(this.isDebug){this.ctx.font=\"Consolas\",this.ctx.fillStyle=this.debugColor.toString();for(var o=this.input.keyboard.getKeys(),r=0;r<o.length;r++)this.ctx.fillText(o[r].toString()+\" : \"+(Pi[o[r]]?Pi[o[r]]:\"Not Mapped\"),100,10*r+10);this.ctx.fillText(\"FPS:\"+this.stats.currFrame.fps.toFixed(2).toString(),10,10)}for(var s=0;s<this.postProcessors.length;s++)this.postProcessors[s].process(this.ctx.getImageData(0,0,this.canvasWidth,this.canvasHeight),this.ctx);this._postdraw(e,t)}},e.prototype._predraw=function(t,e){this.emit(\"predraw\",new Y(t,e,this)),this.onPreDraw(t,e)},e.prototype.onPreDraw=function(t,e){},e.prototype._postdraw=function(t,e){this.emit(\"postdraw\",new K(t,e,this)),this.onPostDraw(t,e)},e.prototype.onPostDraw=function(t,e){},e.prototype.start=function(t){var i,n=this;return this._compatible?(t?(this._loader=t,this._loader.suppressPlayButton=this._suppressPlayButton,this._loader.wireEngine(this),i=this.load(this._loader)):i=p.resolve(),i.then(function(){n.emit(\"start\",new V(n))}),this._hasStarted||(this._hasStarted=!0,this._logger.debug(\"Starting game...\"),e.createMainLoop(this,window.requestAnimationFrame,Date.now)(),this._logger.debug(\"Game started\")),i):(new p).reject(\"Excalibur is incompatible with your browser\")},e.createMainLoop=function(t,e,i){var n=i();return function o(){if(t._hasStarted)try{t._requestId=e(o),t.emit(\"preframe\",new tt(t,t.stats.prevFrame));var r=i(),s=Math.floor(r-n)||1;s>200&&(s=1);var a=s*t.timescale,h=t.stats.prevFrame.id+1;t.stats.prevFrame.reset(t.stats.currFrame),t.stats.currFrame.reset(),t.stats.currFrame.id=h,t.stats.currFrame.delta=a,t.stats.currFrame.fps=1/(a/1e3);var c=i();t._update(a);var u=i();t._draw(a);var l=i();t.stats.currFrame.duration.update=u-c,t.stats.currFrame.duration.draw=l-u,n=r,t.emit(\"postframe\",new et(t,t.stats.currFrame))}catch(e){window.cancelAnimationFrame(t._requestId),t.stop(),t.onFatalException(e)}}},e.prototype.stop=function(){this._hasStarted&&(this.emit(\"stop\",new G(this)),this._hasStarted=!1,this._logger.debug(\"Game stopped\"))},e.prototype.isPaused=function(){return!this._hasStarted},e.prototype.screenshot=function(){var t=new Image,e=this.canvas.toDataURL(\"image/png\");return t.src=e,t},e.prototype.load=function(t){var e=this,i=new p;return this._isLoading=!0,t.load().then(function(){e._suppressPlayButton?setTimeout(function(){e._isLoading=!1,i.resolve()},500):(e._isLoading=!1,i.resolve())}),i},e._DefaultEngineOptions={width:0,height:0,canvasElementId:\"\",pointerScope:ki.Document,suppressConsoleBootMessage:null,suppressMinimumBrowserFeatureDetection:null,suppressHiDPIScaling:null,suppressPlayButton:null,scrollPreventionMode:nn.Canvas,backgroundColor:Pt.fromHex(\"#2185d0\")},e}(xt),an=function(){return function(t,e,i){this.animation=t,this.x=e,this.y=i}}(),hn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),cn=function(t){function e(e,i){void 0===i&&(i=\"MediaEvent\");var n=t.call(this)||this;return n.target=e,n._name=i,n}return hn(e,t),Object.defineProperty(e.prototype,\"bubbles\",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"_path\",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.stopPropagation=function(){},e.prototype.action=function(){},e.prototype.propagate=function(){},e.prototype.layPath=function(t){},e}(U),un=function(t){function e(e,i){var n=t.call(this,e,\"NativeSoundEvent\")||this;return n.track=i,n}return hn(e,t),e}(cn),ln=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){t[t.Circle=0]=\"Circle\",t[t.Rectangle=1]=\"Rectangle\"}(rn||(rn={}));var pn=function(t){function e(e,i,n,o,r,s,a,h,c,u){return t.call(this,e,i,n,o,r,s,a,h,c,u)||this}return ln(e,t),e}(Vt(function(){function t(t,e,i,n,o,r,s,a,h,c){this.position=new k(0,0),this.velocity=new k(0,0),this.acceleration=new k(0,0),this.particleRotationalVelocity=0,this.currentRotation=0,this.focus=null,this.focusAccel=0,this.opacity=1,this.beginColor=Pt.White.clone(),this.endColor=Pt.White.clone(),this.life=300,this.fadeFlag=!1,this._rRate=1,this._gRate=1,this._bRate=1,this._aRate=0,this._currentColor=Pt.White.clone(),this.emitter=null,this.particleSize=5,this.particleSprite=null,this.sizeRate=0,this.elapsedMultiplier=0;var u=t;if(u&&!(t instanceof dn)){var l=t;u=l.emitter,e=l.life,i=l.opacity,o=l.endColor,n=l.beginColor,r=l.position,s=l.velocity,a=l.acceleration,h=l.startSize,c=l.endSize}this.emitter=u,this.life=e||this.life,this.opacity=i||this.opacity,this.endColor=o||this.endColor.clone(),this.beginColor=n||this.beginColor.clone(),this._currentColor=this.beginColor.clone(),this.position=r||this.position,this.velocity=s||this.velocity,this.acceleration=a||this.acceleration,this._rRate=(this.endColor.r-this.beginColor.r)/this.life,this._gRate=(this.endColor.g-this.beginColor.g)/this.life,this._bRate=(this.endColor.b-this.beginColor.b)/this.life,this._aRate=this.opacity/this.life,this.startSize=h||0,this.endSize=c||0,this.endSize>0&&this.startSize>0&&(this.sizeRate=(this.endSize-this.startSize)/this.life,this.particleSize=this.startSize)}return t.prototype.kill=function(){this.emitter.removeParticle(this)},t.prototype.update=function(t){if(this.life=this.life-t,this.elapsedMultiplier=this.elapsedMultiplier+t,this.life<0&&this.kill(),this.fadeFlag&&(this.opacity=y(this._aRate*this.life,1e-4,1)),this.startSize>0&&this.endSize>0&&(this.particleSize=y(this.sizeRate*t+this.particleSize,Math.min(this.startSize,this.endSize),Math.max(this.startSize,this.endSize))),this._currentColor.r=y(this._currentColor.r+this._rRate*t,0,255),this._currentColor.g=y(this._currentColor.g+this._gRate*t,0,255),this._currentColor.b=y(this._currentColor.b+this._bRate*t,0,255),this._currentColor.a=y(this.opacity,1e-4,1),this.focus){var e=this.focus.sub(this.position).normalize().scale(this.focusAccel).scale(t/1e3);this.velocity=this.velocity.add(e)}else this.velocity=this.velocity.add(this.acceleration.scale(t/1e3));this.position=this.position.add(this.velocity.scale(t/1e3)),this.particleRotationalVelocity&&(this.currentRotation=(this.currentRotation+this.particleRotationalVelocity*t/1e3)%(2*Math.PI))},t.prototype.draw=function(t){if(this.particleSprite)return this.particleSprite.rotation=this.currentRotation,this.particleSprite.scale.setTo(this.particleSize,this.particleSize),void this.particleSprite.draw(t,this.position.x,this.position.y);this._currentColor.a=y(this.opacity,1e-4,1),t.fillStyle=this._currentColor.toString(),t.beginPath(),t.arc(this.position.x,this.position.y,this.particleSize,0,2*Math.PI),t.fill(),t.closePath()},t}())),dn=function(t){function e(e,i,n,o){return t.call(this,e,i,n,o)||this}return ln(e,t),e}(Vt(function(t){function e(e,i,n,o){var r=t.call(this,\"number\"==typeof e?{x:e,y:i,width:n,height:o}:e)||this;r.numParticles=0,r.isEmitting=!0,r.particles=null,r.deadParticles=null,r.minVel=0,r.maxVel=0,r.acceleration=new k(0,0),r.minAngle=0,r.maxAngle=0,r.emitRate=1,r.particleLife=2e3,r.opacity=1,r.fadeFlag=!1,r.focus=null,r.focusAccel=1,r.startSize=null,r.endSize=null,r.minSize=5,r.maxSize=5,r.beginColor=Pt.White.clone(),r.endColor=Pt.White.clone(),r.particleSprite=null,r.emitterType=rn.Rectangle,r.radius=0,r.particleRotationalVelocity=0,r.randomRotation=!1,r._particlesToEmit=0,r.collisionType=xe.PreventCollision,r.particles=new B,r.deadParticles=new B,r.random=new d;for(var s=0;s<r.traits.length;s++)r.traits[s]instanceof Ee&&r.traits.splice(s,1);return r}return ln(e,t),e.prototype.removeParticle=function(t){this.deadParticles.push(t)},e.prototype.emitParticles=function(t){for(var e=0;e<t;e++)this.particles.push(this._createParticle())},e.prototype.clearParticles=function(){this.particles.clear()},e.prototype._createParticle=function(){var t=0,e=0,i=v(this.minAngle,this.maxAngle,this.random),n=v(this.minVel,this.maxVel,this.random),o=this.startSize||v(this.minSize,this.maxSize,this.random),r=n*Math.cos(i),s=n*Math.sin(i);if(this.emitterType===rn.Rectangle)t=v(this.pos.x,this.pos.x+this.getWidth(),this.random),e=v(this.pos.y,this.pos.y+this.getHeight(),this.random);else if(this.emitterType===rn.Circle){var a=v(0,this.radius,this.random);t=a*Math.cos(i)+this.pos.x,e=a*Math.sin(i)+this.pos.y}var h=new pn(this,this.particleLife,this.opacity,this.beginColor,this.endColor,new k(t,e),new k(r,s),this.acceleration,this.startSize,this.endSize);return h.fadeFlag=this.fadeFlag,h.particleSize=o,this.particleSprite&&(h.particleSprite=this.particleSprite),h.particleRotationalVelocity=this.particleRotationalVelocity,this.randomRotation&&(h.currentRotation=v(0,2*Math.PI,this.random)),this.focus&&(h.focus=this.focus.add(new k(this.pos.x,this.pos.y)),h.focusAccel=this.focusAccel),h},e.prototype.update=function(e,i){var n=this;t.prototype.update.call(this,e,i),this.isEmitting&&(this._particlesToEmit+=this.emitRate*(i/1e3),this._particlesToEmit>1&&(this.emitParticles(Math.floor(this._particlesToEmit)),this._particlesToEmit=this._particlesToEmit-Math.floor(this._particlesToEmit))),this.particles.forEach(function(t){return t.update(i)}),this.deadParticles.forEach(function(t){return n.particles.removeElement(t)}),this.deadParticles.clear()},e.prototype.draw=function(t){this.particles.forEach(function(e){return e.draw(t)})},e.prototype.debugDraw=function(e){t.prototype.debugDraw.call(this,e),e.fillStyle=Pt.Black.toString(),e.fillText(\"Particles: \"+this.particles.count(),this.pos.x,this.pos.y+20),this.focus&&(e.fillRect(this.focus.x+this.pos.x,this.focus.y+this.pos.y,3,3),ye(e,Pt.Yellow,this.focus.x+this.pos.x,this.focus.y+this.pos.y,t.prototype.getCenter.call(this).x,t.prototype.getCenter.call(this).y),e.fillText(\"Focus\",this.focus.x+this.pos.x,this.focus.y+this.pos.y))},e}(De))),fn={Actions:r},_n=function(){function t(){this._lastFramePairs=[],this._lastFramePairsHash={}}return t.prototype.track=function(){},t.prototype.untrack=function(){},t.prototype.broadphase=function(t){for(var e,i,n=t.filter(function(t){return!t.isKilled()&&t.collisionType!==xe.PreventCollision}),o=[],r=0,s=n.length;r<s;r++){e=n[r];for(var a=r+1;a<s;a++){var h;if(i=n[a],h=e.collides(i)){var c=new Pe(e.body,i.body);c.collision=new At(e.collisionArea,i.collisionArea,h,e.pos,h),o.some(function(t){return t.id===c.id})||o.push(c)}}}return o},t.prototype.narrowphase=function(t){return t},t.prototype.runCollisionStartEnd=function(t){for(var e={},i=0,n=t;i<n.length;i++){if(e[(h=n[i]).id]=h,!this._lastFramePairsHash[h.id]){var o=h.bodyA.actor,r=h.bodyB.actor;o.emit(\"collisionstart\",new pt(o,r,h)),r.emit(\"collisionstart\",new pt(r,o,h))}}for(var s=0,a=this._lastFramePairs;s<a.length;s++){var h;if(!e[(h=a[s]).id]){o=h.bodyA.actor,r=h.bodyB.actor;o.emit(\"collisionend\",new dt(o,r)),r.emit(\"collisionend\",new dt(r,o))}}this._lastFramePairs=t,this._lastFramePairsHash=e},t.prototype.resolve=function(t){for(var e=0,i=t;e<i.length;e++){i[e].resolve(W.collisionResolutionStrategy)}return t.filter(function(t){return t.canCollide})},t.prototype.update=function(){return 0},t.prototype.debugDraw=function(){},t}(),gn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),yn=function(t){function e(e,i,n,o){return t.call(this,e,i,n,o)||this}return gn(e,t),e}(Vt(function(){function t(t,e,i,n){this.sprites=[],this.currentFrame=0,this._oldTime=Date.now(),this.anchor=new k(0,0),this.rotation=0,this.scale=new k(1,1),this.loop=!0,this.freezeFrame=-1,this.flipVertical=!1,this.flipHorizontal=!1,this.drawWidth=0,this.drawHeight=0,this.width=0,this.height=0;var o=t;if(t&&!(t instanceof sn)){var r=t;o=r.engine,e=r.sprites,i=r.speed,n=r.loop}this.sprites=e,this.speed=i,this._engine=o,null!=n&&(this.loop=n),e&&e[0]&&(this.drawHeight=e[0]?e[0].drawHeight:0,this.drawWidth=e[0]?e[0].drawWidth:0,this.width=e[0]?e[0].width:0,this.height=e[0]?e[0].height:0,this.freezeFrame=e.length-1)}return t.prototype.opacity=function(t){this.addEffect(new Ht(t))},t.prototype.grayscale=function(){this.addEffect(new It)},t.prototype.invert=function(){this.addEffect(new Lt)},t.prototype.fill=function(t){this.addEffect(new qt(t))},t.prototype.colorize=function(t){this.addEffect(new zt(t))},t.prototype.lighten=function(t){void 0===t&&(t=.1),this.addEffect(new Wt(t))},t.prototype.darken=function(t){void 0===t&&(t=.1),this.addEffect(new jt(t))},t.prototype.saturate=function(t){void 0===t&&(t=.1),this.addEffect(new Ut(t))},t.prototype.desaturate=function(t){void 0===t&&(t=.1),this.addEffect(new Nt(t))},t.prototype.addEffect=function(t){for(var e in this.sprites)this.sprites[e].addEffect(t)},t.prototype.removeEffect=function(t){for(var e in this.sprites)this.sprites[e].removeEffect(t)},t.prototype.clearEffects=function(){for(var t in this.sprites)this.sprites[t].clearEffects()},t.prototype._setAnchor=function(t){for(var e in this.sprites)this.sprites[e].anchor.setTo(t.x,t.y)},t.prototype._setRotation=function(t){for(var e in this.sprites)this.sprites[e].rotation=t},t.prototype._setScale=function(t){for(var e in this.sprites)this.sprites[e].scale=t},t.prototype.reset=function(){this.currentFrame=0},t.prototype.isDone=function(){return!this.loop&&this.currentFrame>=this.sprites.length},t.prototype.tick=function(){var t=Date.now();t-this._oldTime>this.speed&&(this.currentFrame=this.loop?(this.currentFrame+1)%this.sprites.length:this.currentFrame+1,this._oldTime=t)},t.prototype._updateValues=function(){this._setAnchor(this.anchor),this._setRotation(this.rotation),this._setScale(this.scale)},t.prototype.skip=function(t){this.currentFrame=(this.currentFrame+t)%this.sprites.length},t.prototype.draw=function(t,e,i){var n;this.tick(),this._updateValues(),this.currentFrame<this.sprites.length&&(n=this.sprites[this.currentFrame],this.flipVertical&&(n.flipVertical=this.flipVertical),this.flipHorizontal&&(n.flipHorizontal=this.flipHorizontal),n.draw(t,e,i)),-1!==this.freezeFrame&&this.currentFrame>=this.sprites.length&&(n=this.sprites[y(this.freezeFrame,0,this.sprites.length-1)]).draw(t,e,i),n&&(this.drawWidth=n.drawWidth,this.drawHeight=n.drawHeight)},t.prototype.play=function(t,e){this.reset(),this._engine.playAnimation(this,t,e)},t}())),vn=function(){function t(t){this.lineWidth=5,this.filled=!1,this._points=[],this.anchor=new k(0,0),this.rotation=0,this.scale=new k(1,1),this._points=t;var e=this._points.reduce(function(t,e){return Math.min(t,e.x)},0),i=this._points.reduce(function(t,e){return Math.max(t,e.x)},0);this.drawWidth=i-e;var n=this._points.reduce(function(t,e){return Math.min(t,e.y)},0),o=this._points.reduce(function(t,e){return Math.max(t,e.y)},0);this.drawHeight=o-n,this.height=this.drawHeight,this.width=this.drawWidth}return t.prototype.addEffect=function(){},t.prototype.removeEffect=function(){},t.prototype.clearEffects=function(){},t.prototype.reset=function(){},t.prototype.draw=function(t,e,i){t.save(),t.translate(e+this.anchor.x,i+this.anchor.y),t.scale(this.scale.x,this.scale.y),t.rotate(this.rotation),t.beginPath(),t.lineWidth=this.lineWidth;var n=this._points[0];t.moveTo(n.x,n.y);for(var o=0,r=this._points.length;o<r;o++)t.lineTo(this._points[o].x,this._points[o].y);t.lineTo(n.x,n.y),t.closePath(),this.filled&&(t.fillStyle=this.fillColor.toString(),t.fill()),t.strokeStyle=this.lineColor.toString(),this.flipHorizontal&&(t.translate(this.drawWidth,0),t.scale(-1,1)),this.flipVertical&&(t.translate(0,this.drawHeight),t.scale(1,-1)),t.stroke(),t.restore()},t}(),mn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),bn=function(t){function e(e,i,n,o,r){return t.call(this,e,i,n,o,r)||this}return mn(e,t),e}(Vt(function(){function t(t,e,i,n,o){this.sprites=[],this.image=null,this.columns=0,this.rows=0,this.spWidth=0,this.spHeight=0;var r=!1;if(t instanceof Array?this.sprites=t:(!t||t instanceof Zt?(this.image=t,this.columns=e,this.rows=i,this.spWidth=n,this.spHeight=o):(this.columns=t.columns,this.rows=t.rows,this.spWidth=t.spWidth,this.spHeight=t.spHeight,this.image=t.image),this.sprites=new Array(this.columns*this.rows),r=!0),r){var s=0,a=0;for(s=0;s<this.rows;s++)for(a=0;a<this.columns;a++)this.sprites[a+s*this.columns]=new Kt(this.image,a*this.spWidth,s*this.spHeight,this.spWidth,this.spHeight)}}return t.prototype.getAnimationByIndices=function(t,e,i){var n=this,o=e.map(function(t){return n.sprites[t]});return o=o.map(function(t){return t.clone()}),new yn(t,o,i)},t.prototype.getAnimationBetween=function(t,e,i,n){var o=this.sprites.slice(e,i);return o=o.map(function(t){return t.clone()}),new yn(t,o,n)},t.prototype.getAnimationForAll=function(t,e){var i=this.sprites.map(function(t){return t.clone()});return new yn(t,i,e)},t.prototype.getSprite=function(t){if(t>=0&&t<this.sprites.length)return this.sprites[t];throw new Error(\"Invalid index: \"+t)},t.prototype.getAnimationByCoords=function(t,e,i){for(var n=0,o=0,r=new Array(e.length),s=0;s<e.length;s++){var a=e[s];a.image=a.image||this.image,n=Math.max(n,a.drawWidth),o=Math.max(o,a.drawHeight),r[s]=new Kt(a)}var h=new yn(t,r,i);return h.drawWidth=n,h.drawHeight=o,h},t}())),wn=function(t){function e(e,i,n,o,r,s,a){return t.call(this,e,i,n,o,r,s,a)||this}return mn(e,t),e}(Vt(function(t){function e(e,i,n,o,r,s,a){var h=t.call(this,e instanceof Zt?{image:e,spWidth:s,spHeight:a,rows:r,columns:o}:e)||this;return h._currentColor=Pt.Black.clone(),h._currentOpacity=1,h._sprites={},h._textShadowOn=!1,h._textShadowDirty=!0,h._textShadowColor=Pt.Black.clone(),h._textShadowSprites={},h._shadowOffsetX=5,h._shadowOffsetY=5,!e||e instanceof Zt||(i=e.alphabet,n=e.caseInsensitive),h._alphabet=i,h._caseInsensitive=n,h._sprites=h.getTextSprites(),h}return mn(e,t),e.prototype.getTextSprites=function(){for(var t={},e=0;e<this._alphabet.length;e++){var i=this._alphabet[e];this._caseInsensitive&&(i=i.toLowerCase()),t[i]=this.sprites[e].clone()}return t},e.prototype.setTextShadow=function(t,e,i){for(var n in this._textShadowOn=!0,this._shadowOffsetX=t,this._shadowOffsetY=e,this._textShadowColor=i.clone(),this._textShadowDirty=!0,this._sprites)this._textShadowSprites[n]=this._sprites[n].clone()},e.prototype.useTextShadow=function(t){this._textShadowOn=t,t&&this.setTextShadow(5,5,this._textShadowColor)},e.prototype.draw=function(t,e,i,n,o){if(o=this._parseOptions(o),this._currentColor.toString()!==o.color.toString()||this._currentOpacity!==o.opacity)for(var r in this._currentOpacity=o.opacity,this._currentColor=o.color,this._sprites)this._sprites[r].clearEffects(),this._sprites[r].fill(o.color),this._sprites[r].opacity(o.opacity);if(this._textShadowOn&&this._textShadowDirty&&this._textShadowColor){for(var s in this._textShadowSprites)this._textShadowSprites[s].clearEffects(),this._textShadowSprites[s].addEffect(new qt(this._textShadowColor.clone()));this._textShadowDirty=!1}var a=this.sprites[0],h=a.drawHeight,c=o.fontSize/h,u=e.length*a.drawWidth*c+e.length*o.letterSpacing,l=i;o.textAlign===ci.Left||o.textAlign===ci.Start?l=i:o.textAlign===ci.Right||o.textAlign===ci.End?l=i-u:o.textAlign===ci.Center&&(l=i-u/2);var p=n-h*c;o.baseAlign===ui.Top||o.baseAlign===ui.Hanging?p=n:o.baseAlign===ui.Ideographic||o.baseAlign===ui.Bottom||o.baseAlign===ui.Alphabetic?p=n-h*c:o.baseAlign===ui.Middle&&(p=n-h*c/2);for(var d=0;d<e.length;d++){var f=e[d];this._caseInsensitive&&(f=f.toLowerCase());try{this._textShadowOn&&(this._textShadowSprites[f].scale.x=c,this._textShadowSprites[f].scale.y=c,this._textShadowSprites[f].draw(t,l+this._shadowOffsetX,p+this._shadowOffsetY));var _=this._sprites[f];_.scale.x=c,_.scale.y=c,_.draw(t,l,p),l+=_.drawWidth+o.letterSpacing}catch(t){Ot.getInstance().error(\"SpriteFont Error drawing char \"+f)}}},e.prototype._parseOptions=function(t){return{fontSize:t.fontSize||10,letterSpacing:t.letterSpacing||0,color:t.color||Pt.Black.clone(),textAlign:void 0===typeof t.textAlign?ci.Left:t.textAlign,baseAlign:void 0===typeof t.baseAlign?ui.Bottom:t.baseAlign,maxWidth:t.maxWidth||-1,opacity:t.opacity||0}},e}(bn))),xn=function(){function t(){}return t.type={any:\"\",blob:\"blob\",json:\"json\",text:\"text\",document:\"document\",arraybuffer:\"arraybuffer\"},t}();function Pn(t,e,i){return e+t*(i-e)}function Sn(t){return t*t*t*(t*(6*t-15)+10)}var An,En=function(){function t(t){this._perm=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],this._p=new Uint8Array(512),this._defaultPerlinOptions={octaves:1,frequency:1,amplitude:1,persistance:.5},t=_({},this._defaultPerlinOptions,t),this.persistance=t.persistance,this.amplitude=t.amplitude,this.frequency=t.frequency,this.octaves=t.octaves,t.seed?this._random=new d(t.seed):this._random=new d,this._perm=this._random.shuffle(this._perm);for(var e=0;e<512;e++)this._p[e]=255&this._perm[e%256]}return t.prototype.noise=function(){for(var t=this.amplitude,e=this.frequency,i=0,n=0,o=0;o<this.octaves;o++){switch(arguments.length){case 1:i+=this._noise1d(arguments[0]*e)*t;break;case 2:i+=this._noise2d(arguments[0]*e,arguments[1]*e)*t;break;case 3:i+=this._noise3d(arguments[0]*e,arguments[1]*e,arguments[2]*e)*t;break;default:throw new Error(\"Invalid arguments for perlin noise\")}n+=t,t*=this.persistance,e*=2}return i/n},t.prototype.sequence=function(t,e){e||(e=1/t);for(var i=new Array(t),n=0;n<t;n++)i[n]=this.noise(n*e);return i},t.prototype.grid=function(t,e,i){i||(i=1/Math.min(t,e));for(var n=new Array(t*e),o=0;o<e;o++)for(var r=0;r<t;r++)n[r+o*t]=this.noise(r*i,o*i);return n},t.prototype._gradient3d=function(t,e,i,n){var o=15&t,r=o<8?e:i,s=o<4?i:12===o||14===o?e:n;return(0==(1&o)?r:-r)+(0==(2&o)?s:-s)},t.prototype._gradient2d=function(t,e,i){var n=0==(1&t)?e:i;return 0==(2&t)?-n:n},t.prototype._gradient1d=function(t,e){return 0==(1&t)?-e:e},t.prototype._noise1d=function(t){var e=255&Math.floor(t);return(Pn(Sn(t-=Math.floor(t)),this._gradient1d(this._p[e],t),this._gradient1d(this._p[e+1],t-1))+1)/2},t.prototype._noise2d=function(t,e){var i=255&Math.floor(t),n=255&Math.floor(e);t-=Math.floor(t),e-=Math.floor(e);var o=Sn(t),r=Sn(e),s=this._p[i]+n,a=this._p[i+1]+n;return(Pn(r,Pn(o,this._gradient2d(this._p[s],t,e),this._gradient2d(this._p[a],t-1,e)),Pn(o,this._gradient2d(this._p[s+1],t,e-1),this._gradient2d(this._p[a+1],t-1,e-1)))+1)/2},t.prototype._noise3d=function(t,e,i){var n=255&Math.floor(t),o=255&Math.floor(e),r=255&Math.floor(i);t-=Math.floor(t),e-=Math.floor(e),i-=Math.floor(i);var s=Sn(t),a=Sn(e),h=Sn(i),c=this._p[n]+o,u=this._p[n+1]+o,l=this._p[c]+r,p=this._p[u]+r,d=this._p[c+1]+r,f=this._p[u+1]+r;return(Pn(h,Pn(a,Pn(s,this._gradient3d(this._p[l],t,e,i),this._gradient3d(this._p[p],t-1,e,i)),Pn(s,this._gradient3d(this._p[d],t,e-1,i),this._gradient3d(this._p[f],t-1,e-1,i))),Pn(a,Pn(s,this._gradient3d(this._p[l+1],t,e,i-1),this._gradient3d(this._p[p+1],t-1,e,i-1)),Pn(s,this._gradient3d(this._p[d+1],t,e-1,i-1),this._gradient3d(this._p[f+1],t-1,e-1,i-1))))+1)/2},t}(),Cn=function(){function t(t,e){this.generator=t,this.colorFcn=e,e||(this.colorFcn=function(t){return t<125?Pt.Black:Pt.White})}return t.prototype.image=function(t,e){var i=document.createElement(\"img\"),n=document.createElement(\"canvas\");n.width=t,n.height=e;var o=n.getContext(\"2d\");return this.draw(o,0,0,t,e),i.src=n.toDataURL(),i},t.prototype.draw=function(t,e,i,n,o){for(var r=this.generator.grid(n,o),s=t.getImageData(e,i,n,o),a=0;a<o;a++)for(var h=0;h<n;h++){var c=r[h+n*a],u=255&Math.floor(255*c),l=4*(h+a*s.width),p=this.colorFcn(u);s.data[l]=p.r,s.data[l+1]=p.g,s.data[l+2]=p.b,s.data[l+3]=Math.floor(255*p.a)}t.putImageData(s,e,i)},t}();!function(t){t[t.Protanope=0]=\"Protanope\",t[t.Deuteranope=1]=\"Deuteranope\",t[t.Tritanope=2]=\"Tritanope\"}(An||(An={}));var Tn=function(){function t(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=An.Protanope),this.engine=t,this.simulate=e,this.colorMode=i,this._vertexShader=\"attribute vec2 a_position;attribute vec2 a_texCoord;uniform vec2 u_resolution;varying vec2 v_texCoord;void main() {vec2 zeroToOne = a_position / u_resolution;vec2 zeroToTwo = zeroToOne * 2.0;vec2 clipSpace = zeroToTwo - 1.0;gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);v_texCoord = a_texCoord;}\",this._fragmentShader=\"precision mediump float;uniform sampler2D u_image;varying vec2 v_texCoord;void main() {vec4 o =  texture2D(u_image, v_texCoord);float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);//MODE CODE//vec4 error;error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);error.a = 1.0;vec4 diff = o - error;vec4 correction;correction.r = 0.0;correction.g =  (diff.r * 0.7) + (diff.g * 1.0);correction.b =  (diff.r * 0.7) + (diff.b * 1.0);correction = o + correction;correction.a = o.a;//SIMULATE//}\",this._internalCanvas=document.createElement(\"canvas\"),this._internalCanvas.width=t.drawWidth,this._internalCanvas.height=t.drawHeight,this._gl=this._internalCanvas.getContext(\"webgl\",{preserveDrawingBuffer:!0}),this._program=this._gl.createProgram();var n=this._getShader(\"Fragment\",this._getFragmentShaderByMode(i)),o=this._getShader(\"Vertex\",this._vertexShader);this._gl.attachShader(this._program,o),this._gl.attachShader(this._program,n),this._gl.linkProgram(this._program),this._gl.getProgramParameter(this._program,this._gl.LINK_STATUS)||Ot.getInstance().error(\"Unable to link shader program!\"),this._gl.useProgram(this._program)}return t.prototype._getFragmentShaderByMode=function(t){var e=\"\";return t===An.Protanope?e=\"float l = 0.0 * L + 2.02344 * M + -2.52581 * S;float m = 0.0 * L + 1.0 * M + 0.0 * S;float s = 0.0 * L + 0.0 * M + 1.0 * S;\":t===An.Deuteranope?e=\"float l = 1.0 * L + 0.0 * M + 0.0 * S;float m = 0.494207 * L + 0.0 * M + 1.24827 * S;float s = 0.0 * L + 0.0 * M + 1.0 * S;\":t===An.Tritanope&&(e=\"float l = 1.0 * L + 0.0 * M + 0.0 * S;float m = 0.0 * L + 1.0 * M + 0.0 * S;float s = -0.395913 * L + 0.801109 * M + 0.0 * S;\"),this.simulate?this._fragmentShader=this._fragmentShader.replace(\"//SIMULATE//\",\"gl_FragColor = error.rgba;\"):this._fragmentShader=this._fragmentShader.replace(\"//SIMULATE//\",\"gl_FragColor = correction.rgba;\"),this._fragmentShader.replace(\"//MODE CODE//\",e)},t.prototype._setRectangle=function(t,e,i,n){var o=t,r=t+i,s=e,a=e+n;this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array([o,s,r,s,o,a,o,a,r,s,r,a]),this._gl.STATIC_DRAW)},t.prototype._getShader=function(t,e){var i;return\"Fragment\"===t?i=this._gl.createShader(this._gl.FRAGMENT_SHADER):\"Vertex\"===t?i=this._gl.createShader(this._gl.VERTEX_SHADER):Ot.getInstance().error(\"Error unknown shader type\",t),this._gl.shaderSource(i,e),this._gl.compileShader(i),this._gl.getShaderParameter(i,this._gl.COMPILE_STATUS)?i:(Ot.getInstance().error(\"Unable to compile shader!\",this._gl.getShaderInfoLog(i)),null)},t.prototype.process=function(t,e){var i=this._gl.getAttribLocation(this._program,\"a_position\"),n=this._gl.getAttribLocation(this._program,\"a_texCoord\"),o=this._gl.createBuffer();this._gl.bindBuffer(this._gl.ARRAY_BUFFER,o),this._gl.bufferData(this._gl.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),this._gl.STATIC_DRAW),this._gl.enableVertexAttribArray(n),this._gl.vertexAttribPointer(n,2,this._gl.FLOAT,!1,0,0);var r=this._gl.createTexture();this._gl.bindTexture(this._gl.TEXTURE_2D,r),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_S,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_WRAP_T,this._gl.CLAMP_TO_EDGE),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MIN_FILTER,this._gl.NEAREST),this._gl.texParameteri(this._gl.TEXTURE_2D,this._gl.TEXTURE_MAG_FILTER,this._gl.NEAREST),this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL,1),this._gl.texImage2D(this._gl.TEXTURE_2D,0,this._gl.RGBA,this._gl.RGBA,this._gl.UNSIGNED_BYTE,t);var s=this._gl.getUniformLocation(this._program,\"u_resolution\");this._gl.uniform2f(s,this._internalCanvas.width,this._internalCanvas.height);var a=this._gl.createBuffer();this._gl.bindBuffer(this._gl.ARRAY_BUFFER,a),this._gl.enableVertexAttribArray(i),this._gl.vertexAttribPointer(i,2,this._gl.FLOAT,!1,0,0),this._setRectangle(0,0,t.width,t.height),this._gl.drawArrays(this._gl.TRIANGLES,0,6);var h=new Uint8Array(t.width*t.height*4);this._gl.readPixels(0,0,t.width,t.height,this._gl.RGBA,this._gl.UNSIGNED_BYTE,h),t.data.set(h),e.putImageData(t,0,0)},t}(),Mn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),Dn=function(){function t(){}return t.create=function(t){return\"string\"==typeof t?new Bn(t):t instanceof AudioBuffer?new kn(t):new On(t)},t}(),On=function(){function t(t){this._src=t,this._volume=1,this._loop=!1,this._isPlaying=!1,this._isPaused=!1}return Object.defineProperty(t.prototype,\"loop\",{get:function(){return this._loop},set:function(t){this._loop=t,this._instance&&(this._instance.loop=t,this._wireUpOnEnded())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"volume\",{get:function(){return this._volume},set:function(t){this._volume=y(t,0,1)},enumerable:!0,configurable:!0}),t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.pause=function(){this._isPlaying&&(this._isPaused=!0,this._isPlaying=!1)},t.prototype.stop=function(){this._isPlaying&&(this._isPlaying=!1,this._isPaused=!1)},t.prototype.play=function(){return this._isPaused&&this._resumePlayBack(),this._isPlaying||this._startPlayBack(),this._playingPromise},t.prototype._startPlayBack=function(){this._isPlaying=!0,this._isPaused=!1,this._playingPromise=new p},t.prototype._resumePlayBack=function(){this._isPaused&&(this._isPaused=!1,this._isPlaying=!0)},t.prototype._wireUpOnEnded=function(){var t=this;this.loop||(this._instance.onended=function(){return t._handleOnEnded()})},t.prototype._handleOnEnded=function(){},t}(),Bn=function(t){function e(e){var i=t.call(this,e)||this;return i._instance=new Audio(e),i}return Mn(e,t),Object.defineProperty(e.prototype,\"volume\",{get:function(){return this._volume},set:function(t){t=y(t,0,1),this._volume=t,this._instance.volume=t},enumerable:!0,configurable:!0}),e.prototype.pause=function(){this._isPlaying&&(this._instance.pause(),this._isPaused=!0,this._isPlaying=!1)},e.prototype.stop=function(){t.prototype.stop.call(this),this._instance.pause(),this._instance.currentTime=0,this._handleOnEnded()},e.prototype._startPlayBack=function(){t.prototype._startPlayBack.call(this),this._instance.load(),this._instance.loop=this.loop,this._instance.play(),this._wireUpOnEnded()},e.prototype._resumePlayBack=function(){t.prototype._resumePlayBack.call(this),this._instance.play(),this._wireUpOnEnded()},e.prototype._handleOnEnded=function(){this._isPlaying=!1,this._isPaused=!1,this._playingPromise.resolve(!0)},e}(On),kn=function(t){function e(e){var i=t.call(this,e)||this;return i._audioContext=He.create(),i._volumeNode=i._audioContext.createGain(),i._currentOffset=0,i._createNewBufferSource(),i}return Mn(e,t),Object.defineProperty(e.prototype,\"volume\",{get:function(){return this._volume},set:function(t){t=y(t,0,1),this._volume=t,this._volumeNode.gain.setTargetAtTime?this._volumeNode.gain.setTargetAtTime(t,this._audioContext.currentTime,.1):this._volumeNode.gain.value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"_playbackRate\",{get:function(){return this._instance?1/(this._instance.playbackRate.value||1):null},enumerable:!0,configurable:!0}),e.prototype.pause=function(){t.prototype.pause.call(this),this._instance.stop(0),this._setPauseOffset()},e.prototype.stop=function(){t.prototype.stop.call(this),this._currentOffset=0,this._instance.stop(0),this._instance.onended||this._handleOnEnded()},e.prototype._startPlayBack=function(){t.prototype._startPlayBack.call(this),this._instance||this._createNewBufferSource(),this._rememberStartTime(),this._volumeNode.connect(this._audioContext.destination),this._instance.start(0,0),this._currentOffset=0,this._playingPromise=new p,this._wireUpOnEnded()},e.prototype._resumePlayBack=function(){t.prototype._resumePlayBack.call(this),this._instance.onended=null,this._createNewBufferSource();var e=this._playbackRate*this._src.duration,i=this._currentOffset%e;this._rememberStartTime(-1e3*i),this._instance.start(0,i),this._wireUpOnEnded()},e.prototype._handleOnEnded=function(){this._isPaused||(this._isPlaying=!1,this._playingPromise.resolve(!0))},e.prototype._rememberStartTime=function(t){this._startTime=(new Date).getTime()+(0|t)},e.prototype._setPauseOffset=function(){this._currentOffset=((new Date).getTime()-this._startTime)*this._playbackRate/1e3},e.prototype._createNewBufferSource=function(){this._instance=this._audioContext.createBufferSource(),this._instance.buffer=this._src,this._instance.loop=this.loop,this._instance.playbackRate.setValueAtTime(1,0),this._instance.connect(this._volumeNode)},e}(On);function Rn(t){try{var e=new Audio,i=t.match(/.*\\.([A-Za-z0-9]+)$/)[1];return!!e.canPlayType(\"audio/\"+i)}catch(t){return Ot.getInstance().warn(\"Cannot determine audio support, assuming no support for the Audio Tag\",t),!1}}var Fn=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),In=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=t.call(this,\"\",\"\")||this;n._loop=!1,n._volume=1,n._isPaused=!1,n._tracks=[],n._wasPlayingOnHidden=!1,n._processedData=new p,n._audioContext=He.create(),n._detectResponseType();for(var o=0,r=e;o<r.length;o++){var s=r[o];if(Rn(s)){n.path=s;break}}return n.path||(n.logger.warn(\"This browser does not support any of the audio files specified:\",e.join(\", \")),n.logger.warn(\"Attempting to use\",e[0]),n.path=e[0]),n}return Fn(e,t),Object.defineProperty(e.prototype,\"loop\",{get:function(){return this._loop},set:function(t){this._loop=t;for(var e=0,i=this._tracks;e<i.length;e++){i[e].loop=this._loop}this.logger.debug(\"Set loop for all instances of sound\",this.path,\"to\",this._loop)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"volume\",{get:function(){return this._volume},set:function(t){this._volume=t;for(var e=0,i=this._tracks;e<i.length;e++){i[e].volume=this._volume}this.emit(\"volumechange\",new un(this)),this.logger.debug(\"Set loop for all instances of sound\",this.path,\"to\",this._volume)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"instances\",{get:function(){return this._tracks},enumerable:!0,configurable:!0}),e.prototype.wireEngine=function(t){var e=this;t&&(this._engine=t,this._engine.on(\"hidden\",function(){t.pauseAudioWhenHidden&&e.isPlaying()&&(e._wasPlayingOnHidden=!0,e.pause())}),this._engine.on(\"visible\",function(){t.pauseAudioWhenHidden&&e._wasPlayingOnHidden&&(e.play(),e._wasPlayingOnHidden=!1)}))},e.prototype.instanceCount=function(){return this._tracks.length},e.prototype.isPlaying=function(){return this._tracks.some(function(t){return t.isPlaying()})},e.prototype.play=function(t){return this.isLoaded()?(this.volume=t||this.volume,this._isPaused?this._resumePlayback():this._startPlayback()):(this.logger.warn(\"Cannot start playing. Resource\",this.path,\"is not loaded yet\"),p.resolve(!0))},e.prototype.pause=function(){if(this.isPlaying()){for(var t=0,e=this._tracks;t<e.length;t++){e[t].pause()}this._isPaused=!0,this.emit(\"pause\",new un(this)),this.logger.debug(\"Paused all instances of sound\",this.path)}},e.prototype.stop=function(){if(this.isPlaying()){for(var t=0,e=this._tracks;t<e.length;t++){e[t].stop()}this.emit(\"stop\",new un(this)),this._isPaused=!1,this._tracks.length=0,this.logger.debug(\"Stopped all instances of sound\",this.path)}},e.prototype.setData=function(t){this.emit(\"emptied\",new un(this)),this.data=t,this._processedData=new p},e.prototype.processData=function(t){var e=this;return(t instanceof ArrayBuffer?this._processArrayBufferData(t):this._processBlobData(t)).then(function(t){return e._setProcessedData(t)})},e.prototype.getTrackId=function(t){return this._tracks.indexOf(t)},e.prototype._resumePlayback=function(){if(this._isPaused){for(var t=[],e=0,i=this._tracks;e<i.length;e++){var n=i[e];t.push(n.play())}return this._isPaused=!1,this.emit(\"resume\",new un(this)),this.logger.debug(\"Resuming paused instances for sound\",this.path,this._tracks),p.join(t)}return p.resolve(!0)},e.prototype._startPlayback=function(){var t=this,e=this._createNewTrack(),i=new p;return e.then(function(e){e.play().then(function(n){return t.emit(\"playbackend\",new un(t,e)),t._tracks.splice(t.getTrackId(e),1),i.resolve(n),n}),t.emit(\"playbackstart\",new un(t,e)),t.logger.debug(\"Playing new instance for sound\",t.path)}),i},e.prototype._processArrayBufferData=function(t){var e=this,i=new p;return this._audioContext.decodeAudioData(t,function(t){i.resolve(t)},function(){e.logger.error(\"Unable to decode  this browser may not fully support this format, or the file may be corrupt, if this is an mp3 try removing id3 tags and album art from the file.\"),i.resolve(void 0)}),i},e.prototype._processBlobData=function(e){return(new p).resolve(t.prototype.processData.call(this,e))},e.prototype._setProcessedData=function(t){this._processedData.resolve(t)},e.prototype._createNewTrack=function(){var t=this,e=new p;return 0!==this._processedData.state()&&this.processData(this.data),this._processedData.then(function(i){return e.resolve(t._getTrackInstance(i)),i},function(e){t.logger.error(e,\"Cannot create AudioInstance due to wrong processed data.\")}),e},e.prototype._getTrackInstance=function(t){var e=Dn.create(t);return e.loop=this.loop,e.volume=this.volume,this._tracks.push(e),e},e.prototype._detectResponseType=function(){window.AudioContext?this.responseType=xn.type.arraybuffer:this.responseType=xn.type.blob},e}(Ft),Ln=function(){function t(){}return t.prototype.update=function(t,e,i){var n=i/1e3,o=t.acc.clone();t.collisionType===xe.Active&&o.addEqual(W.acc),t.oldVel=t.vel,t.vel.addEqual(o.scale(n)),t.pos.addEqual(t.vel.scale(n)).addEqual(o.scale(.5*n*n)),t.rx+=t.torque*(1/t.moi)*n,t.rotation+=t.rx*n,t.scale.x+=t.sx*i/1e3,t.scale.y+=t.sy*i/1e3},t}();i.d(e,\"EX_VERSION\",function(){return Hn}),i.d(e,\"DisplayMode\",function(){return en}),i.d(e,\"ScrollPreventionMode\",function(){return nn}),i.d(e,\"Engine\",function(){return sn}),i.d(e,\"Actor\",function(){return De}),i.d(e,\"CollisionType\",function(){return xe}),i.d(e,\"Vector\",function(){return k}),i.d(e,\"Ray\",function(){return R}),i.d(e,\"Line\",function(){return F}),i.d(e,\"Projection\",function(){return I}),i.d(e,\"GlobalCoordinates\",function(){return L}),i.d(e,\"StrategyContainer\",function(){return ai}),i.d(e,\"Axis\",function(){return je}),i.d(e,\"LockCameraToActorStrategy\",function(){return pi}),i.d(e,\"LockCameraToActorAxisStrategy\",function(){return di}),i.d(e,\"ElasticToActorStrategy\",function(){return fi}),i.d(e,\"RadiusAroundActorStrategy\",function(){return _i}),i.d(e,\"BaseCamera\",function(){return gi}),i.d(e,\"Class\",function(){return xt}),i.d(e,\"Configurable\",function(){return Vt}),i.d(e,\"Debug\",function(){return Ei}),i.d(e,\"FrameStats\",function(){return Ci}),i.d(e,\"PhysicsStats\",function(){return Ti}),i.d(e,\"EventDispatcher\",function(){return wt}),i.d(e,\"MediaEvent\",function(){return cn}),i.d(e,\"NativeSoundEvent\",function(){return un}),i.d(e,\"GameEvent\",function(){return U}),i.d(e,\"KillEvent\",function(){return N}),i.d(e,\"PreKillEvent\",function(){return q}),i.d(e,\"PostKillEvent\",function(){return X}),i.d(e,\"GameStartEvent\",function(){return V}),i.d(e,\"GameStopEvent\",function(){return G}),i.d(e,\"PreDrawEvent\",function(){return Y}),i.d(e,\"PostDrawEvent\",function(){return K}),i.d(e,\"PreDebugDrawEvent\",function(){return Q}),i.d(e,\"PostDebugDrawEvent\",function(){return Z}),i.d(e,\"PreUpdateEvent\",function(){return J}),i.d(e,\"PostUpdateEvent\",function(){return $}),i.d(e,\"PreFrameEvent\",function(){return tt}),i.d(e,\"PostFrameEvent\",function(){return et}),i.d(e,\"GamepadConnectEvent\",function(){return it}),i.d(e,\"GamepadDisconnectEvent\",function(){return nt}),i.d(e,\"GamepadButtonEvent\",function(){return ot}),i.d(e,\"GamepadAxisEvent\",function(){return rt}),i.d(e,\"SubscribeEvent\",function(){return st}),i.d(e,\"UnsubscribeEvent\",function(){return at}),i.d(e,\"VisibleEvent\",function(){return ht}),i.d(e,\"HiddenEvent\",function(){return ct}),i.d(e,\"PreCollisionEvent\",function(){return ut}),i.d(e,\"PostCollisionEvent\",function(){return lt}),i.d(e,\"CollisionStartEvent\",function(){return pt}),i.d(e,\"CollisionEndEvent\",function(){return dt}),i.d(e,\"InitializeEvent\",function(){return ft}),i.d(e,\"ActivateEvent\",function(){return _t}),i.d(e,\"DeactivateEvent\",function(){return gt}),i.d(e,\"ExitViewPortEvent\",function(){return yt}),i.d(e,\"EnterViewPortEvent\",function(){return vt}),i.d(e,\"EnterTriggerEvent\",function(){return mt}),i.d(e,\"ExitTriggerEvent\",function(){return bt}),i.d(e,\"Group\",function(){return ri}),i.d(e,\"Label\",function(){return vi}),i.d(e,\"FontStyle\",function(){return li}),i.d(e,\"FontUnit\",function(){return hi}),i.d(e,\"TextAlign\",function(){return ci}),i.d(e,\"BaseAlign\",function(){return ui}),i.d(e,\"Loader\",function(){return Ye}),i.d(e,\"PauseAfterLoader\",function(){return Ke}),i.d(e,\"Particle\",function(){return pn}),i.d(e,\"ParticleEmitter\",function(){return dn}),i.d(e,\"EmitterType\",function(){return rn}),i.d(e,\"CollisionResolutionStrategy\",function(){return M}),i.d(e,\"BroadphaseStrategy\",function(){return D}),i.d(e,\"Integrator\",function(){return O}),i.d(e,\"Physics\",function(){return W}),i.d(e,\"PromiseState\",function(){return c}),i.d(e,\"Promise\",function(){return p}),i.d(e,\"Scene\",function(){return Ai}),i.d(e,\"TileMap\",function(){return Fe}),i.d(e,\"Cell\",function(){return Le}),i.d(e,\"TileSprite\",function(){return Ie}),i.d(e,\"Timer\",function(){return ke}),i.d(e,\"Trigger\",function(){return wi}),i.d(e,\"UIActor\",function(){return Be}),i.d(e,\"Actions\",function(){return r}),i.d(e,\"Internal\",function(){return fn}),i.d(e,\"ActionContext\",function(){return ge}),i.d(e,\"RotationType\",function(){return Gt}),i.d(e,\"Body\",function(){return Se}),i.d(e,\"BoundingBox\",function(){return Dt}),i.d(e,\"CircleArea\",function(){return Ct}),i.d(e,\"CollisionContact\",function(){return At}),i.d(e,\"CollisionJumpTable\",function(){return Et}),i.d(e,\"TreeNode\",function(){return Je}),i.d(e,\"DynamicTree\",function(){return $e}),i.d(e,\"DynamicTreeCollisionBroadphase\",function(){return ti}),i.d(e,\"EdgeArea\",function(){return Tt}),i.d(e,\"NaiveCollisionBroadphase\",function(){return _n}),i.d(e,\"Pair\",function(){return Pe}),i.d(e,\"PolygonArea\",function(){return Mt}),i.d(e,\"Side\",function(){return l}),i.d(e,\"Animation\",function(){return yn}),i.d(e,\"Sprite\",function(){return Kt}),i.d(e,\"SpriteSheet\",function(){return bn}),i.d(e,\"SpriteFont\",function(){return wn}),i.d(e,\"Effects\",function(){return o}),i.d(e,\"Color\",function(){return Pt}),i.d(e,\"Polygon\",function(){return vn}),i.d(e,\"ExResponse\",function(){return xn}),i.d(e,\"PerlinGenerator\",function(){return En}),i.d(e,\"PerlinDrawer2D\",function(){return Cn}),i.d(e,\"Random\",function(){return d}),i.d(e,\"ColorBlindness\",function(){return An}),i.d(e,\"ColorBlindCorrector\",function(){return Tn}),i.d(e,\"Resource\",function(){return Ft}),i.d(e,\"Texture\",function(){return Zt}),i.d(e,\"Sound\",function(){return In}),i.d(e,\"AudioContextFactory\",function(){return He}),i.d(e,\"AudioInstanceFactory\",function(){return Dn}),i.d(e,\"AudioInstance\",function(){return On}),i.d(e,\"AudioTagInstance\",function(){return Bn}),i.d(e,\"WebAudioInstance\",function(){return kn}),i.d(e,\"Events\",function(){return n}),i.d(e,\"Input\",function(){return a}),i.d(e,\"Traits\",function(){return h}),i.d(e,\"Util\",function(){return u}),i.d(e,\"obsolete\",function(){return We}),i.d(e,\"Detector\",function(){return Ze}),i.d(e,\"CullingBox\",function(){return Ae}),i.d(e,\"EasingFunctions\",function(){return _e}),i.d(e,\"LogLevel\",function(){return z}),i.d(e,\"Logger\",function(){return Ot}),i.d(e,\"ConsoleAppender\",function(){return Bt}),i.d(e,\"ScreenAppender\",function(){return kt}),i.d(e,\"SortedList\",function(){return ei}),i.d(e,\"BinaryTreeNode\",function(){return ii}),i.d(e,\"MockedElement\",function(){return ni});var Hn=\"0.19.1\"},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||\"\",n=t[3];if(!n)return i;if(e&&\"function\"==typeof btoa){var o=(s=n,\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,\"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+\" */\"),r=n.sources.map(function(t){return\"/*# sourceURL=\"+n.sourceRoot+t+\" */\"});return[i].concat(r).concat([o]).join(\"\\n\")}var s;return[i].join(\"\\n\")}(e,t);return e[2]?\"@media \"+e[2]+\"{\"+i+\"}\":i}).join(\"\")},e.i=function(t,i){\"string\"==typeof t&&(t=[[null,t,\"\"]]);for(var n={},o=0;o<this.length;o++){var r=this[o][0];\"number\"==typeof r&&(n[r]=!0)}for(o=0;o<t.length;o++){var s=t[o];\"number\"==typeof s[0]&&n[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]=\"(\"+s[2]+\") and (\"+i+\")\"),e.push(s))}},e}},function(t,e,i){(t.exports=i(1)(!1)).push([t.i,\"/* Buttons styles start */\\n\\nbutton#excalibur-play {\\n  display: inline-block;\\n  position: relative;\\n  border-radius: 6px;\\n  border: none;\\n  /*border: 3px solid;\\n    border-color: white;\\n    box-shadow: 0 0 10px #ccc;*/\\n  padding: 1rem 1.5rem 1rem 4rem;\\n  margin: 0;\\n  text-decoration: none;\\n  background: #00b233;\\n  color: #ffffff;\\n  font-family: sans-serif;\\n  font-size: 2rem;\\n  line-height: 1;\\n  cursor: pointer;\\n  text-align: center;\\n  transition: background 250ms ease-in-out, transform 150ms ease;\\n  -webkit-appearance: none;\\n  -moz-appearance: none;\\n\\n  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\\n  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\\n  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\\n  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\\n  animation: excalibur-button-fadein 200ms;\\n}\\n\\n/*\\nbutton#excalibur-play {\\n  display: none;\\n}*/\\n\\nbutton#excalibur-play:after {\\n  position: absolute;\\n  content: '';\\n  border: 8px solid;\\n  border-color: transparent transparent transparent white;\\n  left: 35px;\\n  top: 24px;\\n  width: 0;\\n  height: 0;\\n}\\n\\nbutton#excalibur-play:before {\\n  position: absolute;\\n  content: '';\\n  border: 3px solid;\\n  left: 19px;\\n  top: 14px;\\n  border-radius: 20px;\\n  width: 30px;\\n  height: 30px;\\n}\\n\\nbutton#excalibur-play:hover,\\nbutton#excalibur-play:focus {\\n  background: #00982c;\\n}\\n\\nbutton#excalibur-play:focus {\\n  outline: 1px solid #fff;\\n  outline-offset: -4px;\\n}\\n\\nbutton#excalibur-play:active {\\n  transform: scale(0.99);\\n}\\n\\n@keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Firefox < 16 */\\n@-moz-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Safari, Chrome and Opera > 12.1 */\\n@-webkit-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Internet Explorer */\\n@-ms-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Opera < 12.1 */\\n@-o-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\",\"\"])},function(t,e,i){var n=i(2);t.exports=\"string\"==typeof n?n:n.toString()},function(t,e){t.exports=\"data:image/png;base64,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\"}])});\r\n//# sourceMappingURL=excalibur.min.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZXhjYWxpYnVyL2Rpc3QvZXhjYWxpYnVyLm1pbi5qcz9iNzJlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxLQUFpRCxvQkFBb0IsU0FBbUcsQ0FBQyxtQkFBbUIsbUJBQW1CLFNBQVMsY0FBYyw0QkFBNEIsWUFBWSxxQkFBcUIsMkRBQTJELHVDQUF1QyxxQ0FBcUMsb0NBQW9DLEVBQUUsaUJBQWlCLHNDQUFzQyxTQUFTLEVBQUUsaUJBQWlCLGlDQUFpQyxpQkFBaUIsWUFBWSxVQUFVLHNCQUFzQixtQkFBbUIsaURBQWlELGlCQUFpQixrQkFBa0IsYUFBYSxPQUFPLFNBQVMsNkJBQTZCLFNBQVMsK0JBQStCLFNBQVMsa0NBQWtDLFNBQVMsbUNBQW1DLFNBQVMsb0NBQW9DLFNBQVMsbUNBQW1DLFNBQVMsa0NBQWtDLFNBQVMsbUNBQW1DLFNBQVMsdUNBQXVDLFNBQVMsd0NBQXdDLFNBQVMsb0NBQW9DLFNBQVMscUNBQXFDLFNBQVMsbUNBQW1DLFVBQVUsb0NBQW9DLFVBQVUseUNBQXlDLFVBQVUsNENBQTRDLFVBQVUsd0NBQXdDLFVBQVUsc0NBQXNDLFVBQVUsb0NBQW9DLFVBQVUsc0NBQXNDLFVBQVUsa0NBQWtDLFVBQVUsaUNBQWlDLFVBQVUsdUNBQXVDLFVBQVUsd0NBQXdDLFVBQVUseUNBQXlDLFVBQVUsdUNBQXVDLFVBQVUscUNBQXFDLFVBQVUsbUNBQW1DLFVBQVUscUNBQXFDLFVBQVUsdUNBQXVDLFVBQVUsd0NBQXdDLFVBQVUsdUNBQXVDLFVBQVUsc0NBQXNDLFVBQVUsRUFBRSxTQUFTLDZCQUE2QixVQUFVLDRCQUE0QixVQUFVLDZCQUE2QixVQUFVLDhCQUE4QixVQUFVLDZCQUE2QixVQUFVLDRCQUE0QixVQUFVLDhCQUE4QixVQUFVLGdDQUFnQyxVQUFVLDBCQUEwQixVQUFVLEVBQUUsU0FBUywwQkFBMEIsVUFBVSw0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QUFVLDBCQUEwQixVQUFVLCtDQUErQyxVQUFVLG1EQUFtRCxVQUFVLDRDQUE0QyxVQUFVLCtDQUErQyxVQUFVLGdDQUFnQyxVQUFVLDJCQUEyQixVQUFVLGtDQUFrQyxVQUFVLDJCQUEyQixVQUFVLGdDQUFnQyxVQUFVLGtDQUFrQyxVQUFVLHFDQUFxQyxVQUFVLGdDQUFnQyxVQUFVLHNDQUFzQyxVQUFVLCtCQUErQixTQUFTLCtCQUErQixTQUFTLGtDQUFrQyxTQUFTLG1DQUFtQyxTQUFTLG9DQUFvQyxTQUFTLG1DQUFtQyxTQUFTLGtDQUFrQyxTQUFTLG1DQUFtQyxTQUFTLHVDQUF1QyxTQUFTLHdDQUF3QyxTQUFTLG9DQUFvQyxTQUFTLHFDQUFxQyxTQUFTLG1DQUFtQyxVQUFVLG9DQUFvQyxVQUFVLHlDQUF5QyxVQUFVLDRDQUE0QyxVQUFVLHdDQUF3QyxVQUFVLHNDQUFzQyxVQUFVLG9DQUFvQyxVQUFVLHNDQUFzQyxVQUFVLGtDQUFrQyxVQUFVLGlDQUFpQyxVQUFVLHVDQUF1QyxVQUFVLHdDQUF3QyxVQUFVLHlDQUF5QyxVQUFVLHVDQUF1QyxVQUFVLHFDQUFxQyxVQUFVLG1DQUFtQyxVQUFVLHFDQUFxQyxVQUFVLHVDQUF1QyxVQUFVLHdDQUF3QyxVQUFVLHVDQUF1QyxVQUFVLHNDQUFzQyxVQUFVLDJCQUEyQixVQUFVLDJCQUEyQixVQUFVLCtCQUErQixVQUFVLDhCQUE4QixVQUFVLCtCQUErQixVQUFVLCtCQUErQixVQUFVLDRCQUE0QixVQUFVLHNDQUFzQyxVQUFVLDhCQUE4QixVQUFVLHFDQUFxQyxVQUFVLGlDQUFpQyxVQUFVLGlEQUFpRCxTQUFTLHdDQUF3QyxTQUFTLGdDQUFnQyxTQUFTLDZCQUE2QixTQUFTLGtDQUFrQyxTQUFTLDZCQUE2QixTQUFTLDJCQUEyQixVQUFVLDZCQUE2QixVQUFVLDBCQUEwQixVQUFVLGdDQUFnQyxVQUFVLDJCQUEyQixVQUFVLDZCQUE2QixVQUFVLDZCQUE2QixVQUFVLDZCQUE2QixTQUFTLDhCQUE4QixVQUFVLG1DQUFtQyxVQUFVLGtDQUFrQyxVQUFVLDBCQUEwQixVQUFVLGlDQUFpQyxVQUFVLGdDQUFnQyxVQUFVLHNDQUFzQyxVQUFVLHdDQUF3QyxVQUFVLDhCQUE4QixVQUFVLGlDQUFpQyxVQUFVLG9EQUFvRCxVQUFVLDhCQUE4QixVQUFVLDhDQUE4QyxVQUFVLDBCQUEwQixVQUFVLGlDQUFpQyxVQUFVLDBCQUEwQixTQUFTLCtCQUErQixVQUFVLDRCQUE0QixVQUFVLGlDQUFpQyxVQUFVLGdDQUFnQyxVQUFVLDZCQUE2QixTQUFTLDJCQUEyQixVQUFVLDZCQUE2QixVQUFVLGdDQUFnQyxVQUFVLHFDQUFxQyxVQUFVLG9DQUFvQyxVQUFVLDRCQUE0QixTQUFTLG9DQUFvQyxVQUFVLHlDQUF5QyxVQUFVLDhCQUE4QixVQUFVLDZCQUE2QixVQUFVLDJCQUEyQixVQUFVLHlDQUF5QyxVQUFVLDBDQUEwQyxVQUFVLG1DQUFtQyxVQUFVLHNDQUFzQyxVQUFVLHNDQUFzQyxVQUFVLDRCQUE0QixTQUFTLDJCQUEyQixTQUFTLDRCQUE0QixTQUFTLDBCQUEwQixTQUFTLDhCQUE4QixVQUFVLDhCQUE4QixVQUFVLGdDQUFnQyxVQUFVLHFDQUFxQyxVQUFVLDhCQUE4QixTQUFTLDRCQUE0QixVQUFVLHFDQUFxQyxVQUFVLG9DQUFvQyxVQUFVLGdDQUFnQyxVQUFVLG9DQUFvQyxVQUFVLG1DQUFtQyxVQUFVLEVBQUUsZ0JBQWdCLGVBQWUsc0JBQXNCLFNBQVMsNkJBQTZCLDRCQUE0QixvQkFBb0Isc0JBQXNCLGVBQWUsK0JBQStCLHVEQUF1RCxjQUFjLGtHQUFrRyw0Q0FBNEMsRUFBRSwyQ0FBMkMsTUFBTSxxQkFBcUIsTUFBTSw2QkFBNkIsTUFBTSxJQUFJLFdBQVcsbUJBQW1CLHNDQUFzQyxZQUFZLEtBQUssY0FBYyxLQUFLLGlCQUFpQiw4QkFBOEIsUUFBUSxXQUFXLEtBQUssV0FBVyxnR0FBZ0csSUFBSSxpQkFBaUIscUZBQXFGLDBCQUEwQix1QkFBdUIsdUJBQXVCLGlCQUFpQix3QkFBd0IsMEJBQTBCLGdDQUFnQyxxQ0FBcUMsY0FBYywwQkFBMEIsd0JBQXdCLG1CQUFtQiw0QkFBNEIsb0JBQW9CLG1CQUFtQixvQkFBb0IsdUJBQXVCLG1FQUFtRSw2QkFBNkIsMEJBQTBCLHVEQUF1RCx3RkFBd0Ysb0VBQW9FLHdFQUF3RSxnRUFBZ0UsR0FBRywrQkFBK0Isa0JBQWtCLEdBQUcsbUNBQW1DLHVCQUF1QixnQkFBZ0Isc0JBQXNCLDREQUE0RCxlQUFlLGNBQWMsYUFBYSxjQUFjLEdBQUcsa0NBQWtDLHVCQUF1QixnQkFBZ0Isc0JBQXNCLGVBQWUsY0FBYyx3QkFBd0IsZ0JBQWdCLGlCQUFpQixHQUFHLCtEQUErRCx3QkFBd0IsR0FBRyxpQ0FBaUMsNEJBQTRCLHlCQUF5QixHQUFHLGtDQUFrQywyQkFBMkIsR0FBRyx3Q0FBd0MsVUFBVSxpQkFBaUIsS0FBSyxRQUFRLGlCQUFpQixLQUFLLEdBQUcsaUVBQWlFLFVBQVUsaUJBQWlCLEtBQUssUUFBUSxpQkFBaUIsS0FBSyxHQUFHLHVGQUF1RixVQUFVLGlCQUFpQixLQUFLLFFBQVEsaUJBQWlCLEtBQUssR0FBRyxxRUFBcUUsVUFBVSxpQkFBaUIsS0FBSyxRQUFRLGlCQUFpQixLQUFLLEdBQUcsK0RBQStELFVBQVUsaUJBQWlCLEtBQUssUUFBUSxpQkFBaUIsS0FBSyxHQUFHLFNBQVMsaUJBQWlCLFdBQVcsNENBQTRDLGVBQWUsMEJBQTBCLHlwSEFBeXBILEdBQUc7QUFDOTY2TyIsImZpbGUiOiIuL25vZGVfbW9kdWxlcy9leGNhbGlidXIvZGlzdC9leGNhbGlidXIubWluLmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohXHJcbiAqIGV4Y2FsaWJ1ciAtIDAuMTkuMSAtIDIwMTgtMTAtMjNcclxuICogaHR0cHM6Ly9naXRodWIuY29tL2V4Y2FsaWJ1cmpzL0V4Y2FsaWJ1clxyXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTggRXhjYWxpYnVyLmpzIDxodHRwczovL2dpdGh1Yi5jb20vZXhjYWxpYnVyanMvRXhjYWxpYnVyL2dyYXBocy9jb250cmlidXRvcnM+XHJcbiAqIExpY2Vuc2VkIEJTRC0yLUNsYXVzZVxyXG4gKiBAcHJlc2VydmVcclxuICovXHJcbiFmdW5jdGlvbih0LGUpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPWUoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtdLGUpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuZXg9ZSgpOnQuZXg9ZSgpfSh3aW5kb3csZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9e307ZnVuY3Rpb24gaShuKXtpZihlW25dKXJldHVybiBlW25dLmV4cG9ydHM7dmFyIG89ZVtuXT17aTpuLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIHRbbl0uY2FsbChvLmV4cG9ydHMsbyxvLmV4cG9ydHMsaSksby5sPSEwLG8uZXhwb3J0c31yZXR1cm4gaS5tPXQsaS5jPWUsaS5kPWZ1bmN0aW9uKHQsZSxuKXtpLm8odCxlKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7Y29uZmlndXJhYmxlOiExLGVudW1lcmFibGU6ITAsZ2V0Om59KX0saS5yPWZ1bmN0aW9uKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pfSxpLm49ZnVuY3Rpb24odCl7dmFyIGU9dCYmdC5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIHQuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gdH07cmV0dXJuIGkuZChlLFwiYVwiLGUpLGV9LGkubz1mdW5jdGlvbih0LGUpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxlKX0saS5wPVwiXCIsaShpLnM9MCl9KFtmdW5jdGlvbih0LGUsaSl7XCJ1c2Ugc3RyaWN0XCI7aS5yKGUpO3ZhciBuPXt9O2kuZChuLFwiR2FtZUV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gVX0pLGkuZChuLFwiS2lsbEV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gTn0pLGkuZChuLFwiUHJlS2lsbEV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gcX0pLGkuZChuLFwiUG9zdEtpbGxFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIFh9KSxpLmQobixcIkdhbWVTdGFydEV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gVn0pLGkuZChuLFwiR2FtZVN0b3BFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIEd9KSxpLmQobixcIlByZURyYXdFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIFl9KSxpLmQobixcIlBvc3REcmF3RXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBLfSksaS5kKG4sXCJQcmVEZWJ1Z0RyYXdFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIFF9KSxpLmQobixcIlBvc3REZWJ1Z0RyYXdFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIFp9KSxpLmQobixcIlByZVVwZGF0ZUV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gSn0pLGkuZChuLFwiUG9zdFVwZGF0ZUV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gJH0pLGkuZChuLFwiUHJlRnJhbWVFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHR0fSksaS5kKG4sXCJQb3N0RnJhbWVFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGV0fSksaS5kKG4sXCJHYW1lcGFkQ29ubmVjdEV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gaXR9KSxpLmQobixcIkdhbWVwYWREaXNjb25uZWN0RXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBudH0pLGkuZChuLFwiR2FtZXBhZEJ1dHRvbkV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gb3R9KSxpLmQobixcIkdhbWVwYWRBeGlzRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBydH0pLGkuZChuLFwiU3Vic2NyaWJlRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBzdH0pLGkuZChuLFwiVW5zdWJzY3JpYmVFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGF0fSksaS5kKG4sXCJWaXNpYmxlRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBodH0pLGkuZChuLFwiSGlkZGVuRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBjdH0pLGkuZChuLFwiUHJlQ29sbGlzaW9uRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiB1dH0pLGkuZChuLFwiUG9zdENvbGxpc2lvbkV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gbHR9KSxpLmQobixcIkNvbGxpc2lvblN0YXJ0RXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBwdH0pLGkuZChuLFwiQ29sbGlzaW9uRW5kRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBkdH0pLGkuZChuLFwiSW5pdGlhbGl6ZUV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gZnR9KSxpLmQobixcIkFjdGl2YXRlRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBfdH0pLGkuZChuLFwiRGVhY3RpdmF0ZUV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gZ3R9KSxpLmQobixcIkV4aXRWaWV3UG9ydEV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4geXR9KSxpLmQobixcIkVudGVyVmlld1BvcnRFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHZ0fSksaS5kKG4sXCJFbnRlclRyaWdnZXJFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIG10fSksaS5kKG4sXCJFeGl0VHJpZ2dlckV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gYnR9KTt2YXIgbz17fTtpLmQobyxcIkdyYXlzY2FsZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIEl0fSksaS5kKG8sXCJJbnZlcnRcIixmdW5jdGlvbigpe3JldHVybiBMdH0pLGkuZChvLFwiT3BhY2l0eVwiLGZ1bmN0aW9uKCl7cmV0dXJuIEh0fSksaS5kKG8sXCJDb2xvcml6ZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHp0fSksaS5kKG8sXCJMaWdodGVuXCIsZnVuY3Rpb24oKXtyZXR1cm4gV3R9KSxpLmQobyxcIkRhcmtlblwiLGZ1bmN0aW9uKCl7cmV0dXJuIGp0fSksaS5kKG8sXCJTYXR1cmF0ZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIFV0fSksaS5kKG8sXCJEZXNhdHVyYXRlXCIsZnVuY3Rpb24oKXtyZXR1cm4gTnR9KSxpLmQobyxcIkZpbGxcIixmdW5jdGlvbigpe3JldHVybiBxdH0pO3ZhciByPXt9O2kuZChyLFwiRWFzZVRvXCIsZnVuY3Rpb24oKXtyZXR1cm4gSnR9KSxpLmQocixcIk1vdmVUb1wiLGZ1bmN0aW9uKCl7cmV0dXJuICR0fSksaS5kKHIsXCJNb3ZlQnlcIixmdW5jdGlvbigpe3JldHVybiB0ZX0pLGkuZChyLFwiRm9sbG93XCIsZnVuY3Rpb24oKXtyZXR1cm4gZWV9KSxpLmQocixcIk1lZXRcIixmdW5jdGlvbigpe3JldHVybiBpZX0pLGkuZChyLFwiUm90YXRlVG9cIixmdW5jdGlvbigpe3JldHVybiBuZX0pLGkuZChyLFwiUm90YXRlQnlcIixmdW5jdGlvbigpe3JldHVybiBvZX0pLGkuZChyLFwiU2NhbGVUb1wiLGZ1bmN0aW9uKCl7cmV0dXJuIHJlfSksaS5kKHIsXCJTY2FsZUJ5XCIsZnVuY3Rpb24oKXtyZXR1cm4gc2V9KSxpLmQocixcIkRlbGF5XCIsZnVuY3Rpb24oKXtyZXR1cm4gYWV9KSxpLmQocixcIkJsaW5rXCIsZnVuY3Rpb24oKXtyZXR1cm4gaGV9KSxpLmQocixcIkZhZGVcIixmdW5jdGlvbigpe3JldHVybiBjZX0pLGkuZChyLFwiRGllXCIsZnVuY3Rpb24oKXtyZXR1cm4gdWV9KSxpLmQocixcIkNhbGxNZXRob2RcIixmdW5jdGlvbigpe3JldHVybiBsZX0pLGkuZChyLFwiUmVwZWF0XCIsZnVuY3Rpb24oKXtyZXR1cm4gcGV9KSxpLmQocixcIlJlcGVhdEZvcmV2ZXJcIixmdW5jdGlvbigpe3JldHVybiBkZX0pLGkuZChyLFwiQWN0aW9uUXVldWVcIixmdW5jdGlvbigpe3JldHVybiBmZX0pO3ZhciBzPXt9O2kuZChzLFwibGluZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHllfSksaS5kKHMsXCJwb2ludFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHZlfSksaS5kKHMsXCJ2ZWN0b3JcIixmdW5jdGlvbigpe3JldHVybiBtZX0pLGkuZChzLFwicm91bmRSZWN0XCIsZnVuY3Rpb24oKXtyZXR1cm4gYmV9KSxpLmQocyxcImNpcmNsZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHdlfSk7dmFyIGE9e307aS5kKGEsXCJHYW1lcGFkc1wiLGZ1bmN0aW9uKCl7cmV0dXJuICRpfSksaS5kKGEsXCJHYW1lcGFkXCIsZnVuY3Rpb24oKXtyZXR1cm4gdG59KSxpLmQoYSxcIkJ1dHRvbnNcIixmdW5jdGlvbigpe3JldHVybiBZaX0pLGkuZChhLFwiQXhlc1wiLGZ1bmN0aW9uKCl7cmV0dXJuIEtpfSksaS5kKGEsXCJQb2ludGVyVHlwZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIERpfSksaS5kKGEsXCJQb2ludGVyQnV0dG9uXCIsZnVuY3Rpb24oKXtyZXR1cm4gT2l9KSxpLmQoYSxcIldoZWVsRGVsdGFNb2RlXCIsZnVuY3Rpb24oKXtyZXR1cm4gQml9KSxpLmQoYSxcIlBvaW50ZXJTY29wZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIGtpfSksaS5kKGEsXCJQb2ludGVyRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBMaX0pLGkuZChhLFwiUG9pbnRlckV2ZW50RmFjdG9yeVwiLGZ1bmN0aW9uKCl7cmV0dXJuIEhpfSksaS5kKGEsXCJQb2ludGVyRHJhZ0V2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4geml9KSxpLmQoYSxcIlBvaW50ZXJVcEV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gV2l9KSxpLmQoYSxcIlBvaW50ZXJEb3duRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBqaX0pLGkuZChhLFwiUG9pbnRlck1vdmVFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIFVpfSksaS5kKGEsXCJQb2ludGVyRW50ZXJFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIE5pfSksaS5kKGEsXCJQb2ludGVyTGVhdmVFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHFpfSksaS5kKGEsXCJQb2ludGVyQ2FuY2VsRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBYaX0pLGkuZChhLFwiV2hlZWxFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIFZpfSksaS5kKGEsXCJQb2ludGVyc1wiLGZ1bmN0aW9uKCl7cmV0dXJuIFFpfSksaS5kKGEsXCJQb2ludGVyXCIsZnVuY3Rpb24oKXtyZXR1cm4gWml9KSxpLmQoYSxcIktleXNcIixmdW5jdGlvbigpe3JldHVybiBQaX0pLGkuZChhLFwiS2V5RXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBSaX0pLGkuZChhLFwiS2V5Ym9hcmRcIixmdW5jdGlvbigpe3JldHVybiBGaX0pO3ZhciBoPXt9O2kuZChoLFwiQ2FwdHVyZVBvaW50ZXJcIixmdW5jdGlvbigpe3JldHVybiBDZX0pLGkuZChoLFwiRXVsZXJNb3ZlbWVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIExufSksaS5kKGgsXCJPZmZzY3JlZW5DdWxsaW5nXCIsZnVuY3Rpb24oKXtyZXR1cm4gRWV9KSxpLmQoaCxcIlRpbGVNYXBDb2xsaXNpb25EZXRlY3Rpb25cIixmdW5jdGlvbigpe3JldHVybiBUZX0pO3ZhciBjLHU9e307aS5kKHUsXCJEcmF3VXRpbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHN9KSxpLmQodSxcIlR3b1BJXCIsZnVuY3Rpb24oKXtyZXR1cm4gZn0pLGkuZCh1LFwiZXh0ZW5kXCIsZnVuY3Rpb24oKXtyZXR1cm4gX30pLGkuZCh1LFwiYmFzZTY0RW5jb2RlXCIsZnVuY3Rpb24oKXtyZXR1cm4gZ30pLGkuZCh1LFwiY2xhbXBcIixmdW5jdGlvbigpe3JldHVybiB5fSksaS5kKHUsXCJyYW5kb21JblJhbmdlXCIsZnVuY3Rpb24oKXtyZXR1cm4gdn0pLGkuZCh1LFwicmFuZG9tSW50SW5SYW5nZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIG19KSxpLmQodSxcImNhbm9uaWNhbGl6ZUFuZ2xlXCIsZnVuY3Rpb24oKXtyZXR1cm4gYn0pLGkuZCh1LFwidG9EZWdyZWVzXCIsZnVuY3Rpb24oKXtyZXR1cm4gd30pLGkuZCh1LFwidG9SYWRpYW5zXCIsZnVuY3Rpb24oKXtyZXR1cm4geH0pLGkuZCh1LFwiZ2V0UG9zaXRpb25cIixmdW5jdGlvbigpe3JldHVybiBQfSksaS5kKHUsXCJhZGRJdGVtVG9BcnJheVwiLGZ1bmN0aW9uKCl7cmV0dXJuIFN9KSxpLmQodSxcInJlbW92ZUl0ZW1Gcm9tQXJyYXlcIixmdW5jdGlvbigpe3JldHVybiBBfSksaS5kKHUsXCJjb250YWluc1wiLGZ1bmN0aW9uKCl7cmV0dXJuIEV9KSxpLmQodSxcImdldE9wcG9zaXRlU2lkZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIEN9KSxpLmQodSxcImdldFNpZGVGcm9tVmVjdG9yXCIsZnVuY3Rpb24oKXtyZXR1cm4gVH0pLGkuZCh1LFwiQ29sbGVjdGlvblwiLGZ1bmN0aW9uKCl7cmV0dXJuIEJ9KSxmdW5jdGlvbih0KXt0W3QuUmVzb2x2ZWQ9MF09XCJSZXNvbHZlZFwiLHRbdC5SZWplY3RlZD0xXT1cIlJlamVjdGVkXCIsdFt0LlBlbmRpbmc9Ml09XCJQZW5kaW5nXCJ9KGN8fChjPXt9KSk7dmFyIGwscD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLl9zdGF0ZT1jLlBlbmRpbmcsdGhpcy5fc3VjY2Vzc0NhbGxiYWNrcz1bXSx0aGlzLl9yZWplY3RDYWxsYmFjaz1mdW5jdGlvbigpe319cmV0dXJuIHQucmVzb2x2ZT1mdW5jdGlvbihlKXtyZXR1cm4obmV3IHQpLnJlc29sdmUoZSl9LHQucmVqZWN0PWZ1bmN0aW9uKGUpe3JldHVybihuZXcgdCkucmVqZWN0KGUpfSx0LmpvaW49ZnVuY3Rpb24oKXt2YXIgZT1bXTtpZihhcmd1bWVudHMubGVuZ3RoPjAmJiFBcnJheS5pc0FycmF5KGFyZ3VtZW50c1swXSkpZm9yKHZhciBpPTA7aTxhcmd1bWVudHMubGVuZ3RoO2krKyllW2ktMF09YXJndW1lbnRzW2ldO2Vsc2UgMT09PWFyZ3VtZW50cy5sZW5ndGgmJkFycmF5LmlzQXJyYXkoYXJndW1lbnRzWzBdKSYmKGU9YXJndW1lbnRzWzBdKTt2YXIgbj1uZXcgdDtpZighZXx8IWUubGVuZ3RoKXJldHVybiBuLnJlc29sdmUoKTt2YXIgbz1lLmxlbmd0aCxyPTAscz0wLGE9W107cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbih0KXt0LnRoZW4oZnVuY3Rpb24oKXsocis9MSk9PT1vP24ucmVzb2x2ZSgpOnIrcythLmxlbmd0aD09PW8mJm4ucmVqZWN0KGEpfSxmdW5jdGlvbigpe3IrKHMrPTEpK2EubGVuZ3RoPT09byYmbi5yZWplY3QoYSl9KS5lcnJvcihmdW5jdGlvbih0KXthLnB1c2godCksYS5sZW5ndGgrcitzPT09byYmbi5yZWplY3QoYSl9KX0pLG59LHQucHJvdG90eXBlLnRoZW49ZnVuY3Rpb24odCxlKXtpZih0JiYodGhpcy5fc3VjY2Vzc0NhbGxiYWNrcy5wdXNoKHQpLHRoaXMuc3RhdGUoKT09PWMuUmVzb2x2ZWQpKXRyeXt0LmNhbGwodGhpcyx0aGlzLl92YWx1ZSl9Y2F0Y2godCl7dGhpcy5faGFuZGxlRXJyb3IodCl9aWYoZSYmKHRoaXMuX3JlamVjdENhbGxiYWNrPWUsdGhpcy5zdGF0ZSgpPT09Yy5SZWplY3RlZCkpdHJ5e2UuY2FsbCh0aGlzLHRoaXMuX3ZhbHVlKX1jYXRjaCh0KXt0aGlzLl9oYW5kbGVFcnJvcih0KX1yZXR1cm4gdGhpc30sdC5wcm90b3R5cGUuZXJyb3I9ZnVuY3Rpb24odCl7cmV0dXJuIHQmJih0aGlzLl9lcnJvckNhbGxiYWNrPXQpLHRoaXN9LHQucHJvdG90eXBlLnJlc29sdmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcztpZih0aGlzLl9zdGF0ZSE9PWMuUGVuZGluZyl0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgcmVzb2x2ZSBhIHByb21pc2UgdGhhdCBpcyBub3QgaW4gYSBwZW5kaW5nIHN0YXRlIVwiKTt0aGlzLl92YWx1ZT10O3RyeXt0aGlzLl9zdGF0ZT1jLlJlc29sdmVkLHRoaXMuX3N1Y2Nlc3NDYWxsYmFja3MuZm9yRWFjaChmdW5jdGlvbih0KXt0LmNhbGwoZSxlLl92YWx1ZSl9KX1jYXRjaCh0KXt0aGlzLl9oYW5kbGVFcnJvcih0KX1yZXR1cm4gdGhpc30sdC5wcm90b3R5cGUucmVqZWN0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuX3N0YXRlIT09Yy5QZW5kaW5nKXRocm93IG5ldyBFcnJvcihcIkNhbm5vdCByZWplY3QgYSBwcm9taXNlIHRoYXQgaXMgbm90IGluIGEgcGVuZGluZyBzdGF0ZSFcIik7dGhpcy5fdmFsdWU9dDt0cnl7dGhpcy5fc3RhdGU9Yy5SZWplY3RlZCx0aGlzLl9yZWplY3RDYWxsYmFjay5jYWxsKHRoaXMsdGhpcy5fdmFsdWUpfWNhdGNoKHQpe3RoaXMuX2hhbmRsZUVycm9yKHQpfXJldHVybiB0aGlzfSx0LnByb3RvdHlwZS5zdGF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZX0sdC5wcm90b3R5cGUuX2hhbmRsZUVycm9yPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9lcnJvckNhbGxiYWNrKXRocm93IHQ7dGhpcy5fZXJyb3JDYWxsYmFjay5jYWxsKHRoaXMsdCl9LHR9KCksZD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5zZWVkPXQsdGhpcy5fbG93ZXJNYXNrPTIxNDc0ODM2NDcsdGhpcy5fdXBwZXJNYXNrPTIxNDc0ODM2NDgsdGhpcy5fdz0zMix0aGlzLl9uPTYyNCx0aGlzLl9tPTM5Nyx0aGlzLl9hPTI1Njc0ODM2MTUsdGhpcy5fdT0xMSx0aGlzLl9zPTcsdGhpcy5fYj0yNjM2OTI4NjQwLHRoaXMuX3Q9MTUsdGhpcy5fYz00MDIyNzMwNzUyLHRoaXMuX2w9MTgsdGhpcy5fZj0xODEyNDMzMjUzLHRoaXMuX210PW5ldyBBcnJheSh0aGlzLl9uKSx0aGlzLl9tdFswXT0odHx8RGF0ZS5ub3coKSk+Pj4wO2Zvcih2YXIgZT0xO2U8dGhpcy5fbjtlKyspe3ZhciBpPXRoaXMuX210W2UtMV1edGhpcy5fbXRbZS0xXT4+PnRoaXMuX3ctMjt0aGlzLl9tdFtlXT0odGhpcy5fZiooKDQyOTQ5MDE3NjAmaSk+Pj4xNik8PDE2KSt0aGlzLl9mKig2NTUzNSZpKStlPj4+MH10aGlzLl9pbmRleD10aGlzLl9ufXJldHVybiB0LnByb3RvdHlwZS5fdHdpc3Q9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9WzAsdGhpcy5fYV0sZT0wLGk9MDtpPHRoaXMuX24tdGhpcy5fbTtpKyspZT10aGlzLl9tdFtpXSZ0aGlzLl91cHBlck1hc2t8dGhpcy5fbXRbaSsxXSZ0aGlzLl9sb3dlck1hc2ssdGhpcy5fbXRbaV09dGhpcy5fbXRbaSt0aGlzLl9tXV5lPj4+MV40Mjk0OTY3Mjk1JnRbMSZlXTtmb3IoO2k8dGhpcy5fbi0xO2krKyllPXRoaXMuX210W2ldJnRoaXMuX3VwcGVyTWFza3x0aGlzLl9tdFtpKzFdJnRoaXMuX2xvd2VyTWFzayx0aGlzLl9tdFtpXT10aGlzLl9tdFtpKyh0aGlzLl9tLXRoaXMuX24pXV5lPj4+MV40Mjk0OTY3Mjk1JnRbMSZlXTtlPXRoaXMuX210W3RoaXMuX24tMV0mdGhpcy5fdXBwZXJNYXNrfHRoaXMuX210WzBdJnRoaXMuX2xvd2VyTWFzayx0aGlzLl9tdFt0aGlzLl9uLTFdPXRoaXMuX210W3RoaXMuX20tMV1eZT4+PjFeNDI5NDk2NzI5NSZ0WzEmZV0sdGhpcy5faW5kZXg9MH0sdC5wcm90b3R5cGUubmV4dEludD1mdW5jdGlvbigpe3RoaXMuX2luZGV4Pj10aGlzLl9uJiZ0aGlzLl90d2lzdCgpO3ZhciB0PXRoaXMuX210W3RoaXMuX2luZGV4KytdO3JldHVybiB0Xj10Pj4+dGhpcy5fdSx0Xj10PDx0aGlzLl9zJnRoaXMuX2IsdF49dDw8dGhpcy5fdCZ0aGlzLl9jLCh0Xj10Pj4+dGhpcy5fbCk+Pj4wfSx0LnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubmV4dEludCgpKigxLzQyOTQ5NjcyOTYpfSx0LnByb3RvdHlwZS5mbG9hdGluZz1mdW5jdGlvbih0LGUpe3JldHVybihlLXQpKnRoaXMubmV4dCgpK3R9LHQucHJvdG90eXBlLmludGVnZXI9ZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5mbG9vcigoZS10KzEpKnRoaXMubmV4dCgpK3QpfSx0LnByb3RvdHlwZS5ib29sPWZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDA9PT10JiYodD0uNSksdGhpcy5uZXh0KCk8PXR9LHQucHJvdG90eXBlLnBpY2tPbmU9ZnVuY3Rpb24odCl7cmV0dXJuIHRbdGhpcy5pbnRlZ2VyKDAsdC5sZW5ndGgtMSldfSx0LnByb3RvdHlwZS5waWNrU2V0PWZ1bmN0aW9uKHQsZSxpKXtyZXR1cm4gdm9pZCAwPT09aSYmKGk9ITEpLGk/dGhpcy5fcGlja1NldFdpdGhEdXBsaWNhdGVzKHQsZSk6dGhpcy5fcGlja1NldFdpdGhvdXREdXBsaWNhdGVzKHQsZSl9LHQucHJvdG90eXBlLl9waWNrU2V0V2l0aG91dER1cGxpY2F0ZXM9ZnVuY3Rpb24odCxlKXtpZihlPnQubGVuZ3RofHxlPDApdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBudW1iZXIgb2YgZWxlbWVudHMgdG8gcGljaywgbXVzdCBwaWNrIGEgdmFsdWUgMCA8IG4gPD0gbGVuZ3RoXCIpO2lmKGU9PT10Lmxlbmd0aClyZXR1cm4gdDtmb3IodmFyIGk9bmV3IEFycmF5KGUpLG49MCxvPXQuc2xpY2UoMCk7bjxlOyl7dmFyIHI9dGhpcy5pbnRlZ2VyKDAsby5sZW5ndGgtMSk7aVtuKytdPW9bcl0sby5zcGxpY2UociwxKX1yZXR1cm4gaX0sdC5wcm90b3R5cGUuX3BpY2tTZXRXaXRoRHVwbGljYXRlcz1mdW5jdGlvbih0LGUpe2lmKGU8MCl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG51bWJlciBvZiBlbGVtZW50cyB0byBwaWNrLCBtdXN0IHBpY2sgYSB2YWx1ZSAwIDw9IG4gPCBNQVhfSU5UXCIpO2Zvcih2YXIgaT1uZXcgQXJyYXkoZSksbj0wO248ZTtuKyspaVtuXT10aGlzLnBpY2tPbmUodCk7cmV0dXJuIGl9LHQucHJvdG90eXBlLnNodWZmbGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQuc2xpY2UoMCksaT1udWxsLG49MDtuPGUubGVuZ3RoLTI7bisrKXt2YXIgbz10aGlzLmludGVnZXIobixlLmxlbmd0aC0xKTtpPWVbbl0sZVtuXT1lW29dLGVbb109aX1yZXR1cm4gZX0sdC5wcm90b3R5cGUucmFuZ2U9ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgbj1uZXcgQXJyYXkodCksbz0wO288dDtvKyspbltvXT10aGlzLmludGVnZXIoZSxpKTtyZXR1cm4gbn0sdC5wcm90b3R5cGUuZDQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnRlZ2VyKDEsNCl9LHQucHJvdG90eXBlLmQ2PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW50ZWdlcigxLDYpfSx0LnByb3RvdHlwZS5kOD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmludGVnZXIoMSw4KX0sdC5wcm90b3R5cGUuZDEwPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW50ZWdlcigxLDEwKX0sdC5wcm90b3R5cGUuZDEyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW50ZWdlcigxLDEyKX0sdC5wcm90b3R5cGUuZDIwPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaW50ZWdlcigxLDIwKX0sdH0oKTshZnVuY3Rpb24odCl7dFt0Lk5vbmU9MF09XCJOb25lXCIsdFt0LlRvcD0xXT1cIlRvcFwiLHRbdC5Cb3R0b209Ml09XCJCb3R0b21cIix0W3QuTGVmdD0zXT1cIkxlZnRcIix0W3QuUmlnaHQ9NF09XCJSaWdodFwifShsfHwobD17fSkpO3ZhciBmPTIqTWF0aC5QSTtmdW5jdGlvbiBfKCl7dmFyIHQ9e30sZT0hMSxpPTAsbj1hcmd1bWVudHMubGVuZ3RoO1wiW29iamVjdCBCb29sZWFuXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZ3VtZW50c1swXSkmJihlPWFyZ3VtZW50c1swXSxpKyspO3ZhciBvPVwiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5hc3NpZ24scj1udWxsO2ZvcihyPW8/T2JqZWN0LmFzc2lnbjpmdW5jdGlvbihpKXtmb3IodmFyIG4gaW4gaSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoaSxuKSYmKGUmJlwiW29iamVjdCBPYmplY3RdXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaVtuXSk/dFtuXT1fKCEwLHRbbl0saVtuXSk6dFtuXT1pW25dKX07aTxuO2krKyl7dmFyIHM9YXJndW1lbnRzW2ldO28/cih0LHMpOnIocyl9cmV0dXJuIHR9ZnVuY3Rpb24gZyh0KXtmb3IodmFyIGU9XCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVwiLGk9XCJcIixuPTA7bjx0Lmxlbmd0aDspe3ZhciBvLHIscz0yNTUmdC5jaGFyQ29kZUF0KG4rKyksYT0yNTUmdC5jaGFyQ29kZUF0KG4rKyksaD0yNTUmdC5jaGFyQ29kZUF0KG4rKyksYz1zPj4yLHU9KDMmcyk8PDR8YT4+NDtpc05hTihhKT9vPXI9NjQ6KG89KDE1JmEpPDwyfGg+PjYscj1pc05hTihoKT82NDo2MyZoKSxpKz1lLmNoYXJBdChjKStlLmNoYXJBdCh1KStlLmNoYXJBdChvKStlLmNoYXJBdChyKX1yZXR1cm4gaX1mdW5jdGlvbiB5KHQsZSxpKXtyZXR1cm4gTWF0aC5taW4oTWF0aC5tYXgoZSx0KSxpKX1mdW5jdGlvbiB2KHQsZSxpKXtyZXR1cm4gdm9pZCAwPT09aSYmKGk9bmV3IGQpLGk/aS5mbG9hdGluZyh0LGUpOnQrTWF0aC5yYW5kb20oKSooZS10KX1mdW5jdGlvbiBtKHQsZSxpKXtyZXR1cm4gdm9pZCAwPT09aSYmKGk9bmV3IGQpLGk/aS5pbnRlZ2VyKHQsZSk6TWF0aC5yb3VuZCh2KHQsZSkpfWZ1bmN0aW9uIGIodCl7dmFyIGU9dDtpZih0PmYpZm9yKDtlPmY7KWUtPWY7aWYodDwwKWZvcig7ZTwwOyllKz1mO3JldHVybiBlfWZ1bmN0aW9uIHcodCl7cmV0dXJuIDE4MC9NYXRoLlBJKnR9ZnVuY3Rpb24geCh0KXtyZXR1cm4gdC8xODAqTWF0aC5QSX1mdW5jdGlvbiBQKHQpe3ZhciBlPTAsaT0wLG49ZnVuY3Rpb24odCl7ZSs9dC5vZmZzZXRMZWZ0LHQub2Zmc2V0UGFyZW50JiZuKHQub2Zmc2V0UGFyZW50KX0sbz1mdW5jdGlvbih0KXtpKz10Lm9mZnNldFRvcCx0Lm9mZnNldFBhcmVudCYmbyh0Lm9mZnNldFBhcmVudCl9O3JldHVybiBuKHQpLG8odCksbmV3IGsoZSxpKX1mdW5jdGlvbiBTKHQsZSl7cmV0dXJuLTE9PT1lLmluZGV4T2YodCkmJihlLnB1c2godCksITApfWZ1bmN0aW9uIEEodCxlKXt2YXIgaTtyZXR1cm4oaT1lLmluZGV4T2YodCkpPi0xJiYoZS5zcGxpY2UoaSwxKSwhMCl9ZnVuY3Rpb24gRSh0LGUpe2Zvcih2YXIgaT0wO2k8dC5sZW5ndGg7aSsrKWlmKHRbaV09PT1lKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIEModCl7cmV0dXJuIHQ9PT1sLlRvcD9sLkJvdHRvbTp0PT09bC5Cb3R0b20/bC5Ub3A6dD09PWwuTGVmdD9sLlJpZ2h0OnQ9PT1sLlJpZ2h0P2wuTGVmdDpsLk5vbmV9ZnVuY3Rpb24gVCh0KXtmb3IodmFyIGU9W2suTGVmdCxrLlJpZ2h0LGsuVXAsay5Eb3duXSxpPVtsLkxlZnQsbC5SaWdodCxsLlRvcCxsLkJvdHRvbV0sbj0tTnVtYmVyLk1BWF9WQUxVRSxvPS0xLHI9MDtyPGUubGVuZ3RoO3IrKyllW3JdLmRvdCh0KT5uJiYobj1lW3JdLmRvdCh0KSxvPXIpO3JldHVybiBpW29dfXZhciBNLEQsTyxCPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdChlKXt2b2lkIDA9PT1lJiYoZT10LkRlZmF1bHRTaXplKSx0aGlzLl9pbnRlcm5hbEFycmF5PW51bGwsdGhpcy5fZW5kUG9pbnRlcj0wLHRoaXMuX2ludGVybmFsQXJyYXk9bmV3IEFycmF5KGUpfXJldHVybiB0LnByb3RvdHlwZS5fcmVzaXplPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTIqdGhpcy5faW50ZXJuYWxBcnJheS5sZW5ndGgsZT1uZXcgQXJyYXkodCksaT10aGlzLmNvdW50KCksbj0wO248aTtuKyspZVtuXT10aGlzLl9pbnRlcm5hbEFycmF5W25dO2RlbGV0ZSB0aGlzLl9pbnRlcm5hbEFycmF5LHRoaXMuX2ludGVybmFsQXJyYXk9ZX0sdC5wcm90b3R5cGUucHVzaD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fZW5kUG9pbnRlcj09PXRoaXMuX2ludGVybmFsQXJyYXkubGVuZ3RoJiZ0aGlzLl9yZXNpemUoKSx0aGlzLl9pbnRlcm5hbEFycmF5W3RoaXMuX2VuZFBvaW50ZXIrK109dH0sdC5wcm90b3R5cGUucG9wPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2VuZFBvaW50ZXI9dGhpcy5fZW5kUG9pbnRlci0xPDA/MDp0aGlzLl9lbmRQb2ludGVyLTEsdGhpcy5faW50ZXJuYWxBcnJheVt0aGlzLl9lbmRQb2ludGVyXX0sdC5wcm90b3R5cGUuY291bnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZW5kUG9pbnRlcn0sdC5wcm90b3R5cGUuY2xlYXI9ZnVuY3Rpb24oKXt0aGlzLl9lbmRQb2ludGVyPTB9LHQucHJvdG90eXBlLmludGVybmFsU2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbnRlcm5hbEFycmF5Lmxlbmd0aH0sdC5wcm90b3R5cGUuZWxlbWVudEF0PWZ1bmN0aW9uKHQpe2lmKHQ+PXRoaXMuY291bnQoKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGluZGV4IFwiK3QpO3JldHVybiB0aGlzLl9pbnRlcm5hbEFycmF5W3RdfSx0LnByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdD49dGhpcy5jb3VudCgpJiZ0aGlzLl9yZXNpemUoKSx0aGlzLl9pbnRlcm5hbEFycmF5W3RdPWV9LHQucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvdW50KCk7aWYoMD09PWUpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBwYXJhbWV0ZXIgXCIrdCk7Zm9yKHZhciBpPXRoaXMuX2ludGVybmFsQXJyYXlbdF0sbj10O248ZTtuKyspdGhpcy5faW50ZXJuYWxBcnJheVtuXT10aGlzLl9pbnRlcm5hbEFycmF5W24rMV07cmV0dXJuIHRoaXMuX2VuZFBvaW50ZXItLSxpfSx0LnByb3RvdHlwZS5yZW1vdmVFbGVtZW50PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2ludGVybmFsQXJyYXkuaW5kZXhPZih0KTt0aGlzLnJlbW92ZShlKX0sdC5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pbnRlcm5hbEFycmF5LnNsaWNlKDAsdGhpcy5fZW5kUG9pbnRlcil9LHQucHJvdG90eXBlLmZvckVhY2g9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsaT10aGlzLmNvdW50KCk7ZTxpO2UrKyl0LmNhbGwodGhpcyx0aGlzLl9pbnRlcm5hbEFycmF5W2VdLGUpfSx0LnByb3RvdHlwZS5tYXA9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuY291bnQoKSxpPTA7aTxlO2krKyl0aGlzLl9pbnRlcm5hbEFycmF5W2ldPXQuY2FsbCh0aGlzLHRoaXMuX2ludGVybmFsQXJyYXlbaV0saSl9LHQuRGVmYXVsdFNpemU9MjAwLHR9KCksaz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLng9dCx0aGlzLnk9ZX1yZXR1cm4gdC5mcm9tQW5nbGU9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KE1hdGguY29zKGUpLE1hdGguc2luKGUpKX0sdC5pc1ZhbGlkPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsIT09dCYmdm9pZCAwIT09dCYmKCFpc05hTih0LngpJiYhaXNOYU4odC55KSYmKHQueCE9PTEvMCYmdC55IT09MS8wJiZ0LnghPT0tMS8wJiZ0LnkhPT0tMS8wKSl9LHQuZGlzdGFuY2U9ZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHQueC1lLngsMikrTWF0aC5wb3codC55LWUueSwyKSl9LHQucHJvdG90eXBlLnNldFRvPWZ1bmN0aW9uKHQsZSl7dGhpcy54PXQsdGhpcy55PWV9LHQucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0uMDAxKSxNYXRoLmFicyh0aGlzLngtdC54KTw9ZSYmTWF0aC5hYnModGhpcy55LXQueSk8PWV9LHQucHJvdG90eXBlLmRpc3RhbmNlPWZ1bmN0aW9uKGUpe3JldHVybiBlfHwoZT10Llplcm8pLE1hdGguc3FydChNYXRoLnBvdyh0aGlzLngtZS54LDIpK01hdGgucG93KHRoaXMueS1lLnksMikpfSx0LnByb3RvdHlwZS5tYWduaXR1ZGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kaXN0YW5jZSgpfSx0LnByb3RvdHlwZS5ub3JtYWxpemU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRpc3RhbmNlKCk7cmV0dXJuIGU+MD9uZXcgdCh0aGlzLngvZSx0aGlzLnkvZSk6bmV3IHQoMCwxKX0sdC5wcm90b3R5cGUuYXZlcmFnZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5hZGQodCkuc2NhbGUoLjUpfSx0LnByb3RvdHlwZS5zY2FsZT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQodGhpcy54KmUsdGhpcy55KmUpfSx0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KHRoaXMueCtlLngsdGhpcy55K2UueSl9LHQucHJvdG90eXBlLnN1Yj1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQodGhpcy54LWUueCx0aGlzLnktZS55KX0sdC5wcm90b3R5cGUuYWRkRXF1YWw9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMueCs9dC54LHRoaXMueSs9dC55LHRoaXN9LHQucHJvdG90eXBlLnN1YkVxdWFsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngtPXQueCx0aGlzLnktPXQueSx0aGlzfSx0LnByb3RvdHlwZS5zY2FsZUVxdWFsPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLngqPXQsdGhpcy55Kj10LHRoaXN9LHQucHJvdG90eXBlLmRvdD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy54KnQueCt0aGlzLnkqdC55fSx0LnByb3RvdHlwZS5jcm9zcz1mdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIHQ/dGhpcy54KmUueS10aGlzLnkqZS54OlwibnVtYmVyXCI9PXR5cGVvZiBlP25ldyB0KGUqdGhpcy55LC1lKnRoaXMueCk6dm9pZCAwfSx0LnByb3RvdHlwZS5wZXJwZW5kaWN1bGFyPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0KHRoaXMueSwtdGhpcy54KX0sdC5wcm90b3R5cGUubm9ybWFsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGVycGVuZGljdWxhcigpLm5vcm1hbGl6ZSgpfSx0LnByb3RvdHlwZS5uZWdhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zY2FsZSgtMSl9LHQucHJvdG90eXBlLnRvQW5nbGU9ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5hdGFuMih0aGlzLnksdGhpcy54KX0sdC5wcm90b3R5cGUucm90YXRlPWZ1bmN0aW9uKGUsaSl7aXx8KGk9bmV3IHQoMCwwKSk7dmFyIG49TWF0aC5zaW4oZSksbz1NYXRoLmNvcyhlKTtyZXR1cm4gbmV3IHQobyoodGhpcy54LWkueCktbioodGhpcy55LWkueSkraS54LG4qKHRoaXMueC1pLngpK28qKHRoaXMueS1pLnkpK2kueSl9LHQucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyB0KHRoaXMueCx0aGlzLnkpfSx0LnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiKFwiK3RoaXMueCtcIiwgXCIrdGhpcy55K1wiKVwifSx0Llplcm89bmV3IHQoMCwwKSx0Lk9uZT1uZXcgdCgxLDEpLHQuSGFsZj1uZXcgdCguNSwuNSksdC5VcD1uZXcgdCgwLC0xKSx0LkRvd249bmV3IHQoMCwxKSx0LkxlZnQ9bmV3IHQoLTEsMCksdC5SaWdodD1uZXcgdCgxLDApLHR9KCksUj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLnBvcz10LHRoaXMuZGlyPWUubm9ybWFsaXplKCl9cmV0dXJuIHQucHJvdG90eXBlLmludGVyc2VjdD1mdW5jdGlvbih0KXt2YXIgZT10LmJlZ2luLnN1Yih0aGlzLnBvcyk7aWYoMD09PXRoaXMuZGlyLmNyb3NzKHQuZ2V0U2xvcGUoKSkmJjAhPT1lLmNyb3NzKHRoaXMuZGlyKSlyZXR1cm4tMTt2YXIgaT10aGlzLmRpci5jcm9zcyh0LmdldFNsb3BlKCkpO2lmKDA9PT1pKXJldHVybi0xO3ZhciBuPWUuY3Jvc3ModC5nZXRTbG9wZSgpKS9pO2lmKG4+PTApe3ZhciBvPWUuY3Jvc3ModGhpcy5kaXIpL2kvdC5nZXRMZW5ndGgoKTtpZihvPj0wJiZvPD0xKXJldHVybiBufXJldHVybi0xfSx0LnByb3RvdHlwZS5nZXRQb2ludD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5wb3MuYWRkKHRoaXMuZGlyLnNjYWxlKHQpKX0sdH0oKSxGPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUpe3RoaXMuYmVnaW49dCx0aGlzLmVuZD1lfXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJzbG9wZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5lbmQueS10aGlzLmJlZ2luLnkpLyh0aGlzLmVuZC54LXRoaXMuYmVnaW4ueCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiaW50ZXJjZXB0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJlZ2luLnktdGhpcy5zbG9wZSp0aGlzLmJlZ2luLnh9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUubm9ybWFsPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW5kLnN1Yih0aGlzLmJlZ2luKS5ub3JtYWwoKX0sdC5wcm90b3R5cGUuZ2V0U2xvcGU9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJlZ2luLGU9dGhpcy5lbmQsaT10LmRpc3RhbmNlKGUpO3JldHVybiBlLnN1Yih0KS5zY2FsZSgxL2kpfSx0LnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmJlZ2luLGU9dGhpcy5lbmQ7cmV0dXJuIHQuZGlzdGFuY2UoZSl9LHQucHJvdG90eXBlLmRpc3RhbmNlVG9Qb2ludD1mdW5jdGlvbih0KXt2YXIgZT10LngsaT10Lnksbj10aGlzLmdldExlbmd0aCgpLG89dGhpcy5lbmQueS10aGlzLmJlZ2luLnkscj10aGlzLmVuZC54LXRoaXMuYmVnaW4ueDtyZXR1cm4gTWF0aC5hYnMobyplLXIqaSt0aGlzLmVuZC54KnRoaXMuYmVnaW4ueS10aGlzLmVuZC55KnRoaXMuYmVnaW4ueCkvbn0sdC5wcm90b3R5cGUuZmluZFBvaW50PWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09dCYmKHQ9bnVsbCksdm9pZCAwPT09ZSYmKGU9bnVsbCk7dmFyIGk9dGhpcy5zbG9wZSxuPXRoaXMuaW50ZXJjZXB0O2lmKG51bGwhPT10KXJldHVybiBuZXcgayh0LGkqdCtuKTtpZihudWxsIT09ZSlyZXR1cm4gbmV3IGsoKGUtbikvaSxlKTt0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbXVzdCBwcm92aWRlIGFuIFggb3IgYSBZIHZhbHVlXCIpfSx0LnByb3RvdHlwZS5oYXNQb2ludD1mdW5jdGlvbigpe3ZhciB0LGU9MDtpZihcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzBdJiZcIm51bWJlclwiPT10eXBlb2YgYXJndW1lbnRzWzFdKXQ9bmV3IGsoYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSksZT1hcmd1bWVudHNbMl18fDA7ZWxzZXtpZighKGFyZ3VtZW50c1swXWluc3RhbmNlb2YgaykpdGhyb3dcIkNvdWxkIG5vdCBkZXRlcm1pbmUgdGhlIGFyZ3VtZW50cyBmb3IgVmVjdG9yLmhhc1BvaW50XCI7dD1hcmd1bWVudHNbMF0sZT1hcmd1bWVudHNbMV18fDB9dmFyIGk9dC54LXRoaXMuYmVnaW4ueCxuPXQueS10aGlzLmJlZ2luLnksbz10aGlzLmVuZC54LXRoaXMuYmVnaW4ueCxyPXRoaXMuZW5kLnktdGhpcy5iZWdpbi55LHM9aSpyLW4qbztyZXR1cm4hKE1hdGguYWJzKHMpPmUpJiYoTWF0aC5hYnMobyk+PU1hdGguYWJzKHIpP28+MD90aGlzLmJlZ2luLng8PXQueCYmdC54PD10aGlzLmVuZC54OnRoaXMuZW5kLng8PXQueCYmdC54PD10aGlzLmJlZ2luLng6cj4wP3RoaXMuYmVnaW4ueTw9dC55JiZ0Lnk8PXRoaXMuZW5kLnk6dGhpcy5lbmQueTw9dC55JiZ0Lnk8PXRoaXMuYmVnaW4ueSl9LHR9KCksST1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLm1pbj10LHRoaXMubWF4PWV9cmV0dXJuIHQucHJvdG90eXBlLm92ZXJsYXBzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLm1heD50Lm1pbiYmdC5tYXg+dGhpcy5taW59LHQucHJvdG90eXBlLmdldE92ZXJsYXA9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMub3ZlcmxhcHModCk/dGhpcy5tYXg+dC5tYXg/dC5tYXgtdGhpcy5taW46dGhpcy5tYXgtdC5taW46MH0sdH0oKSxMPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsaSl7dGhpcy53b3JsZFBvcz10LHRoaXMucGFnZVBvcz1lLHRoaXMuc2NyZWVuUG9zPWl9cmV0dXJuIHQuZnJvbVBhZ2VQb3NpdGlvbj1mdW5jdGlvbihlLGksbil7dmFyIG8scixzLGE7Mz09PWFyZ3VtZW50cy5sZW5ndGg/KHM9bmV3IGsobz1lLHI9aSksYT1uKToobz0ocz1lKS54LHI9cy55LGE9aSk7dmFyIGg9by1QKGEuY2FudmFzKS54LGM9ci1QKGEuY2FudmFzKS55LHU9bmV3IGsoaCxjKTtyZXR1cm4gbmV3IHQoYS5zY3JlZW5Ub1dvcmxkQ29vcmRpbmF0ZXModSkscyx1KX0sdH0oKTshZnVuY3Rpb24odCl7dFt0LkJveD0wXT1cIkJveFwiLHRbdC5SaWdpZEJvZHk9MV09XCJSaWdpZEJvZHlcIn0oTXx8KE09e30pKSxmdW5jdGlvbih0KXt0W3QuTmFpdmU9MF09XCJOYWl2ZVwiLHRbdC5EeW5hbWljQUFCQlRyZWU9MV09XCJEeW5hbWljQUFCQlRyZWVcIn0oRHx8KEQ9e30pKSxmdW5jdGlvbih0KXt0W3QuRXVsZXI9MF09XCJFdWxlclwifShPfHwoTz17fSkpO3ZhciBILHosVz1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQudXNlQm94UGh5c2ljcz1mdW5jdGlvbigpe3QuY29sbGlzaW9uUmVzb2x1dGlvblN0cmF0ZWd5PU0uQm94fSx0LnVzZVJpZ2lkQm9keVBoeXNpY3M9ZnVuY3Rpb24oKXt0LmNvbGxpc2lvblJlc29sdXRpb25TdHJhdGVneT1NLlJpZ2lkQm9keX0sdC5hY2M9bmV3IGsoMCwwKSx0LmVuYWJsZWQ9ITAsdC5jb2xsaXNpb25QYXNzZXM9NSx0LmJyb2FkcGhhc2VTdHJhdGVneT1ELkR5bmFtaWNBQUJCVHJlZSx0LmJyb2FkcGhhc2VEZWJ1Zz0hMSx0LnNob3dDb2xsaXNpb25Ob3JtYWxzPSExLHQuc2hvd01vdGlvblZlY3RvcnM9ITEsdC5zaG93Qm91bmRzPSExLHQuc2hvd0FyZWE9ITEsdC5zaG93Q29udGFjdHM9ITEsdC5zaG93Tm9ybWFscz0hMSx0LmNvbGxpc2lvblJlc29sdXRpb25TdHJhdGVneT1NLkJveCx0LmRlZmF1bHRNYXNzPTEwLHQuaW50ZWdyYXRvcj1PLkV1bGVyLHQuaW50ZWdyYXRpb25TdGVwcz0xLHQuYWxsb3dSaWdpZEJvZHlSb3RhdGlvbj0hMCx0LmNvbGxpc2lvblNoaWZ0PS4wMDEsdC5keW5hbWljVHJlZVZlbG9jaXR5TXVsdGlwbHllcj0yLHQuYm91bmRzUGFkZGluZz01LHQuc3VyZmFjZUVwc2lsb249LjEsdC5jaGVja0ZvckZhc3RCb2RpZXM9ITAsdC5kaXNhYmxlTWluaW11bVNwZWVkRm9yRmFzdEJvZHk9ITEsdH0oKSxqPShIPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiBlKWUuaGFzT3duUHJvcGVydHkoaSkmJih0W2ldPWVbaV0pfSxmdW5jdGlvbih0LGUpe2Z1bmN0aW9uIGkoKXt0aGlzLmNvbnN0cnVjdG9yPXR9SCh0LGUpLHQucHJvdG90eXBlPW51bGw9PT1lP09iamVjdC5jcmVhdGUoZSk6KGkucHJvdG90eXBlPWUucHJvdG90eXBlLG5ldyBpKX0pLFU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5idWJibGVzPSEwLHRoaXMuX3BhdGg9W10sdGhpcy5fbmFtZT1cIlwifXJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJldmVudFBhdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BhdGh9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwibmFtZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbmFtZX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXt0aGlzLmJ1YmJsZXM9ITF9LHQucHJvdG90eXBlLmFjdGlvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuZXZlbnRQYXRoLnBvcCgpO3QmJih0aGlzLl9vbkFjdGlvblN0YXJ0KHQpLHQuZXZlbnREaXNwYXRjaGVyLmVtaXQodGhpcy5fbmFtZSx0aGlzKSx0aGlzLl9vbkFjdGlvbkVuZCh0KSl9LHQucHJvdG90eXBlLnByb3BhZ2F0ZT1mdW5jdGlvbigpe3RoaXMuZXZlbnRQYXRoLmxlbmd0aCYmKHRoaXMuYWN0aW9uKCksdGhpcy5idWJibGVzJiZ0aGlzLnByb3BhZ2F0ZSgpKX0sdC5wcm90b3R5cGUubGF5UGF0aD1mdW5jdGlvbih0KXt2YXIgZT10LmdldEFuY2VzdG9ycygpO3RoaXMuX3BhdGg9ZS5sZW5ndGg+dGhpcy5fcGF0aC5sZW5ndGg/ZTp0aGlzLl9wYXRofSx0LnByb3RvdHlwZS5fb25BY3Rpb25TdGFydD1mdW5jdGlvbih0KXt9LHQucHJvdG90eXBlLl9vbkFjdGlvbkVuZD1mdW5jdGlvbih0KXt9LHR9KCksTj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS50YXJnZXQ9ZSxpfXJldHVybiBqKGUsdCksZX0oVSkscT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS50YXJnZXQ9ZSxpfXJldHVybiBqKGUsdCksZX0oVSksWD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS50YXJnZXQ9ZSxpfXJldHVybiBqKGUsdCksZX0oVSksVj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS50YXJnZXQ9ZSxpfXJldHVybiBqKGUsdCksZX0oVSksRz1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS50YXJnZXQ9ZSxpfXJldHVybiBqKGUsdCksZX0oVSksWT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSxuKXt2YXIgbz10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG8uY3R4PWUsby5kZWx0YT1pLG8udGFyZ2V0PW4sb31yZXR1cm4gaihlLHQpLGV9KFUpLEs9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGksbil7dmFyIG89dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBvLmN0eD1lLG8uZGVsdGE9aSxvLnRhcmdldD1uLG99cmV0dXJuIGooZSx0KSxlfShVKSxRPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4uY3R4PWUsbi50YXJnZXQ9aSxufXJldHVybiBqKGUsdCksZX0oVSksWj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLmN0eD1lLG4udGFyZ2V0PWksbn1yZXR1cm4gaihlLHQpLGV9KFUpLEo9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGksbil7dmFyIG89dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBvLmVuZ2luZT1lLG8uZGVsdGE9aSxvLnRhcmdldD1uLG99cmV0dXJuIGooZSx0KSxlfShVKSwkPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpLG4pe3ZhciBvPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gby5lbmdpbmU9ZSxvLmRlbHRhPWksby50YXJnZXQ9bixvfXJldHVybiBqKGUsdCksZX0oVSksdHQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZhciBuPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5lbmdpbmU9ZSxuLnByZXZTdGF0cz1pLG4udGFyZ2V0PWUsbn1yZXR1cm4gaihlLHQpLGV9KFUpLGV0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4uZW5naW5lPWUsbi5zdGF0cz1pLG4udGFyZ2V0PWUsbn1yZXR1cm4gaihlLHQpLGV9KFUpLGl0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4uaW5kZXg9ZSxuLmdhbWVwYWQ9aSxuLnRhcmdldD1pLG59cmV0dXJuIGooZSx0KSxlfShVKSxudD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLmluZGV4PWUsbi5nYW1lcGFkPWksbi50YXJnZXQ9aSxufXJldHVybiBqKGUsdCksZX0oVSksb3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGksbil7dmFyIG89dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBvLmJ1dHRvbj1lLG8udmFsdWU9aSxvLnRhcmdldD1uLG99cmV0dXJuIGooZSx0KSxlfShVKSxydD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSxuKXt2YXIgbz10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG8uYXhpcz1lLG8udmFsdWU9aSxvLnRhcmdldD1uLG99cmV0dXJuIGooZSx0KSxlfShVKSxzdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLnRvcGljPWUsbi5oYW5kbGVyPWksbn1yZXR1cm4gaihlLHQpLGV9KFUpLGF0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4udG9waWM9ZSxuLmhhbmRsZXI9aSxufXJldHVybiBqKGUsdCksZX0oVSksaHQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgaT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkudGFyZ2V0PWUsaX1yZXR1cm4gaihlLHQpLGV9KFUpLGN0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLnRhcmdldD1lLGl9cmV0dXJuIGooZSx0KSxlfShVKSx1dD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSxuLG8pe3ZhciByPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5hY3Rvcj1lLHIub3RoZXI9aSxyLnNpZGU9bixyLmludGVyc2VjdGlvbj1vLHIudGFyZ2V0PWUscn1yZXR1cm4gaihlLHQpLGV9KFUpLGx0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpLG4sbyl7dmFyIHI9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiByLmFjdG9yPWUsci5vdGhlcj1pLHIuc2lkZT1uLHIuaW50ZXJzZWN0aW9uPW8sci50YXJnZXQ9ZSxyfXJldHVybiBqKGUsdCksZX0oVSkscHQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGksbil7dmFyIG89dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBvLmFjdG9yPWUsby5vdGhlcj1pLG8ucGFpcj1uLG8udGFyZ2V0PWUsb31yZXR1cm4gaihlLHQpLGV9KFUpLGR0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4uYWN0b3I9ZSxuLm90aGVyPWksbi50YXJnZXQ9ZSxufXJldHVybiBqKGUsdCksZX0oVSksZnQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZhciBuPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5lbmdpbmU9ZSxuLnRhcmdldD1pLG59cmV0dXJuIGooZSx0KSxlfShVKSxfdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSl7dmFyIG49dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBuLm9sZFNjZW5lPWUsbi50YXJnZXQ9aSxufXJldHVybiBqKGUsdCksZX0oVSksZ3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZhciBuPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi5uZXdTY2VuZT1lLG4udGFyZ2V0PWksbn1yZXR1cm4gaihlLHQpLGV9KFUpLHl0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLnRhcmdldD1lLGl9cmV0dXJuIGooZSx0KSxlfShVKSx2dD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS50YXJnZXQ9ZSxpfXJldHVybiBqKGUsdCksZX0oVSksbXQ9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZhciBuPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gbi50YXJnZXQ9ZSxuLmFjdG9yPWksbn1yZXR1cm4gaihlLHQpLGV9KFUpLGJ0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4udGFyZ2V0PWUsbi5hY3Rvcj1pLG59cmV0dXJuIGooZSx0KSxlfShVKSx3dD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5faGFuZGxlcnM9e30sdGhpcy5fd2lyZWRFdmVudERpc3BhdGNoZXJzPVtdLHRoaXMuX3RhcmdldD10fXJldHVybiB0LnByb3RvdHlwZS5lbWl0PWZ1bmN0aW9uKHQsZSl7aWYodCl7dD10LnRvTG93ZXJDYXNlKCk7dmFyIGksbixvPXRoaXMuX3RhcmdldDtpZihlfHwoZT1uZXcgVSksZS50YXJnZXQ9byx0aGlzLl9oYW5kbGVyc1t0XSlmb3IoaT0wLG49dGhpcy5faGFuZGxlcnNbdF0ubGVuZ3RoO2k8bjtpKyspdGhpcy5faGFuZGxlcnNbdF1baV0uY2FsbChvLGUpO2ZvcihpPTAsbj10aGlzLl93aXJlZEV2ZW50RGlzcGF0Y2hlcnMubGVuZ3RoO2k8bjtpKyspdGhpcy5fd2lyZWRFdmVudERpc3BhdGNoZXJzW2ldLmVtaXQodCxlKX19LHQucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQsZSl7dD10LnRvTG93ZXJDYXNlKCksdGhpcy5faGFuZGxlcnNbdF18fCh0aGlzLl9oYW5kbGVyc1t0XT1bXSksdGhpcy5faGFuZGxlcnNbdF0ucHVzaChlKSxcInVuc3Vic2NyaWJlXCIhPT10JiZcInN1YnNjcmliZVwiIT09dCYmdGhpcy5lbWl0KFwic3Vic2NyaWJlXCIsbmV3IHN0KHQsZSkpfSx0LnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24odCxlKXt0PXQudG9Mb3dlckNhc2UoKTt2YXIgaT10aGlzLl9oYW5kbGVyc1t0XTtpZihpKWlmKGUpe3ZhciBuPWkuaW5kZXhPZihlKTt0aGlzLl9oYW5kbGVyc1t0XS5zcGxpY2UobiwxKX1lbHNlIHRoaXMuX2hhbmRsZXJzW3RdLmxlbmd0aD0wO1widW5zdWJzY3JpYmVcIiE9PXQmJlwic3Vic2NyaWJlXCIhPT10JiZ0aGlzLmVtaXQoXCJ1bnN1YnNjcmliZVwiLG5ldyBhdCh0LGUpKX0sdC5wcm90b3R5cGUub25jZT1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXM7dGhpcy5vbih0LGZ1bmN0aW9uKG4pe3ZhciBvPW58fG5ldyBVO28udGFyZ2V0PW8udGFyZ2V0fHxpLl90YXJnZXQsaS5vZmYodCxlKSxlLmNhbGwoby50YXJnZXQsbyl9KX0sdC5wcm90b3R5cGUud2lyZT1mdW5jdGlvbih0KXt0Ll93aXJlZEV2ZW50RGlzcGF0Y2hlcnMucHVzaCh0aGlzKX0sdC5wcm90b3R5cGUudW53aXJlPWZ1bmN0aW9uKHQpe3ZhciBlPXQuX3dpcmVkRXZlbnREaXNwYXRjaGVycy5pbmRleE9mKHRoaXMpO2U+LTEmJnQuX3dpcmVkRXZlbnREaXNwYXRjaGVycy5zcGxpY2UoZSwxKX0sdH0oKSx4dD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmV2ZW50RGlzcGF0Y2hlcj1uZXcgd3QodGhpcyl9cmV0dXJuIHQucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQsZSl7dGhpcy5ldmVudERpc3BhdGNoZXIub24odCxlKX0sdC5wcm90b3R5cGUub2ZmPWZ1bmN0aW9uKHQsZSl7dGhpcy5ldmVudERpc3BhdGNoZXIub2ZmKHQsZSl9LHQucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCxlKXt0aGlzLmV2ZW50RGlzcGF0Y2hlci5lbWl0KHQsZSl9LHQucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24odCxlKXt0aGlzLmV2ZW50RGlzcGF0Y2hlci5vbmNlKHQsZSl9LHQuZXh0ZW5kPWZ1bmN0aW9uKGUpe3ZhciBpLG49dGhpcztpPWUmJmUuaGFzT3duUHJvcGVydHkoXCJjb25zdHJ1Y3RvclwiKT9lLmNvbnN0cnVjdG9yOmZ1bmN0aW9uKCl7cmV0dXJuIG4uYXBwbHkodGhpcyxhcmd1bWVudHMpfTt2YXIgbz1mdW5jdGlvbigpe3RoaXMuY29uc3RydWN0b3I9aX07aWYoby5wcm90b3R5cGU9bi5wcm90b3R5cGUsaS5wcm90b3R5cGU9bmV3IG8sZSlmb3IodmFyIHIgaW4gZSllLmhhc093blByb3BlcnR5KHIpJiYoaS5wcm90b3R5cGVbcl09ZVtyXSk7cmV0dXJuIGkuZXh0ZW5kPXQuZXh0ZW5kLGl9LHR9KCksUHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpLG4pe3RoaXMucj10LHRoaXMuZz1lLHRoaXMuYj1pLHRoaXMuYT1udWxsIT1uP246MX1yZXR1cm4gdC5mcm9tUkdCPWZ1bmN0aW9uKGUsaSxuLG8pe3JldHVybiBuZXcgdChlLGksbixvKX0sdC5mcm9tSGV4PWZ1bmN0aW9uKGUpe3ZhciBpO2lmKGk9ZS5tYXRjaCgvXiM/KFswLTlhLWZdezJ9KShbMC05YS1mXXsyfSkoWzAtOWEtZl17Mn0pKFswLTlhLWZdezJ9KT8kL2kpKXt2YXIgbj1wYXJzZUludChpWzFdLDE2KSxvPXBhcnNlSW50KGlbMl0sMTYpLHI9cGFyc2VJbnQoaVszXSwxNikscz0xO3JldHVybiBpWzRdJiYocz1wYXJzZUludChpWzRdLDE2KS8yNTUpLG5ldyB0KG4sbyxyLHMpfXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgaGV4IHN0cmluZzogXCIrZSl9LHQuZnJvbUhTTD1mdW5jdGlvbih0LGUsaSxuKXtyZXR1cm4gdm9pZCAwPT09biYmKG49MSksbmV3IFN0KHQsZSxpLG4pLnRvUkdCQSgpfSx0LnByb3RvdHlwZS5saWdodGVuPWZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PS4xKTt2YXIgZT1TdC5mcm9tUkdCQSh0aGlzLnIsdGhpcy5nLHRoaXMuYix0aGlzLmEpO3JldHVybiBlLmwrPWUubCp0LGUudG9SR0JBKCl9LHQucHJvdG90eXBlLmRhcmtlbj1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD0uMSk7dmFyIGU9U3QuZnJvbVJHQkEodGhpcy5yLHRoaXMuZyx0aGlzLmIsdGhpcy5hKTtyZXR1cm4gZS5sLT1lLmwqdCxlLnRvUkdCQSgpfSx0LnByb3RvdHlwZS5zYXR1cmF0ZT1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD0uMSk7dmFyIGU9U3QuZnJvbVJHQkEodGhpcy5yLHRoaXMuZyx0aGlzLmIsdGhpcy5hKTtyZXR1cm4gZS5zKz1lLnMqdCxlLnRvUkdCQSgpfSx0LnByb3RvdHlwZS5kZXNhdHVyYXRlPWZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PS4xKTt2YXIgZT1TdC5mcm9tUkdCQSh0aGlzLnIsdGhpcy5nLHRoaXMuYix0aGlzLmEpO3JldHVybiBlLnMtPWUucyp0LGUudG9SR0JBKCl9LHQucHJvdG90eXBlLm11bGl0aXBseT1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IHQoZS5yLzI1NSp0aGlzLnIvMjU1KjI1NSxlLmcvMjU1KnRoaXMuZy8yNTUqMjU1LGUuYi8yNTUqdGhpcy5iLzI1NSoyNTUsZS5hKnRoaXMuYSl9LHQucHJvdG90eXBlLnNjcmVlbj1mdW5jdGlvbih0KXt2YXIgZT10LmludmVydCgpLGk9dC5pbnZlcnQoKTtyZXR1cm4gZS5tdWxpdGlwbHkoaSkuaW52ZXJ0KCl9LHQucHJvdG90eXBlLmludmVydD1mdW5jdGlvbigpe3JldHVybiBuZXcgdCgyNTUtdGhpcy5yLDI1NS10aGlzLmcsMjU1LXRoaXMuYiwxLXRoaXMuYSl9LHQucHJvdG90eXBlLmF2ZXJhZ2U9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyB0KChlLnIrdGhpcy5yKS8yLChlLmcrdGhpcy5nKS8yLChlLmIrdGhpcy5iKS8yLChlLmErdGhpcy5hKS8yKX0sdC5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24odCl7c3dpdGNoKHZvaWQgMD09PXQmJih0PVwicmdiXCIpLHQpe2Nhc2VcInJnYlwiOnJldHVybiB0aGlzLnRvUkdCQSgpO2Nhc2VcImhzbFwiOnJldHVybiB0aGlzLnRvSFNMQSgpO2Nhc2VcImhleFwiOnJldHVybiB0aGlzLnRvSGV4KCk7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIENvbG9yIGZvcm1hdFwiKX19LHQucHJvdG90eXBlLl9jb21wb25lbnRUb0hleD1mdW5jdGlvbih0KXt2YXIgZT10LnRvU3RyaW5nKDE2KTtyZXR1cm4gMT09PWUubGVuZ3RoP1wiMFwiK2U6ZX0sdC5wcm90b3R5cGUudG9IZXg9ZnVuY3Rpb24oKXtyZXR1cm5cIiNcIit0aGlzLl9jb21wb25lbnRUb0hleCh0aGlzLnIpK3RoaXMuX2NvbXBvbmVudFRvSGV4KHRoaXMuZykrdGhpcy5fY29tcG9uZW50VG9IZXgodGhpcy5iKX0sdC5wcm90b3R5cGUudG9SR0JBPWZ1bmN0aW9uKCl7dmFyIHQ9U3RyaW5nKHRoaXMuci50b0ZpeGVkKDApKStcIiwgXCIrU3RyaW5nKHRoaXMuZy50b0ZpeGVkKDApKStcIiwgXCIrU3RyaW5nKHRoaXMuYi50b0ZpeGVkKDApKTtyZXR1cm4gdm9pZCAwIT09dGhpcy5hfHxudWxsIT09dGhpcy5hP1wicmdiYShcIit0K1wiLCBcIitTdHJpbmcodGhpcy5hKStcIilcIjpcInJnYihcIit0K1wiKVwifSx0LnByb3RvdHlwZS50b0hTTEE9ZnVuY3Rpb24oKXtyZXR1cm4gU3QuZnJvbVJHQkEodGhpcy5yLHRoaXMuZyx0aGlzLmIsdGhpcy5hKS50b1N0cmluZygpfSx0LnByb3RvdHlwZS5maWxsU3R5bGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b1N0cmluZygpfSx0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgdCh0aGlzLnIsdGhpcy5nLHRoaXMuYix0aGlzLmEpfSx0LkJsYWNrPXQuZnJvbUhleChcIiMwMDAwMDBcIiksdC5XaGl0ZT10LmZyb21IZXgoXCIjRkZGRkZGXCIpLHQuR3JheT10LmZyb21IZXgoXCIjODA4MDgwXCIpLHQuTGlnaHRHcmF5PXQuZnJvbUhleChcIiNEM0QzRDNcIiksdC5EYXJrR3JheT10LmZyb21IZXgoXCIjQTlBOUE5XCIpLHQuWWVsbG93PXQuZnJvbUhleChcIiNGRkZGMDBcIiksdC5PcmFuZ2U9dC5mcm9tSGV4KFwiI0ZGQTUwMFwiKSx0LlJlZD10LmZyb21IZXgoXCIjRkYwMDAwXCIpLHQuVmVybWlsbGlvbj10LmZyb21IZXgoXCIjRkY1QjMxXCIpLHQuUm9zZT10LmZyb21IZXgoXCIjRkYwMDdGXCIpLHQuTWFnZW50YT10LmZyb21IZXgoXCIjRkYwMEZGXCIpLHQuVmlvbGV0PXQuZnJvbUhleChcIiM3RjAwRkZcIiksdC5CbHVlPXQuZnJvbUhleChcIiMwMDAwRkZcIiksdC5BenVyZT10LmZyb21IZXgoXCIjMDA3RkZGXCIpLHQuQ3lhbj10LmZyb21IZXgoXCIjMDBGRkZGXCIpLHQuVmlyaWRpYW49dC5mcm9tSGV4KFwiIzU5OTc4RlwiKSx0LkdyZWVuPXQuZnJvbUhleChcIiMwMEZGMDBcIiksdC5DaGFydHJldXNlPXQuZnJvbUhleChcIiM3RkZGMDBcIiksdC5UcmFuc3BhcmVudD10LmZyb21IZXgoXCIjRkZGRkZGMDBcIiksdH0oKSxTdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLGksbil7dGhpcy5oPXQsdGhpcy5zPWUsdGhpcy5sPWksdGhpcy5hPW59cmV0dXJuIHQuaHVlMnJnYj1mdW5jdGlvbih0LGUsaSl7cmV0dXJuIGk8MCYmKGkrPTEpLGk+MSYmKGktPTEpLGk8MS82P3QrNiooZS10KSppOmk8LjU/ZTppPDIvMz90KyhlLXQpKigyLzMtaSkqNjp0fSx0LmZyb21SR0JBPWZ1bmN0aW9uKGUsaSxuLG8pe2UvPTI1NSxpLz0yNTUsbi89MjU1O3ZhciByLHMsYT1NYXRoLm1heChlLGksbiksaD1NYXRoLm1pbihlLGksbiksYz0oYStoKS8yO2lmKGE9PT1oKXI9cz0wO2Vsc2V7dmFyIHU9YS1oO3N3aXRjaChzPWM+LjU/dS8oMi1hLWgpOnUvKGEraCksYSl7Y2FzZSBlOnI9KGktbikvdSsoaTxuPzY6MCk7YnJlYWs7Y2FzZSBpOnI9KG4tZSkvdSsyO2JyZWFrO2Nhc2UgbjpyPShlLWkpL3UrNH1yLz02fXJldHVybiBuZXcgdChyLHMsYyxvKX0sdC5wcm90b3R5cGUudG9SR0JBPWZ1bmN0aW9uKCl7dmFyIGUsaSxuO2lmKDA9PT10aGlzLnMpZT1pPW49dGhpcy5sO2Vsc2V7dmFyIG89dGhpcy5sPC41P3RoaXMubCooMSt0aGlzLnMpOnRoaXMubCt0aGlzLnMtdGhpcy5sKnRoaXMucyxyPTIqdGhpcy5sLW87ZT10Lmh1ZTJyZ2IocixvLHRoaXMuaCsxLzMpLGk9dC5odWUycmdiKHIsbyx0aGlzLmgpLG49dC5odWUycmdiKHIsbyx0aGlzLmgtMS8zKX1yZXR1cm4gbmV3IFB0KDI1NSplLDI1NSppLDI1NSpuLHRoaXMuYSl9LHQucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuXCJoc2xhKFwiK3RoaXMuaC50b0ZpeGVkKDApK1wiLCBcIit0aGlzLnMudG9GaXhlZCgwKStcIiwgXCIrdGhpcy5sLnRvRml4ZWQoMCkrXCIsIFwiK3RoaXMuYS50b0ZpeGVkKDApK1wiKVwifSx0fSgpLEF0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsaSxuLG8pe3RoaXMuYm9keUE9dCx0aGlzLmJvZHlCPWUsdGhpcy5tdHY9aSx0aGlzLnBvaW50PW4sdGhpcy5ub3JtYWw9b31yZXR1cm4gdC5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXtpZih0PT09TS5SaWdpZEJvZHkpdGhpcy5fcmVzb2x2ZVJpZ2lkQm9keUNvbGxpc2lvbigpO2Vsc2V7aWYodCE9PU0uQm94KXRocm93IG5ldyBFcnJvcihcIlVua25vd24gY29sbGlzaW9uIHJlc29sdXRpb24gc3RyYXRlZ3lcIik7dGhpcy5fcmVzb2x2ZUJveENvbGxpc2lvbigpfX0sdC5wcm90b3R5cGUuX2FwcGx5Qm94SW1wdWxzZT1mdW5jdGlvbih0LGUsaSl7aWYodC5jb2xsaXNpb25UeXBlPT09eGUuQWN0aXZlJiZlLmNvbGxpc2lvblR5cGUhPT14ZS5QYXNzaXZlKXt0LmNvbGxpc2lvblR5cGU9PT14ZS5BY3RpdmUmJmUuY29sbGlzaW9uVHlwZT09PXhlLkFjdGl2ZSYmKGk9aS5zY2FsZSguNSkpLHQucG9zLnkrPWkueSx0LnBvcy54Kz1pLng7dmFyIG49aS5ub3JtYWxpemUoKTtpZihuLmRvdCh0LnZlbCk8MCl7dmFyIG89bi5zY2FsZShuLmRvdCh0LnZlbC5uZWdhdGUoKSkpO3QudmVsPXQudmVsLmFkZChvKX10LmVtaXQoXCJwb3N0Y29sbGlzaW9uXCIsbmV3IGx0KHQsZSxUKGkpLGkpKX19LHQucHJvdG90eXBlLl9yZXNvbHZlQm94Q29sbGlzaW9uPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5ib2R5QS5ib2R5LmFjdG9yLGU9dGhpcy5ib2R5Qi5ib2R5LmFjdG9yLGk9VCh0aGlzLm10diksbj10aGlzLm10di5uZWdhdGUoKTt0LmVtaXQoXCJwcmVjb2xsaXNpb25cIixuZXcgdXQodCxlLGksbikpLGUuZW1pdChcInByZWNvbGxpc2lvblwiLG5ldyB1dChlLHQsQyhpKSxuLm5lZ2F0ZSgpKSksdGhpcy5fYXBwbHlCb3hJbXB1bHNlKHQsZSxuKSx0aGlzLl9hcHBseUJveEltcHVsc2UoZSx0LG4ubmVnYXRlKCkpfSx0LnByb3RvdHlwZS5fcmVzb2x2ZVJpZ2lkQm9keUNvbGxpc2lvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuYm9keUEuYm9keSxlPXRoaXMuYm9keUIuYm9keSxpPXRoaXMubXR2LG49dGhpcy5ub3JtYWw7aWYodC5hY3RvciE9PWUuYWN0b3Ipe3ZhciBvPVQodGhpcy5tdHYpO2lmKHQuYWN0b3IuZW1pdChcInByZWNvbGxpc2lvblwiLG5ldyB1dCh0aGlzLmJvZHlBLmJvZHkuYWN0b3IsdGhpcy5ib2R5Qi5ib2R5LmFjdG9yLG8sdGhpcy5tdHYpKSxlLmFjdG9yLmVtaXQoXCJwcmVjb2xsaXNpb25cIixuZXcgdXQodGhpcy5ib2R5Qi5ib2R5LmFjdG9yLHRoaXMuYm9keUEuYm9keS5hY3RvcixDKG8pLHRoaXMubXR2Lm5lZ2F0ZSgpKSksdC5hY3Rvci5jb2xsaXNpb25UeXBlIT09eGUuUGFzc2l2ZSYmZS5hY3Rvci5jb2xsaXNpb25UeXBlIT09eGUuUGFzc2l2ZSl7dmFyIHI9dC5hY3Rvci5jb2xsaXNpb25UeXBlPT09eGUuRml4ZWQ/MDoxL3QubWFzcyxzPWUuYWN0b3IuY29sbGlzaW9uVHlwZT09PXhlLkZpeGVkPzA6MS9lLm1hc3MsYT10LmFjdG9yLmNvbGxpc2lvblR5cGU9PT14ZS5GaXhlZD8wOjEvdC5tb2ksaD1lLmFjdG9yLmNvbGxpc2lvblR5cGU9PT14ZS5GaXhlZD8wOjEvZS5tb2ksYz1NYXRoLm1pbih0LnJlc3RpdHV0aW9uLGUucmVzdGl0dXRpb24pLHU9TWF0aC5taW4odC5mcmljdGlvbixlLmZyaWN0aW9uKSxsPShuPW4ubm9ybWFsaXplKCkpLm5vcm1hbCgpLm5vcm1hbGl6ZSgpLHA9dGhpcy5wb2ludC5zdWIodGhpcy5ib2R5QS5nZXRDZW50ZXIoKSksZD10aGlzLnBvaW50LnN1Yih0aGlzLmJvZHlCLmdldENlbnRlcigpKSxmPWUudmVsLmFkZChkLmNyb3NzKC1lLnJ4KSkuc3ViKHQudmVsLnN1YihwLmNyb3NzKHQucngpKSksXz1mLmRvdChuKSxnPWYuZG90KGwpLHk9cC5kb3QobCksdj1wLmRvdChuKSxtPWQuZG90KGwpLGI9ZC5kb3Qobik7aWYoIShfPjApKXt2YXIgdz0tKDErYykqXy8ocitzK2EqeSp5K2gqbSptKTtpZih0LmFjdG9yLmNvbGxpc2lvblR5cGU9PT14ZS5GaXhlZD8oZS52ZWw9ZS52ZWwuYWRkKG4uc2NhbGUodypzKSksVy5hbGxvd1JpZ2lkQm9keVJvdGF0aW9uJiYoZS5yeC09dypoKi1kLmNyb3NzKG4pKSxlLmFkZE10dihpKSk6ZS5hY3Rvci5jb2xsaXNpb25UeXBlPT09eGUuRml4ZWQ/KHQudmVsPXQudmVsLnN1YihuLnNjYWxlKHcqcikpLFcuYWxsb3dSaWdpZEJvZHlSb3RhdGlvbiYmKHQucngrPXcqYSotcC5jcm9zcyhuKSksdC5hZGRNdHYoaS5uZWdhdGUoKSkpOihlLnZlbD1lLnZlbC5hZGQobi5zY2FsZSh3KnMpKSx0LnZlbD10LnZlbC5zdWIobi5zY2FsZSh3KnIpKSxXLmFsbG93UmlnaWRCb2R5Um90YXRpb24mJihlLnJ4LT13KmgqLWQuY3Jvc3MobiksdC5yeCs9dyphKi1wLmNyb3NzKG4pKSxlLmFkZE10dihpLnNjYWxlKC41KSksdC5hZGRNdHYoaS5zY2FsZSgtLjUpKSksdSYmZyl7dmFyIHg9Zi5zdWIobi5zY2FsZShmLmRvdChuKSkpLm5vcm1hbGl6ZSgpLFA9Zi5kb3QoeCkvKHIrcyt2KnYqYStiKmIqaCksUz1uZXcgaygwLDApO1M9TWF0aC5hYnMoUCk8PXcqdT94LnNjYWxlKFApLm5lZ2F0ZSgpOnguc2NhbGUoLXcqdSksdC5hY3Rvci5jb2xsaXNpb25UeXBlPT09eGUuRml4ZWQ/KGUudmVsPWUudmVsLmFkZChTLnNjYWxlKHMpKSxXLmFsbG93UmlnaWRCb2R5Um90YXRpb24mJihlLnJ4Kz1TLmRvdCh4KSpoKmQuY3Jvc3MoeCkpKTplLmFjdG9yLmNvbGxpc2lvblR5cGU9PT14ZS5GaXhlZD8odC52ZWw9dC52ZWwuc3ViKFMuc2NhbGUocikpLFcuYWxsb3dSaWdpZEJvZHlSb3RhdGlvbiYmKHQucngtPVMuZG90KHgpKmEqcC5jcm9zcyh4KSkpOihlLnZlbD1lLnZlbC5hZGQoUy5zY2FsZShzKSksdC52ZWw9dC52ZWwuc3ViKFMuc2NhbGUocikpLFcuYWxsb3dSaWdpZEJvZHlSb3RhdGlvbiYmKGUucngrPVMuZG90KHgpKmgqZC5jcm9zcyh4KSx0LnJ4LT1TLmRvdCh4KSphKnAuY3Jvc3MoeCkpKX10LmFjdG9yLmVtaXQoXCJwb3N0Y29sbGlzaW9uXCIsbmV3IGx0KHRoaXMuYm9keUEuYm9keS5hY3Rvcix0aGlzLmJvZHlCLmJvZHkuYWN0b3Isbyx0aGlzLm10dikpLGUuYWN0b3IuZW1pdChcInBvc3Rjb2xsaXNpb25cIixuZXcgbHQodGhpcy5ib2R5Qi5ib2R5LmFjdG9yLHRoaXMuYm9keUEuYm9keS5hY3RvcixDKG8pLHRoaXMubXR2Lm5lZ2F0ZSgpKSl9fX19LHR9KCksRXQ9e0NvbGxpZGVDaXJjbGVDaXJjbGU6ZnVuY3Rpb24odCxlKXt2YXIgaT10LnJhZGl1cytlLnJhZGl1cyxuPXQuYm9keS5wb3MuYWRkKHQucG9zKSxvPWUuYm9keS5wb3MuYWRkKGUucG9zKTtpZihuLmRpc3RhbmNlKG8pPmkpcmV0dXJuIG51bGw7dmFyIHI9by5zdWIobikubm9ybWFsaXplKCkscz1yLnNjYWxlKGktby5kaXN0YW5jZShuKSksYT10LmdldEZ1cnRoZXN0UG9pbnQocik7cmV0dXJuIG5ldyBBdCh0LGUscyxhLHIpfSxDb2xsaWRlQ2lyY2xlUG9seWdvbjpmdW5jdGlvbih0LGUpe3ZhciBpPXQudGVzdFNlcGFyYXRpbmdBeGlzVGhlb3JlbShlKTtpZighaSlyZXR1cm4gbnVsbDtpPWkuZG90KGUuZ2V0Q2VudGVyKCkuc3ViKHQuZ2V0Q2VudGVyKCkpKTwwP2kubmVnYXRlKCk6aTt2YXIgbj1bXSxvPWUuZ2V0RnVydGhlc3RQb2ludChpLm5lZ2F0ZSgpKSxyPXQuZ2V0RnVydGhlc3RQb2ludChpKTtyZXR1cm4gdC5jb250YWlucyhvKSYmbi5wdXNoKG8pLGUuY29udGFpbnMocikmJm4ucHVzaChyKSwwPT09bi5sZW5ndGg/bnVsbDpuZXcgQXQodCxlLGksMj09PW4ubGVuZ3RoP25bMF0uYXZlcmFnZShuWzFdKTpuWzBdLGkubm9ybWFsaXplKCkpfSxDb2xsaWRlQ2lyY2xlRWRnZTpmdW5jdGlvbih0LGUpe3ZhciBpPXQuZ2V0Q2VudGVyKCksbj1lLmVuZC5zdWIoZS5iZWdpbiksbz1uLmRvdChlLmVuZC5zdWIoaSkpLHI9bi5kb3QoaS5zdWIoZS5iZWdpbikpO2lmKHI8PTApe3ZhciBzPWUuYmVnaW4uc3ViKGkpLGE9cy5kb3Qocyk7cmV0dXJuIGE+dC5yYWRpdXMqdC5yYWRpdXM/bnVsbDpuZXcgQXQodCxlLHMubm9ybWFsaXplKCkuc2NhbGUodC5yYWRpdXMtTWF0aC5zcXJ0KGEpKSxlLmJlZ2luLHMubm9ybWFsaXplKCkpfWlmKG88PTApe3ZhciBoPWUuZW5kLnN1YihpKSxjPWguZG90KGgpO3JldHVybiBjPnQucmFkaXVzKnQucmFkaXVzP251bGw6bmV3IEF0KHQsZSxoLm5vcm1hbGl6ZSgpLnNjYWxlKHQucmFkaXVzLU1hdGguc3FydChjKSksZS5lbmQsaC5ub3JtYWxpemUoKSl9dmFyIHU9bi5kb3QobiksbD1lLmJlZ2luLnNjYWxlKG8pLmFkZChlLmVuZC5zY2FsZShyKSkuc2NhbGUoMS91KSxwPWkuc3ViKGwpLGQ9cC5kb3QocCk7aWYoZD50LnJhZGl1cyp0LnJhZGl1cylyZXR1cm4gbnVsbDt2YXIgZj1uLnBlcnBlbmRpY3VsYXIoKTtmLmRvdChpLnN1YihlLmJlZ2luKSk8MCYmKGYueD0tZi54LGYueT0tZi55KTt2YXIgXz0oZj1mLm5vcm1hbGl6ZSgpKS5zY2FsZShNYXRoLmFicyh0LnJhZGl1cy1NYXRoLnNxcnQoZCkpKTtyZXR1cm4gbmV3IEF0KHQsZSxfLm5lZ2F0ZSgpLGwsZi5uZWdhdGUoKSl9LENvbGxpZGVFZGdlRWRnZTpmdW5jdGlvbigpe3JldHVybiBudWxsfSxDb2xsaWRlUG9seWdvbkVkZ2U6ZnVuY3Rpb24odCxlKXt2YXIgaT1lLmVuZC5zdWIoZS5iZWdpbikubm9ybWFsKCk7aWYodC5jb250YWlucyhlLmJlZ2luKSl7dmFyIG49dC5nZXRDbG9zZXN0RmFjZShlLmJlZ2luKSxvPW4uZGlzdGFuY2Uscj1uLmZhY2U7aWYobylyZXR1cm4gbmV3IEF0KHQsZSxvLm5lZ2F0ZSgpLGUuYmVnaW4uYWRkKG8ubmVnYXRlKCkpLHIubm9ybWFsKCkubmVnYXRlKCkpfWlmKHQuY29udGFpbnMoZS5lbmQpKXt2YXIgcz10LmdldENsb3Nlc3RGYWNlKGUuZW5kKTtvPXMuZGlzdGFuY2Uscj1zLmZhY2U7aWYobylyZXR1cm4gbmV3IEF0KHQsZSxvLm5lZ2F0ZSgpLGUuZW5kLmFkZChvLm5lZ2F0ZSgpKSxyLm5vcm1hbCgpLm5lZ2F0ZSgpKX12YXIgYT10LmdldENlbnRlcigpLGg9ZS5nZXRDZW50ZXIoKS5zdWIoYSkubm9ybWFsaXplKCksYz1uZXcgTXQoe3BvaW50czpbZS5iZWdpbixlLmVuZCxlLmVuZC5hZGQoaC5zY2FsZSgzMCkpLGUuYmVnaW4uYWRkKGguc2NhbGUoMzApKV19KSx1PXQudGVzdFNlcGFyYXRpbmdBeGlzVGhlb3JlbShjKTtyZXR1cm4gdT8oaT1pLmRvdChoKTwwP2kubmVnYXRlKCk6aSx1PXUuZG90KGgpPDA/dS5uZWdhdGUoKTp1LG5ldyBBdCh0LGUsdSx0LmdldEZ1cnRoZXN0UG9pbnQoaSksaSkpOm51bGx9LENvbGxpZGVQb2x5Z29uUG9seWdvbjpmdW5jdGlvbih0LGUpe3ZhciBpPXQudGVzdFNlcGFyYXRpbmdBeGlzVGhlb3JlbShlKTtpZighaSlyZXR1cm4gbnVsbDtpPWkuZG90KGUuZ2V0Q2VudGVyKCkuc3ViKHQuZ2V0Q2VudGVyKCkpKTwwP2kubmVnYXRlKCk6aTt2YXIgbj1bXSxvPXQuZ2V0RnVydGhlc3RQb2ludChpKSxyPWUuZ2V0RnVydGhlc3RQb2ludChpLm5lZ2F0ZSgpKTtlLmNvbnRhaW5zKG8pJiZuLnB1c2gobyksdC5jb250YWlucyhyKSYmbi5wdXNoKHIpLDA9PT1uLmxlbmd0aCYmbi5wdXNoKHIpO3ZhciBzPTI9PT1uLmxlbmd0aD9uWzBdLmFkZChuWzFdKS5zY2FsZSguNSk6blswXTtyZXR1cm4gbmV3IEF0KHQsZSxpLHMsaS5ub3JtYWxpemUoKSl9fSxDdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5wb3M9ay5aZXJvLmNsb25lKCksdGhpcy5wb3M9dC5wb3N8fGsuWmVyby5jbG9uZSgpLHRoaXMucmFkaXVzPXQucmFkaXVzfHwwLHRoaXMuYm9keT10LmJvZHl8fG51bGx9cmV0dXJuIHQucHJvdG90eXBlLmdldENlbnRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJvZHk/dGhpcy5wb3MuYWRkKHRoaXMuYm9keS5wb3MpOnRoaXMucG9zfSx0LnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ib2R5LnBvcy5kaXN0YW5jZSh0KTw9dGhpcy5yYWRpdXN9LHQucHJvdG90eXBlLnJheUNhc3Q9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0xLzApO3ZhciBpPXRoaXMuZ2V0Q2VudGVyKCksbj10LmRpcixvPXQucG9zLHI9TWF0aC5zcXJ0KE1hdGgucG93KG4uZG90KG8uc3ViKGkpKSwyKS1NYXRoLnBvdyhvLnN1YihpKS5kaXN0YW5jZSgpLDIpK01hdGgucG93KHRoaXMucmFkaXVzLDIpKTtpZihyPDApcmV0dXJuIG51bGw7dmFyIHM9MDtpZigwPT09cilyZXR1cm4ocz0tbi5kb3Qoby5zdWIoaSkpKT4wJiZzPGU/dC5nZXRQb2ludChzKTpudWxsO3ZhciBhPS1uLmRvdChvLnN1YihpKSkrcixoPS1uLmRvdChvLnN1YihpKSktcixjPU1hdGgubWluKGEsaCk7cmV0dXJuIGM8PWU/dC5nZXRQb2ludChjKTpudWxsfSx0LnByb3RvdHlwZS5jb2xsaWRlPWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiB0KXJldHVybiBFdC5Db2xsaWRlQ2lyY2xlQ2lyY2xlKHRoaXMsZSk7aWYoZSBpbnN0YW5jZW9mIE10KXJldHVybiBFdC5Db2xsaWRlQ2lyY2xlUG9seWdvbih0aGlzLGUpO2lmKGUgaW5zdGFuY2VvZiBUdClyZXR1cm4gRXQuQ29sbGlkZUNpcmNsZUVkZ2UodGhpcyxlKTt0aHJvdyBuZXcgRXJyb3IoXCJDaXJjbGUgY291bGQgbm90IGNvbGxpZGUgd2l0aCB1bmtub3duIElDb2xsaXNpb25BcmVhIFwiK3R5cGVvZiBlKX0sdC5wcm90b3R5cGUuZ2V0RnVydGhlc3RQb2ludD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5nZXRDZW50ZXIoKS5hZGQodC5ub3JtYWxpemUoKS5zY2FsZSh0aGlzLnJhZGl1cykpfSx0LnByb3RvdHlwZS5nZXRCb3VuZHM9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IER0KHRoaXMucG9zLngrdGhpcy5ib2R5LnBvcy54LXRoaXMucmFkaXVzLHRoaXMucG9zLnkrdGhpcy5ib2R5LnBvcy55LXRoaXMucmFkaXVzLHRoaXMucG9zLngrdGhpcy5ib2R5LnBvcy54K3RoaXMucmFkaXVzLHRoaXMucG9zLnkrdGhpcy5ib2R5LnBvcy55K3RoaXMucmFkaXVzKX0sdC5wcm90b3R5cGUuZ2V0QXhlcz1mdW5jdGlvbigpe3JldHVybiBudWxsfSx0LnByb3RvdHlwZS5nZXRNb21lbnRPZkluZXJ0aWE9ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy5ib2R5P3RoaXMuYm9keS5tYXNzOlcuZGVmYXVsdE1hc3MpKnRoaXMucmFkaXVzKnRoaXMucmFkaXVzLzJ9LHQucHJvdG90eXBlLnRlc3RTZXBhcmF0aW5nQXhpc1RoZW9yZW09ZnVuY3Rpb24odCl7dmFyIGU9dC5nZXRBeGVzKCksaT10LmdldENlbnRlcigpLG49dC5nZXRGdXJ0aGVzdFBvaW50KHRoaXMucG9zLnN1YihpKSk7ZS5wdXNoKHRoaXMucG9zLnN1YihuKS5ub3JtYWxpemUoKSk7Zm9yKHZhciBvPU51bWJlci5NQVhfVkFMVUUscj1udWxsLHM9LTEsYT0wO2E8ZS5sZW5ndGg7YSsrKXt2YXIgaD10LnByb2plY3QoZVthXSksYz10aGlzLnByb2plY3QoZVthXSksdT1oLmdldE92ZXJsYXAoYyk7aWYodTw9MClyZXR1cm4gbnVsbDt1PG8mJihvPXUscj1lW2FdLHM9YSl9cmV0dXJuIHM8MD9udWxsOnIubm9ybWFsaXplKCkuc2NhbGUobyl9LHQucHJvdG90eXBlLnJlY2FsYz1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUucHJvamVjdD1mdW5jdGlvbih0KXt2YXIgZT1bXSxpPXRoaXMuZ2V0Q2VudGVyKCkuZG90KHQpO3JldHVybiBlLnB1c2goaSksZS5wdXNoKGkrdGhpcy5yYWRpdXMpLGUucHVzaChpLXRoaXMucmFkaXVzKSxuZXcgSShNYXRoLm1pbi5hcHBseShNYXRoLGUpLE1hdGgubWF4LmFwcGx5KE1hdGgsZSkpfSx0LnByb3RvdHlwZS5kZWJ1Z0RyYXc9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT1QdC5HcmVlbi5jbG9uZSgpKTt2YXIgaT10aGlzLmJvZHk/dGhpcy5ib2R5LnBvcy5hZGQodGhpcy5wb3MpOnRoaXMucG9zLG49dGhpcy5ib2R5P3RoaXMuYm9keS5yb3RhdGlvbjowO3QuYmVnaW5QYXRoKCksdC5zdHJva2VTdHlsZT1lLnRvU3RyaW5nKCksdC5hcmMoaS54LGkueSx0aGlzLnJhZGl1cywwLDIqTWF0aC5QSSksdC5jbG9zZVBhdGgoKSx0LnN0cm9rZSgpLHQuYmVnaW5QYXRoKCksdC5tb3ZlVG8oaS54LGkueSksdC5saW5lVG8oTWF0aC5jb3MobikqdGhpcy5yYWRpdXMraS54LE1hdGguc2luKG4pKnRoaXMucmFkaXVzK2kueSksdC5jbG9zZVBhdGgoKSx0LnN0cm9rZSgpfSx0fSgpLFR0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmJlZ2luPXQuYmVnaW58fGsuWmVyby5jbG9uZSgpLHRoaXMuZW5kPXQuZW5kfHxrLlplcm8uY2xvbmUoKSx0aGlzLmJvZHk9dC5ib2R5fHxudWxsLHRoaXMucG9zPXRoaXMuZ2V0Q2VudGVyKCl9cmV0dXJuIHQucHJvdG90eXBlLmdldENlbnRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJlZ2luLmF2ZXJhZ2UodGhpcy5lbmQpLmFkZCh0aGlzLl9nZXRCb2R5UG9zKCkpfSx0LnByb3RvdHlwZS5fZ2V0Qm9keVBvcz1mdW5jdGlvbigpe3ZhciB0PWsuWmVyby5jbG9uZSgpO3JldHVybiB0aGlzLmJvZHkucG9zJiYodD10aGlzLmJvZHkucG9zKSx0fSx0LnByb3RvdHlwZS5fZ2V0VHJhbnNmb3JtZWRCZWdpbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuYm9keT90aGlzLmJvZHkucm90YXRpb246MDtyZXR1cm4gdGhpcy5iZWdpbi5yb3RhdGUodCkuYWRkKHRoaXMuX2dldEJvZHlQb3MoKSl9LHQucHJvdG90eXBlLl9nZXRUcmFuc2Zvcm1lZEVuZD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuYm9keT90aGlzLmJvZHkucm90YXRpb246MDtyZXR1cm4gdGhpcy5lbmQucm90YXRlKHQpLmFkZCh0aGlzLl9nZXRCb2R5UG9zKCkpfSx0LnByb3RvdHlwZS5nZXRTbG9wZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2dldFRyYW5zZm9ybWVkQmVnaW4oKSxlPXRoaXMuX2dldFRyYW5zZm9ybWVkRW5kKCksaT10LmRpc3RhbmNlKGUpO3JldHVybiBlLnN1Yih0KS5zY2FsZSgxL2kpfSx0LnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9nZXRUcmFuc2Zvcm1lZEJlZ2luKCksZT10aGlzLl9nZXRUcmFuc2Zvcm1lZEVuZCgpO3JldHVybiB0LmRpc3RhbmNlKGUpfSx0LnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbigpe3JldHVybiExfSx0LnByb3RvdHlwZS5yYXlDYXN0PWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MS8wKTt2YXIgaT10aGlzLl9nZXRUcmFuc2Zvcm1lZEJlZ2luKCkuc3ViKHQucG9zKTtpZigwPT09dC5kaXIuY3Jvc3ModGhpcy5nZXRTbG9wZSgpKSYmMCE9PWkuY3Jvc3ModC5kaXIpKXJldHVybiBudWxsO3ZhciBuPXQuZGlyLmNyb3NzKHRoaXMuZ2V0U2xvcGUoKSk7aWYoMD09PW4pcmV0dXJuIG51bGw7dmFyIG89aS5jcm9zcyh0aGlzLmdldFNsb3BlKCkpL247aWYobz49MCYmbzw9ZSl7dmFyIHI9aS5jcm9zcyh0LmRpcikvbi90aGlzLmdldExlbmd0aCgpO2lmKHI+PTAmJnI8PTEpcmV0dXJuIHQuZ2V0UG9pbnQobyl9cmV0dXJuIG51bGx9LHQucHJvdG90eXBlLmNvbGxpZGU9ZnVuY3Rpb24oZSl7aWYoZSBpbnN0YW5jZW9mIEN0KXJldHVybiBFdC5Db2xsaWRlQ2lyY2xlRWRnZShlLHRoaXMpO2lmKGUgaW5zdGFuY2VvZiBNdClyZXR1cm4gRXQuQ29sbGlkZVBvbHlnb25FZGdlKGUsdGhpcyk7aWYoZSBpbnN0YW5jZW9mIHQpcmV0dXJuIEV0LkNvbGxpZGVFZGdlRWRnZSgpO3Rocm93IG5ldyBFcnJvcihcIkVkZ2UgY291bGQgbm90IGNvbGxpZGUgd2l0aCB1bmtub3duIElDb2xsaXNpb25BcmVhIFwiK3R5cGVvZiBlKX0sdC5wcm90b3R5cGUuZ2V0RnVydGhlc3RQb2ludD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9nZXRUcmFuc2Zvcm1lZEJlZ2luKCksaT10aGlzLl9nZXRUcmFuc2Zvcm1lZEVuZCgpO3JldHVybiB0LmRvdChlKT4wP2U6aX0sdC5wcm90b3R5cGUuZ2V0Qm91bmRzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZ2V0VHJhbnNmb3JtZWRCZWdpbigpLGU9dGhpcy5fZ2V0VHJhbnNmb3JtZWRFbmQoKTtyZXR1cm4gbmV3IER0KE1hdGgubWluKHQueCxlLngpLE1hdGgubWluKHQueSxlLnkpLE1hdGgubWF4KHQueCxlLngpLE1hdGgubWF4KHQueSxlLnkpKX0sdC5wcm90b3R5cGUuZ2V0QXhlcz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2dldFRyYW5zZm9ybWVkRW5kKCkuc3ViKHRoaXMuX2dldFRyYW5zZm9ybWVkQmVnaW4oKSkubm9ybWFsKCksZT1bXTtyZXR1cm4gZS5wdXNoKHQpLGUucHVzaCh0Lm5lZ2F0ZSgpKSxlLnB1c2godC5ub3JtYWwoKSksZS5wdXNoKHQubm9ybWFsKCkubmVnYXRlKCkpLGV9LHQucHJvdG90eXBlLmdldE1vbWVudE9mSW5lcnRpYT1mdW5jdGlvbigpe3ZhciB0PXRoaXMuYm9keT90aGlzLmJvZHkubWFzczpXLmRlZmF1bHRNYXNzLGU9dGhpcy5lbmQuc3ViKHRoaXMuYmVnaW4pLmRpc3RhbmNlKCkvMjtyZXR1cm4gdCplKmV9LHQucHJvdG90eXBlLnJlY2FsYz1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUucHJvamVjdD1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10saT1bdGhpcy5fZ2V0VHJhbnNmb3JtZWRCZWdpbigpLHRoaXMuX2dldFRyYW5zZm9ybWVkRW5kKCldLG49aS5sZW5ndGgsbz0wO288bjtvKyspZS5wdXNoKGlbb10uZG90KHQpKTtyZXR1cm4gbmV3IEkoTWF0aC5taW4uYXBwbHkoTWF0aCxlKSxNYXRoLm1heC5hcHBseShNYXRoLGUpKX0sdC5wcm90b3R5cGUuZGVidWdEcmF3PWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9UHQuUmVkLmNsb25lKCkpLHQuc3Ryb2tlU3R5bGU9ZS50b1N0cmluZygpLHQuYmVnaW5QYXRoKCksdC5tb3ZlVG8odGhpcy5iZWdpbi54LHRoaXMuYmVnaW4ueSksdC5saW5lVG8odGhpcy5lbmQueCx0aGlzLmVuZC55KSx0LmNsb3NlUGF0aCgpLHQuc3Ryb2tlKCl9LHR9KCksTXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuX3RyYW5zZm9ybWVkUG9pbnRzPVtdLHRoaXMuX2F4ZXM9W10sdGhpcy5fc2lkZXM9W10sdGhpcy5wb3M9dC5wb3N8fGsuWmVyby5jbG9uZSgpO3ZhciBlPSEhdC5jbG9ja3dpc2VXaW5kaW5nO3RoaXMucG9pbnRzPShlP3QucG9pbnRzLnJldmVyc2UoKTp0LnBvaW50cyl8fFtdLHRoaXMuYm9keT10LmJvZHl8fG51bGwsdGhpcy5fY2FsY3VsYXRlVHJhbnNmb3JtYXRpb24oKX1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0Q2VudGVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm9keT90aGlzLmJvZHkucG9zLmFkZCh0aGlzLnBvcyk6dGhpcy5wb3N9LHQucHJvdG90eXBlLl9jYWxjdWxhdGVUcmFuc2Zvcm1hdGlvbj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuYm9keT90aGlzLmJvZHkucG9zLmFkZCh0aGlzLnBvcyk6dGhpcy5wb3MsZT10aGlzLmJvZHk/dGhpcy5ib2R5LnJvdGF0aW9uOjAsaT10aGlzLnBvaW50cy5sZW5ndGg7dGhpcy5fdHJhbnNmb3JtZWRQb2ludHMubGVuZ3RoPTA7Zm9yKHZhciBuPTA7bjxpO24rKyl0aGlzLl90cmFuc2Zvcm1lZFBvaW50c1tuXT10aGlzLnBvaW50c1tuXS5yb3RhdGUoZSkuYWRkKHQpfSx0LnByb3RvdHlwZS5nZXRUcmFuc2Zvcm1lZFBvaW50cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90cmFuc2Zvcm1lZFBvaW50cy5sZW5ndGh8fHRoaXMuX2NhbGN1bGF0ZVRyYW5zZm9ybWF0aW9uKCksdGhpcy5fdHJhbnNmb3JtZWRQb2ludHN9LHQucHJvdG90eXBlLmdldFNpZGVzPWZ1bmN0aW9uKCl7aWYodGhpcy5fc2lkZXMubGVuZ3RoKXJldHVybiB0aGlzLl9zaWRlcztmb3IodmFyIHQ9W10sZT10aGlzLmdldFRyYW5zZm9ybWVkUG9pbnRzKCksaT1lLmxlbmd0aCxuPTA7bjxpO24rKyl0LnB1c2gobmV3IEYoZVtuXSxlWyhuLTEraSklaV0pKTtyZXR1cm4gdGhpcy5fc2lkZXM9dCx0aGlzLl9zaWRlc30sdC5wcm90b3R5cGUucmVjYWxjPWZ1bmN0aW9uKCl7dGhpcy5fc2lkZXMubGVuZ3RoPTAsdGhpcy5fYXhlcy5sZW5ndGg9MCx0aGlzLl90cmFuc2Zvcm1lZFBvaW50cy5sZW5ndGg9MCx0aGlzLmdldFRyYW5zZm9ybWVkUG9pbnRzKCksdGhpcy5nZXRBeGVzKCksdGhpcy5nZXRTaWRlcygpfSx0LnByb3RvdHlwZS5jb250YWlucz1mdW5jdGlvbih0KXt2YXIgZT1uZXcgUih0LG5ldyBrKDEsMCkpO3JldHVybiB0aGlzLmdldFNpZGVzKCkucmVkdWNlKGZ1bmN0aW9uKHQsaSl7cmV0dXJuIGUuaW50ZXJzZWN0KGkpPj0wP3QrMTp0fSwwKSUyIT0wfSx0LnByb3RvdHlwZS5jb2xsaWRlPWZ1bmN0aW9uKGUpe2lmKGUgaW5zdGFuY2VvZiBDdClyZXR1cm4gRXQuQ29sbGlkZUNpcmNsZVBvbHlnb24oZSx0aGlzKTtpZihlIGluc3RhbmNlb2YgdClyZXR1cm4gRXQuQ29sbGlkZVBvbHlnb25Qb2x5Z29uKHRoaXMsZSk7aWYoZSBpbnN0YW5jZW9mIFR0KXJldHVybiBFdC5Db2xsaWRlUG9seWdvbkVkZ2UodGhpcyxlKTt0aHJvdyBuZXcgRXJyb3IoXCJQb2x5Z29uIGNvdWxkIG5vdCBjb2xsaWRlIHdpdGggdW5rbm93biBJQ29sbGlzaW9uQXJlYSBcIit0eXBlb2YgZSl9LHQucHJvdG90eXBlLmdldEZ1cnRoZXN0UG9pbnQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXRoaXMuZ2V0VHJhbnNmb3JtZWRQb2ludHMoKSxpPW51bGwsbj0tTnVtYmVyLk1BWF9WQUxVRSxvPTA7bzxlLmxlbmd0aDtvKyspe3ZhciByPXQuZG90KGVbb10pO3I+biYmKG49cixpPWVbb10pfXJldHVybiBpfSx0LnByb3RvdHlwZS5nZXRDbG9zZXN0RmFjZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9dGhpcy5nZXRTaWRlcygpLGk9TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLG49LTEsbz0tMSxyPTA7cjxlLmxlbmd0aDtyKyspe3ZhciBzPWVbcl0uZGlzdGFuY2VUb1BvaW50KHQpO3M8aSYmKGk9cyxuPXIsbz1zKX1yZXR1cm4tMSE9PW4/e2Rpc3RhbmNlOmVbbl0ubm9ybWFsKCkuc2NhbGUobyksZmFjZTplW25dfTpudWxsfSx0LnByb3RvdHlwZS5nZXRCb3VuZHM9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmdldFRyYW5zZm9ybWVkUG9pbnRzKCksZT10LnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLm1pbih0LGUueCl9LDk5OTk5OTk5OSksaT10LnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLm1heCh0LGUueCl9LC05OTk5OTk5OSksbj10LnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLm1pbih0LGUueSl9LDk5OTk5OTk5OTkpLG89dC5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5tYXgodCxlLnkpfSwtOTk5OTk5OTk5OSk7cmV0dXJuIG5ldyBEdChlLG4saSxvKX0sdC5wcm90b3R5cGUuZ2V0TW9tZW50T2ZJbmVydGlhPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXRoaXMuYm9keT90aGlzLmJvZHkubWFzczpXLmRlZmF1bHRNYXNzLGU9MCxpPTAsbj0wO248dGhpcy5wb2ludHMubGVuZ3RoO24rKyl7dmFyIG89KG4rMSkldGhpcy5wb2ludHMubGVuZ3RoLHI9dGhpcy5wb2ludHNbb10uY3Jvc3ModGhpcy5wb2ludHNbbl0pO2UrPXIqKHRoaXMucG9pbnRzW25dLmRvdCh0aGlzLnBvaW50c1tuXSkrdGhpcy5wb2ludHNbbl0uZG90KHRoaXMucG9pbnRzW29dKSt0aGlzLnBvaW50c1tvXS5kb3QodGhpcy5wb2ludHNbb10pKSxpKz1yfXJldHVybiB0LzYqKGUvaSl9LHQucHJvdG90eXBlLnJheUNhc3Q9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0xLzApO2Zvcih2YXIgaT10aGlzLmdldFNpZGVzKCksbj1pLmxlbmd0aCxvPU51bWJlci5NQVhfVkFMVUUscj0tMSxzPTA7czxuO3MrKyl7dmFyIGE9dC5pbnRlcnNlY3QoaVtzXSk7YT49MCYmYTxvJiZhPD1lJiYobz1hLHI9cyl9cmV0dXJuIHI+PTA/dC5nZXRQb2ludChvKTpudWxsfSx0LnByb3RvdHlwZS5nZXRBeGVzPWZ1bmN0aW9uKCl7aWYodGhpcy5fYXhlcy5sZW5ndGgpcmV0dXJuIHRoaXMuX2F4ZXM7Zm9yKHZhciB0PVtdLGU9dGhpcy5nZXRUcmFuc2Zvcm1lZFBvaW50cygpLGk9ZS5sZW5ndGgsbj0wO248aTtuKyspdC5wdXNoKGVbbl0uc3ViKGVbKG4rMSklaV0pLm5vcm1hbCgpKTtyZXR1cm4gdGhpcy5fYXhlcz10LHRoaXMuX2F4ZXN9LHQucHJvdG90eXBlLnRlc3RTZXBhcmF0aW5nQXhpc1RoZW9yZW09ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXQsaT10aGlzLmdldEF4ZXMoKS5jb25jYXQoZS5nZXRBeGVzKCkpLG49TnVtYmVyLk1BWF9WQUxVRSxvPW51bGwscj0tMSxzPTA7czxpLmxlbmd0aDtzKyspe3ZhciBhPXRoaXMucHJvamVjdChpW3NdKSxoPWUucHJvamVjdChpW3NdKSxjPWEuZ2V0T3ZlcmxhcChoKTtpZihjPD0wKXJldHVybiBudWxsO2M8biYmKG49YyxvPWlbc10scj1zKX1yZXR1cm4tMT09PXI/bnVsbDpvLm5vcm1hbGl6ZSgpLnNjYWxlKG4pfSx0LnByb3RvdHlwZS5wcm9qZWN0PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10aGlzLmdldFRyYW5zZm9ybWVkUG9pbnRzKCksaT1lLmxlbmd0aCxuPU51bWJlci5NQVhfVkFMVUUsbz0tTnVtYmVyLk1BWF9WQUxVRSxyPTA7cjxpO3IrKyl7dmFyIHM9ZVtyXS5kb3QodCk7bj1NYXRoLm1pbihuLHMpLG89TWF0aC5tYXgobyxzKX1yZXR1cm4gbmV3IEkobixvKX0sdC5wcm90b3R5cGUuZGVidWdEcmF3PWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9UHQuUmVkLmNsb25lKCkpLHQuYmVnaW5QYXRoKCksdC5zdHJva2VTdHlsZT1lLnRvU3RyaW5nKCk7dmFyIGk9dGhpcy5nZXRUcmFuc2Zvcm1lZFBvaW50cygpWzBdO3QubW92ZVRvKGkueCxpLnkpLHRoaXMuZ2V0VHJhbnNmb3JtZWRQb2ludHMoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QubGluZVRvKGUueCxlLnkpfSksdC5saW5lVG8oaS54LGkueSksdC5jbG9zZVBhdGgoKSx0LnN0cm9rZSgpfSx0fSgpLER0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsaSxuKXt2b2lkIDA9PT10JiYodD0wKSx2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1pJiYoaT0wKSx2b2lkIDA9PT1uJiYobj0wKSx0aGlzLmxlZnQ9dCx0aGlzLnRvcD1lLHRoaXMucmlnaHQ9aSx0aGlzLmJvdHRvbT1ufXJldHVybiB0LmZyb21Qb2ludHM9ZnVuY3Rpb24oZSl7Zm9yKHZhciBpPTEvMCxuPTEvMCxvPS0xLzAscj0tMS8wLHM9MDtzPGUubGVuZ3RoO3MrKyllW3NdLng8aSYmKGk9ZVtzXS54KSxlW3NdLng+byYmKG89ZVtzXS54KSxlW3NdLnk8biYmKG49ZVtzXS55KSxlW3NdLnk+ciYmKHI9ZVtzXS55KTtyZXR1cm4gbmV3IHQoaSxuLG8scil9LHQucHJvdG90eXBlLmdldFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmlnaHQtdGhpcy5sZWZ0fSx0LnByb3RvdHlwZS5nZXRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib3R0b20tdGhpcy50b3B9LHQucHJvdG90eXBlLnJvdGF0ZT1mdW5jdGlvbihlLGkpe3ZvaWQgMD09PWkmJihpPWsuWmVyby5jbG9uZSgpKTt2YXIgbj10aGlzLmdldFBvaW50cygpLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gdC5yb3RhdGUoZSxpKX0pO3JldHVybiB0LmZyb21Qb2ludHMobil9LHQucHJvdG90eXBlLmdldFBlcmltZXRlcj1mdW5jdGlvbigpe3JldHVybiAyKih0aGlzLmdldFdpZHRoKCkrdGhpcy5nZXRIZWlnaHQoKSl9LHQucHJvdG90eXBlLmdldFBvaW50cz1mdW5jdGlvbigpe3ZhciB0PVtdO3JldHVybiB0LnB1c2gobmV3IGsodGhpcy5sZWZ0LHRoaXMudG9wKSksdC5wdXNoKG5ldyBrKHRoaXMucmlnaHQsdGhpcy50b3ApKSx0LnB1c2gobmV3IGsodGhpcy5yaWdodCx0aGlzLmJvdHRvbSkpLHQucHVzaChuZXcgayh0aGlzLmxlZnQsdGhpcy5ib3R0b20pKSx0fSx0LnByb3RvdHlwZS50b1BvbHlnb249ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBNdCh7Ym9keTp0P3QuYm9keTpudWxsLHBvaW50czp0aGlzLmdldFBvaW50cygpLHBvczprLlplcm8uY2xvbmUoKX0pfSx0LnByb3RvdHlwZS5yYXlDYXN0PWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9MS8wKTt2YXIgaT0tMS8wLG49MS8wLG89MD09PXQuZGlyLng/TnVtYmVyLk1BWF9WQUxVRToxL3QuZGlyLngscj0wPT09dC5kaXIueT9OdW1iZXIuTUFYX1ZBTFVFOjEvdC5kaXIueSxzPSh0aGlzLmxlZnQtdC5wb3MueCkqbyxhPSh0aGlzLnJpZ2h0LXQucG9zLngpKm87aT1NYXRoLm1pbihzLGEpLG49TWF0aC5tYXgocyxhKTt2YXIgaD0odGhpcy50b3AtdC5wb3MueSkqcixjPSh0aGlzLmJvdHRvbS10LnBvcy55KSpyO3JldHVybiBpPU1hdGgubWF4KGksTWF0aC5taW4oaCxjKSksKG49TWF0aC5taW4obixNYXRoLm1heChoLGMpKSk+PU1hdGgubWF4KDAsaSkmJmk8ZX0sdC5wcm90b3R5cGUucmF5Q2FzdFRpbWU9ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT0xLzApO3ZhciBpPS0xLzAsbj0xLzAsbz0wPT09dC5kaXIueD9OdW1iZXIuTUFYX1ZBTFVFOjEvdC5kaXIueCxyPTA9PT10LmRpci55P051bWJlci5NQVhfVkFMVUU6MS90LmRpci55LHM9KHRoaXMubGVmdC10LnBvcy54KSpvLGE9KHRoaXMucmlnaHQtdC5wb3MueCkqbztpPU1hdGgubWluKHMsYSksbj1NYXRoLm1heChzLGEpO3ZhciBoPSh0aGlzLnRvcC10LnBvcy55KSpyLGM9KHRoaXMuYm90dG9tLXQucG9zLnkpKnI7cmV0dXJuIGk9TWF0aC5tYXgoaSxNYXRoLm1pbihoLGMpKSwobj1NYXRoLm1pbihuLE1hdGgubWF4KGgsYykpKT49TWF0aC5tYXgoMCxpKSYmaTxlP2k6LTF9LHQucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2Ygaz90aGlzLmxlZnQ8PWUueCYmdGhpcy50b3A8PWUueSYmdGhpcy5ib3R0b20+PWUueSYmdGhpcy5yaWdodD49ZS54OmUgaW5zdGFuY2VvZiB0JiYodGhpcy5sZWZ0PGUubGVmdCYmdGhpcy50b3A8ZS50b3AmJmUuYm90dG9tPHRoaXMuYm90dG9tJiZlLnJpZ2h0PHRoaXMucmlnaHQpfSx0LnByb3RvdHlwZS5jb21iaW5lPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgdChNYXRoLm1pbih0aGlzLmxlZnQsZS5sZWZ0KSxNYXRoLm1pbih0aGlzLnRvcCxlLnRvcCksTWF0aC5tYXgodGhpcy5yaWdodCxlLnJpZ2h0KSxNYXRoLm1heCh0aGlzLmJvdHRvbSxlLmJvdHRvbSkpfSx0LnByb3RvdHlwZS5jb2xsaWRlcz1mdW5jdGlvbihlKXtpZihlIGluc3RhbmNlb2YgdCl7dmFyIGk9ZSxuPXRoaXMuY29tYmluZShpKTtpZihuLmdldFdpZHRoKCk8aS5nZXRXaWR0aCgpK3RoaXMuZ2V0V2lkdGgoKSYmbi5nZXRIZWlnaHQoKTxpLmdldEhlaWdodCgpK3RoaXMuZ2V0SGVpZ2h0KCkpe3ZhciBvPTA7bz10aGlzLnJpZ2h0Pj1pLmxlZnQmJnRoaXMucmlnaHQ8PWkucmlnaHQ/aS5sZWZ0LXRoaXMucmlnaHQ6aS5yaWdodC10aGlzLmxlZnQ7dmFyIHI9MDtyZXR1cm4gcj10aGlzLnRvcDw9aS5ib3R0b20mJnRoaXMudG9wPj1pLnRvcD9pLmJvdHRvbS10aGlzLnRvcDppLnRvcC10aGlzLmJvdHRvbSxNYXRoLmFicyhvKTxNYXRoLmFicyhyKT9uZXcgayhvLDApOm5ldyBrKDAscil9cmV0dXJuIG51bGx9cmV0dXJuIG51bGx9LHQucHJvdG90eXBlLmRlYnVnRHJhdz1mdW5jdGlvbih0LGUpe3ZvaWQgMD09PWUmJihlPVB0LlllbGxvdyksdC5zdHJva2VTdHlsZT1lLnRvU3RyaW5nKCksdC5zdHJva2VSZWN0KHRoaXMubGVmdCx0aGlzLnRvcCx0aGlzLmdldFdpZHRoKCksdGhpcy5nZXRIZWlnaHQoKSl9LHR9KCk7IWZ1bmN0aW9uKHQpe3RbdC5EZWJ1Zz0wXT1cIkRlYnVnXCIsdFt0LkluZm89MV09XCJJbmZvXCIsdFt0Lldhcm49Ml09XCJXYXJuXCIsdFt0LkVycm9yPTNdPVwiRXJyb3JcIix0W3QuRmF0YWw9NF09XCJGYXRhbFwifSh6fHwoej17fSkpO3ZhciBPdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXtpZih0aGlzLl9hcHBlbmRlcnM9W10sdGhpcy5kZWZhdWx0TGV2ZWw9ei5JbmZvLHQuX2luc3RhbmNlKXRocm93IG5ldyBFcnJvcihcIkxvZ2dlciBpcyBhIHNpbmdsZXRvblwiKTtyZXR1cm4gdC5faW5zdGFuY2U9dGhpcyx0Ll9pbnN0YW5jZS5hZGRBcHBlbmRlcihuZXcgQnQpLHQuX2luc3RhbmNlfXJldHVybiB0LmdldEluc3RhbmNlPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PXQuX2luc3RhbmNlJiYodC5faW5zdGFuY2U9bmV3IHQpLHQuX2luc3RhbmNlfSx0LnByb3RvdHlwZS5hZGRBcHBlbmRlcj1mdW5jdGlvbih0KXt0aGlzLl9hcHBlbmRlcnMucHVzaCh0KX0sdC5wcm90b3R5cGUuY2xlYXJBcHBlbmRlcnM9ZnVuY3Rpb24oKXt0aGlzLl9hcHBlbmRlcnMubGVuZ3RoPTB9LHQucHJvdG90eXBlLl9sb2c9ZnVuY3Rpb24odCxlKXtudWxsPT10JiYodD10aGlzLmRlZmF1bHRMZXZlbCk7Zm9yKHZhciBpPTAsbj10aGlzLl9hcHBlbmRlcnMubGVuZ3RoO2k8bjtpKyspdD49dGhpcy5kZWZhdWx0TGV2ZWwmJnRoaXMuX2FwcGVuZGVyc1tpXS5sb2codCxlKX0sdC5wcm90b3R5cGUuZGVidWc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dGhpcy5fbG9nKHouRGVidWcsdCl9LHQucHJvdG90eXBlLmluZm89ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dGhpcy5fbG9nKHouSW5mbyx0KX0sdC5wcm90b3R5cGUud2Fybj1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTt0aGlzLl9sb2coei5XYXJuLHQpfSx0LnByb3RvdHlwZS5lcnJvcj1mdW5jdGlvbigpe2Zvcih2YXIgdD1bXSxlPTA7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl0W2VdPWFyZ3VtZW50c1tlXTt0aGlzLl9sb2coei5FcnJvcix0KX0sdC5wcm90b3R5cGUuZmF0YWw9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10sZT0wO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspdFtlXT1hcmd1bWVudHNbZV07dGhpcy5fbG9nKHouRmF0YWwsdCl9LHQuX2luc3RhbmNlPW51bGwsdH0oKSxCdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLmxvZz1mdW5jdGlvbih0LGUpe2lmKGNvbnNvbGV8fGNvbnNvbGUubG9nfHwhY29uc29sZS53YXJufHwhY29uc29sZS5lcnJvcil7dmFyIGk9W107aS51bnNoaWZ0LmFwcGx5KGksZSksaS51bnNoaWZ0KFwiW1wiK3pbdF0rXCJdIDogXCIpLHQ8ei5XYXJuP2NvbnNvbGUubG9nLmFwcGx5P2NvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsaSk6Y29uc29sZS5sb2coaS5qb2luKFwiIFwiKSk6dDx6LkVycm9yP2NvbnNvbGUud2Fybi5hcHBseT9jb25zb2xlLndhcm4uYXBwbHkoY29uc29sZSxpKTpjb25zb2xlLndhcm4oaS5qb2luKFwiIFwiKSk6Y29uc29sZS5lcnJvci5hcHBseT9jb25zb2xlLmVycm9yLmFwcGx5KGNvbnNvbGUsaSk6Y29uc29sZS5lcnJvcihpLmpvaW4oXCIgXCIpKX19LHR9KCksa3Q9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5fbWVzc2FnZXM9W10sdGhpcy5fY2FudmFzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksdGhpcy5fY2FudmFzLndpZHRoPXR8fHdpbmRvdy5pbm5lcldpZHRoLHRoaXMuX2NhbnZhcy5oZWlnaHQ9ZXx8d2luZG93LmlubmVySGVpZ2h0LHRoaXMuX2NhbnZhcy5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdGhpcy5fY3R4PXRoaXMuX2NhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9jYW52YXMpfXJldHVybiB0LnByb3RvdHlwZS5sb2c9ZnVuY3Rpb24odCxlKXt2YXIgaT1lLmpvaW4oXCIsXCIpO3RoaXMuX2N0eC5jbGVhclJlY3QoMCwwLHRoaXMuX2NhbnZhcy53aWR0aCx0aGlzLl9jYW52YXMuaGVpZ2h0KSx0aGlzLl9tZXNzYWdlcy51bnNoaWZ0KFwiW1wiK3pbdF0rXCJdIDogXCIraSk7Zm9yKHZhciBuPTEwLG89MSxyPTA7cjx0aGlzLl9tZXNzYWdlcy5sZW5ndGg7cisrKXRoaXMuX2N0eC5maWxsU3R5bGU9XCJyZ2JhKDI1NSwyNTUsMjU1LFwiK28udG9GaXhlZCgyKStcIilcIix0aGlzLl9jdHguZmlsbFRleHQodGhpcy5fbWVzc2FnZXNbcl0sMjAwLG4pLG4rPTEwLG89bz4wP28tLjA1OjB9LHR9KCksUnQ9ZnVuY3Rpb24oKXt2YXIgdD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkgaW4gZSllLmhhc093blByb3BlcnR5KGkpJiYodFtpXT1lW2ldKX07cmV0dXJuIGZ1bmN0aW9uKGUsaSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsaSksZS5wcm90b3R5cGU9bnVsbD09PWk/T2JqZWN0LmNyZWF0ZShpKToobi5wcm90b3R5cGU9aS5wcm90b3R5cGUsbmV3IG4pfX0oKSxGdD1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSxuKXt2b2lkIDA9PT1uJiYobj0hMCk7dmFyIG89dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBvLnBhdGg9ZSxvLnJlc3BvbnNlVHlwZT1pLG8uYnVzdENhY2hlPW4sby5kYXRhPW51bGwsby5sb2dnZXI9T3QuZ2V0SW5zdGFuY2UoKSxvLm9ucHJvZ3Jlc3M9ZnVuY3Rpb24oKXt9LG8ub25jb21wbGV0ZT1mdW5jdGlvbigpe30sby5vbmVycm9yPWZ1bmN0aW9uKCl7fSxvfXJldHVybiBSdChlLHQpLGUucHJvdG90eXBlLmlzTG9hZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGwhPT10aGlzLmRhdGF9LGUucHJvdG90eXBlLndpcmVFbmdpbmU9ZnVuY3Rpb24odCl7fSxlLnByb3RvdHlwZS5fY2FjaGVCdXN0PWZ1bmN0aW9uKHQpe3JldHVybi9cXD9cXHcqPVxcdyovLnRlc3QodCk/dCs9XCImX189XCIrRGF0ZS5ub3coKTp0Kz1cIj9fXz1cIitEYXRlLm5vdygpLHR9LGUucHJvdG90eXBlLl9zdGFydD1mdW5jdGlvbigpe3RoaXMubG9nZ2VyLmRlYnVnKFwiU3RhcnRlZCBsb2FkaW5nIHJlc291cmNlIFwiK3RoaXMucGF0aCl9LGUucHJvdG90eXBlLmxvYWQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9bmV3IHA7aWYobnVsbCE9PXRoaXMuZGF0YSlyZXR1cm4gdGhpcy5sb2dnZXIuZGVidWcoXCJBbHJlYWR5IGhhdmUgZGF0YSBmb3IgcmVzb3VyY2VcIix0aGlzLnBhdGgpLGUucmVzb2x2ZSh0aGlzLmRhdGEpLHRoaXMub25jb21wbGV0ZSgpLGU7dmFyIGk9bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybiBpLm9wZW4oXCJHRVRcIix0aGlzLmJ1c3RDYWNoZT90aGlzLl9jYWNoZUJ1c3QodGhpcy5wYXRoKTp0aGlzLnBhdGgsITApLGkucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUeXBlLGkub25sb2Fkc3RhcnQ9ZnVuY3Rpb24oKXt0Ll9zdGFydCgpfSxpLm9ucHJvZ3Jlc3M9dGhpcy5vbnByb2dyZXNzLGkub25lcnJvcj10aGlzLm9uZXJyb3IsaS5vbmxvYWQ9ZnVuY3Rpb24oKXtpZigwIT09aS5zdGF0dXMmJjIwMCE9PWkuc3RhdHVzKXJldHVybiB0LmxvZ2dlci5lcnJvcihcIkZhaWxlZCB0byBsb2FkIHJlc291cmNlIFwiLHQucGF0aCxcIiBzZXJ2ZXIgcmVzcG9uZGVkIHdpdGggZXJyb3IgY29kZVwiLGkuc3RhdHVzKSx0Lm9uZXJyb3IoaS5yZXNwb25zZSksdm9pZCBlLnJlc29sdmUoaS5yZXNwb25zZSk7dC5kYXRhPXQucHJvY2Vzc0RhdGEoaS5yZXNwb25zZSksdC5vbmNvbXBsZXRlKCksdC5sb2dnZXIuZGVidWcoXCJDb21wbGV0ZWQgbG9hZGluZyByZXNvdXJjZVwiLHQucGF0aCksZS5yZXNvbHZlKHQuZGF0YSl9LGkuc2VuZCgpLGV9LGUucHJvdG90eXBlLmdldERhdGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhfSxlLnByb3RvdHlwZS5zZXREYXRhPWZ1bmN0aW9uKHQpe3RoaXMuZGF0YT10aGlzLnByb2Nlc3NEYXRhKHQpfSxlLnByb3RvdHlwZS5wcm9jZXNzRGF0YT1mdW5jdGlvbih0KXtyZXR1cm5cImJsb2JcIj09PXRoaXMucmVzcG9uc2VUeXBlP1VSTC5jcmVhdGVPYmplY3RVUkwodCk6dH0sZX0oeHQpLEl0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUudXBkYXRlUGl4ZWw9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPTQqKHQrZSppLndpZHRoKSxvPWkuZGF0YSxyPShvW24rMF0rb1tuKzFdK29bbisyXSkvMztvW24rMF09cixvW24rMV09cixvW24rMl09cn0sdH0oKSxMdD1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQucHJvdG90eXBlLnVwZGF0ZVBpeGVsPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj00Kih0K2UqaS53aWR0aCksbz1pLmRhdGE7b1tuKzBdPTI1NS1vW24rMF0sb1tuKzFdPTI1NS1vW24rMV0sb1tuKzJdPTI1NS1vW24rMl19LHR9KCksSHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMub3BhY2l0eT10fXJldHVybiB0LnByb3RvdHlwZS51cGRhdGVQaXhlbD1mdW5jdGlvbih0LGUsaSl7dmFyIG49NCoodCtlKmkud2lkdGgpLG89aS5kYXRhOzAhPT1vW24rM10mJihvW24rM109TWF0aC5yb3VuZCh0aGlzLm9wYWNpdHkqb1tuKzNdKSl9LHR9KCksenQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuY29sb3I9dH1yZXR1cm4gdC5wcm90b3R5cGUudXBkYXRlUGl4ZWw9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPTQqKHQrZSppLndpZHRoKSxvPWkuZGF0YTswIT09b1tuKzNdJiYob1tuKzBdPShvW24rMF0rdGhpcy5jb2xvci5yKS8yLG9bbisxXT0ob1tuKzFdK3RoaXMuY29sb3IuZykvMixvW24rMl09KG9bbisyXSt0aGlzLmNvbG9yLmIpLzIpfSx0fSgpLFd0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt2b2lkIDA9PT10JiYodD0uMSksdGhpcy5mYWN0b3I9dH1yZXR1cm4gdC5wcm90b3R5cGUudXBkYXRlUGl4ZWw9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPTQqKHQrZSppLndpZHRoKSxvPWkuZGF0YSxyPVB0LmZyb21SR0Iob1tuKzBdLG9bbisxXSxvW24rMl0sb1tuKzNdKS5saWdodGVuKHRoaXMuZmFjdG9yKTtvW24rMF09ci5yLG9bbisxXT1yLmcsb1tuKzJdPXIuYixvW24rM109ci5hfSx0fSgpLGp0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt2b2lkIDA9PT10JiYodD0uMSksdGhpcy5mYWN0b3I9dH1yZXR1cm4gdC5wcm90b3R5cGUudXBkYXRlUGl4ZWw9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPTQqKHQrZSppLndpZHRoKSxvPWkuZGF0YSxyPVB0LmZyb21SR0Iob1tuKzBdLG9bbisxXSxvW24rMl0sb1tuKzNdKS5kYXJrZW4odGhpcy5mYWN0b3IpO29bbiswXT1yLnIsb1tuKzFdPXIuZyxvW24rMl09ci5iLG9bbiszXT1yLmF9LHR9KCksVXQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3ZvaWQgMD09PXQmJih0PS4xKSx0aGlzLmZhY3Rvcj10fXJldHVybiB0LnByb3RvdHlwZS51cGRhdGVQaXhlbD1mdW5jdGlvbih0LGUsaSl7dmFyIG49NCoodCtlKmkud2lkdGgpLG89aS5kYXRhLHI9UHQuZnJvbVJHQihvW24rMF0sb1tuKzFdLG9bbisyXSxvW24rM10pLnNhdHVyYXRlKHRoaXMuZmFjdG9yKTtvW24rMF09ci5yLG9bbisxXT1yLmcsb1tuKzJdPXIuYixvW24rM109ci5hfSx0fSgpLE50PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt2b2lkIDA9PT10JiYodD0uMSksdGhpcy5mYWN0b3I9dH1yZXR1cm4gdC5wcm90b3R5cGUudXBkYXRlUGl4ZWw9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPTQqKHQrZSppLndpZHRoKSxvPWkuZGF0YSxyPVB0LmZyb21SR0Iob1tuKzBdLG9bbisxXSxvW24rMl0sb1tuKzNdKS5kZXNhdHVyYXRlKHRoaXMuZmFjdG9yKTtvW24rMF09ci5yLG9bbisxXT1yLmcsb1tuKzJdPXIuYixvW24rM109ci5hfSx0fSgpLHF0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLmNvbG9yPXR9cmV0dXJuIHQucHJvdG90eXBlLnVwZGF0ZVBpeGVsPWZ1bmN0aW9uKHQsZSxpKXt2YXIgbj00Kih0K2UqaS53aWR0aCksbz1pLmRhdGE7MCE9PW9bbiszXSYmKG9bbiswXT10aGlzLmNvbG9yLnIsb1tuKzFdPXRoaXMuY29sb3IuZyxvW24rMl09dGhpcy5jb2xvci5iKX0sdH0oKSxYdD1mdW5jdGlvbigpe3ZhciB0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiBlKWUuaGFzT3duUHJvcGVydHkoaSkmJih0W2ldPWVbaV0pfTtyZXR1cm4gZnVuY3Rpb24oZSxpKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxpKSxlLnByb3RvdHlwZT1udWxsPT09aT9PYmplY3QuY3JlYXRlKGkpOihuLnByb3RvdHlwZT1pLnByb3RvdHlwZSxuZXcgbil9fSgpO2Z1bmN0aW9uIFZ0KHQpe3JldHVybiBmdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7Zm9yKHZhciBlPVtdLGk9MDtpPGFyZ3VtZW50cy5sZW5ndGg7aSsrKWVbaV09YXJndW1lbnRzW2ldO3ZhciBuPXQuYXBwbHkodGhpcyxlKXx8dGhpcztyZXR1cm4gMSE9PWUuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10fSkubGVuZ3RofHwhZVswXXx8XCJvYmplY3RcIiE9dHlwZW9mIGVbMF18fGVbMF1pbnN0YW5jZW9mIEFycmF5fHxuLmFzc2lnbihlWzBdKSxufXJldHVybiBYdChlLHQpLGUucHJvdG90eXBlLmFzc2lnbj1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdClcImZ1bmN0aW9uXCIhPXR5cGVvZiB0aGlzW2VdJiYodGhpc1tlXT10W2VdKX0sZX0odCl9dmFyIEd0LFl0PWZ1bmN0aW9uKCl7dmFyIHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShpKSYmKHRbaV09ZVtpXSl9O3JldHVybiBmdW5jdGlvbihlLGkpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLGkpLGUucHJvdG90eXBlPW51bGw9PT1pP09iamVjdC5jcmVhdGUoaSk6KG4ucHJvdG90eXBlPWkucHJvdG90eXBlLG5ldyBuKX19KCksS3Q9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGksbixvLHIpe3JldHVybiB0LmNhbGwodGhpcyxlLGksbixvLHIpfHx0aGlzfXJldHVybiBZdChlLHQpLGV9KFZ0KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsaSxuLG8pe3ZhciByPXRoaXM7dGhpcy54PTAsdGhpcy55PTAsdGhpcy5yb3RhdGlvbj0wLHRoaXMuYW5jaG9yPW5ldyBrKDAsMCksdGhpcy5zY2FsZT1uZXcgaygxLDEpLHRoaXMubG9nZ2VyPU90LmdldEluc3RhbmNlKCksdGhpcy5mbGlwVmVydGljYWw9ITEsdGhpcy5mbGlwSG9yaXpvbnRhbD0hMSx0aGlzLmVmZmVjdHM9W10sdGhpcy53aWR0aD0wLHRoaXMuaGVpZ2h0PTAsdGhpcy5fc3ByaXRlQ2FudmFzPW51bGwsdGhpcy5fc3ByaXRlQ3R4PW51bGwsdGhpcy5fcGl4ZWxEYXRhPW51bGwsdGhpcy5fcGl4ZWxzTG9hZGVkPSExLHRoaXMuX2RpcnR5RWZmZWN0PSExO3ZhciBzPXQ7aWYodCYmISh0IGluc3RhbmNlb2YgWnQpJiYoZT0wfHQueCxpPTB8dC55LG49MHx0LndpZHRoLG89MHx0LmhlaWdodCwhKHM9dC5pbWFnZSkpKXt0aHJvdyBuZXcgRXJyb3IoXCJBbiBpbWFnZSB0ZXh0dXJlIGlzIHJlcXVpcmVkIHRvIGNvbnRzcnVjdCBhIHNwcml0ZVwiKX10aGlzLng9ZXx8MCx0aGlzLnk9aXx8MCx0aGlzLl90ZXh0dXJlPXMsdGhpcy5fc3ByaXRlQ2FudmFzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksdGhpcy5fc3ByaXRlQ2FudmFzLndpZHRoPW4sdGhpcy5fc3ByaXRlQ2FudmFzLmhlaWdodD1vLHRoaXMuX3Nwcml0ZUN0eD10aGlzLl9zcHJpdGVDYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpLHRoaXMuX3RleHR1cmUubG9hZGVkLnRoZW4oZnVuY3Rpb24oKXtyLndpZHRoPXIud2lkdGh8fHIuX3RleHR1cmUuaW1hZ2UubmF0dXJhbFdpZHRoLHIuaGVpZ2h0PXIuaGVpZ2h0fHxyLl90ZXh0dXJlLmltYWdlLm5hdHVyYWxIZWlnaHQsci5fc3ByaXRlQ2FudmFzLndpZHRoPXIuX3Nwcml0ZUNhbnZhcy53aWR0aHx8ci5fdGV4dHVyZS5pbWFnZS5uYXR1cmFsV2lkdGgsci5fc3ByaXRlQ2FudmFzLmhlaWdodD1yLl9zcHJpdGVDYW52YXMuaGVpZ2h0fHxyLl90ZXh0dXJlLmltYWdlLm5hdHVyYWxIZWlnaHQsci5fbG9hZFBpeGVscygpLHIuX2RpcnR5RWZmZWN0PSEwfSkuZXJyb3IoZnVuY3Rpb24odCl7ci5sb2dnZXIuZXJyb3IoXCJFcnJvciBsb2FkaW5nIHRleHR1cmUgXCIsci5fdGV4dHVyZS5wYXRoLHQpfSksdGhpcy53aWR0aD1uLHRoaXMuaGVpZ2h0PW99cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImRyYXdXaWR0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53aWR0aCp0aGlzLnNjYWxlLnh9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiZHJhd0hlaWdodFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWlnaHQqdGhpcy5zY2FsZS55fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLl9sb2FkUGl4ZWxzPWZ1bmN0aW9uKCl7aWYodGhpcy5fdGV4dHVyZS5pc0xvYWRlZCgpJiYhdGhpcy5fcGl4ZWxzTG9hZGVkKXt2YXIgdD10aGlzLl90ZXh0dXJlLmltYWdlLm5hdHVyYWxXaWR0aHx8MCxlPXRoaXMuX3RleHR1cmUuaW1hZ2UubmF0dXJhbEhlaWdodHx8MDtpZih0aGlzLndpZHRoPnQmJnRoaXMubG9nZ2VyLndhcm4oXCJUaGUgc3ByaXRlIHdpZHRoIFwiK3RoaXMud2lkdGgrXCIgZXhjZWVkcyB0aGUgd2lkdGggXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIrdCtcIiBvZiB0aGUgYmFja2luZyB0ZXh0dXJlIFwiK3RoaXMuX3RleHR1cmUucGF0aCksdGhpcy53aWR0aDw9MHx8dDw9MCl0aHJvdyBuZXcgRXJyb3IoXCJUaGUgd2lkdGggb2YgYSBzcHJpdGUgY2Fubm90IGJlIDAgb3IgbmVnYXRpdmUsIHNwcml0ZSB3aWR0aDogXCIrdGhpcy53aWR0aCtcIiwgb3JpZ2luYWwgd2lkdGg6IFwiK3QpO2lmKHRoaXMuaGVpZ2h0PmUmJnRoaXMubG9nZ2VyLndhcm4oXCJUaGUgc3ByaXRlIGhlaWdodCBcIit0aGlzLmhlaWdodCtcIiBleGNlZWRzIHRoZSBoZWlnaHQgXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIrZStcIiBvZiB0aGUgYmFja2luZyB0ZXh0dXJlIFwiK3RoaXMuX3RleHR1cmUucGF0aCksdGhpcy5oZWlnaHQ8PTB8fGU8PTApdGhyb3cgbmV3IEVycm9yKFwiVGhlIGhlaWdodCBvZiBhIHNwcml0ZSBjYW5ub3QgYmUgMCBvciBuZWdhdGl2ZSwgc3ByaXRlIGhlaWdodDogXCIrdGhpcy5oZWlnaHQrXCIsIG9yaWdpbmFsIGhlaWdodDogXCIrZSk7dGhpcy5fc3ByaXRlQ3R4LmRyYXdJbWFnZSh0aGlzLl90ZXh0dXJlLmltYWdlLHkodGhpcy54LDAsdCkseSh0aGlzLnksMCxlKSx5KHRoaXMud2lkdGgsMCx0KSx5KHRoaXMuaGVpZ2h0LDAsZSksMCwwLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpLHRoaXMuX3BpeGVsc0xvYWRlZD0hMH19LHQucHJvdG90eXBlLm9wYWNpdHk9ZnVuY3Rpb24odCl7dGhpcy5hZGRFZmZlY3QobmV3IEh0KHQpKX0sdC5wcm90b3R5cGUuZ3JheXNjYWxlPWZ1bmN0aW9uKCl7dGhpcy5hZGRFZmZlY3QobmV3IEl0KX0sdC5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKCl7dGhpcy5hZGRFZmZlY3QobmV3IEx0KX0sdC5wcm90b3R5cGUuZmlsbD1mdW5jdGlvbih0KXt0aGlzLmFkZEVmZmVjdChuZXcgcXQodCkpfSx0LnByb3RvdHlwZS5jb2xvcml6ZT1mdW5jdGlvbih0KXt0aGlzLmFkZEVmZmVjdChuZXcgenQodCkpfSx0LnByb3RvdHlwZS5saWdodGVuPWZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PS4xKSx0aGlzLmFkZEVmZmVjdChuZXcgV3QodCkpfSx0LnByb3RvdHlwZS5kYXJrZW49ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9LjEpLHRoaXMuYWRkRWZmZWN0KG5ldyBqdCh0KSl9LHQucHJvdG90eXBlLnNhdHVyYXRlPWZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PS4xKSx0aGlzLmFkZEVmZmVjdChuZXcgVXQodCkpfSx0LnByb3RvdHlwZS5kZXNhdHVyYXRlPWZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PS4xKSx0aGlzLmFkZEVmZmVjdChuZXcgTnQodCkpfSx0LnByb3RvdHlwZS5hZGRFZmZlY3Q9ZnVuY3Rpb24odCl7dGhpcy5lZmZlY3RzLnB1c2godCksdGhpcy5fdGV4dHVyZS5pc0xvYWRlZCgpJiZ0aGlzLl9waXhlbHNMb2FkZWQ/dGhpcy5fYXBwbHlFZmZlY3RzKCk6dGhpcy5fZGlydHlFZmZlY3Q9ITB9LHQucHJvdG90eXBlLnJlbW92ZUVmZmVjdD1mdW5jdGlvbih0KXt2YXIgZT0tMTsoZT1cIm51bWJlclwiPT10eXBlb2YgdD90OnRoaXMuZWZmZWN0cy5pbmRleE9mKHQpKTwwfHxlPj10aGlzLmVmZmVjdHMubGVuZ3RofHwodGhpcy5lZmZlY3RzLnNwbGljZShlLDEpLHRoaXMuX3RleHR1cmUuaXNMb2FkZWQoKSYmdGhpcy5fcGl4ZWxzTG9hZGVkP3RoaXMuX2FwcGx5RWZmZWN0cygpOnRoaXMuX2RpcnR5RWZmZWN0PSEwKX0sdC5wcm90b3R5cGUuX2FwcGx5RWZmZWN0cz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX3RleHR1cmUuaW1hZ2UubmF0dXJhbFdpZHRofHwwLGU9dGhpcy5fdGV4dHVyZS5pbWFnZS5uYXR1cmFsSGVpZ2h0fHwwO3RoaXMuX3Nwcml0ZUN0eC5jbGVhclJlY3QoMCwwLHRoaXMud2lkdGgsdGhpcy5oZWlnaHQpLHRoaXMuX3Nwcml0ZUN0eC5kcmF3SW1hZ2UodGhpcy5fdGV4dHVyZS5pbWFnZSx5KHRoaXMueCwwLHQpLHkodGhpcy55LDAsZSkseSh0aGlzLndpZHRoLDAsdCkseSh0aGlzLmhlaWdodCwwLGUpLDAsMCx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KSx0aGlzLl9waXhlbERhdGE9dGhpcy5fc3ByaXRlQ3R4LmdldEltYWdlRGF0YSgwLDAsdGhpcy53aWR0aCx0aGlzLmhlaWdodCk7Zm9yKHZhciBpPTAsbj0wLG89MCxyPXRoaXMuZWZmZWN0cy5sZW5ndGg7aTxyO2krKylmb3Iobz0wO288dGhpcy5oZWlnaHQ7bysrKWZvcihuPTA7bjx0aGlzLndpZHRoO24rKyl0aGlzLmVmZmVjdHNbaV0udXBkYXRlUGl4ZWwobixvLHRoaXMuX3BpeGVsRGF0YSk7dGhpcy5fc3ByaXRlQ3R4LmNsZWFyUmVjdCgwLDAsdGhpcy53aWR0aCx0aGlzLmhlaWdodCksdGhpcy5fc3ByaXRlQ3R4LnB1dEltYWdlRGF0YSh0aGlzLl9waXhlbERhdGEsMCwwKSx0aGlzLl9kaXJ0eUVmZmVjdD0hMX0sdC5wcm90b3R5cGUuY2xlYXJFZmZlY3RzPWZ1bmN0aW9uKCl7dGhpcy5lZmZlY3RzLmxlbmd0aD0wLHRoaXMuX2FwcGx5RWZmZWN0cygpfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUuZGVidWdEcmF3PWZ1bmN0aW9uKHQsZSxpKXt0LnNhdmUoKSx0LnRyYW5zbGF0ZShlLGkpLHQucm90YXRlKHRoaXMucm90YXRpb24pO3ZhciBuPXRoaXMuZHJhd1dpZHRoKnRoaXMuYW5jaG9yLngsbz10aGlzLmRyYXdIZWlnaHQqdGhpcy5hbmNob3IueTt0LnN0cm9rZVN0eWxlPVB0LkJsYWNrLnRvU3RyaW5nKCksdC5zdHJva2VSZWN0KC1uLC1vLHRoaXMuZHJhd1dpZHRoLHRoaXMuZHJhd0hlaWdodCksdC5yZXN0b3JlKCl9LHQucHJvdG90eXBlLmRyYXc9ZnVuY3Rpb24odCxlLGkpe3RoaXMuX2RpcnR5RWZmZWN0JiZ0aGlzLl9hcHBseUVmZmVjdHMoKSx0LnNhdmUoKTt2YXIgbj10aGlzLmRyYXdXaWR0aCp0aGlzLmFuY2hvci54LG89dGhpcy5kcmF3SGVpZ2h0KnRoaXMuYW5jaG9yLnk7dC50cmFuc2xhdGUoZSxpKSx0LnJvdGF0ZSh0aGlzLnJvdGF0aW9uKSx0aGlzLmZsaXBIb3Jpem9udGFsJiYodC50cmFuc2xhdGUodGhpcy5kcmF3V2lkdGgsMCksdC5zY2FsZSgtMSwxKSksdGhpcy5mbGlwVmVydGljYWwmJih0LnRyYW5zbGF0ZSgwLHRoaXMuZHJhd0hlaWdodCksdC5zY2FsZSgxLC0xKSksdC5kcmF3SW1hZ2UodGhpcy5fc3ByaXRlQ2FudmFzLDAsMCx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0LC1uLC1vLHRoaXMuZHJhd1dpZHRoLHRoaXMuZHJhd0hlaWdodCksdC5yZXN0b3JlKCl9LHQucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IEt0KHRoaXMuX3RleHR1cmUsdGhpcy54LHRoaXMueSx0aGlzLndpZHRoLHRoaXMuaGVpZ2h0KTt0LnNjYWxlPXRoaXMuc2NhbGUuY2xvbmUoKSx0LnJvdGF0aW9uPXRoaXMucm90YXRpb24sdC5mbGlwSG9yaXpvbnRhbD10aGlzLmZsaXBIb3Jpem9udGFsLHQuZmxpcFZlcnRpY2FsPXRoaXMuZmxpcFZlcnRpY2FsO2Zvcih2YXIgZT0wLGk9dGhpcy5lZmZlY3RzLmxlbmd0aDtlPGk7ZSsrKXQuYWRkRWZmZWN0KHRoaXMuZWZmZWN0c1tlXSk7cmV0dXJuIHR9LHR9KCkpKSxRdD1mdW5jdGlvbigpe3ZhciB0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiBlKWUuaGFzT3duUHJvcGVydHkoaSkmJih0W2ldPWVbaV0pfTtyZXR1cm4gZnVuY3Rpb24oZSxpKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxpKSxlLnByb3RvdHlwZT1udWxsPT09aT9PYmplY3QuY3JlYXRlKGkpOihuLnByb3RvdHlwZT1pLnByb3RvdHlwZSxuZXcgbil9fSgpLFp0PWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpKXt2b2lkIDA9PT1pJiYoaT0hMCk7dmFyIG49dC5jYWxsKHRoaXMsZSxcImJsb2JcIixpKXx8dGhpcztyZXR1cm4gbi5wYXRoPWUsbi5idXN0Q2FjaGU9aSxuLmxvYWRlZD1uZXcgcCxuLl9pc0xvYWRlZD0hMSxuLl9zcHJpdGU9bnVsbCxuLl9zcHJpdGU9bmV3IEt0KG4sMCwwLDAsMCksbn1yZXR1cm4gUXQoZSx0KSxlLnByb3RvdHlwZS5pc0xvYWRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0xvYWRlZH0sZS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsaT1uZXcgcDtyZXR1cm4gdC5wcm90b3R5cGUubG9hZC5jYWxsKHRoaXMpLnRoZW4oZnVuY3Rpb24oKXtlLmltYWdlPW5ldyBJbWFnZSxlLmltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsZnVuY3Rpb24oKXtlLl9pc0xvYWRlZD0hMCxlLndpZHRoPWUuX3Nwcml0ZS53aWR0aD1lLmltYWdlLm5hdHVyYWxXaWR0aCxlLmhlaWdodD1lLl9zcHJpdGUuaGVpZ2h0PWUuaW1hZ2UubmF0dXJhbEhlaWdodCxlLmxvYWRlZC5yZXNvbHZlKGUuaW1hZ2UpLGkucmVzb2x2ZShlLmltYWdlKX0pLGUuaW1hZ2Uuc3JjPXQucHJvdG90eXBlLmdldERhdGEuY2FsbChlKX0sZnVuY3Rpb24oKXtpLnJlamVjdChcIkVycm9yIGxvYWRpbmcgdGV4dHVyZS5cIil9KSxpfSxlLnByb3RvdHlwZS5hc1Nwcml0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zcHJpdGV9LGV9KEZ0KTshZnVuY3Rpb24odCl7dFt0LlNob3J0ZXN0UGF0aD0wXT1cIlNob3J0ZXN0UGF0aFwiLHRbdC5Mb25nZXN0UGF0aD0xXT1cIkxvbmdlc3RQYXRoXCIsdFt0LkNsb2Nrd2lzZT0yXT1cIkNsb2Nrd2lzZVwiLHRbdC5Db3VudGVyQ2xvY2t3aXNlPTNdPVwiQ291bnRlckNsb2Nrd2lzZVwifShHdHx8KEd0PXt9KSk7dmFyIEp0PWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsaSxuLG8pe3RoaXMuYWN0b3I9dCx0aGlzLmVhc2luZ0Zjbj1vLHRoaXMuX2N1cnJlbnRMZXJwVGltZT0wLHRoaXMuX2xlcnBEdXJhdGlvbj0xZTMsdGhpcy5fbGVycFN0YXJ0PW5ldyBrKDAsMCksdGhpcy5fbGVycEVuZD1uZXcgaygwLDApLHRoaXMuX2luaXRpYWxpemVkPSExLHRoaXMuX3N0b3BwZWQ9ITEsdGhpcy5fZGlzdGFuY2U9MCx0aGlzLl9sZXJwRHVyYXRpb249bix0aGlzLl9sZXJwRW5kPW5ldyBrKGUsaSl9cmV0dXJuIHQucHJvdG90eXBlLl9pbml0aWFsaXplPWZ1bmN0aW9uKCl7dGhpcy5fbGVycFN0YXJ0PW5ldyBrKHRoaXMuYWN0b3IucG9zLngsdGhpcy5hY3Rvci5wb3MueSksdGhpcy5fY3VycmVudExlcnBUaW1lPTAsdGhpcy5fZGlzdGFuY2U9dGhpcy5fbGVycFN0YXJ0LmRpc3RhbmNlKHRoaXMuX2xlcnBFbmQpfSx0LnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCl7dGhpcy5faW5pdGlhbGl6ZWR8fCh0aGlzLl9pbml0aWFsaXplKCksdGhpcy5faW5pdGlhbGl6ZWQ9ITApO3ZhciBlPXRoaXMuYWN0b3IucG9zLngsaT10aGlzLmFjdG9yLnBvcy55O3RoaXMuX2N1cnJlbnRMZXJwVGltZTx0aGlzLl9sZXJwRHVyYXRpb24/KGU9dGhpcy5fbGVycEVuZC54PHRoaXMuX2xlcnBTdGFydC54P3RoaXMuX2xlcnBTdGFydC54LSh0aGlzLmVhc2luZ0Zjbih0aGlzLl9jdXJyZW50TGVycFRpbWUsdGhpcy5fbGVycEVuZC54LHRoaXMuX2xlcnBTdGFydC54LHRoaXMuX2xlcnBEdXJhdGlvbiktdGhpcy5fbGVycEVuZC54KTp0aGlzLmVhc2luZ0Zjbih0aGlzLl9jdXJyZW50TGVycFRpbWUsdGhpcy5fbGVycFN0YXJ0LngsdGhpcy5fbGVycEVuZC54LHRoaXMuX2xlcnBEdXJhdGlvbiksaT10aGlzLl9sZXJwRW5kLnk8dGhpcy5fbGVycFN0YXJ0Lnk/dGhpcy5fbGVycFN0YXJ0LnktKHRoaXMuZWFzaW5nRmNuKHRoaXMuX2N1cnJlbnRMZXJwVGltZSx0aGlzLl9sZXJwRW5kLnksdGhpcy5fbGVycFN0YXJ0LnksdGhpcy5fbGVycER1cmF0aW9uKS10aGlzLl9sZXJwRW5kLnkpOnRoaXMuZWFzaW5nRmNuKHRoaXMuX2N1cnJlbnRMZXJwVGltZSx0aGlzLl9sZXJwU3RhcnQueSx0aGlzLl9sZXJwRW5kLnksdGhpcy5fbGVycER1cmF0aW9uKSx0aGlzLmFjdG9yLnBvcy54PWUsdGhpcy5hY3Rvci5wb3MueT1pLHRoaXMuX2N1cnJlbnRMZXJwVGltZSs9dCk6KHRoaXMuYWN0b3IucG9zLng9dGhpcy5fbGVycEVuZC54LHRoaXMuYWN0b3IucG9zLnk9dGhpcy5fbGVycEVuZC55KX0sdC5wcm90b3R5cGUuaXNDb21wbGV0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc3RvcHBlZHx8bmV3IGsodC5wb3MueCx0LnBvcy55KS5kaXN0YW5jZSh0aGlzLl9sZXJwU3RhcnQpPj10aGlzLl9kaXN0YW5jZX0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9pbml0aWFsaXplZD0hMX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuX3N0b3BwZWQ9ITB9LHR9KCksJHQ9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpLG4pe3RoaXMuX3N0YXJ0ZWQ9ITEsdGhpcy5fc3RvcHBlZD0hMSx0aGlzLl9hY3Rvcj10LHRoaXMuX2VuZD1uZXcgayhlLGkpLHRoaXMuX3NwZWVkPW59cmV0dXJuIHQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXt0aGlzLl9zdGFydGVkfHwodGhpcy5fc3RhcnRlZD0hMCx0aGlzLl9zdGFydD1uZXcgayh0aGlzLl9hY3Rvci5wb3MueCx0aGlzLl9hY3Rvci5wb3MueSksdGhpcy5fZGlzdGFuY2U9dGhpcy5fc3RhcnQuZGlzdGFuY2UodGhpcy5fZW5kKSx0aGlzLl9kaXI9dGhpcy5fZW5kLnN1Yih0aGlzLl9zdGFydCkubm9ybWFsaXplKCkpO3ZhciBlPXRoaXMuX2Rpci5zY2FsZSh0aGlzLl9zcGVlZCk7dGhpcy5fYWN0b3IudmVsLng9ZS54LHRoaXMuX2FjdG9yLnZlbC55PWUueSx0aGlzLmlzQ29tcGxldGUodGhpcy5fYWN0b3IpJiYodGhpcy5fYWN0b3IucG9zLng9dGhpcy5fZW5kLngsdGhpcy5fYWN0b3IucG9zLnk9dGhpcy5fZW5kLnksdGhpcy5fYWN0b3IudmVsLnk9MCx0aGlzLl9hY3Rvci52ZWwueD0wKX0sdC5wcm90b3R5cGUuaXNDb21wbGV0ZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc3RvcHBlZHx8bmV3IGsodC5wb3MueCx0LnBvcy55KS5kaXN0YW5jZSh0aGlzLl9zdGFydCk+PXRoaXMuX2Rpc3RhbmNlfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5fYWN0b3IudmVsLnk9MCx0aGlzLl9hY3Rvci52ZWwueD0wLHRoaXMuX3N0b3BwZWQ9ITB9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5fc3RhcnRlZD0hMX0sdH0oKSx0ZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLGksbil7aWYodGhpcy5fc3RhcnRlZD0hMSx0aGlzLl9zdG9wcGVkPSExLHRoaXMuX2FjdG9yPXQsdGhpcy5fZW5kPW5ldyBrKGUsaSksbjw9MCl0aHJvdyBPdC5nZXRJbnN0YW5jZSgpLmVycm9yKFwiQXR0ZW1wdGVkIHRvIG1vdmVCeSB0aW1lIGxlc3MgdGhhbiBvciBlcXVhbCB0byB6ZXJvIDogXCIrbiksbmV3IEVycm9yKFwiQ2Fubm90IG1vdmUgaW4gdGltZSA8PSAwXCIpO3RoaXMuX3RpbWU9bn1yZXR1cm4gdC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQpe3RoaXMuX3N0YXJ0ZWR8fCh0aGlzLl9zdGFydGVkPSEwLHRoaXMuX3N0YXJ0PW5ldyBrKHRoaXMuX2FjdG9yLnBvcy54LHRoaXMuX2FjdG9yLnBvcy55KSx0aGlzLl9kaXN0YW5jZT10aGlzLl9zdGFydC5kaXN0YW5jZSh0aGlzLl9lbmQpLHRoaXMuX2Rpcj10aGlzLl9lbmQuc3ViKHRoaXMuX3N0YXJ0KS5ub3JtYWxpemUoKSx0aGlzLl9zcGVlZD10aGlzLl9kaXN0YW5jZS8odGhpcy5fdGltZS8xZTMpKTt2YXIgZT10aGlzLl9kaXIuc2NhbGUodGhpcy5fc3BlZWQpO3RoaXMuX2FjdG9yLnZlbC54PWUueCx0aGlzLl9hY3Rvci52ZWwueT1lLnksdGhpcy5pc0NvbXBsZXRlKHRoaXMuX2FjdG9yKSYmKHRoaXMuX2FjdG9yLnBvcy54PXRoaXMuX2VuZC54LHRoaXMuX2FjdG9yLnBvcy55PXRoaXMuX2VuZC55LHRoaXMuX2FjdG9yLnZlbC55PTAsdGhpcy5fYWN0b3IudmVsLng9MCl9LHQucHJvdG90eXBlLmlzQ29tcGxldGU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3N0b3BwZWR8fG5ldyBrKHQucG9zLngsdC5wb3MueSkuZGlzdGFuY2UodGhpcy5fc3RhcnQpPj10aGlzLl9kaXN0YW5jZX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuX2FjdG9yLnZlbC55PTAsdGhpcy5fYWN0b3IudmVsLng9MCx0aGlzLl9zdG9wcGVkPSEwfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX3N0YXJ0ZWQ9ITF9LHR9KCksZWU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpKXt0aGlzLl9zdGFydGVkPSExLHRoaXMuX3N0b3BwZWQ9ITEsdGhpcy5fYWN0b3I9dCx0aGlzLl9hY3RvclRvRm9sbG93PWUsdGhpcy5fY3VycmVudD1uZXcgayh0aGlzLl9hY3Rvci5wb3MueCx0aGlzLl9hY3Rvci5wb3MueSksdGhpcy5fZW5kPW5ldyBrKGUucG9zLngsZS5wb3MueSksdGhpcy5fbWF4aW11bURpc3RhbmNlPXZvaWQgMCE9PWk/aTp0aGlzLl9jdXJyZW50LmRpc3RhbmNlKHRoaXMuX2VuZCksdGhpcy5fc3BlZWQ9MH1yZXR1cm4gdC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQpe3RoaXMuX3N0YXJ0ZWR8fCh0aGlzLl9zdGFydGVkPSEwLHRoaXMuX2Rpc3RhbmNlQmV0d2Vlbj10aGlzLl9jdXJyZW50LmRpc3RhbmNlKHRoaXMuX2VuZCksdGhpcy5fZGlyPXRoaXMuX2VuZC5zdWIodGhpcy5fY3VycmVudCkubm9ybWFsaXplKCkpO3ZhciBlPU1hdGguc3FydChNYXRoLnBvdyh0aGlzLl9hY3RvclRvRm9sbG93LnZlbC54LDIpK01hdGgucG93KHRoaXMuX2FjdG9yVG9Gb2xsb3cudmVsLnksMikpO2lmKDAhPT1lJiYodGhpcy5fc3BlZWQ9ZSksdGhpcy5fY3VycmVudC54PXRoaXMuX2FjdG9yLnBvcy54LHRoaXMuX2N1cnJlbnQueT10aGlzLl9hY3Rvci5wb3MueSx0aGlzLl9lbmQueD10aGlzLl9hY3RvclRvRm9sbG93LnBvcy54LHRoaXMuX2VuZC55PXRoaXMuX2FjdG9yVG9Gb2xsb3cucG9zLnksdGhpcy5fZGlzdGFuY2VCZXR3ZWVuPXRoaXMuX2N1cnJlbnQuZGlzdGFuY2UodGhpcy5fZW5kKSx0aGlzLl9kaXI9dGhpcy5fZW5kLnN1Yih0aGlzLl9jdXJyZW50KS5ub3JtYWxpemUoKSx0aGlzLl9kaXN0YW5jZUJldHdlZW4+PXRoaXMuX21heGltdW1EaXN0YW5jZSl7dmFyIGk9dGhpcy5fZGlyLnNjYWxlKHRoaXMuX3NwZWVkKTt0aGlzLl9hY3Rvci52ZWwueD1pLngsdGhpcy5fYWN0b3IudmVsLnk9aS55fWVsc2UgdGhpcy5fYWN0b3IudmVsLng9MCx0aGlzLl9hY3Rvci52ZWwueT0wO3RoaXMuaXNDb21wbGV0ZSgpJiYodGhpcy5fYWN0b3IucG9zLng9dGhpcy5fZW5kLngsdGhpcy5fYWN0b3IucG9zLnk9dGhpcy5fZW5kLnksdGhpcy5fYWN0b3IudmVsLnk9MCx0aGlzLl9hY3Rvci52ZWwueD0wKX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuX2FjdG9yLnZlbC55PTAsdGhpcy5fYWN0b3IudmVsLng9MCx0aGlzLl9zdG9wcGVkPSEwfSx0LnByb3RvdHlwZS5pc0NvbXBsZXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0b3BwZWR9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5fc3RhcnRlZD0hMX0sdH0oKSxpZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLGkpe3RoaXMuX3N0YXJ0ZWQ9ITEsdGhpcy5fc3RvcHBlZD0hMSx0aGlzLl9zcGVlZFdhc1NwZWNpZmllZD0hMSx0aGlzLl9hY3Rvcj10LHRoaXMuX2FjdG9yVG9NZWV0PWUsdGhpcy5fY3VycmVudD1uZXcgayh0aGlzLl9hY3Rvci5wb3MueCx0aGlzLl9hY3Rvci5wb3MueSksdGhpcy5fZW5kPW5ldyBrKGUucG9zLngsZS5wb3MueSksdGhpcy5fc3BlZWQ9aXx8MCx2b2lkIDAhPT1pJiYodGhpcy5fc3BlZWRXYXNTcGVjaWZpZWQ9ITApfXJldHVybiB0LnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCl7dGhpcy5fc3RhcnRlZHx8KHRoaXMuX3N0YXJ0ZWQ9ITAsdGhpcy5fZGlzdGFuY2VCZXR3ZWVuPXRoaXMuX2N1cnJlbnQuZGlzdGFuY2UodGhpcy5fZW5kKSx0aGlzLl9kaXI9dGhpcy5fZW5kLnN1Yih0aGlzLl9jdXJyZW50KS5ub3JtYWxpemUoKSk7dmFyIGU9TWF0aC5zcXJ0KE1hdGgucG93KHRoaXMuX2FjdG9yVG9NZWV0LnZlbC54LDIpK01hdGgucG93KHRoaXMuX2FjdG9yVG9NZWV0LnZlbC55LDIpKTswPT09ZXx8dGhpcy5fc3BlZWRXYXNTcGVjaWZpZWR8fCh0aGlzLl9zcGVlZD1lKSx0aGlzLl9jdXJyZW50Lng9dGhpcy5fYWN0b3IucG9zLngsdGhpcy5fY3VycmVudC55PXRoaXMuX2FjdG9yLnBvcy55LHRoaXMuX2VuZC54PXRoaXMuX2FjdG9yVG9NZWV0LnBvcy54LHRoaXMuX2VuZC55PXRoaXMuX2FjdG9yVG9NZWV0LnBvcy55LHRoaXMuX2Rpc3RhbmNlQmV0d2Vlbj10aGlzLl9jdXJyZW50LmRpc3RhbmNlKHRoaXMuX2VuZCksdGhpcy5fZGlyPXRoaXMuX2VuZC5zdWIodGhpcy5fY3VycmVudCkubm9ybWFsaXplKCk7dmFyIGk9dGhpcy5fZGlyLnNjYWxlKHRoaXMuX3NwZWVkKTt0aGlzLl9hY3Rvci52ZWwueD1pLngsdGhpcy5fYWN0b3IudmVsLnk9aS55LHRoaXMuaXNDb21wbGV0ZSgpJiYodGhpcy5fYWN0b3IucG9zLng9dGhpcy5fZW5kLngsdGhpcy5fYWN0b3IucG9zLnk9dGhpcy5fZW5kLnksdGhpcy5fYWN0b3IudmVsLnk9MCx0aGlzLl9hY3Rvci52ZWwueD0wKX0sdC5wcm90b3R5cGUuaXNDb21wbGV0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdG9wcGVkfHx0aGlzLl9kaXN0YW5jZUJldHdlZW48PTF9LHQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLl9hY3Rvci52ZWwueT0wLHRoaXMuX2FjdG9yLnZlbC54PTAsdGhpcy5fc3RvcHBlZD0hMH0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9zdGFydGVkPSExfSx0fSgpLG5lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsaSxuKXt0aGlzLl9zdGFydGVkPSExLHRoaXMuX3N0b3BwZWQ9ITEsdGhpcy5fYWN0b3I9dCx0aGlzLl9lbmQ9ZSx0aGlzLl9zcGVlZD1pLHRoaXMuX3JvdGF0aW9uVHlwZT1ufHxHdC5TaG9ydGVzdFBhdGh9cmV0dXJuIHQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXtpZighdGhpcy5fc3RhcnRlZCl7dGhpcy5fc3RhcnRlZD0hMCx0aGlzLl9zdGFydD10aGlzLl9hY3Rvci5yb3RhdGlvbjt2YXIgZT1NYXRoLmFicyh0aGlzLl9lbmQtdGhpcy5fc3RhcnQpLGk9Zi1lO3N3aXRjaChlPmk/KHRoaXMuX3Nob3J0RGlzdGFuY2U9aSx0aGlzLl9sb25nRGlzdGFuY2U9ZSk6KHRoaXMuX3Nob3J0RGlzdGFuY2U9ZSx0aGlzLl9sb25nRGlzdGFuY2U9aSksdGhpcy5fc2hvcnRlc3RQYXRoSXNQb3NpdGl2ZT0odGhpcy5fc3RhcnQtdGhpcy5fZW5kK2YpJWY+PU1hdGguUEksdGhpcy5fcm90YXRpb25UeXBlKXtjYXNlIEd0LlNob3J0ZXN0UGF0aDp0aGlzLl9kaXN0YW5jZT10aGlzLl9zaG9ydERpc3RhbmNlLHRoaXMuX3Nob3J0ZXN0UGF0aElzUG9zaXRpdmU/dGhpcy5fZGlyZWN0aW9uPTE6dGhpcy5fZGlyZWN0aW9uPS0xO2JyZWFrO2Nhc2UgR3QuTG9uZ2VzdFBhdGg6dGhpcy5fZGlzdGFuY2U9dGhpcy5fbG9uZ0Rpc3RhbmNlLHRoaXMuX3Nob3J0ZXN0UGF0aElzUG9zaXRpdmU/dGhpcy5fZGlyZWN0aW9uPS0xOnRoaXMuX2RpcmVjdGlvbj0xO2JyZWFrO2Nhc2UgR3QuQ2xvY2t3aXNlOnRoaXMuX2RpcmVjdGlvbj0xLHRoaXMuX3Nob3J0ZXN0UGF0aElzUG9zaXRpdmU/dGhpcy5fZGlzdGFuY2U9dGhpcy5fc2hvcnREaXN0YW5jZTp0aGlzLl9kaXN0YW5jZT10aGlzLl9sb25nRGlzdGFuY2U7YnJlYWs7Y2FzZSBHdC5Db3VudGVyQ2xvY2t3aXNlOnRoaXMuX2RpcmVjdGlvbj0tMSx0aGlzLl9zaG9ydGVzdFBhdGhJc1Bvc2l0aXZlP3RoaXMuX2Rpc3RhbmNlPXRoaXMuX2xvbmdEaXN0YW5jZTp0aGlzLl9kaXN0YW5jZT10aGlzLl9zaG9ydERpc3RhbmNlfX10aGlzLl9hY3Rvci5yeD10aGlzLl9kaXJlY3Rpb24qdGhpcy5fc3BlZWQsdGhpcy5pc0NvbXBsZXRlKCkmJih0aGlzLl9hY3Rvci5yb3RhdGlvbj10aGlzLl9lbmQsdGhpcy5fYWN0b3Iucng9MCx0aGlzLl9zdG9wcGVkPSEwKX0sdC5wcm90b3R5cGUuaXNDb21wbGV0ZT1mdW5jdGlvbigpe3ZhciB0PU1hdGguYWJzKHRoaXMuX2FjdG9yLnJvdGF0aW9uLXRoaXMuX3N0YXJ0KTtyZXR1cm4gdGhpcy5fc3RvcHBlZHx8dD49TWF0aC5hYnModGhpcy5fZGlzdGFuY2UpfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5fYWN0b3Iucng9MCx0aGlzLl9zdG9wcGVkPSEwfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX3N0YXJ0ZWQ9ITF9LHR9KCksb2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpLG4pe3RoaXMuX3N0YXJ0ZWQ9ITEsdGhpcy5fc3RvcHBlZD0hMSx0aGlzLl9hY3Rvcj10LHRoaXMuX2VuZD1lLHRoaXMuX3RpbWU9aSx0aGlzLl9yb3RhdGlvblR5cGU9bnx8R3QuU2hvcnRlc3RQYXRofXJldHVybiB0LnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCl7aWYoIXRoaXMuX3N0YXJ0ZWQpe3RoaXMuX3N0YXJ0ZWQ9ITAsdGhpcy5fc3RhcnQ9dGhpcy5fYWN0b3Iucm90YXRpb247dmFyIGU9TWF0aC5hYnModGhpcy5fZW5kLXRoaXMuX3N0YXJ0KSxpPWYtZTtzd2l0Y2goZT5pPyh0aGlzLl9zaG9ydERpc3RhbmNlPWksdGhpcy5fbG9uZ0Rpc3RhbmNlPWUpOih0aGlzLl9zaG9ydERpc3RhbmNlPWUsdGhpcy5fbG9uZ0Rpc3RhbmNlPWkpLHRoaXMuX3Nob3J0ZXN0UGF0aElzUG9zaXRpdmU9KHRoaXMuX3N0YXJ0LXRoaXMuX2VuZCtmKSVmPj1NYXRoLlBJLHRoaXMuX3JvdGF0aW9uVHlwZSl7Y2FzZSBHdC5TaG9ydGVzdFBhdGg6dGhpcy5fZGlzdGFuY2U9dGhpcy5fc2hvcnREaXN0YW5jZSx0aGlzLl9zaG9ydGVzdFBhdGhJc1Bvc2l0aXZlP3RoaXMuX2RpcmVjdGlvbj0xOnRoaXMuX2RpcmVjdGlvbj0tMTticmVhaztjYXNlIEd0Lkxvbmdlc3RQYXRoOnRoaXMuX2Rpc3RhbmNlPXRoaXMuX2xvbmdEaXN0YW5jZSx0aGlzLl9zaG9ydGVzdFBhdGhJc1Bvc2l0aXZlP3RoaXMuX2RpcmVjdGlvbj0tMTp0aGlzLl9kaXJlY3Rpb249MTticmVhaztjYXNlIEd0LkNsb2Nrd2lzZTp0aGlzLl9kaXJlY3Rpb249MSx0aGlzLl9zaG9ydERpc3RhbmNlPj0wP3RoaXMuX2Rpc3RhbmNlPXRoaXMuX3Nob3J0RGlzdGFuY2U6dGhpcy5fZGlzdGFuY2U9dGhpcy5fbG9uZ0Rpc3RhbmNlO2JyZWFrO2Nhc2UgR3QuQ291bnRlckNsb2Nrd2lzZTp0aGlzLl9kaXJlY3Rpb249LTEsdGhpcy5fc2hvcnREaXN0YW5jZTw9MD90aGlzLl9kaXN0YW5jZT10aGlzLl9zaG9ydERpc3RhbmNlOnRoaXMuX2Rpc3RhbmNlPXRoaXMuX2xvbmdEaXN0YW5jZX10aGlzLl9zcGVlZD1NYXRoLmFicyh0aGlzLl9kaXN0YW5jZS90aGlzLl90aW1lKjFlMyl9dGhpcy5fYWN0b3Iucng9dGhpcy5fZGlyZWN0aW9uKnRoaXMuX3NwZWVkLHRoaXMuaXNDb21wbGV0ZSgpJiYodGhpcy5fYWN0b3Iucm90YXRpb249dGhpcy5fZW5kLHRoaXMuX2FjdG9yLnJ4PTAsdGhpcy5fc3RvcHBlZD0hMCl9LHQucHJvdG90eXBlLmlzQ29tcGxldGU9ZnVuY3Rpb24oKXt2YXIgdD1NYXRoLmFicyh0aGlzLl9hY3Rvci5yb3RhdGlvbi10aGlzLl9zdGFydCk7cmV0dXJuIHRoaXMuX3N0b3BwZWR8fHQ+PU1hdGguYWJzKHRoaXMuX2Rpc3RhbmNlKX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuX2FjdG9yLnJ4PTAsdGhpcy5fc3RvcHBlZD0hMH0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9zdGFydGVkPSExfSx0fSgpLHJlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsaSxuLG8pe3RoaXMuX3N0YXJ0ZWQ9ITEsdGhpcy5fc3RvcHBlZD0hMSx0aGlzLl9hY3Rvcj10LHRoaXMuX2VuZFg9ZSx0aGlzLl9lbmRZPWksdGhpcy5fc3BlZWRYPW4sdGhpcy5fc3BlZWRZPW99cmV0dXJuIHQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXtpZih0aGlzLl9zdGFydGVkfHwodGhpcy5fc3RhcnRlZD0hMCx0aGlzLl9zdGFydFg9dGhpcy5fYWN0b3Iuc2NhbGUueCx0aGlzLl9zdGFydFk9dGhpcy5fYWN0b3Iuc2NhbGUueSx0aGlzLl9kaXN0YW5jZVg9TWF0aC5hYnModGhpcy5fZW5kWC10aGlzLl9zdGFydFgpLHRoaXMuX2Rpc3RhbmNlWT1NYXRoLmFicyh0aGlzLl9lbmRZLXRoaXMuX3N0YXJ0WSkpLE1hdGguYWJzKHRoaXMuX2FjdG9yLnNjYWxlLngtdGhpcy5fc3RhcnRYKT49dGhpcy5fZGlzdGFuY2VYKXRoaXMuX2FjdG9yLnN4PTA7ZWxzZXt2YXIgZT10aGlzLl9lbmRZPHRoaXMuX3N0YXJ0WT8tMToxO3RoaXMuX2FjdG9yLnN4PXRoaXMuX3NwZWVkWCplfWlmKE1hdGguYWJzKHRoaXMuX2FjdG9yLnNjYWxlLnktdGhpcy5fc3RhcnRZKT49dGhpcy5fZGlzdGFuY2VZKXRoaXMuX2FjdG9yLnN5PTA7ZWxzZXt2YXIgaT10aGlzLl9lbmRZPHRoaXMuX3N0YXJ0WT8tMToxO3RoaXMuX2FjdG9yLnN5PXRoaXMuX3NwZWVkWSppfXRoaXMuaXNDb21wbGV0ZSgpJiYodGhpcy5fYWN0b3Iuc2NhbGUueD10aGlzLl9lbmRYLHRoaXMuX2FjdG9yLnNjYWxlLnk9dGhpcy5fZW5kWSx0aGlzLl9hY3Rvci5zeD0wLHRoaXMuX2FjdG9yLnN5PTApfSx0LnByb3RvdHlwZS5pc0NvbXBsZXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0b3BwZWR8fE1hdGguYWJzKHRoaXMuX2FjdG9yLnNjYWxlLnktdGhpcy5fc3RhcnRYKT49dGhpcy5fZGlzdGFuY2VYJiZNYXRoLmFicyh0aGlzLl9hY3Rvci5zY2FsZS55LXRoaXMuX3N0YXJ0WSk+PXRoaXMuX2Rpc3RhbmNlWX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuX2FjdG9yLnN4PTAsdGhpcy5fYWN0b3Iuc3k9MCx0aGlzLl9zdG9wcGVkPSEwfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX3N0YXJ0ZWQ9ITF9LHR9KCksc2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpLG4pe3RoaXMuX3N0YXJ0ZWQ9ITEsdGhpcy5fc3RvcHBlZD0hMSx0aGlzLl9hY3Rvcj10LHRoaXMuX2VuZFg9ZSx0aGlzLl9lbmRZPWksdGhpcy5fc3BlZWRYPSh0aGlzLl9lbmRYLXRoaXMuX2FjdG9yLnNjYWxlLngpL24qMWUzLHRoaXMuX3NwZWVkWT0odGhpcy5fZW5kWS10aGlzLl9hY3Rvci5zY2FsZS55KS9uKjFlM31yZXR1cm4gdC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQpe3RoaXMuX3N0YXJ0ZWR8fCh0aGlzLl9zdGFydGVkPSEwLHRoaXMuX3N0YXJ0WD10aGlzLl9hY3Rvci5zY2FsZS54LHRoaXMuX3N0YXJ0WT10aGlzLl9hY3Rvci5zY2FsZS55LHRoaXMuX2Rpc3RhbmNlWD1NYXRoLmFicyh0aGlzLl9lbmRYLXRoaXMuX3N0YXJ0WCksdGhpcy5fZGlzdGFuY2VZPU1hdGguYWJzKHRoaXMuX2VuZFktdGhpcy5fc3RhcnRZKSk7dmFyIGU9dGhpcy5fZW5kWDx0aGlzLl9zdGFydFg/LTE6MSxpPXRoaXMuX2VuZFk8dGhpcy5fc3RhcnRZPy0xOjE7dGhpcy5fYWN0b3Iuc3g9dGhpcy5fc3BlZWRYKmUsdGhpcy5fYWN0b3Iuc3k9dGhpcy5fc3BlZWRZKmksdGhpcy5pc0NvbXBsZXRlKCkmJih0aGlzLl9hY3Rvci5zY2FsZS54PXRoaXMuX2VuZFgsdGhpcy5fYWN0b3Iuc2NhbGUueT10aGlzLl9lbmRZLHRoaXMuX2FjdG9yLnN4PTAsdGhpcy5fYWN0b3Iuc3k9MCl9LHQucHJvdG90eXBlLmlzQ29tcGxldGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RvcHBlZHx8TWF0aC5hYnModGhpcy5fYWN0b3Iuc2NhbGUueC10aGlzLl9zdGFydFgpPj10aGlzLl9kaXN0YW5jZVgmJk1hdGguYWJzKHRoaXMuX2FjdG9yLnNjYWxlLnktdGhpcy5fc3RhcnRZKT49dGhpcy5fZGlzdGFuY2VZfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5fYWN0b3Iuc3g9MCx0aGlzLl9hY3Rvci5zeT0wLHRoaXMuX3N0b3BwZWQ9ITB9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5fc3RhcnRlZD0hMX0sdH0oKSxhZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLl9lbGFwc2VkVGltZT0wLHRoaXMuX3N0YXJ0ZWQ9ITEsdGhpcy5fc3RvcHBlZD0hMSx0aGlzLl9hY3Rvcj10LHRoaXMuX2RlbGF5PWV9cmV0dXJuIHQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXt0aGlzLl9zdGFydGVkfHwodGhpcy5fc3RhcnRlZD0hMCksdGhpcy54PXRoaXMuX2FjdG9yLnBvcy54LHRoaXMueT10aGlzLl9hY3Rvci5wb3MueSx0aGlzLl9lbGFwc2VkVGltZSs9dH0sdC5wcm90b3R5cGUuaXNDb21wbGV0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdG9wcGVkfHx0aGlzLl9lbGFwc2VkVGltZT49dGhpcy5fZGVsYXl9LHQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLl9zdG9wcGVkPSEwfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX2VsYXBzZWRUaW1lPTAsdGhpcy5fc3RhcnRlZD0hMX0sdH0oKSxoZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLGksbil7dm9pZCAwPT09biYmKG49MSksdGhpcy5fdGltZVZpc2libGU9MCx0aGlzLl90aW1lTm90VmlzaWJsZT0wLHRoaXMuX2VsYXBzZWRUaW1lPTAsdGhpcy5fdG90YWxUaW1lPTAsdGhpcy5fc3RvcHBlZD0hMSx0aGlzLl9zdGFydGVkPSExLHRoaXMuX2FjdG9yPXQsdGhpcy5fdGltZVZpc2libGU9ZSx0aGlzLl90aW1lTm90VmlzaWJsZT1pLHRoaXMuX2R1cmF0aW9uPShlK2kpKm59cmV0dXJuIHQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXt0aGlzLl9zdGFydGVkfHwodGhpcy5fc3RhcnRlZD0hMCksdGhpcy5fZWxhcHNlZFRpbWUrPXQsdGhpcy5fdG90YWxUaW1lKz10LHRoaXMuX2FjdG9yLnZpc2libGUmJnRoaXMuX2VsYXBzZWRUaW1lPj10aGlzLl90aW1lVmlzaWJsZSYmKHRoaXMuX2FjdG9yLnZpc2libGU9ITEsdGhpcy5fZWxhcHNlZFRpbWU9MCksIXRoaXMuX2FjdG9yLnZpc2libGUmJnRoaXMuX2VsYXBzZWRUaW1lPj10aGlzLl90aW1lTm90VmlzaWJsZSYmKHRoaXMuX2FjdG9yLnZpc2libGU9ITAsdGhpcy5fZWxhcHNlZFRpbWU9MCksdGhpcy5pc0NvbXBsZXRlKCkmJih0aGlzLl9hY3Rvci52aXNpYmxlPSEwKX0sdC5wcm90b3R5cGUuaXNDb21wbGV0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdG9wcGVkfHx0aGlzLl90b3RhbFRpbWU+PXRoaXMuX2R1cmF0aW9ufSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5fYWN0b3IudmlzaWJsZT0hMCx0aGlzLl9zdG9wcGVkPSEwfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX3N0YXJ0ZWQ9ITEsdGhpcy5fZWxhcHNlZFRpbWU9MCx0aGlzLl90b3RhbFRpbWU9MH0sdH0oKSxjZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLGkpe3RoaXMuX211bHRpcGxpZXI9MSx0aGlzLl9zdGFydGVkPSExLHRoaXMuX3N0b3BwZWQ9ITEsdGhpcy5fYWN0b3I9dCx0aGlzLl9lbmRPcGFjaXR5PWUsdGhpcy5fc3BlZWQ9aX1yZXR1cm4gdC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQpe3RoaXMuX3N0YXJ0ZWR8fCh0aGlzLl9zdGFydGVkPSEwLHRoaXMuX2VuZE9wYWNpdHk8dGhpcy5fYWN0b3Iub3BhY2l0eT90aGlzLl9tdWx0aXBsaWVyPS0xOnRoaXMuX211bHRpcGxpZXI9MSksdGhpcy5fc3BlZWQ+MCYmKHRoaXMuX2FjdG9yLm9wYWNpdHkrPXRoaXMuX211bHRpcGxpZXIqKE1hdGguYWJzKHRoaXMuX2FjdG9yLm9wYWNpdHktdGhpcy5fZW5kT3BhY2l0eSkqdCkvdGhpcy5fc3BlZWQpLHRoaXMuX3NwZWVkLT10LHRoaXMuaXNDb21wbGV0ZSgpJiYodGhpcy5fYWN0b3Iub3BhY2l0eT10aGlzLl9lbmRPcGFjaXR5KSxPdC5nZXRJbnN0YW5jZSgpLmRlYnVnKFwiW0FjdGlvbiBmYWRlXSBBY3RvciBvcGFjaXR5OlwiLHRoaXMuX2FjdG9yLm9wYWNpdHkpfSx0LnByb3RvdHlwZS5pc0NvbXBsZXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0b3BwZWR8fE1hdGguYWJzKHRoaXMuX2FjdG9yLm9wYWNpdHktdGhpcy5fZW5kT3BhY2l0eSk8LjA1fSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5fc3RvcHBlZD0hMH0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9zdGFydGVkPSExfSx0fSgpLHVlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLl9zdG9wcGVkPSExLHRoaXMuX2FjdG9yPXR9cmV0dXJuIHQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXt0aGlzLl9hY3Rvci5hY3Rpb25RdWV1ZS5jbGVhckFjdGlvbnMoKSx0aGlzLl9hY3Rvci5raWxsKCksdGhpcy5fc3RvcHBlZD0hMH0sdC5wcm90b3R5cGUuaXNDb21wbGV0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdG9wcGVkfSx0LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7fSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe30sdH0oKSxsZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLl9tZXRob2Q9bnVsbCx0aGlzLl9hY3Rvcj1udWxsLHRoaXMuX2hhc0JlZW5DYWxsZWQ9ITEsdGhpcy5fYWN0b3I9dCx0aGlzLl9tZXRob2Q9ZX1yZXR1cm4gdC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQpe3RoaXMuX21ldGhvZC5jYWxsKHRoaXMuX2FjdG9yKSx0aGlzLl9oYXNCZWVuQ2FsbGVkPSEwfSx0LnByb3RvdHlwZS5pc0NvbXBsZXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2hhc0JlZW5DYWxsZWR9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7dGhpcy5faGFzQmVlbkNhbGxlZD0hMX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuX2hhc0JlZW5DYWxsZWQ9ITB9LHR9KCkscGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpKXt0aGlzLl9zdG9wcGVkPSExLHRoaXMuX2FjdG9yPXQsdGhpcy5fYWN0aW9uUXVldWU9bmV3IGZlKHQpLHRoaXMuX3JlcGVhdD1lLHRoaXMuX29yaWdpbmFsUmVwZWF0PWU7Zm9yKHZhciBuPTAsbz1pLmxlbmd0aDtuPG87bisrKWlbbl0ucmVzZXQoKSx0aGlzLl9hY3Rpb25RdWV1ZS5hZGQoaVtuXSl9cmV0dXJuIHQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXt0aGlzLng9dGhpcy5fYWN0b3IucG9zLngsdGhpcy55PXRoaXMuX2FjdG9yLnBvcy55LHRoaXMuX2FjdGlvblF1ZXVlLmhhc05leHQoKXx8KHRoaXMuX2FjdGlvblF1ZXVlLnJlc2V0KCksdGhpcy5fcmVwZWF0LS0pLHRoaXMuX2FjdGlvblF1ZXVlLnVwZGF0ZSh0KX0sdC5wcm90b3R5cGUuaXNDb21wbGV0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdG9wcGVkfHx0aGlzLl9yZXBlYXQ8PTB9LHQucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLl9zdG9wcGVkPSEwfSx0LnByb3RvdHlwZS5yZXNldD1mdW5jdGlvbigpe3RoaXMuX3JlcGVhdD10aGlzLl9vcmlnaW5hbFJlcGVhdH0sdH0oKSxkZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlKXt0aGlzLl9zdG9wcGVkPSExLHRoaXMuX2FjdG9yPXQsdGhpcy5fYWN0aW9uUXVldWU9bmV3IGZlKHQpO2Zvcih2YXIgaT0wLG49ZS5sZW5ndGg7aTxuO2krKyllW2ldLnJlc2V0KCksdGhpcy5fYWN0aW9uUXVldWUuYWRkKGVbaV0pfXJldHVybiB0LnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCl7dGhpcy54PXRoaXMuX2FjdG9yLnBvcy54LHRoaXMueT10aGlzLl9hY3Rvci5wb3MueSx0aGlzLl9zdG9wcGVkfHwodGhpcy5fYWN0aW9uUXVldWUuaGFzTmV4dCgpfHx0aGlzLl9hY3Rpb25RdWV1ZS5yZXNldCgpLHRoaXMuX2FjdGlvblF1ZXVlLnVwZGF0ZSh0KSl9LHQucHJvdG90eXBlLmlzQ29tcGxldGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fc3RvcHBlZH0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuX3N0b3BwZWQ9ITAsdGhpcy5fYWN0aW9uUXVldWUuY2xlYXJBY3Rpb25zKCl9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7fSx0fSgpLGZlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLl9hY3Rpb25zPVtdLHRoaXMuX2NvbXBsZXRlZEFjdGlvbnM9W10sdGhpcy5fYWN0b3I9dH1yZXR1cm4gdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3RoaXMuX2FjdGlvbnMucHVzaCh0KX0sdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2FjdGlvbnMuaW5kZXhPZih0KTt0aGlzLl9hY3Rpb25zLnNwbGljZShlLDEpfSx0LnByb3RvdHlwZS5jbGVhckFjdGlvbnM9ZnVuY3Rpb24oKXt0aGlzLl9hY3Rpb25zLmxlbmd0aD0wLHRoaXMuX2NvbXBsZXRlZEFjdGlvbnMubGVuZ3RoPTAsdGhpcy5fY3VycmVudEFjdGlvbiYmdGhpcy5fY3VycmVudEFjdGlvbi5zdG9wKCl9LHQucHJvdG90eXBlLmdldEFjdGlvbnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aW9ucy5jb25jYXQodGhpcy5fY29tcGxldGVkQWN0aW9ucyl9LHQucHJvdG90eXBlLmhhc05leHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0aW9ucy5sZW5ndGg+MH0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLl9hY3Rpb25zPXRoaXMuZ2V0QWN0aW9ucygpO2Zvcih2YXIgdD0wLGU9dGhpcy5fYWN0aW9ucy5sZW5ndGg7dDxlO3QrKyl0aGlzLl9hY3Rpb25zW3RdLnJlc2V0KCk7dGhpcy5fY29tcGxldGVkQWN0aW9ucz1bXX0sdC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQpe3RoaXMuX2FjdGlvbnMubGVuZ3RoPjAmJih0aGlzLl9jdXJyZW50QWN0aW9uPXRoaXMuX2FjdGlvbnNbMF0sdGhpcy5fY3VycmVudEFjdGlvbi51cGRhdGUodCksdGhpcy5fY3VycmVudEFjdGlvbi5pc0NvbXBsZXRlKHRoaXMuX2FjdG9yKSYmdGhpcy5fY29tcGxldGVkQWN0aW9ucy5wdXNoKHRoaXMuX2FjdGlvbnMuc2hpZnQoKSkpfSx0fSgpLF9lPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5DcmVhdGVSZXZlcnNhYmxlRWFzaW5nRnVuY3Rpb249ZnVuY3Rpb24odCl7cmV0dXJuIGZ1bmN0aW9uKGUsaSxuLG8pe3JldHVybiBuPGk/aS0odChlLG4saSxvKS1uKTp0KGUsaSxuLG8pfX0sdC5DcmVhdGVWZWN0b3JFYXNpbmdGdW5jdGlvbj1mdW5jdGlvbih0KXtyZXR1cm4gZnVuY3Rpb24oZSxpLG4sbyl7cmV0dXJuIG5ldyBrKHQoZSxpLngsbi54LG8pLHQoZSxpLnksbi55LG8pKX19LHQuTGluZWFyPXQuQ3JlYXRlUmV2ZXJzYWJsZUVhc2luZ0Z1bmN0aW9uKGZ1bmN0aW9uKHQsZSxpLG4pe3JldHVybihpLT1lKSp0L24rZX0pLHQuRWFzZUluUXVhZD10LkNyZWF0ZVJldmVyc2FibGVFYXNpbmdGdW5jdGlvbihmdW5jdGlvbih0LGUsaSxuKXtyZXR1cm4oaS09ZSkqKHQvPW4pKnQrZX0pLHQuRWFzZU91dFF1YWQ9dC5DcmVhdGVSZXZlcnNhYmxlRWFzaW5nRnVuY3Rpb24oZnVuY3Rpb24odCxlLGksbil7cmV0dXJuLShpLT1lKSoodC89bikqKHQtMikrZX0pLHQuRWFzZUluT3V0UXVhZD10LkNyZWF0ZVJldmVyc2FibGVFYXNpbmdGdW5jdGlvbihmdW5jdGlvbih0LGUsaSxuKXtyZXR1cm4gaS09ZSwodC89bi8yKTwxP2kvMip0KnQrZTotaS8yKigtLXQqKHQtMiktMSkrZX0pLHQuRWFzZUluQ3ViaWM9dC5DcmVhdGVSZXZlcnNhYmxlRWFzaW5nRnVuY3Rpb24oZnVuY3Rpb24odCxlLGksbil7cmV0dXJuKGktPWUpKih0Lz1uKSp0KnQrZX0pLHQuRWFzZU91dEN1YmljPXQuQ3JlYXRlUmV2ZXJzYWJsZUVhc2luZ0Z1bmN0aW9uKGZ1bmN0aW9uKHQsZSxpLG4pe3JldHVybiB0Lz1uLChpLT1lKSooLS10KnQqdCsxKStlfSksdC5FYXNlSW5PdXRDdWJpYz10LkNyZWF0ZVJldmVyc2FibGVFYXNpbmdGdW5jdGlvbihmdW5jdGlvbih0LGUsaSxuKXtyZXR1cm4gaS09ZSwodC89bi8yKTwxP2kvMip0KnQqdCtlOmkvMiooKHQtPTIpKnQqdCsyKStlfSksdH0oKSxnZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLl9hY3RvcnM9W10sdGhpcy5fcXVldWVzPVtdLG51bGwhPT1hcmd1bWVudHMmJih0aGlzLl9hY3RvcnM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApLHRoaXMuX3F1ZXVlcz10aGlzLl9hY3RvcnMubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmFjdGlvblF1ZXVlfSkpfXJldHVybiB0LnByb3RvdHlwZS5jbGVhckFjdGlvbnM9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9MCxlPXRoaXMuX3F1ZXVlcy5sZW5ndGg7dDxlO3QrKyl0aGlzLl9xdWV1ZXNbdF0uY2xlYXJBY3Rpb25zKCl9LHQucHJvdG90eXBlLmFkZEFjdG9yVG9Db250ZXh0PWZ1bmN0aW9uKHQpe3RoaXMuX2FjdG9ycy5wdXNoKHQpLHRoaXMuX3F1ZXVlcy5wdXNoKHQuYWN0aW9uUXVldWUpfSx0LnByb3RvdHlwZS5yZW1vdmVBY3RvckZyb21Db250ZXh0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2FjdG9ycy5pbmRleE9mKHQpO2U+LTEmJih0aGlzLl9hY3RvcnMuc3BsaWNlKGUsMSksdGhpcy5fcXVldWVzLnNwbGljZShlLDEpKX0sdC5wcm90b3R5cGUuZWFzZVRvPWZ1bmN0aW9uKHQsZSxpLG4pe3ZvaWQgMD09PW4mJihuPV9lLkxpbmVhcik7Zm9yKHZhciBvPTAscj10aGlzLl9xdWV1ZXMubGVuZ3RoO288cjtvKyspdGhpcy5fcXVldWVzW29dLmFkZChuZXcgSnQodGhpcy5fYWN0b3JzW29dLHQsZSxpLG4pKTtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUubW92ZVRvPWZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIG49MCxvPXRoaXMuX3F1ZXVlcy5sZW5ndGg7bjxvO24rKyl0aGlzLl9xdWV1ZXNbbl0uYWRkKG5ldyAkdCh0aGlzLl9hY3RvcnNbbl0sdCxlLGkpKTtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUubW92ZUJ5PWZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIG49MCxvPXRoaXMuX3F1ZXVlcy5sZW5ndGg7bjxvO24rKyl0aGlzLl9xdWV1ZXNbbl0uYWRkKG5ldyB0ZSh0aGlzLl9hY3RvcnNbbl0sdCxlLGkpKTtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUucm90YXRlVG89ZnVuY3Rpb24odCxlLGkpe2Zvcih2YXIgbj0wLG89dGhpcy5fcXVldWVzLmxlbmd0aDtuPG87bisrKXRoaXMuX3F1ZXVlc1tuXS5hZGQobmV3IG5lKHRoaXMuX2FjdG9yc1tuXSx0LGUsaSkpO3JldHVybiB0aGlzfSx0LnByb3RvdHlwZS5yb3RhdGVCeT1mdW5jdGlvbih0LGUsaSl7Zm9yKHZhciBuPTAsbz10aGlzLl9xdWV1ZXMubGVuZ3RoO248bztuKyspdGhpcy5fcXVldWVzW25dLmFkZChuZXcgb2UodGhpcy5fYWN0b3JzW25dLHQsZSxpKSk7cmV0dXJuIHRoaXN9LHQucHJvdG90eXBlLnNjYWxlVG89ZnVuY3Rpb24odCxlLGksbil7Zm9yKHZhciBvPTAscj10aGlzLl9xdWV1ZXMubGVuZ3RoO288cjtvKyspdGhpcy5fcXVldWVzW29dLmFkZChuZXcgcmUodGhpcy5fYWN0b3JzW29dLHQsZSxpLG4pKTtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUuc2NhbGVCeT1mdW5jdGlvbih0LGUsaSl7Zm9yKHZhciBuPTAsbz10aGlzLl9xdWV1ZXMubGVuZ3RoO248bztuKyspdGhpcy5fcXVldWVzW25dLmFkZChuZXcgc2UodGhpcy5fYWN0b3JzW25dLHQsZSxpKSk7cmV0dXJuIHRoaXN9LHQucHJvdG90eXBlLmJsaW5rPWZ1bmN0aW9uKHQsZSxpKXt2b2lkIDA9PT1pJiYoaT0xKTtmb3IodmFyIG49MCxvPXRoaXMuX3F1ZXVlcy5sZW5ndGg7bjxvO24rKyl0aGlzLl9xdWV1ZXNbbl0uYWRkKG5ldyBoZSh0aGlzLl9hY3RvcnNbbl0sdCxlLGkpKTtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUuZmFkZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaT0wLG49dGhpcy5fcXVldWVzLmxlbmd0aDtpPG47aSsrKXRoaXMuX3F1ZXVlc1tpXS5hZGQobmV3IGNlKHRoaXMuX2FjdG9yc1tpXSx0LGUpKTtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUuZGVsYXk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsaT10aGlzLl9xdWV1ZXMubGVuZ3RoO2U8aTtlKyspdGhpcy5fcXVldWVzW2VdLmFkZChuZXcgYWUodGhpcy5fYWN0b3JzW2VdLHQpKTtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUuZGllPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PTAsZT10aGlzLl9xdWV1ZXMubGVuZ3RoO3Q8ZTt0KyspdGhpcy5fcXVldWVzW3RdLmFkZChuZXcgdWUodGhpcy5fYWN0b3JzW3RdKSk7cmV0dXJuIHRoaXN9LHQucHJvdG90eXBlLmNhbGxNZXRob2Q9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsaT10aGlzLl9xdWV1ZXMubGVuZ3RoO2U8aTtlKyspdGhpcy5fcXVldWVzW2VdLmFkZChuZXcgbGUodGhpcy5fYWN0b3JzW2VdLHQpKTtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUucmVwZWF0PWZ1bmN0aW9uKHQpe2lmKCF0KXJldHVybiB0aGlzLnJlcGVhdEZvcmV2ZXIoKSx0aGlzO2Zvcih2YXIgZT0wLGk9dGhpcy5fcXVldWVzLmxlbmd0aDtlPGk7ZSsrKXRoaXMuX3F1ZXVlc1tlXS5hZGQobmV3IHBlKHRoaXMuX2FjdG9yc1tlXSx0LHRoaXMuX2FjdG9yc1tlXS5hY3Rpb25RdWV1ZS5nZXRBY3Rpb25zKCkpKTtyZXR1cm4gdGhpc30sdC5wcm90b3R5cGUucmVwZWF0Rm9yZXZlcj1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5fcXVldWVzLmxlbmd0aDt0PGU7dCsrKXRoaXMuX3F1ZXVlc1t0XS5hZGQobmV3IGRlKHRoaXMuX2FjdG9yc1t0XSx0aGlzLl9hY3RvcnNbdF0uYWN0aW9uUXVldWUuZ2V0QWN0aW9ucygpKSk7cmV0dXJuIHRoaXN9LHQucHJvdG90eXBlLmZvbGxvdz1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaT0wLG49dGhpcy5fcXVldWVzLmxlbmd0aDtpPG47aSsrKXZvaWQgMD09PWU/dGhpcy5fcXVldWVzW2ldLmFkZChuZXcgZWUodGhpcy5fYWN0b3JzW2ldLHQpKTp0aGlzLl9xdWV1ZXNbaV0uYWRkKG5ldyBlZSh0aGlzLl9hY3RvcnNbaV0sdCxlKSk7cmV0dXJuIHRoaXN9LHQucHJvdG90eXBlLm1lZXQ9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9MCxuPXRoaXMuX3F1ZXVlcy5sZW5ndGg7aTxuO2krKyl2b2lkIDA9PT1lP3RoaXMuX3F1ZXVlc1tpXS5hZGQobmV3IGllKHRoaXMuX2FjdG9yc1tpXSx0KSk6dGhpcy5fcXVldWVzW2ldLmFkZChuZXcgaWUodGhpcy5fYWN0b3JzW2ldLHQsZSkpO3JldHVybiB0aGlzfSx0LnByb3RvdHlwZS5hc1Byb21pc2U9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5fcXVldWVzLm1hcChmdW5jdGlvbihlLGkpe3ZhciBuPW5ldyBwO3JldHVybiBlLmFkZChuZXcgbGUodC5fYWN0b3JzW2ldLGZ1bmN0aW9uKCl7bi5yZXNvbHZlKCl9KSksbn0pO3JldHVybiBwLmpvaW4uYXBwbHkodGhpcyxlKX0sdH0oKTtmdW5jdGlvbiB5ZSh0LGUsaSxuLG8scixzLGEpe3ZvaWQgMD09PWUmJihlPVB0LlJlZC5jbG9uZSgpKSx2b2lkIDA9PT1zJiYocz0xKSx2b2lkIDA9PT1hJiYoYT1cImJ1dHRcIiksdC5iZWdpblBhdGgoKSx0LmxpbmVXaWR0aD1zLHQubGluZUNhcD1hLHQuc3Ryb2tlU3R5bGU9ZS50b1N0cmluZygpLHQubW92ZVRvKGksbiksdC5saW5lVG8obyxyKSx0LmNsb3NlUGF0aCgpLHQuc3Ryb2tlKCl9ZnVuY3Rpb24gdmUodCxlLGkpe3ZvaWQgMD09PWUmJihlPVB0LlJlZC5jbG9uZSgpKSx0LmJlZ2luUGF0aCgpLHQuc3Ryb2tlU3R5bGU9ZS50b1N0cmluZygpLHQuYXJjKGkueCxpLnksNSwwLDIqTWF0aC5QSSksdC5jbG9zZVBhdGgoKSx0LnN0cm9rZSgpfWZ1bmN0aW9uIG1lKHQsZSxpLG4sbyl7dm9pZCAwPT09byYmKG89MSk7dmFyIHI9ZT9lLnRvU3RyaW5nKCk6XCJibHVlXCIscz1uLnNjYWxlKG8pO3QuYmVnaW5QYXRoKCksdC5zdHJva2VTdHlsZT1yLHQubW92ZVRvKGkueCxpLnkpLHQubGluZVRvKGkueCtzLngsaS55K3MueSksdC5jbG9zZVBhdGgoKSx0LnN0cm9rZSgpfWZ1bmN0aW9uIGJlKHQsZSxpLG4sbyxyLHMsYSl7dmFyIGg7aWYodm9pZCAwPT09ciYmKHI9NSksdm9pZCAwPT09cyYmKHM9UHQuV2hpdGUpLHZvaWQgMD09PWEmJihhPW51bGwpLFwibnVtYmVyXCI9PXR5cGVvZiByKWg9e3RsOnIsdHI6cixicjpyLGJsOnJ9O2Vsc2V7dmFyIGM9e3RsOjAsdHI6MCxicjowLGJsOjB9O2Zvcih2YXIgdSBpbiBjKWlmKGMuaGFzT3duUHJvcGVydHkodSkpe3ZhciBsPXU7aFtsXT1yW2xdfHxjW2xdfX10LmJlZ2luUGF0aCgpLHQubW92ZVRvKGUraC50bCxpKSx0LmxpbmVUbyhlK24taC50cixpKSx0LnF1YWRyYXRpY0N1cnZlVG8oZStuLGksZStuLGkraC50ciksdC5saW5lVG8oZStuLGkrby1oLmJyKSx0LnF1YWRyYXRpY0N1cnZlVG8oZStuLGkrbyxlK24taC5icixpK28pLHQubGluZVRvKGUraC5ibCxpK28pLHQucXVhZHJhdGljQ3VydmVUbyhlLGkrbyxlLGkrby1oLmJsKSx0LmxpbmVUbyhlLGkraC50bCksdC5xdWFkcmF0aWNDdXJ2ZVRvKGUsaSxlK2gudGwsaSksdC5jbG9zZVBhdGgoKSxhJiYodC5maWxsU3R5bGU9YS50b1N0cmluZygpLHQuZmlsbCgpKSxzJiYodC5zdHJva2VTdHlsZT1zLnRvU3RyaW5nKCksdC5zdHJva2UoKSl9ZnVuY3Rpb24gd2UodCxlLGksbixvLHIpe3ZvaWQgMD09PW8mJihvPVB0LldoaXRlKSx2b2lkIDA9PT1yJiYocj1udWxsKSx0LmJlZ2luUGF0aCgpLHQuYXJjKGUsaSxuLDAsMipNYXRoLlBJKSx0LmNsb3NlUGF0aCgpLHImJih0LmZpbGxTdHlsZT1yLnRvU3RyaW5nKCksdC5maWxsKCkpLG8mJih0LnN0cm9rZVN0eWxlPW8udG9TdHJpbmcoKSx0LnN0cm9rZSgpKX12YXIgeGUsUGU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KGUsaSl7dGhpcy5ib2R5QT1lLHRoaXMuYm9keUI9aSx0aGlzLmlkPW51bGwsdGhpcy5jb2xsaXNpb249bnVsbCx0aGlzLmlkPXQuY2FsY3VsYXRlUGFpckhhc2goZSxpKX1yZXR1cm4gdC5jYW5Db2xsaWRlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuKHQuY29sbGlzaW9uVHlwZSE9PXhlLkZpeGVkfHxlLmNvbGxpc2lvblR5cGUhPT14ZS5GaXhlZCkmJihlLmNvbGxpc2lvblR5cGUhPT14ZS5QcmV2ZW50Q29sbGlzaW9uJiZ0LmNvbGxpc2lvblR5cGUhPT14ZS5QcmV2ZW50Q29sbGlzaW9uJiYoIXQuaXNLaWxsZWQoKSYmIWUuaXNLaWxsZWQoKSkpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJjYW5Db2xsaWRlXCIse2dldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMuYm9keUEuYWN0b3IsaT10aGlzLmJvZHlCLmFjdG9yO3JldHVybiB0LmNhbkNvbGxpZGUoZSxpKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5jb2xsaWRlPWZ1bmN0aW9uKCl7dGhpcy5jb2xsaXNpb249dGhpcy5ib2R5QS5jb2xsaXNpb25BcmVhLmNvbGxpZGUodGhpcy5ib2R5Qi5jb2xsaXNpb25BcmVhKX0sdC5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXt0aGlzLmNvbGxpc2lvbiYmdGhpcy5jb2xsaXNpb24ucmVzb2x2ZSh0KX0sdC5jYWxjdWxhdGVQYWlySGFzaD1mdW5jdGlvbih0LGUpe3JldHVybiB0LmFjdG9yLmlkPGUuYWN0b3IuaWQ/XCIjXCIrdC5hY3Rvci5pZCtcIitcIitlLmFjdG9yLmlkOlwiI1wiK2UuYWN0b3IuaWQrXCIrXCIrdC5hY3Rvci5pZH0sdC5wcm90b3R5cGUuZGVidWdEcmF3PWZ1bmN0aW9uKHQpe3RoaXMuY29sbGlzaW9uJiYoVy5zaG93Q29udGFjdHMmJnZlKHQsUHQuUmVkLHRoaXMuY29sbGlzaW9uLnBvaW50KSxXLnNob3dDb2xsaXNpb25Ob3JtYWxzJiZtZSh0LFB0LkN5YW4sdGhpcy5jb2xsaXNpb24ucG9pbnQsdGhpcy5jb2xsaXNpb24ubm9ybWFsLDMwKSl9LHR9KCksU2U9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuYWN0b3I9dCx0aGlzLmNvbGxpc2lvbkFyZWE9bnVsbCx0aGlzLnBvcz1uZXcgaygwLDApLHRoaXMub2xkUG9zPW5ldyBrKDAsMCksdGhpcy52ZWw9bmV3IGsoMCwwKSx0aGlzLm9sZFZlbD1uZXcgaygwLDApLHRoaXMuYWNjPW5ldyBrKDAsMCksdGhpcy50b3JxdWU9MCx0aGlzLm1hc3M9MSx0aGlzLm1vaT0xZTMsdGhpcy5tb3Rpb249MTAsdGhpcy5mcmljdGlvbj0uOTksdGhpcy5yZXN0aXR1dGlvbj0uMix0aGlzLnJvdGF0aW9uPTAsdGhpcy5yeD0wLHRoaXMuX3RvdGFsTXR2PWsuWmVyby5jbG9uZSgpfXJldHVybiB0LnByb3RvdHlwZS5hZGRNdHY9ZnVuY3Rpb24odCl7dGhpcy5fdG90YWxNdHYuYWRkRXF1YWwodCl9LHQucHJvdG90eXBlLmFwcGx5TXR2PWZ1bmN0aW9uKCl7dGhpcy5wb3MuYWRkRXF1YWwodGhpcy5fdG90YWxNdHYpLHRoaXMuX3RvdGFsTXR2LnNldFRvKDAsMCl9LHQucHJvdG90eXBlLmdldEJvdW5kcz1mdW5jdGlvbigpe3JldHVybiBXLmNvbGxpc2lvblJlc29sdXRpb25TdHJhdGVneT09PU0uQm94P3RoaXMuYWN0b3IuZ2V0Qm91bmRzKCk6dGhpcy5jb2xsaXNpb25BcmVhLmdldEJvdW5kcygpfSx0LnByb3RvdHlwZS5nZXRSZWxhdGl2ZUJvdW5kcz1mdW5jdGlvbigpe3JldHVybiBXLmNvbGxpc2lvblJlc29sdXRpb25TdHJhdGVneSxNLkJveCx0aGlzLmFjdG9yLmdldFJlbGF0aXZlQm91bmRzKCl9LHQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuY29sbGlzaW9uQXJlYSYmKHRoaXMuYWN0b3ImJnRoaXMuYWN0b3IuaXNHZW9tZXRyeURpcnR5JiZ0aGlzLmNvbGxpc2lvbkFyZWEgaW5zdGFuY2VvZiBNdCYmKHRoaXMuY29sbGlzaW9uQXJlYS5wb2ludHM9dGhpcy5hY3Rvci5nZXRSZWxhdGl2ZUdlb21ldHJ5KCkpLHRoaXMuY29sbGlzaW9uQXJlYS5yZWNhbGMoKSl9LHQucHJvdG90eXBlLnVzZUJveENvbGxpc2lvbj1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD1rLlplcm8uY2xvbmUoKSksdGhpcy5jb2xsaXNpb25BcmVhPW5ldyBNdCh7Ym9keTp0aGlzLHBvaW50czp0aGlzLmFjdG9yLmdldFJlbGF0aXZlR2VvbWV0cnkoKSxwb3M6dH0pLHRoaXMubW9pPXRoaXMuY29sbGlzaW9uQXJlYS5nZXRNb21lbnRPZkluZXJ0aWEoKXx8dGhpcy5tb2l9LHQucHJvdG90eXBlLnVzZVBvbHlnb25Db2xsaXNpb249ZnVuY3Rpb24odCxlKXt2b2lkIDA9PT1lJiYoZT1rLlplcm8uY2xvbmUoKSksdGhpcy5jb2xsaXNpb25BcmVhPW5ldyBNdCh7Ym9keTp0aGlzLHBvaW50czp0LHBvczplfSksdGhpcy5tb2k9dGhpcy5jb2xsaXNpb25BcmVhLmdldE1vbWVudE9mSW5lcnRpYSgpfHx0aGlzLm1vaX0sdC5wcm90b3R5cGUudXNlQ2lyY2xlQ29sbGlzaW9uPWZ1bmN0aW9uKHQsZSl7dm9pZCAwPT09ZSYmKGU9ay5aZXJvLmNsb25lKCkpLHR8fCh0PXRoaXMuYWN0b3IuZ2V0V2lkdGgoKS8yKSx0aGlzLmNvbGxpc2lvbkFyZWE9bmV3IEN0KHtib2R5OnRoaXMscmFkaXVzOnQscG9zOmV9KSx0aGlzLm1vaT10aGlzLmNvbGxpc2lvbkFyZWEuZ2V0TW9tZW50T2ZJbmVydGlhKCl8fHRoaXMubW9pfSx0LnByb3RvdHlwZS51c2VFZGdlQ29sbGlzaW9uPWZ1bmN0aW9uKHQsZSl7dGhpcy5jb2xsaXNpb25BcmVhPW5ldyBUdCh7YmVnaW46dCxlbmQ6ZSxib2R5OnRoaXN9KSx0aGlzLm1vaT10aGlzLmNvbGxpc2lvbkFyZWEuZ2V0TW9tZW50T2ZJbmVydGlhKCl8fHRoaXMubW9pfSx0LnByb3RvdHlwZS5kZWJ1Z0RyYXc9ZnVuY3Rpb24odCl7Vy5zaG93TW90aW9uVmVjdG9ycyYmKG1lKHQsUHQuWWVsbG93LHRoaXMucG9zLHRoaXMuYWNjLmFkZChXLmFjYykpLG1lKHQsUHQuUmVkLHRoaXMucG9zLHRoaXMudmVsKSx2ZSh0LFB0LlJlZCx0aGlzLnBvcykpLFcuc2hvd0JvdW5kcyYmdGhpcy5nZXRCb3VuZHMoKS5kZWJ1Z0RyYXcodCxQdC5ZZWxsb3cpLFcuc2hvd0FyZWEmJnRoaXMuY29sbGlzaW9uQXJlYS5kZWJ1Z0RyYXcodCxQdC5HcmVlbil9LHQucHJvdG90eXBlLnRvdWNoaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBQZSh0aGlzLHQuYm9keSk7cmV0dXJuIGUuY29sbGlkZSgpLCEhZS5jb2xsaXNpb259LHR9KCksQWU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7dGhpcy5fdG9wTGVmdD1uZXcgaygwLDApLHRoaXMuX3RvcFJpZ2h0PW5ldyBrKDAsMCksdGhpcy5fYm90dG9tTGVmdD1uZXcgaygwLDApLHRoaXMuX2JvdHRvbVJpZ2h0PW5ldyBrKDAsMCl9cmV0dXJuIHQucHJvdG90eXBlLmlzU3ByaXRlT2ZmU2NyZWVuPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5jdXJyZW50RHJhd2luZy5kcmF3V2lkdGgsbj10LmN1cnJlbnREcmF3aW5nLmRyYXdIZWlnaHQsbz10LnJvdGF0aW9uLHI9dC5nZXRDZW50ZXIoKSxzPXQuZ2V0V29ybGRQb3MoKTt0aGlzLl90b3BMZWZ0Lng9cy54LWkvMix0aGlzLl90b3BMZWZ0Lnk9cy55LW4vMix0aGlzLl90b3BMZWZ0PXRoaXMuX3RvcExlZnQucm90YXRlKG8sciksdGhpcy5fdG9wUmlnaHQueD1zLngraS8yLHRoaXMuX3RvcFJpZ2h0Lnk9cy55LW4vMix0aGlzLl90b3BSaWdodD10aGlzLl90b3BSaWdodC5yb3RhdGUobyxyKSx0aGlzLl9ib3R0b21MZWZ0Lng9cy54LWkvMix0aGlzLl9ib3R0b21MZWZ0Lnk9cy55K24vMix0aGlzLl9ib3R0b21MZWZ0PXRoaXMuX2JvdHRvbUxlZnQucm90YXRlKG8sciksdGhpcy5fYm90dG9tUmlnaHQueD1zLngraS8yLHRoaXMuX2JvdHRvbVJpZ2h0Lnk9cy55K24vMix0aGlzLl9ib3R0b21SaWdodD10aGlzLl9ib3R0b21SaWdodC5yb3RhdGUobyxyKTt2YXIgYT1lLndvcmxkVG9TY3JlZW5Db29yZGluYXRlcyh0aGlzLl90b3BMZWZ0KSxoPWUud29ybGRUb1NjcmVlbkNvb3JkaW5hdGVzKHRoaXMuX3RvcFJpZ2h0KSxjPWUud29ybGRUb1NjcmVlbkNvb3JkaW5hdGVzKHRoaXMuX2JvdHRvbUxlZnQpLHU9ZS53b3JsZFRvU2NyZWVuQ29vcmRpbmF0ZXModGhpcy5fYm90dG9tUmlnaHQpO3RoaXMuX3hDb29yZHM9W10sdGhpcy5feUNvb3Jkcz1bXSx0aGlzLl94Q29vcmRzLnB1c2goYS54LGgueCxjLngsdS54KSx0aGlzLl95Q29vcmRzLnB1c2goYS55LGgueSxjLnksdS55KSx0aGlzLl94TWluPU1hdGgubWluLmFwcGx5KG51bGwsdGhpcy5feENvb3JkcyksdGhpcy5feU1pbj1NYXRoLm1pbi5hcHBseShudWxsLHRoaXMuX3lDb29yZHMpLHRoaXMuX3hNYXg9TWF0aC5tYXguYXBwbHkobnVsbCx0aGlzLl94Q29vcmRzKSx0aGlzLl95TWF4PU1hdGgubWF4LmFwcGx5KG51bGwsdGhpcy5feUNvb3Jkcyk7dmFyIGw9ZS5zY3JlZW5Ub1dvcmxkQ29vcmRpbmF0ZXMobmV3IGsodGhpcy5feE1pbix0aGlzLl95TWluKSkscD1lLnNjcmVlblRvV29ybGRDb29yZGluYXRlcyhuZXcgayh0aGlzLl94TWF4LHRoaXMuX3lNYXgpKTt0aGlzLl94TWluV29ybGQ9bC54LHRoaXMuX3lNaW5Xb3JsZD1sLnksdGhpcy5feE1heFdvcmxkPXAueCx0aGlzLl95TWF4V29ybGQ9cC55O3ZhciBkPVtuZXcgayh0aGlzLl94TWluLHRoaXMuX3lNaW4pLG5ldyBrKHRoaXMuX3hNYXgsdGhpcy5feU1pbiksbmV3IGsodGhpcy5feE1pbix0aGlzLl95TWF4KSxuZXcgayh0aGlzLl94TWF4LHRoaXMuX3lNYXgpXTtpZihkWzBdLng8MCYmZFsxXS54PmUuY2FudmFzLmNsaWVudFdpZHRoJiYoZFswXS55PjB8fGRbMl0ueTxlLmNhbnZhcy5jbGllbnRIZWlnaHQpKXJldHVybiExO2lmKGRbMF0ueTwwJiZkWzJdLnk+ZS5jYW52YXMuY2xpZW50SGVpZ2h0JiYoZFsxXS54PjB8fGRbMF0ueDxlLmNhbnZhcy5jbGllbnRXaWR0aCkpcmV0dXJuITE7Zm9yKHZhciBmPTA7ZjxkLmxlbmd0aDtmKyspaWYoZFtmXS54PjAmJmRbZl0ueT4wJiZkW2ZdLng8ZS5jYW52YXMuY2xpZW50V2lkdGgmJmRbZl0ueTxlLmNhbnZhcy5jbGllbnRIZWlnaHQpcmV0dXJuITE7cmV0dXJuITB9LHQucHJvdG90eXBlLmRlYnVnRHJhdz1mdW5jdGlvbih0KXt0LmJlZ2luUGF0aCgpLHQuc3Ryb2tlU3R5bGU9UHQuV2hpdGUudG9TdHJpbmcoKSx0LnJlY3QodGhpcy5feE1pbldvcmxkLHRoaXMuX3lNaW5Xb3JsZCx0aGlzLl94TWF4V29ybGQtdGhpcy5feE1pbldvcmxkLHRoaXMuX3lNYXhXb3JsZC10aGlzLl95TWluV29ybGQpLHQuc3Ryb2tlKCksdC5maWxsU3R5bGU9UHQuUmVkLnRvU3RyaW5nKCksdC5iZWdpblBhdGgoKSx0LmFyYyh0aGlzLl90b3BMZWZ0LngsdGhpcy5fdG9wTGVmdC55LDUsMCwyKk1hdGguUEkpLHQuY2xvc2VQYXRoKCksdC5maWxsKCksdC5maWxsU3R5bGU9UHQuR3JlZW4udG9TdHJpbmcoKSx0LmJlZ2luUGF0aCgpLHQuYXJjKHRoaXMuX3RvcFJpZ2h0LngsdGhpcy5fdG9wUmlnaHQueSw1LDAsMipNYXRoLlBJKSx0LmNsb3NlUGF0aCgpLHQuZmlsbCgpLHQuZmlsbFN0eWxlPVB0LkJsdWUudG9TdHJpbmcoKSx0LmJlZ2luUGF0aCgpLHQuYXJjKHRoaXMuX2JvdHRvbUxlZnQueCx0aGlzLl9ib3R0b21MZWZ0LnksNSwwLDIqTWF0aC5QSSksdC5jbG9zZVBhdGgoKSx0LmZpbGwoKSx0LmZpbGxTdHlsZT1QdC5NYWdlbnRhLnRvU3RyaW5nKCksdC5iZWdpblBhdGgoKSx0LmFyYyh0aGlzLl9ib3R0b21SaWdodC54LHRoaXMuX2JvdHRvbVJpZ2h0LnksNSwwLDIqTWF0aC5QSSksdC5jbG9zZVBhdGgoKSx0LmZpbGwoKX0sdH0oKSxFZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLmN1bGxpbmdCb3g9bmV3IEFlfXJldHVybiB0LnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxlKXt2YXIgaT10LmV2ZW50RGlzcGF0Y2hlcixuPXQuYW5jaG9yLG89dC5nZXRHbG9iYWxTY2FsZSgpLHI9by54KnQuZ2V0V2lkdGgoKS90LnNjYWxlLngscz1vLnkqdC5nZXRIZWlnaHQoKS90LnNjYWxlLnksYT1lLmN1cnJlbnRTY2VuZS5jYW1lcmEucG9zLGg9dC5nZXRXb3JsZFBvcygpLGM9ZS53b3JsZFRvU2NyZWVuQ29vcmRpbmF0ZXMobmV3IGsoaC54LW4ueCpyLGgueS1uLnkqcykpLHU9ZS53b3JsZFRvU2NyZWVuQ29vcmRpbmF0ZXMoYSksbD0xO3Quc2NlbmUmJnQuc2NlbmUuY2FtZXJhJiYobD1NYXRoLmFicyh0LnNjZW5lLmNhbWVyYS5nZXRab29tKCkpKTt2YXIgcD0hMDtudWxsIT10LmN1cnJlbnREcmF3aW5nJiYocD10aGlzLmN1bGxpbmdCb3guaXNTcHJpdGVPZmZTY3JlZW4odCxlKSksdC5pc09mZlNjcmVlbj8oYy54K3IqbD4wJiZjLnkrcypsPjAmJmMueDxlLmhhbGZEcmF3V2lkdGgrdS54JiZjLnk8ZS5oYWxmRHJhd0hlaWdodCt1Lnl8fCFwKSYmKGkuZW1pdChcImVudGVydmlld3BvcnRcIixuZXcgdnQodCkpLHQuaXNPZmZTY3JlZW49ITEpOihjLngrcipsPDB8fGMueStzKmw8MHx8Yy54PmUuaGFsZkRyYXdXaWR0aCt1Lnh8fGMueT5lLmhhbGZEcmF3SGVpZ2h0K3UueSkmJnAmJihpLmVtaXQoXCJleGl0dmlld3BvcnRcIixuZXcgeXQodCkpLHQuaXNPZmZTY3JlZW49ITApfSx0fSgpLENlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSl7dC5lbmFibGVDYXB0dXJlUG9pbnRlciYmKHQuaXNLaWxsZWQoKXx8ZS5pbnB1dC5wb2ludGVycy5yZXZpc2VQb2ludGVyRXZlbnRzUGF0aHModCkpfSx0fSgpLFRlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dC5ldmVudERpc3BhdGNoZXI7aWYodC5jb2xsaXNpb25UeXBlIT09eGUuUHJldmVudENvbGxpc2lvbiYmZS5jdXJyZW50U2NlbmUmJmUuY3VycmVudFNjZW5lLnRpbGVNYXBzKWZvcih2YXIgbj0wO248ZS5jdXJyZW50U2NlbmUudGlsZU1hcHMubGVuZ3RoO24rKylmb3IodmFyIG8scj1lLmN1cnJlbnRTY2VuZS50aWxlTWFwc1tuXSxzPWwuTm9uZSxhPTI7KG89ci5jb2xsaWRlcyh0KSkmJiEoYS0tPDApOylzPXQuZ2V0U2lkZUZyb21JbnRlcnNlY3QobyksaS5lbWl0KFwicHJlY29sbGlzaW9uXCIsbmV3IHV0KHQsbnVsbCxzLG8pKSx0LmNvbGxpc2lvblR5cGU9PT14ZS5BY3RpdmUmJih0LnBvcy55Kz1vLnksdC5wb3MueCs9by54LGkuZW1pdChcInBvc3Rjb2xsaXNpb25cIixuZXcgbHQodCxudWxsLHMsbykpKX0sdH0oKSxNZT1mdW5jdGlvbigpe3ZhciB0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiBlKWUuaGFzT3duUHJvcGVydHkoaSkmJih0W2ldPWVbaV0pfTtyZXR1cm4gZnVuY3Rpb24oZSxpKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxpKSxlLnByb3RvdHlwZT1udWxsPT09aT9PYmplY3QuY3JlYXRlKGkpOihuLnByb3RvdHlwZT1pLnByb3RvdHlwZSxuZXcgbil9fSgpLERlPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpLG4sbyxyKXtyZXR1cm4gdC5jYWxsKHRoaXMsZSxpLG4sbyxyKXx8dGhpc31yZXR1cm4gTWUoZSx0KSxlfShWdChmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGksbixvLHIscyl7dmFyIGE9dC5jYWxsKHRoaXMpfHx0aGlzO2lmKGEuaWQ9ZS5tYXhJZCsrLGEuYm9keT1uZXcgU2UoYSksYS5vbGRBY2M9ay5aZXJvLmNsb25lKCksYS5faGVpZ2h0PTAsYS5fd2lkdGg9MCxhLnNjYWxlPWsuT25lLmNsb25lKCksYS5vbGRTY2FsZT1rLk9uZS5jbG9uZSgpLGEuc3g9MCxhLnN5PTAsYS5pc09mZlNjcmVlbj0hMSxhLnZpc2libGU9ITAsYS5vcGFjaXR5PTEsYS5wcmV2aW91c09wYWNpdHk9MSxhLmxvZ2dlcj1PdC5nZXRJbnN0YW5jZSgpLGEuc2NlbmU9bnVsbCxhLnBhcmVudD1udWxsLGEuY2hpbGRyZW49W10sYS5jb2xsaXNpb25UeXBlPXhlLlByZXZlbnRDb2xsaXNpb24sYS5jb2xsaXNpb25Hcm91cHM9W10sYS5fZ2VvbWV0cnlEaXJ0eT0hMSxhLl9jb2xsaXNpb25IYW5kbGVycz17fSxhLl9pc0luaXRpYWxpemVkPSExLGEuZnJhbWVzPXt9LGEuX2VmZmVjdHNEaXJ0eT0hMSxhLmN1cnJlbnREcmF3aW5nPW51bGwsYS50cmFpdHM9W10sYS5lbmFibGVDYXB0dXJlUG9pbnRlcj0hMSxhLmNhcHR1cmVQb2ludGVyPXtjYXB0dXJlTW92ZUV2ZW50czohMSxjYXB0dXJlRHJhZ0V2ZW50czohMX0sYS5fekluZGV4PTAsYS5faXNLaWxsZWQ9ITEsYS5fb3BhY2l0eUZ4PW5ldyBIdChhLm9wYWNpdHkpLGEuX2NhcHR1cmVQb2ludGVyRXZlbnRzPVtcInBvaW50ZXJ1cFwiLFwicG9pbnRlcmRvd25cIixcInBvaW50ZXJtb3ZlXCIsXCJwb2ludGVyZW50ZXJcIixcInBvaW50ZXJsZWF2ZVwiLFwicG9pbnRlcmRyYWdzdGFydFwiLFwicG9pbnRlcmRyYWdlbmRcIixcInBvaW50ZXJkcmFnbW92ZVwiLFwicG9pbnRlcmRyYWdlbnRlclwiLFwicG9pbnRlcmRyYWdsZWF2ZVwiXSxhLl9jYXB0dXJlTW92ZUV2ZW50cz1bXCJwb2ludGVybW92ZVwiLFwicG9pbnRlcmVudGVyXCIsXCJwb2ludGVybGVhdmVcIixcInBvaW50ZXJkcmFnbW92ZVwiLFwicG9pbnRlcmRyYWdlbnRlclwiLFwicG9pbnRlcmRyYWdsZWF2ZVwiXSxhLl9jYXB0dXJlRHJhZ0V2ZW50cz1bXCJwb2ludGVyZHJhZ3N0YXJ0XCIsXCJwb2ludGVyZHJhZ2VuZFwiLFwicG9pbnRlcmRyYWdtb3ZlXCIsXCJwb2ludGVyZHJhZ2VudGVyXCIsXCJwb2ludGVyZHJhZ2xlYXZlXCJdLGkmJlwib2JqZWN0XCI9PXR5cGVvZiBpKXt2YXIgaD1pO2k9aC5wb3M/aC5wb3MueDpoLngsbj1oLnBvcz9oLnBvcy55OmgueSxvPWgud2lkdGgscj1oLmhlaWdodH1yZXR1cm4gYS5wb3MueD1pfHwwLGEucG9zLnk9bnx8MCxhLl93aWR0aD1vfHwwLGEuX2hlaWdodD1yfHwwLHMmJihhLmNvbG9yPXMsYS5vcGFjaXR5PXMuYSksYS50cmFpdHMucHVzaChuZXcgVGUpLGEudHJhaXRzLnB1c2gobmV3IEVlKSxhLnRyYWl0cy5wdXNoKG5ldyBDZSksYS5hY3Rpb25RdWV1ZT1uZXcgZmUoYSksYS5hY3Rpb25zPW5ldyBnZShhKSxhLl9pbml0RGVmYXVsdHMoKSxhLmJvZHkudXNlQm94Q29sbGlzaW9uKCksYX1yZXR1cm4gTWUoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjb2xsaXNpb25BcmVhXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJvZHkuY29sbGlzaW9uQXJlYX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuYm9keS5jb2xsaXNpb25BcmVhPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwieFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib2R5LnBvcy54fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5ib2R5LnBvcy54PXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwieVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib2R5LnBvcy55fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5ib2R5LnBvcy55PXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwicG9zXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJvZHkucG9zfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5ib2R5LnBvcy5zZXRUbyh0LngsdC55KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJvbGRQb3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm9keS5vbGRQb3N9LHNldDpmdW5jdGlvbih0KXt0aGlzLmJvZHkub2xkUG9zLnNldFRvKHQueCx0LnkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInZlbFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib2R5LnZlbH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuYm9keS52ZWwuc2V0VG8odC54LHQueSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwib2xkVmVsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJvZHkub2xkVmVsfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5ib2R5Lm9sZFZlbC5zZXRUbyh0LngsdC55KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJhY2NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm9keS5hY2N9LHNldDpmdW5jdGlvbih0KXt0aGlzLmJvZHkuYWNjLnNldFRvKHQueCx0LnkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInJvdGF0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJvZHkucm90YXRpb259LHNldDpmdW5jdGlvbih0KXt0aGlzLmJvZHkucm90YXRpb249dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJyeFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ib2R5LnJ4fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5ib2R5LnJ4PXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidG9ycXVlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJvZHkudG9ycXVlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5ib2R5LnRvcnF1ZT10fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcIm1hc3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm9keS5tYXNzfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5ib2R5Lm1hc3M9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJtb2lcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm9keS5tb2l9LHNldDpmdW5jdGlvbih0KXt0aGlzLmJvZHkubW9pPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiZnJpY3Rpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYm9keS5mcmljdGlvbn0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuYm9keS5mcmljdGlvbj10fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInJlc3RpdHV0aW9uXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmJvZHkucmVzdGl0dXRpb259LHNldDpmdW5jdGlvbih0KXt0aGlzLmJvZHkucmVzdGl0dXRpb249dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjb2xvclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29sb3J9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9jb2xvcj10LmNsb25lKCl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUub25Jbml0aWFsaXplPWZ1bmN0aW9uKHQpe30sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaXNJbml0aWFsaXplZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNJbml0aWFsaXplZH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5faW5pdGlhbGl6ZT1mdW5jdGlvbihlKXt0aGlzLmlzSW5pdGlhbGl6ZWR8fCh0aGlzLm9uSW5pdGlhbGl6ZShlKSx0LnByb3RvdHlwZS5lbWl0LmNhbGwodGhpcyxcImluaXRpYWxpemVcIixuZXcgZnQoZSx0aGlzKSksdGhpcy5faXNJbml0aWFsaXplZD0hMCk7Zm9yKHZhciBpPTAsbj10aGlzLmNoaWxkcmVuO2k8bi5sZW5ndGg7aSsrKXtuW2ldLl9pbml0aWFsaXplKGUpfX0sZS5wcm90b3R5cGUuX2luaXREZWZhdWx0cz1mdW5jdGlvbigpe3RoaXMuYW5jaG9yPURlLmRlZmF1bHRzLmFuY2hvci5jbG9uZSgpfSxlLnByb3RvdHlwZS5fY2hlY2tGb3JQb2ludGVyT3B0SW49ZnVuY3Rpb24odCl7aWYodCl7dmFyIGU9dC50b0xvd2VyQ2FzZSgpOy0xIT09dGhpcy5fY2FwdHVyZVBvaW50ZXJFdmVudHMuaW5kZXhPZihlKSYmKHRoaXMuZW5hYmxlQ2FwdHVyZVBvaW50ZXI9ITAsLTEhPT10aGlzLl9jYXB0dXJlTW92ZUV2ZW50cy5pbmRleE9mKGUpJiYodGhpcy5jYXB0dXJlUG9pbnRlci5jYXB0dXJlTW92ZUV2ZW50cz0hMCksLTEhPT10aGlzLl9jYXB0dXJlRHJhZ0V2ZW50cy5pbmRleE9mKGUpJiYodGhpcy5jYXB0dXJlUG9pbnRlci5jYXB0dXJlRHJhZ0V2ZW50cz0hMCkpfX0sZS5wcm90b3R5cGUub249ZnVuY3Rpb24oZSxpKXt0aGlzLl9jaGVja0ZvclBvaW50ZXJPcHRJbihlKSx0LnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsZSxpKX0sZS5wcm90b3R5cGUub25jZT1mdW5jdGlvbihlLGkpe3RoaXMuX2NoZWNrRm9yUG9pbnRlck9wdEluKGUpLHQucHJvdG90eXBlLm9uY2UuY2FsbCh0aGlzLGUsaSl9LGUucHJvdG90eXBlLm9mZj1mdW5jdGlvbihlLGkpe3QucHJvdG90eXBlLm9mZi5jYWxsKHRoaXMsZSxpKX0sZS5wcm90b3R5cGUuX3ByZWtpbGw9ZnVuY3Rpb24oZSl7dC5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMsXCJwcmVraWxsXCIsbmV3IHEodGhpcykpLHRoaXMub25QcmVLaWxsKGUpfSxlLnByb3RvdHlwZS5vblByZUtpbGw9ZnVuY3Rpb24odCl7fSxlLnByb3RvdHlwZS5fcG9zdGtpbGw9ZnVuY3Rpb24oZSl7dC5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMsXCJwb3N0a2lsbFwiLG5ldyBYKHRoaXMpKSx0aGlzLm9uUG9zdEtpbGwoZSl9LGUucHJvdG90eXBlLm9uUG9zdEtpbGw9ZnVuY3Rpb24odCl7fSxlLnByb3RvdHlwZS5raWxsPWZ1bmN0aW9uKCl7dGhpcy5zY2VuZT8odGhpcy5fcHJla2lsbCh0aGlzLnNjZW5lKSx0aGlzLmVtaXQoXCJraWxsXCIsbmV3IE4odGhpcykpLHRoaXMuX2lzS2lsbGVkPSEwLHRoaXMuc2NlbmUucmVtb3ZlKHRoaXMpLHRoaXMuX3Bvc3RraWxsKHRoaXMuc2NlbmUpKTp0aGlzLmxvZ2dlci53YXJuKFwiQ2Fubm90IGtpbGwgYWN0b3IsIGl0IHdhcyBuZXZlciBhZGRlZCB0byB0aGUgU2NlbmVcIil9LGUucHJvdG90eXBlLnVua2lsbD1mdW5jdGlvbigpe3RoaXMuX2lzS2lsbGVkPSExfSxlLnByb3RvdHlwZS5pc0tpbGxlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0tpbGxlZH0sZS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3QuY29sbGlzaW9uVHlwZT14ZS5QcmV2ZW50Q29sbGlzaW9uLFModCx0aGlzLmNoaWxkcmVuKSYmKHQucGFyZW50PXRoaXMpfSxlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7QSh0LHRoaXMuY2hpbGRyZW4pJiYodC5wYXJlbnQ9bnVsbCl9LGUucHJvdG90eXBlLnNldERyYXdpbmc9ZnVuY3Rpb24odCl7dD10LnRvU3RyaW5nKCksdGhpcy5jdXJyZW50RHJhd2luZyE9PXRoaXMuZnJhbWVzW3RdJiYobnVsbCE9dGhpcy5mcmFtZXNbdF0/KHRoaXMuZnJhbWVzW3RdLnJlc2V0KCksdGhpcy5jdXJyZW50RHJhd2luZz10aGlzLmZyYW1lc1t0XSk6T3QuZ2V0SW5zdGFuY2UoKS5lcnJvcihcInRoZSBzcGVjaWZpZWQgZHJhd2luZyBrZXkgXCIrdCtcIiBkb2VzIG5vdCBleGlzdFwiKSl9LGUucHJvdG90eXBlLmFkZERyYXdpbmc9ZnVuY3Rpb24oKXsyPT09YXJndW1lbnRzLmxlbmd0aD8odGhpcy5mcmFtZXNbYXJndW1lbnRzWzBdXT1hcmd1bWVudHNbMV0sdGhpcy5jdXJyZW50RHJhd2luZ3x8KHRoaXMuY3VycmVudERyYXdpbmc9YXJndW1lbnRzWzFdKSx0aGlzLl9lZmZlY3RzRGlydHk9ITApOihhcmd1bWVudHNbMF1pbnN0YW5jZW9mIEt0JiZ0aGlzLmFkZERyYXdpbmcoXCJkZWZhdWx0XCIsYXJndW1lbnRzWzBdKSxhcmd1bWVudHNbMF1pbnN0YW5jZW9mIFp0JiZ0aGlzLmFkZERyYXdpbmcoXCJkZWZhdWx0XCIsYXJndW1lbnRzWzBdLmFzU3ByaXRlKCkpKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwielwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRaSW5kZXgoKX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuc2V0WkluZGV4KHQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLmdldFpJbmRleD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl96SW5kZXh9LGUucHJvdG90eXBlLnNldFpJbmRleD1mdW5jdGlvbih0KXt0aGlzLnNjZW5lLmNsZWFudXBEcmF3VHJlZSh0aGlzKSx0aGlzLl96SW5kZXg9dCx0aGlzLnNjZW5lLnVwZGF0ZURyYXdUcmVlKHRoaXMpfSxlLnByb3RvdHlwZS5hZGRDb2xsaXNpb25Hcm91cD1mdW5jdGlvbih0KXt0aGlzLmNvbGxpc2lvbkdyb3Vwcy5wdXNoKHQpfSxlLnByb3RvdHlwZS5yZW1vdmVDb2xsaXNpb25Hcm91cD1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbGxpc2lvbkdyb3Vwcy5pbmRleE9mKHQpOy0xIT09ZSYmdGhpcy5jb2xsaXNpb25Hcm91cHMuc3BsaWNlKGUsMSl9LGUucHJvdG90eXBlLmdldENlbnRlcj1mdW5jdGlvbigpe3JldHVybiBuZXcgayh0aGlzLnBvcy54K3RoaXMuZ2V0V2lkdGgoKS8yLXRoaXMuYW5jaG9yLngqdGhpcy5nZXRXaWR0aCgpLHRoaXMucG9zLnkrdGhpcy5nZXRIZWlnaHQoKS8yLXRoaXMuYW5jaG9yLnkqdGhpcy5nZXRIZWlnaHQoKSl9LGUucHJvdG90eXBlLmdldFdpZHRoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dpZHRoKnRoaXMuZ2V0R2xvYmFsU2NhbGUoKS54fSxlLnByb3RvdHlwZS5zZXRXaWR0aD1mdW5jdGlvbih0KXt0aGlzLl93aWR0aD10L3RoaXMuc2NhbGUueCx0aGlzLl9nZW9tZXRyeURpcnR5PSEwfSxlLnByb3RvdHlwZS5nZXRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faGVpZ2h0KnRoaXMuZ2V0R2xvYmFsU2NhbGUoKS55fSxlLnByb3RvdHlwZS5zZXRIZWlnaHQ9ZnVuY3Rpb24odCl7dGhpcy5faGVpZ2h0PXQvdGhpcy5zY2FsZS55LHRoaXMuX2dlb21ldHJ5RGlydHk9ITB9LGUucHJvdG90eXBlLmdldExlZnQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRCb3VuZHMoKS5sZWZ0fSxlLnByb3RvdHlwZS5nZXRSaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEJvdW5kcygpLnJpZ2h0fSxlLnByb3RvdHlwZS5nZXRUb3A9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRCb3VuZHMoKS50b3B9LGUucHJvdG90eXBlLmdldEJvdHRvbT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldEJvdW5kcygpLmJvdHRvbX0sZS5wcm90b3R5cGUuZ2V0V29ybGRSb3RhdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcmVudD90aGlzLnJvdGF0aW9uK3RoaXMucGFyZW50LmdldFdvcmxkUm90YXRpb24oKTp0aGlzLnJvdGF0aW9ufSxlLnByb3RvdHlwZS5nZXRXb3JsZFBvcz1mdW5jdGlvbigpe2lmKCF0aGlzLnBhcmVudClyZXR1cm4gdGhpcy5wb3MuY2xvbmUoKTt2YXIgdD1bXSxlPXRoaXM7Zm9yKHQucHVzaCh0aGlzKTtlLnBhcmVudDspZT1lLnBhcmVudCx0LnB1c2goZSk7dmFyIGk9dC5yZWR1Y2VSaWdodChmdW5jdGlvbih0LGUpe3JldHVybiBlLnBhcmVudD90K2UucG9zLngqZS5nZXRHbG9iYWxTY2FsZSgpLng6dCtlLnBvcy54fSwwKSxuPXQucmVkdWNlUmlnaHQoZnVuY3Rpb24odCxlKXtyZXR1cm4gZS5wYXJlbnQ/dCtlLnBvcy55KmUuZ2V0R2xvYmFsU2NhbGUoKS55OnQrZS5wb3MueX0sMCksbz1lLmdldFdvcmxkUG9zKCkscj10aGlzLmdldFdvcmxkUm90YXRpb24oKTtyZXR1cm4gbmV3IGsoaSxuKS5yb3RhdGUocixvKX0sZS5wcm90b3R5cGUuZ2V0R2xvYmFsU2NhbGU9ZnVuY3Rpb24oKXtpZighdGhpcy5wYXJlbnQpcmV0dXJuIG5ldyBrKHRoaXMuc2NhbGUueCx0aGlzLnNjYWxlLnkpO3ZhciB0PXRoaXMucGFyZW50LmdldEdsb2JhbFNjYWxlKCk7cmV0dXJuIG5ldyBrKHRoaXMuc2NhbGUueCp0LngsdGhpcy5zY2FsZS55KnQueSl9LGUucHJvdG90eXBlLmdldEJvdW5kcz1mdW5jdGlvbih0KXt2b2lkIDA9PT10JiYodD0hMCk7dmFyIGU9dGhpcy5fZ2V0Q2FsY3VsYXRlZEFuY2hvcigpLGk9dGhpcy5nZXRXb3JsZFBvcygpLG49bmV3IER0KGkueC1lLngsaS55LWUueSxpLngrdGhpcy5nZXRXaWR0aCgpLWUueCxpLnkrdGhpcy5nZXRIZWlnaHQoKS1lLnkpO3JldHVybiB0P24ucm90YXRlKHRoaXMucm90YXRpb24saSk6bn0sZS5wcm90b3R5cGUuZ2V0UmVsYXRpdmVCb3VuZHM9ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9ITApO3ZhciBlPXRoaXMuX2dldENhbGN1bGF0ZWRBbmNob3IoKSxpPW5ldyBEdCgtZS54LC1lLnksdGhpcy5nZXRXaWR0aCgpLWUueCx0aGlzLmdldEhlaWdodCgpLWUueSk7cmV0dXJuIHQ/aS5yb3RhdGUodGhpcy5yb3RhdGlvbik6aX0sZS5wcm90b3R5cGUuZ2V0R2VvbWV0cnk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRCb3VuZHMoITEpLmdldFBvaW50cygpfSxlLnByb3RvdHlwZS5nZXRSZWxhdGl2ZUdlb21ldHJ5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZ2V0UmVsYXRpdmVCb3VuZHMoITEpLmdldFBvaW50cygpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpc0dlb21ldHJ5RGlydHlcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2dlb21ldHJ5RGlydHl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24odCxlLGkpe3ZvaWQgMD09PWkmJihpPSExKTt2YXIgbj10aGlzLmdldEJvdW5kcygpLmNvbnRhaW5zKG5ldyBrKHQsZSkpO3JldHVybiBpP258fHRoaXMuY2hpbGRyZW4uc29tZShmdW5jdGlvbihpKXtyZXR1cm4gaS5jb250YWlucyh0LGUsITApfSk6bn0sZS5wcm90b3R5cGUuZ2V0U2lkZUZyb21JbnRlcnNlY3Q9ZnVuY3Rpb24odCl7cmV0dXJuIHQ/TWF0aC5hYnModC54KT5NYXRoLmFicyh0LnkpP3QueDwwP2wuUmlnaHQ6bC5MZWZ0OnQueTwwP2wuQm90dG9tOmwuVG9wOmwuTm9uZX0sZS5wcm90b3R5cGUuY29sbGlkZXNXaXRoU2lkZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbGxpZGVzKHQpO3JldHVybiBlP01hdGguYWJzKGUueCk+TWF0aC5hYnMoZS55KT90aGlzLnBvcy54PHQucG9zLng/bC5SaWdodDpsLkxlZnQ6dGhpcy5wb3MueTx0LnBvcy55P2wuQm90dG9tOmwuVG9wOmwuTm9uZX0sZS5wcm90b3R5cGUuY29sbGlkZXM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRCb3VuZHMoKSxpPXQuZ2V0Qm91bmRzKCk7cmV0dXJuIGUuY29sbGlkZXMoaSl9LGUucHJvdG90eXBlLm9uQ29sbGlkZXNXaXRoPWZ1bmN0aW9uKHQsZSl7dGhpcy5fY29sbGlzaW9uSGFuZGxlcnNbdF18fCh0aGlzLl9jb2xsaXNpb25IYW5kbGVyc1t0XT1bXSksdGhpcy5fY29sbGlzaW9uSGFuZGxlcnNbdF0ucHVzaChlKX0sZS5wcm90b3R5cGUuZ2V0Q29sbGlzaW9uSGFuZGxlcnM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29sbGlzaW9uSGFuZGxlcnN9LGUucHJvdG90eXBlLnJlbW92ZUNvbGxpZGVzV2l0aD1mdW5jdGlvbih0KXt0aGlzLl9jb2xsaXNpb25IYW5kbGVyc1t0XT1bXX0sZS5wcm90b3R5cGUud2l0aGluPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyh0aGlzLnBvcy54LXQucG9zLngsMikrTWF0aC5wb3codGhpcy5wb3MueS10LnBvcy55LDIpKTw9ZX0sZS5wcm90b3R5cGUuX2dldENhbGN1bGF0ZWRBbmNob3I9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGsodGhpcy5nZXRXaWR0aCgpKnRoaXMuYW5jaG9yLngsdGhpcy5nZXRIZWlnaHQoKSp0aGlzLmFuY2hvci55KX0sZS5wcm90b3R5cGUuX3JlYXBwbHlFZmZlY3RzPWZ1bmN0aW9uKHQpe3QucmVtb3ZlRWZmZWN0KHRoaXMuX29wYWNpdHlGeCksdC5hZGRFZmZlY3QodGhpcy5fb3BhY2l0eUZ4KX0sZS5wcm90b3R5cGUuaW50ZWdyYXRlPWZ1bmN0aW9uKHQpe3ZhciBlPXQvMWUzLGk9dGhpcy5hY2MuY2xvbmUoKTt0aGlzLmNvbGxpc2lvblR5cGU9PT14ZS5BY3RpdmUmJmkuYWRkRXF1YWwoVy5hY2MpLHRoaXMudmVsLmFkZEVxdWFsKGkuc2NhbGUoZSkpLHRoaXMucG9zLmFkZEVxdWFsKHRoaXMudmVsLnNjYWxlKGUpKS5hZGRFcXVhbChpLnNjYWxlKC41KmUqZSkpLHRoaXMucngrPXRoaXMudG9ycXVlKigxL3RoaXMubW9pKSplLHRoaXMucm90YXRpb24rPXRoaXMucngqZSx0aGlzLnNjYWxlLngrPXRoaXMuc3gqdC8xZTMsdGhpcy5zY2FsZS55Kz10aGlzLnN5KnQvMWUzLHRoaXMuc2NhbGUuZXF1YWxzKHRoaXMub2xkU2NhbGUpfHwodGhpcy5fZ2VvbWV0cnlEaXJ0eT0hMCksdGhpcy5ib2R5LnVwZGF0ZSgpLHRoaXMuX2dlb21ldHJ5RGlydHk9ITF9LGUucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0LGUpe3RoaXMuX2luaXRpYWxpemUodCksdGhpcy5fcHJldXBkYXRlKHQsZSksdGhpcy5hY3Rpb25RdWV1ZS51cGRhdGUoZSksdGhpcy5jb2xvciYmKHRoaXMuY29sb3IuYT10aGlzLm9wYWNpdHkpLHRoaXMucHJldmlvdXNPcGFjaXR5IT09dGhpcy5vcGFjaXR5JiYodGhpcy5wcmV2aW91c09wYWNpdHk9dGhpcy5vcGFjaXR5LHRoaXMuX29wYWNpdHlGeC5vcGFjaXR5PXRoaXMub3BhY2l0eSx0aGlzLl9lZmZlY3RzRGlydHk9ITApLHRoaXMub2xkVmVsLnNldFRvKHRoaXMudmVsLngsdGhpcy52ZWwueSksdGhpcy5vbGRQb3Muc2V0VG8odGhpcy5wb3MueCx0aGlzLnBvcy55KSx0aGlzLm9sZEFjYy5zZXRUbyh0aGlzLmFjYy54LHRoaXMuYWNjLnkpLHRoaXMub2xkU2NhbGUuc2V0VG8odGhpcy5zY2FsZS54LHRoaXMuc2NhbGUueSksdGhpcy5pbnRlZ3JhdGUoZSk7Zm9yKHZhciBpPTAsbj10aGlzLnRyYWl0cztpPG4ubGVuZ3RoO2krKyl7bltpXS51cGRhdGUodGhpcyx0LGUpfWZvcih2YXIgbz0wO288dGhpcy5jaGlsZHJlbi5sZW5ndGg7bysrKXRoaXMuY2hpbGRyZW5bb10udXBkYXRlKHQsZSk7dGhpcy5fcG9zdHVwZGF0ZSh0LGUpfSxlLnByb3RvdHlwZS5vblByZVVwZGF0ZT1mdW5jdGlvbih0LGUpe30sZS5wcm90b3R5cGUub25Qb3N0VXBkYXRlPWZ1bmN0aW9uKHQsZSl7fSxlLnByb3RvdHlwZS5fcHJldXBkYXRlPWZ1bmN0aW9uKHQsZSl7dGhpcy5lbWl0KFwicHJldXBkYXRlXCIsbmV3IEoodCxlLHRoaXMpKSx0aGlzLm9uUHJlVXBkYXRlKHQsZSl9LGUucHJvdG90eXBlLl9wb3N0dXBkYXRlPWZ1bmN0aW9uKHQsZSl7dGhpcy5lbWl0KFwicG9zdHVwZGF0ZVwiLG5ldyBKKHQsZSx0aGlzKSksdGhpcy5vblBvc3RVcGRhdGUodCxlKX0sZS5wcm90b3R5cGUuZHJhdz1mdW5jdGlvbih0LGUpe2lmKHQuc2F2ZSgpLHQudHJhbnNsYXRlKHRoaXMucG9zLngsdGhpcy5wb3MueSksdC5yb3RhdGUodGhpcy5yb3RhdGlvbiksdC5zY2FsZSh0aGlzLnNjYWxlLngsdGhpcy5zY2FsZS55KSx0LnNhdmUoKSx0LnRyYW5zbGF0ZSgtdGhpcy5fd2lkdGgqdGhpcy5hbmNob3IueCwtdGhpcy5faGVpZ2h0KnRoaXMuYW5jaG9yLnkpLHRoaXMuX3ByZWRyYXcodCxlKSx0aGlzLmN1cnJlbnREcmF3aW5nKXt2YXIgaT10aGlzLmN1cnJlbnREcmF3aW5nLG49KHRoaXMuX3dpZHRoLWkud2lkdGgqaS5zY2FsZS54KSp0aGlzLmFuY2hvci54LG89KHRoaXMuX2hlaWdodC1pLmhlaWdodCppLnNjYWxlLnkpKnRoaXMuYW5jaG9yLnk7dGhpcy5fZWZmZWN0c0RpcnR5JiYodGhpcy5fcmVhcHBseUVmZmVjdHModGhpcy5jdXJyZW50RHJhd2luZyksdGhpcy5fZWZmZWN0c0RpcnR5PSExKSx0aGlzLmN1cnJlbnREcmF3aW5nLmRyYXcodCxuLG8pfWVsc2UgdGhpcy5jb2xvciYmKHQuZmlsbFN0eWxlPXRoaXMuY29sb3IudG9TdHJpbmcoKSx0LmZpbGxSZWN0KDAsMCx0aGlzLl93aWR0aCx0aGlzLl9oZWlnaHQpKTt0LnJlc3RvcmUoKTtmb3IodmFyIHI9MDtyPHRoaXMuY2hpbGRyZW4ubGVuZ3RoO3IrKyl0aGlzLmNoaWxkcmVuW3JdLnZpc2libGUmJnRoaXMuY2hpbGRyZW5bcl0uZHJhdyh0LGUpO3RoaXMuX3Bvc3RkcmF3KHQsZSksdC5yZXN0b3JlKCl9LGUucHJvdG90eXBlLm9uUHJlRHJhdz1mdW5jdGlvbih0LGUpe30sZS5wcm90b3R5cGUub25Qb3N0RHJhdz1mdW5jdGlvbih0LGUpe30sZS5wcm90b3R5cGUuX3ByZWRyYXc9ZnVuY3Rpb24odCxlKXt0aGlzLmVtaXQoXCJwcmVkcmF3XCIsbmV3IFkodCxlLHRoaXMpKSx0aGlzLm9uUHJlRHJhdyh0LGUpfSxlLnByb3RvdHlwZS5fcG9zdGRyYXc9ZnVuY3Rpb24odCxlKXt0aGlzLmVtaXQoXCJwb3N0ZHJhd1wiLG5ldyBZKHQsZSx0aGlzKSksdGhpcy5vblBvc3REcmF3KHQsZSl9LGUucHJvdG90eXBlLmRlYnVnRHJhdz1mdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJwcmVkZWJ1Z2RyYXdcIixuZXcgUSh0LHRoaXMpKSx0aGlzLmJvZHkuZGVidWdEcmF3KHQpO3ZhciBlPXRoaXMuZ2V0Qm91bmRzKCk7ZS5kZWJ1Z0RyYXcodCksdC5maWxsVGV4dChcImlkOiBcIit0aGlzLmlkLGUubGVmdCszLGUudG9wKzEwKSx0LmZpbGxTdHlsZT1QdC5ZZWxsb3cudG9TdHJpbmcoKSx0LmJlZ2luUGF0aCgpLHQuYXJjKHRoaXMuZ2V0V29ybGRQb3MoKS54LHRoaXMuZ2V0V29ybGRQb3MoKS55LDMsMCwyKk1hdGguUEkpLHQuY2xvc2VQYXRoKCksdC5maWxsKCk7Zm9yKHZhciBpPTA7aTx0aGlzLnRyYWl0cy5sZW5ndGg7aSsrKXRoaXMudHJhaXRzW2ldaW5zdGFuY2VvZiBFZSYmdGhpcy50cmFpdHNbaV0uY3VsbGluZ0JveC5kZWJ1Z0RyYXcodCk7dC5zdHJva2VTdHlsZT1QdC5ZZWxsb3cudG9TdHJpbmcoKSx0LmJlZ2luUGF0aCgpO3ZhciBuPU1hdGgubWluKHRoaXMuZ2V0V2lkdGgoKSx0aGlzLmdldEhlaWdodCgpKTt0LmFyYyh0aGlzLmdldFdvcmxkUG9zKCkueCx0aGlzLmdldFdvcmxkUG9zKCkueSxuLDAsMipNYXRoLlBJKSx0LmNsb3NlUGF0aCgpLHQuc3Ryb2tlKCk7dmFyIG89e1wiMCBQaVwiOjAsXCJQaS8yXCI6TWF0aC5QSS8yLFBpOk1hdGguUEksXCIzLzIgUGlcIjozKk1hdGguUEkvMn0scj10LmZvbnQ7Zm9yKHZhciBzIGluIG8pdC5maWxsU3R5bGU9UHQuWWVsbG93LnRvU3RyaW5nKCksdC5mb250PVwiMTRweFwiLHQudGV4dEFsaWduPVwiY2VudGVyXCIsdC5maWxsVGV4dChzLHRoaXMuZ2V0V29ybGRQb3MoKS54K01hdGguY29zKG9bc10pKihuKzEwKSx0aGlzLmdldFdvcmxkUG9zKCkueStNYXRoLnNpbihvW3NdKSoobisxMCkpO3QuZm9udD1yO2Zvcih2YXIgYT0wO2E8dGhpcy5jaGlsZHJlbi5sZW5ndGg7YSsrKXRoaXMuY2hpbGRyZW5bYV0uZGVidWdEcmF3KHQpO3RoaXMuZW1pdChcInBvc3RkZWJ1Z2RyYXdcIixuZXcgWih0LHRoaXMpKX0sZS5wcm90b3R5cGUuZ2V0QW5jZXN0b3JzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0LGU9W3RoaXNdLGk9dGhpczt0PWkucGFyZW50OylpPXQsZS5wdXNoKGkpO3JldHVybiBlLnJldmVyc2UoKX0sZS5kZWZhdWx0cz17YW5jaG9yOmsuSGFsZi5jbG9uZSgpfSxlLm1heElkPTAsZX0oeHQpKSk7IWZ1bmN0aW9uKHQpe3RbdC5QcmV2ZW50Q29sbGlzaW9uPTBdPVwiUHJldmVudENvbGxpc2lvblwiLHRbdC5QYXNzaXZlPTFdPVwiUGFzc2l2ZVwiLHRbdC5BY3RpdmU9Ml09XCJBY3RpdmVcIix0W3QuRml4ZWQ9M109XCJGaXhlZFwifSh4ZXx8KHhlPXt9KSk7dmFyIE9lPWZ1bmN0aW9uKCl7dmFyIHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShpKSYmKHRbaV09ZVtpXSl9O3JldHVybiBmdW5jdGlvbihlLGkpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLGkpLGUucHJvdG90eXBlPW51bGw9PT1pP09iamVjdC5jcmVhdGUoaSk6KG4ucHJvdG90eXBlPWkucHJvdG90eXBlLG5ldyBuKX19KCksQmU9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGksbixvKXt2YXIgcj10aGlzO3JldHVybihyPVwib2JqZWN0XCIhPXR5cGVvZiBlP3QuY2FsbCh0aGlzLGUsaSxuLG8pfHx0aGlzOnQuY2FsbCh0aGlzLGUpfHx0aGlzKS50cmFpdHM9W10sci50cmFpdHMucHVzaChuZXcgQ2UpLHIuYW5jaG9yLnNldFRvKDAsMCksci5jb2xsaXNpb25UeXBlPXhlLlByZXZlbnRDb2xsaXNpb24sci5lbmFibGVDYXB0dXJlUG9pbnRlcj0hMCxyfXJldHVybiBPZShlLHQpLGUucHJvdG90eXBlLl9pbml0aWFsaXplPWZ1bmN0aW9uKGUpe3RoaXMuX2VuZ2luZT1lLHQucHJvdG90eXBlLl9pbml0aWFsaXplLmNhbGwodGhpcyxlKX0sZS5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24oZSxpLG4pe2lmKHZvaWQgMD09PW4mJihuPSEwKSxuKXJldHVybiB0LnByb3RvdHlwZS5jb250YWlucy5jYWxsKHRoaXMsZSxpKTt2YXIgbz10aGlzLl9lbmdpbmUud29ybGRUb1NjcmVlbkNvb3JkaW5hdGVzKG5ldyBrKGUsaSkpO3JldHVybiB0LnByb3RvdHlwZS5jb250YWlucy5jYWxsKHRoaXMsby54LG8ueSl9LGV9KERlKSxrZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoZSxpLG4sbyl7aWYodGhpcy5pZD0wLHRoaXMuaW50ZXJ2YWw9MTAsdGhpcy5mY249ZnVuY3Rpb24oKXt9LHRoaXMucmVwZWF0cz0hMSx0aGlzLm1heE51bWJlck9mUmVwZWF0cz0tMSx0aGlzLl9lbGFwc2VkVGltZT0wLHRoaXMuX3RvdGFsVGltZUFsaXZlPTAsdGhpcy5fcGF1c2VkPSExLHRoaXMuX251bWJlck9mVGlja3M9MCx0aGlzLmNvbXBsZXRlPSExLHRoaXMuc2NlbmU9bnVsbCxvJiZvPj0wJiYodGhpcy5tYXhOdW1iZXJPZlJlcGVhdHM9bywhbikpdGhyb3cgbmV3IEVycm9yKFwicmVwZWF0cyBtdXN0IGJlIHNldCB0byB0cnVlIGlmIG51bWJlck9mUmVwZWF0cyBpcyBzZXRcIik7dGhpcy5pZD10LmlkKyssdGhpcy5pbnRlcnZhbD1pfHx0aGlzLmludGVydmFsLHRoaXMuZmNuPWV8fHRoaXMuZmNuLHRoaXMucmVwZWF0cz1ufHx0aGlzLnJlcGVhdHN9cmV0dXJuIHQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXt0aGlzLl9wYXVzZWR8fCh0aGlzLl90b3RhbFRpbWVBbGl2ZSs9dCx0aGlzLl9lbGFwc2VkVGltZSs9dCx0aGlzLm1heE51bWJlck9mUmVwZWF0cz4tMSYmdGhpcy5fbnVtYmVyT2ZUaWNrcz49dGhpcy5tYXhOdW1iZXJPZlJlcGVhdHMmJih0aGlzLmNvbXBsZXRlPSEwKSwhdGhpcy5jb21wbGV0ZSYmdGhpcy5fZWxhcHNlZFRpbWU+PXRoaXMuaW50ZXJ2YWwmJih0aGlzLmZjbi5jYWxsKHRoaXMpLHRoaXMuX251bWJlck9mVGlja3MrKyx0aGlzLnJlcGVhdHM/dGhpcy5fZWxhcHNlZFRpbWU9MDp0aGlzLmNvbXBsZXRlPSEwKSl9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKHQsZSl7aWYodCYmdD49MCYmKHRoaXMuaW50ZXJ2YWw9dCksdGhpcy5tYXhOdW1iZXJPZlJlcGVhdHMmJnRoaXMubWF4TnVtYmVyT2ZSZXBlYXRzPj0wJiYodGhpcy5tYXhOdW1iZXJPZlJlcGVhdHM9ZSwhdGhpcy5yZXBlYXRzKSl0aHJvdyBuZXcgRXJyb3IoXCJyZXBlYXRzIG11c3QgYmUgc2V0IHRvIHRydWUgaWYgbnVtYmVyT2ZSZXBlYXRzIGlzIHNldFwiKTt0aGlzLmNvbXBsZXRlPSExLHRoaXMuX2VsYXBzZWRUaW1lPTAsdGhpcy5fbnVtYmVyT2ZUaWNrcz0wfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJ0aW1lc1JlcGVhdGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9udW1iZXJPZlRpY2tzfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmdldFRpbWVSdW5uaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RvdGFsVGltZUFsaXZlfSx0LnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe3RoaXMuX3BhdXNlZD0hMH0sdC5wcm90b3R5cGUudW5wYXVzZT1mdW5jdGlvbigpe3RoaXMuX3BhdXNlZD0hMX0sdC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5zY2VuZSYmdGhpcy5zY2VuZS5jYW5jZWxUaW1lcih0aGlzKX0sdC5pZD0wLHR9KCksUmU9ZnVuY3Rpb24oKXt2YXIgdD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkgaW4gZSllLmhhc093blByb3BlcnR5KGkpJiYodFtpXT1lW2ldKX07cmV0dXJuIGZ1bmN0aW9uKGUsaSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsaSksZS5wcm90b3R5cGU9bnVsbD09PWk/T2JqZWN0LmNyZWF0ZShpKToobi5wcm90b3R5cGU9aS5wcm90b3R5cGUsbmV3IG4pfX0oKSxGZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSxuLG8scixzKXtyZXR1cm4gdC5jYWxsKHRoaXMsZSxpLG4sbyxyLHMpfHx0aGlzfXJldHVybiBSZShlLHQpLGV9KFZ0KGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpLG4sbyxyLHMpe3ZhciBhLGg9dC5jYWxsKHRoaXMpfHx0aGlzO2lmKGguX2NvbGxpZGluZ1g9LTEsaC5fY29sbGlkaW5nWT0tMSxoLl9vblNjcmVlblhTdGFydD0wLGguX29uU2NyZWVuWEVuZD05OTk5LGguX29uU2NyZWVuWVN0YXJ0PTAsaC5fb25TY3JlZW5ZRW5kPTk5OTksaC5fc3ByaXRlU2hlZXRzPXt9LGgubG9nZ2VyPU90LmdldEluc3RhbmNlKCksaC5kYXRhPVtdLGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlKXt2YXIgYz1lO2U9Yy54LGk9Yy55LG49Yy5jZWxsV2lkdGgsbz1jLmNlbGxIZWlnaHQscj1jLnJvd3Mscz1jLmNvbHN9aC54PWUsaC55PWksaC5jZWxsV2lkdGg9bixoLmNlbGxIZWlnaHQ9byxoLnJvd3M9cixoLmNvbHM9cyxoLmRhdGE9bmV3IEFycmF5KHIqcyk7Zm9yKHZhciB1PTA7dTxzO3UrKylmb3IodmFyIGw9MDtsPHI7bCsrKXZvaWQgMCxhPW5ldyBMZSh1Km4rZSxsKm8raSxuLG8sdStsKnMpLGguZGF0YVt1K2wqc109YTtyZXR1cm4gaH1yZXR1cm4gUmUoZSx0KSxlLnByb3RvdHlwZS5vbj1mdW5jdGlvbihlLGkpe3QucHJvdG90eXBlLm9uLmNhbGwodGhpcyxlLGkpfSxlLnByb3RvdHlwZS5yZWdpc3RlclNwcml0ZVNoZWV0PWZ1bmN0aW9uKHQsZSl7dGhpcy5fc3ByaXRlU2hlZXRzW3RdPWV9LGUucHJvdG90eXBlLmNvbGxpZGVzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10LnBvcy54K3QuZ2V0V2lkdGgoKSxpPXQucG9zLnkrdC5nZXRIZWlnaHQoKSxuPXQuZ2V0Qm91bmRzKCksbz1bXSxyPW4ubGVmdDtyPD1lO3IrPU1hdGgubWluKHQuZ2V0V2lkdGgoKS8yLHRoaXMuY2VsbFdpZHRoLzIpKWZvcih2YXIgcz1uLnRvcDtzPD1pO3MrPU1hdGgubWluKHQuZ2V0SGVpZ2h0KCkvMix0aGlzLmNlbGxIZWlnaHQvMikpe3ZhciBhPXRoaXMuZ2V0Q2VsbEJ5UG9pbnQocixzKTtpZihhJiZhLnNvbGlkKXt2YXIgaD1uLmNvbGxpZGVzKGEuZ2V0Qm91bmRzKCkpLGM9dC5nZXRDZW50ZXIoKS5zdWIoYS5nZXRDZW50ZXIoKSk7aCYmaC5kb3QoYyk+MCYmby5wdXNoKGgpfX1yZXR1cm4gMD09PW8ubGVuZ3RoP251bGw6by5yZWR1Y2UoZnVuY3Rpb24odCxlKXt2YXIgaT10Lngsbj10Lnk7cmV0dXJuIE1hdGguYWJzKHQueCk8TWF0aC5hYnMoZS54KSYmKGk9ZS54KSxNYXRoLmFicyh0LnkpPE1hdGguYWJzKGUueSkmJihuPWUueSksbmV3IGsoaSxuKX0pfSxlLnByb3RvdHlwZS5nZXRDZWxsQnlJbmRleD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5kYXRhW3RdfSxlLnByb3RvdHlwZS5nZXRDZWxsPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQ8MHx8ZTwwfHx0Pj10aGlzLmNvbHN8fGU+PXRoaXMucm93cz9udWxsOnRoaXMuZGF0YVt0K2UqdGhpcy5jb2xzXX0sZS5wcm90b3R5cGUuZ2V0Q2VsbEJ5UG9pbnQ9ZnVuY3Rpb24odCxlKXt0PU1hdGguZmxvb3IoKHQtdGhpcy54KS90aGlzLmNlbGxXaWR0aCksZT1NYXRoLmZsb29yKChlLXRoaXMueSkvdGhpcy5jZWxsSGVpZ2h0KTt2YXIgaT10aGlzLmdldENlbGwodCxlKTtyZXR1cm4gdD49MCYmZT49MCYmdDx0aGlzLmNvbHMmJmU8dGhpcy5yb3dzJiZpP2k6bnVsbH0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSl7dGhpcy5lbWl0KFwicHJldXBkYXRlXCIsbmV3IEoodCxlLHRoaXMpKTt2YXIgaT10LnNjcmVlblRvV29ybGRDb29yZGluYXRlcyhuZXcgaygwLDApKSxuPXQuc2NyZWVuVG9Xb3JsZENvb3JkaW5hdGVzKG5ldyBrKHQuY2FudmFzLmNsaWVudFdpZHRoLHQuY2FudmFzLmNsaWVudEhlaWdodCkpO3RoaXMuX29uU2NyZWVuWFN0YXJ0PU1hdGgubWF4KE1hdGguZmxvb3IoKGkueC10aGlzLngpL3RoaXMuY2VsbFdpZHRoKS0yLDApLHRoaXMuX29uU2NyZWVuWVN0YXJ0PU1hdGgubWF4KE1hdGguZmxvb3IoKGkueS10aGlzLnkpL3RoaXMuY2VsbEhlaWdodCktMiwwKSx0aGlzLl9vblNjcmVlblhFbmQ9TWF0aC5tYXgoTWF0aC5mbG9vcigobi54LXRoaXMueCkvdGhpcy5jZWxsV2lkdGgpKzIsMCksdGhpcy5fb25TY3JlZW5ZRW5kPU1hdGgubWF4KE1hdGguZmxvb3IoKG4ueS10aGlzLnkpL3RoaXMuY2VsbEhlaWdodCkrMiwwKSx0aGlzLmVtaXQoXCJwb3N0dXBkYXRlXCIsbmV3ICQodCxlLHRoaXMpKX0sZS5wcm90b3R5cGUuZHJhdz1mdW5jdGlvbih0LGUpe3RoaXMuZW1pdChcInByZWRyYXdcIixuZXcgWSh0LGUsdGhpcykpLHQuc2F2ZSgpLHQudHJhbnNsYXRlKHRoaXMueCx0aGlzLnkpO2Zvcih2YXIgaSxuLG8scj10aGlzLl9vblNjcmVlblhTdGFydCxzPU1hdGgubWluKHRoaXMuX29uU2NyZWVuWEVuZCx0aGlzLmNvbHMpLGE9dGhpcy5fb25TY3JlZW5ZU3RhcnQsaD1NYXRoLm1pbih0aGlzLl9vblNjcmVlbllFbmQsdGhpcy5yb3dzKTtyPHM7cisrKXtmb3IoO2E8aDthKyspZm9yKG49MCxvPShpPXRoaXMuZ2V0Q2VsbChyLGEpLnNwcml0ZXMuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNwcml0ZUlkPi0xfSkpLmxlbmd0aDtuPG87bisrKXt2YXIgYz10aGlzLl9zcHJpdGVTaGVldHNbaVtuXS5zcHJpdGVTaGVldEtleV07aWYoYyl7dmFyIHU9Yy5nZXRTcHJpdGUoaVtuXS5zcHJpdGVJZCk7dT91LmRyYXcodCxyKnRoaXMuY2VsbFdpZHRoLGEqdGhpcy5jZWxsSGVpZ2h0KTp0aGlzLmxvZ2dlci53YXJuKFwiU3ByaXRlIGRvZXMgbm90IGV4aXN0IGZvciBpZFwiLGlbbl0uc3ByaXRlSWQsXCJpbiBzcHJpdGUgc2hlZXRcIixpW25dLnNwcml0ZVNoZWV0S2V5LHUsYyl9ZWxzZSB0aGlzLmxvZ2dlci53YXJuKFwiU3ByaXRlIHNoZWV0XCIsaVtuXS5zcHJpdGVTaGVldEtleSxcImRvZXMgbm90IGV4aXN0XCIsYyl9YT10aGlzLl9vblNjcmVlbllTdGFydH10LnJlc3RvcmUoKSx0aGlzLmVtaXQoXCJwb3N0ZHJhd1wiLG5ldyBLKHQsZSx0aGlzKSl9LGUucHJvdG90eXBlLmRlYnVnRHJhdz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmNvbHMqdGhpcy5jZWxsV2lkdGgsaT10aGlzLnJvd3MqdGhpcy5jZWxsSGVpZ2h0O3Quc2F2ZSgpLHQuc3Ryb2tlU3R5bGU9UHQuUmVkLnRvU3RyaW5nKCk7Zm9yKHZhciBuPTA7bjx0aGlzLmNvbHMrMTtuKyspdC5iZWdpblBhdGgoKSx0Lm1vdmVUbyh0aGlzLngrbip0aGlzLmNlbGxXaWR0aCx0aGlzLnkpLHQubGluZVRvKHRoaXMueCtuKnRoaXMuY2VsbFdpZHRoLHRoaXMueStpKSx0LnN0cm9rZSgpO2Zvcih2YXIgbz0wO288dGhpcy5yb3dzKzE7bysrKXQuYmVnaW5QYXRoKCksdC5tb3ZlVG8odGhpcy54LHRoaXMueStvKnRoaXMuY2VsbEhlaWdodCksdC5saW5lVG8odGhpcy54K2UsdGhpcy55K28qdGhpcy5jZWxsSGVpZ2h0KSx0LnN0cm9rZSgpO3ZhciByPVB0LlJlZC5jbG9uZSgpO3IuYT0uMyx0aGlzLmRhdGEuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0LnNvbGlkfSkuZm9yRWFjaChmdW5jdGlvbihlKXt0LmZpbGxTdHlsZT1yLnRvU3RyaW5nKCksdC5maWxsUmVjdChlLngsZS55LGUud2lkdGgsZS5oZWlnaHQpfSksdGhpcy5fY29sbGlkaW5nWT4tMSYmdGhpcy5fY29sbGlkaW5nWD4tMSYmKHQuZmlsbFN0eWxlPVB0LkN5YW4udG9TdHJpbmcoKSx0LmZpbGxSZWN0KHRoaXMueCt0aGlzLl9jb2xsaWRpbmdYKnRoaXMuY2VsbFdpZHRoLHRoaXMueSt0aGlzLl9jb2xsaWRpbmdZKnRoaXMuY2VsbEhlaWdodCx0aGlzLmNlbGxXaWR0aCx0aGlzLmNlbGxIZWlnaHQpKSx0LnJlc3RvcmUoKX0sZX0oeHQpKSksSWU9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCxlKXt0aGlzLnNwcml0ZVNoZWV0S2V5PXQsdGhpcy5zcHJpdGVJZD1lfX0oKSxMZT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSxuLG8scixzLGEpe3JldHVybiB0LmNhbGwodGhpcyxlLGksbixvLHIscyxhKXx8dGhpc31yZXR1cm4gUmUoZSx0KSxlfShWdChmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLGksbixvLHIscyl7aWYodm9pZCAwPT09ciYmKHI9ITEpLHZvaWQgMD09PXMmJihzPVtdKSx0aGlzLnNvbGlkPSExLHRoaXMuc3ByaXRlcz1bXSx0JiZcIm9iamVjdFwiPT10eXBlb2YgdCl7dmFyIGE9dDt0PWEueCxlPWEueSxpPWEud2lkdGgsbj1hLmhlaWdodCxvPWEuaW5kZXgscj1hLnNvbGlkLHM9YS5zcHJpdGVzfXRoaXMueD10LHRoaXMueT1lLHRoaXMud2lkdGg9aSx0aGlzLmhlaWdodD1uLHRoaXMuaW5kZXg9byx0aGlzLnNvbGlkPXIsdGhpcy5zcHJpdGVzPXMsdGhpcy5fYm91bmRzPW5ldyBEdCh0aGlzLngsdGhpcy55LHRoaXMueCt0aGlzLndpZHRoLHRoaXMueSt0aGlzLmhlaWdodCl9cmV0dXJuIHQucHJvdG90eXBlLmdldEJvdW5kcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9ib3VuZHN9LHQucHJvdG90eXBlLmdldENlbnRlcj1mdW5jdGlvbigpe3JldHVybiBuZXcgayh0aGlzLngrdGhpcy53aWR0aC8yLHRoaXMueSt0aGlzLmhlaWdodC8yKX0sdC5wcm90b3R5cGUucHVzaFNwcml0ZT1mdW5jdGlvbih0KXt0aGlzLnNwcml0ZXMucHVzaCh0KX0sdC5wcm90b3R5cGUucmVtb3ZlU3ByaXRlPWZ1bmN0aW9uKHQpe3ZhciBlOyhlPXRoaXMuc3ByaXRlcy5pbmRleE9mKHQpKT4tMSYmdGhpcy5zcHJpdGVzLnNwbGljZShlLDEpfSx0LnByb3RvdHlwZS5jbGVhclNwcml0ZXM9ZnVuY3Rpb24oKXt0aGlzLnNwcml0ZXMubGVuZ3RoPTB9LHR9KCkpKSxIZT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt9cmV0dXJuIHQuY3JlYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX0lOU1RBTkNFfHwod2luZG93LkF1ZGlvQ29udGV4dHx8d2luZG93LndlYmtpdEF1ZGlvQ29udGV4dCkmJih0aGlzLl9JTlNUQU5DRT1uZXcgd2luZG93LkF1ZGlvQ29udGV4dCksdGhpcy5fSU5TVEFOQ0V9LHQuX0lOU1RBTkNFPW51bGwsdH0oKTt2YXIgemU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnVubG9jaz1mdW5jdGlvbigpe3ZhciBlPW5ldyBwO2lmKHQuX3VubG9ja2VkfHwhSGUuY3JlYXRlKCkpcmV0dXJuIGUucmVzb2x2ZSghMCk7dmFyIGk9SGUuY3JlYXRlKCk7cmV0dXJuIGkucmVzdW1lKCkudGhlbihmdW5jdGlvbigpe3ZhciBuPWkuY3JlYXRlQnVmZmVyKDEsMSwyMjA1MCksbz1pLmNyZWF0ZUJ1ZmZlclNvdXJjZSgpLHI9ITE7by5idWZmZXI9bixvLmNvbm5lY3QoaS5kZXN0aW5hdGlvbiksby5vbmVuZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHI9ITB9LG8ubm90ZU9uP28ubm90ZU9uKDApOm8uc3RhcnQoMCksc2V0VGltZW91dChmdW5jdGlvbigpeyFmdW5jdGlvbih0KXtyZXR1cm4hIXQucGxheWJhY2tTdGF0ZX0obyk/KGkuY3VycmVudFRpbWU+MHx8cikmJih0Ll91bmxvY2tlZD0hMCk6by5wbGF5YmFja1N0YXRlIT09by5QTEFZSU5HX1NUQVRFJiZvLnBsYXliYWNrU3RhdGUhPT1vLkZJTklTSEVEX1NUQVRFfHwodC5fdW5sb2NrZWQ9ITApfSwwKSxlLnJlc29sdmUoKX0sZnVuY3Rpb24oKXtlLnJlamVjdCghMSl9KSxlfSx0LmlzVW5sb2NrZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdW5sb2NrZWR9LHQuX3VubG9ja2VkPSExLHR9KCk7ZnVuY3Rpb24gV2UodCl7cmV0dXJuIHQ9Xyh7fSx7bWVzc2FnZTpcIlRoaXMgbWV0aG9kIHdpbGwgYmUgcmVtb3ZlZCBpbiBmdXR1cmUgdmVyc2lvbnMgb2YgRXhjYWxpYnVyLlwiLGFsdGVybmF0ZU1ldGhvZDpudWxsfSx0KSxmdW5jdGlvbihlLGksbil7aWYoXCJmdW5jdGlvblwiIT10eXBlb2Ygbi52YWx1ZSYmXCJmdW5jdGlvblwiIT10eXBlb2Ygbi5nZXQmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIG4uc2V0KXRocm93IG5ldyBTeW50YXhFcnJvcihcIk9ubHkgZnVuY3Rpb25zL2dldHRlcnMvc2V0dGVycyBjYW4gYmUgbWFya2VkIGFzIG9ic29sZXRlXCIpO3ZhciBvPShlLm5hbWV8fFwiXCIpKyhlLm5hbWU/XCIuXCI6XCJcIikraStcIiBpcyBtYXJrZWQgb2Jzb2xldGU6IFwiK3QubWVzc2FnZSsodC5hbHRlcm5hdGVNZXRob2Q/XCIgVXNlIFwiK3QuYWx0ZXJuYXRlTWV0aG9kK1wiIGluc3RlYWRcIjpcIlwiKSxyPV8oe30sbik7cmV0dXJuIG4udmFsdWU/KHIudmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gT3QuZ2V0SW5zdGFuY2UoKS53YXJuKG8pLG4udmFsdWUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSxyKToobi5nZXQmJihyLmdldD1mdW5jdGlvbigpe3JldHVybiBPdC5nZXRJbnN0YW5jZSgpLndhcm4obyksbi5nZXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSksbi5zZXQmJihyLnNldD1mdW5jdGlvbigpe3JldHVybiBPdC5nZXRJbnN0YW5jZSgpLndhcm4obyksbi5zZXQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSkscil9fXZhciBqZSxVZT1pKDQpLE5lPWkubihVZSkscWU9aSgzKSxYZT1pLm4ocWUpLFZlPWZ1bmN0aW9uKCl7dmFyIHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShpKSYmKHRbaV09ZVtpXSl9O3JldHVybiBmdW5jdGlvbihlLGkpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLGkpLGUucHJvdG90eXBlPW51bGw9PT1pP09iamVjdC5jcmVhdGUoaSk6KG4ucHJvdG90eXBlPWkucHJvdG90eXBlLG5ldyBuKX19KCksR2U9ZnVuY3Rpb24odCxlLGksbil7dmFyIG8scj1hcmd1bWVudHMubGVuZ3RoLHM9cjwzP2U6bnVsbD09PW4/bj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsaSk6bjtpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSlzPVJlZmxlY3QuZGVjb3JhdGUodCxlLGksbik7ZWxzZSBmb3IodmFyIGE9dC5sZW5ndGgtMTthPj0wO2EtLSkobz10W2FdKSYmKHM9KHI8Mz9vKHMpOnI+Mz9vKGUsaSxzKTpvKGUsaSkpfHxzKTtyZXR1cm4gcj4zJiZzJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxpLHMpLHN9LFllPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLl9yZXNvdXJjZUxpc3Q9W10saS5faW5kZXg9MCxpLl9wbGF5QnV0dG9uU2hvd249ITEsaS5fcmVzb3VyY2VDb3VudD0wLGkuX251bUxvYWRlZD0wLGkuX3Byb2dyZXNzQ291bnRzPXt9LGkuX3RvdGFsQ291bnRzPXt9LGkubG9nbz1OZS5hLGkubG9nb1dpZHRoPTQ2OCxpLmxvZ29IZWlnaHQ9MTE4LGkuYmFja2dyb3VuZENvbG9yPVwiIzE3NkJBQVwiLGkuc3VwcHJlc3NQbGF5QnV0dG9uPSExLGkuX3BsYXlCdXR0b25TdHlsZXM9WGUuYS50b1N0cmluZygpLGkucGxheUJ1dHRvblRleHQ9XCJQbGF5IGdhbWVcIixpLnN0YXJ0QnV0dG9uRmFjdG9yeT1mdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7cmV0dXJuIHQuaWQ9XCJleGNhbGlidXItcGxheVwiLHQudGV4dENvbnRlbnQ9aS5wbGF5QnV0dG9uVGV4dCx0LnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdH0saS5nZXREYXRhPWZ1bmN0aW9uKCl7fSxpLnNldERhdGE9ZnVuY3Rpb24oKXt9LGkucHJvY2Vzc0RhdGE9ZnVuY3Rpb24oKXt9LGkub25wcm9ncmVzcz1mdW5jdGlvbih0KXtPdC5nZXRJbnN0YW5jZSgpLmRlYnVnKFwiW2V4LkxvYWRlcl0gTG9hZGluZyBcIisoMTAwKnQubG9hZGVkL3QudG90YWwpLnRvRml4ZWQoMCkpfSxpLm9uY29tcGxldGU9ZnVuY3Rpb24oKXt9LGkub25lcnJvcj1mdW5jdGlvbigpe30sZSYmaS5hZGRSZXNvdXJjZXMoZSksaX1yZXR1cm4gVmUoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJfaW1hZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2ltYWdlRWxlbWVudHx8KHRoaXMuX2ltYWdlRWxlbWVudD1uZXcgSW1hZ2UsdGhpcy5faW1hZ2VFbGVtZW50LnNyYz10aGlzLmxvZ28pLHRoaXMuX2ltYWdlRWxlbWVudH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJfcGxheUJ1dHRvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fcGxheUJ1dHRvblJvb3RFbGVtZW50fHwodGhpcy5fcGxheUJ1dHRvblJvb3RFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy5fcGxheUJ1dHRvblJvb3RFbGVtZW50LnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRoaXMuX3BsYXlCdXR0b25Sb290RWxlbWVudCkpLHRoaXMuX3N0eWxlQmxvY2t8fCh0aGlzLl9zdHlsZUJsb2NrPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSx0aGlzLl9zdHlsZUJsb2NrLnRleHRDb250ZW50PXRoaXMuX3BsYXlCdXR0b25TdHlsZXMsZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzLl9zdHlsZUJsb2NrKSksdGhpcy5fcGxheUJ1dHRvbkVsZW1lbnR8fCh0aGlzLl9wbGF5QnV0dG9uRWxlbWVudD10aGlzLnN0YXJ0QnV0dG9uRmFjdG9yeSgpLHRoaXMuX3BsYXlCdXR0b25Sb290RWxlbWVudC5hcHBlbmRDaGlsZCh0aGlzLl9wbGF5QnV0dG9uRWxlbWVudCkpLHRoaXMuX3BsYXlCdXR0b25FbGVtZW50fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLndpcmVFbmdpbmU9ZnVuY3Rpb24odCl7dGhpcy5fZW5naW5lPXR9LGUucHJvdG90eXBlLmFkZFJlc291cmNlPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2luZGV4Kys7dGhpcy5fcmVzb3VyY2VMaXN0LnB1c2godCksdGhpcy5fcHJvZ3Jlc3NDb3VudHNbZV09MCx0aGlzLl90b3RhbENvdW50c1tlXT0xLHRoaXMuX3Jlc291cmNlQ291bnQrK30sZS5wcm90b3R5cGUuYWRkUmVzb3VyY2VzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wLGk9dC5sZW5ndGg7ZTxpO2UrKyl0aGlzLmFkZFJlc291cmNlKHRbZV0pfSxlLnByb3RvdHlwZS5pc0xvYWRlZD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9udW1Mb2FkZWQ9PT10aGlzLl9yZXNvdXJjZUNvdW50fSxlLnByb3RvdHlwZS5zaG93UGxheUJ1dHRvbj1mdW5jdGlvbigpe2lmKHRoaXMuc3VwcHJlc3NQbGF5QnV0dG9uKXJldHVybiBwLnJlc29sdmUoKTt0aGlzLl9wbGF5QnV0dG9uU2hvd249ITAsdGhpcy5fcGxheUJ1dHRvbi5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIjt2YXIgdD1uZXcgcDtyZXR1cm4gdGhpcy5fcGxheUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixmdW5jdGlvbigpe3JldHVybiB0LnN0YXRlKCk9PT1jLlBlbmRpbmc/dC5yZXNvbHZlKCk6dH0pLHRoaXMuX3BsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsZnVuY3Rpb24oKXtyZXR1cm4gdC5zdGF0ZSgpPT09Yy5QZW5kaW5nP3QucmVzb2x2ZSgpOnR9KSx0aGlzLl9wbGF5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVydXBcIixmdW5jdGlvbigpe3JldHVybiB0LnN0YXRlKCk9PT1jLlBlbmRpbmc/dC5yZXNvbHZlKCk6dH0pLHR9LGUucHJvdG90eXBlLmhpZGVQbGF5QnV0dG9uPWZ1bmN0aW9uKCl7dGhpcy5fcGxheUJ1dHRvblNob3duPSExLHRoaXMuX3BsYXlCdXR0b24uc3R5bGUuZGlzcGxheT1cIm5vbmVcIn0sZS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbigpe3ZhciB0PXRoaXMsZT1uZXcgcCxpPXRoaXM7aWYoMD09PXRoaXMuX3Jlc291cmNlTGlzdC5sZW5ndGgpcmV0dXJuIGkuc2hvd1BsYXlCdXR0b24oKS50aGVuKGZ1bmN0aW9uKCl7emUudW5sb2NrKCkudGhlbihmdW5jdGlvbigpe2kuaGlkZVBsYXlCdXR0b24oKSxpLm9uY29tcGxldGUuY2FsbChpKSxlLnJlc29sdmUoKX0pfSksZTt2YXIgbj1uZXcgQXJyYXkodGhpcy5fcmVzb3VyY2VMaXN0Lmxlbmd0aCksbz10aGlzLl9yZXNvdXJjZUxpc3QubGVuZ3RoO3JldHVybiB0aGlzLl9yZXNvdXJjZUxpc3QuZm9yRWFjaChmdW5jdGlvbihyLHMpe3QuX2VuZ2luZSYmci53aXJlRW5naW5lKHQuX2VuZ2luZSksci5vbnByb2dyZXNzPWZ1bmN0aW9uKHQpe3ZhciBlPXQudG90YWwscj10LmxvYWRlZDtuW3NdPXtsb2FkZWQ6ci9lKigxMDAvbyksdG90YWw6MTAwfTt2YXIgYT1uLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybntsb2FkZWQ6dC5sb2FkZWQrZS5sb2FkZWQsdG90YWw6MTAwfX0se2xvYWRlZDowLHRvdGFsOjEwMH0pO2kub25wcm9ncmVzcy5jYWxsKGksYSl9LHIub25jb21wbGV0ZT1yLm9uZXJyb3I9ZnVuY3Rpb24oKXtpLl9udW1Mb2FkZWQrKyxpLl9udW1Mb2FkZWQ9PT1pLl9yZXNvdXJjZUNvdW50JiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aS5zaG93UGxheUJ1dHRvbigpLnRoZW4oZnVuY3Rpb24oKXt6ZS51bmxvY2soKS50aGVuKGZ1bmN0aW9uKCl7aS5oaWRlUGxheUJ1dHRvbigpLGkub25jb21wbGV0ZS5jYWxsKGkpLGUucmVzb2x2ZSgpfSl9KX0sMjAwKX19KSxmdW5jdGlvbiB0KGUsaSl7ZVtpXSYmZVtpXS5sb2FkKCkudGhlbihmdW5jdGlvbigpe3QoZSxpKzEpfSl9KHRoaXMuX3Jlc291cmNlTGlzdCwwKSxlfSxlLnByb3RvdHlwZS5kcmF3PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2VuZ2luZS5jYW52YXNIZWlnaHQvd2luZG93LmRldmljZVBpeGVsUmF0aW8saT10aGlzLl9lbmdpbmUuY2FudmFzV2lkdGgvd2luZG93LmRldmljZVBpeGVsUmF0aW87aWYodGhpcy5fcGxheUJ1dHRvblJvb3RFbGVtZW50KXt2YXIgbj10LmNhbnZhcy5vZmZzZXRMZWZ0LG89dC5jYW52YXMub2Zmc2V0VG9wLHI9dGhpcy5fcGxheUJ1dHRvbi5jbGllbnRXaWR0aCxzPXRoaXMuX3BsYXlCdXR0b24uY2xpZW50SGVpZ2h0O3RoaXMuX3BsYXlCdXR0b25Sb290RWxlbWVudC5zdHlsZS5sZWZ0PW4raS8yLXIvMitcInB4XCIsdGhpcy5fcGxheUJ1dHRvblJvb3RFbGVtZW50LnN0eWxlLnRvcD1vK2UvMi1zLzIrMTAwK1wicHhcIn10LmZpbGxTdHlsZT10aGlzLmJhY2tncm91bmRDb2xvcix0LmZpbGxSZWN0KDAsMCxpLGUpO3ZhciBhPWUvMixoPU1hdGgubWluKHRoaXMubG9nb1dpZHRoLC43NSppKSxjPWkvMi1oLzIsdT1NYXRoLmZsb29yKGgqKHRoaXMubG9nb0hlaWdodC90aGlzLmxvZ29XaWR0aCkpLGw9dGhpcy5fZW5naW5lLmdldEFudGlhbGlhc2luZygpO2lmKHRoaXMuX2VuZ2luZS5zZXRBbnRpYWxpYXNpbmcoITApLHQuZHJhd0ltYWdlKHRoaXMuX2ltYWdlLDAsMCx0aGlzLmxvZ29XaWR0aCx0aGlzLmxvZ29IZWlnaHQsYyxhLXUtMjAsaCx1KSx0aGlzLnN1cHByZXNzUGxheUJ1dHRvbnx8IXRoaXMuX3BsYXlCdXR0b25TaG93bil7dC5saW5lV2lkdGg9MixiZSh0LGMsYSxoLDIwLDEwKTt2YXIgcD1oKih0aGlzLl9udW1Mb2FkZWQvdGhpcy5fcmVzb3VyY2VDb3VudCktMTA7YmUodCxjKzUsYSs1LHA+MD9wOjAsMTAsNSxudWxsLFB0LldoaXRlKSx0aGlzLl9lbmdpbmUuc2V0QW50aWFsaWFzaW5nKGwpfWVsc2UgdGhpcy5fZW5naW5lLnNldEFudGlhbGlhc2luZyhsKX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSl7fSxlfSh4dCksS2U9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZhciBuPXQuY2FsbCh0aGlzLGkpfHx0aGlzO3JldHVybiBuLl9oYW5kbGVPblRyaWdnZXI9ZnVuY3Rpb24oKXtyZXR1cm4gbi5fd2FpdFByb21pc2Uuc3RhdGUoKT09PWMuUGVuZGluZyYmKHplLnVubG9jaygpLG4uX3dhaXRQcm9taXNlLnJlc29sdmUobi5fbG9hZGVkVmFsdWUpLG4uX3BsYXlUcmlnZ2VyLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsITEpfSxuLl9wbGF5VHJpZ2dlcj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChlKSxuLl9wbGF5VHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIixuLl9oYW5kbGVPblRyaWdnZXIpLG59cmV0dXJuIFZlKGUsdCksZS5wcm90b3R5cGUubG9hZD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuX3dhaXRQcm9taXNlPW5ldyBwLHQucHJvdG90eXBlLmxvYWQuY2FsbCh0aGlzKS50aGVuKGZ1bmN0aW9uKHQpe2UuX2xvYWRlZFZhbHVlPXQsZS5fcGxheVRyaWdnZXIuc3R5bGUuZGlzcGxheT1cImJsb2NrXCJ9LGZ1bmN0aW9uKHQpe2UuX3dhaXRQcm9taXNlLnJlamVjdCh0KX0pLHRoaXMuX3dhaXRQcm9taXNlfSxHZShbV2Uoe21lc3NhZ2U6XCJEZXByZWNhdGVkIGluIHYwLjIwLjBcIixhbHRlcm5hdGVNZXRob2Q6XCJVc2UgZXguTG9hZGVyIGluc3RlYWRcIn0pXSxlLnByb3RvdHlwZSxcImxvYWRcIixudWxsKSxlfShZZSksUWU9e3dlYmdsOlwiV2ViR0xcIix3ZWJhdWRpbzpcIldlYkF1ZGlvXCIsZ2FtZXBhZGFwaTpcIkdhbWVwYWQgQVBJXCJ9LFplPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuX2ZlYXR1cmVzPW51bGwsdGhpcy5mYWlsZWRUZXN0cz1bXSx0aGlzLl9jcml0aWNhbFRlc3RzPXtjYW52YXNTdXBwb3J0OmZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtyZXR1cm4hKCF0LmdldENvbnRleHR8fCF0LmdldENvbnRleHQoXCIyZFwiKSl9LGFycmF5QnVmZmVyU3VwcG9ydDpmdW5jdGlvbigpe3ZhciB0PW5ldyBYTUxIdHRwUmVxdWVzdDt0Lm9wZW4oXCJHRVRcIixcIi9cIik7dHJ5e3QucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIn1jYXRjaCh0KXtyZXR1cm4hMX1yZXR1cm5cImFycmF5YnVmZmVyXCI9PT10LnJlc3BvbnNlVHlwZX0sZGF0YVVybFN1cHBvcnQ6ZnVuY3Rpb24oKXtyZXR1cm4gMD09PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikudG9EYXRhVVJMKFwiaW1hZ2UvcG5nXCIpLmluZGV4T2YoXCJkYXRhOmltYWdlL3BuZ1wiKX0sb2JqZWN0VXJsU3VwcG9ydDpmdW5jdGlvbigpe3JldHVyblwiVVJMXCJpbiB3aW5kb3cmJlwicmV2b2tlT2JqZWN0VVJMXCJpbiBVUkwmJlwiY3JlYXRlT2JqZWN0VVJMXCJpbiBVUkx9LHJnYmFTdXBwb3J0OmZ1bmN0aW9uKCl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImFcIikuc3R5bGU7cmV0dXJuIHQuY3NzVGV4dD1cImJhY2tncm91bmQtY29sb3I6cmdiYSgxNTAsMjU1LDE1MCwuNSlcIiwoXCJcIit0LmJhY2tncm91bmRDb2xvcikuaW5kZXhPZihcInJnYmFcIik+LTF9fSx0aGlzLl93YXJuaW5nVGVzdD17d2ViQXVkaW9TdXBwb3J0OmZ1bmN0aW9uKCl7cmV0dXJuISEod2luZG93LkF1ZGlvQ29udGV4dHx8d2luZG93LndlYmtpdEF1ZGlvQ29udGV4dHx8d2luZG93Lm1vekF1ZGlvQ29udGV4dHx8d2luZG93Lm1zQXVkaW9Db250ZXh0fHx3aW5kb3cub0F1ZGlvQ29udGV4dCl9LHdlYmdsU3VwcG9ydDpmdW5jdGlvbigpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7cmV0dXJuISghdC5nZXRDb250ZXh0fHwhdC5nZXRDb250ZXh0KFwid2ViZ2xcIikpfX0sdGhpcy5fZmVhdHVyZXM9dGhpcy5fbG9hZEJyb3dzZXJGZWF0dXJlcygpfXJldHVybiB0LnByb3RvdHlwZS5nZXRCcm93c2VyRmVhdHVyZXM9ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbD09PXRoaXMuX2ZlYXR1cmVzJiYodGhpcy5fZmVhdHVyZXM9dGhpcy5fbG9hZEJyb3dzZXJGZWF0dXJlcygpKSx0aGlzLl9mZWF0dXJlc30sdC5wcm90b3R5cGUubG9nQnJvd3NlckZlYXR1cmVzPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVwiJWNTVVBQT1JURUQgQlJPV1NFUiBGRUFUVVJFU1xcbj09PT09PT09PT09PT09PT09PT09PT09PT09JWNcXG5cIixlPVtcImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogbmF2eVwiLFwiZm9udC13ZWlnaHQ6IG5vcm1hbDsgY29sb3I6IGluaGVyaXRcIl0saT10aGlzLmdldEJyb3dzZXJGZWF0dXJlcygpLG49MCxvPU9iamVjdC5rZXlzKFFlKTtuPG8ubGVuZ3RoO24rKyl7dmFyIHI9b1tuXTtpW3JdPyh0Kz1cIiglY+KckyVjKVwiLGUucHVzaChcImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogZ3JlZW5cIiksZS5wdXNoKFwiZm9udC13ZWlnaHQ6IG5vcm1hbDsgY29sb3I6IGluaGVyaXRcIikpOih0Kz1cIiglY+KclyVjKVwiLGUucHVzaChcImZvbnQtd2VpZ2h0OiBib2xkOyBjb2xvcjogcmVkXCIpLGUucHVzaChcImZvbnQtd2VpZ2h0OiBub3JtYWw7IGNvbG9yOiBpbmhlcml0XCIpKSx0Kz1cIiBcIitRZVtyXStcIlxcblwifWUudW5zaGlmdCh0KSxjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLGUpfSx0LnByb3RvdHlwZS5fbG9hZEJyb3dzZXJGZWF0dXJlcz1mdW5jdGlvbigpe3ZhciB0PXRoaXM7cmV0dXJue2NhbnZhczp0Ll9jcml0aWNhbFRlc3RzLmNhbnZhc1N1cHBvcnQoKSxhcnJheWJ1ZmZlcjp0Ll9jcml0aWNhbFRlc3RzLmFycmF5QnVmZmVyU3VwcG9ydCgpLGRhdGF1cmw6dC5fY3JpdGljYWxUZXN0cy5kYXRhVXJsU3VwcG9ydCgpLG9iamVjdHVybDp0Ll9jcml0aWNhbFRlc3RzLm9iamVjdFVybFN1cHBvcnQoKSxyZ2JhOnQuX2NyaXRpY2FsVGVzdHMucmdiYVN1cHBvcnQoKSx3ZWJhdWRpbzp0Ll93YXJuaW5nVGVzdC53ZWJBdWRpb1N1cHBvcnQoKSx3ZWJnbDp0Ll93YXJuaW5nVGVzdC53ZWJnbFN1cHBvcnQoKSxnYW1lcGFkYXBpOiEhbmF2aWdhdG9yLmdldEdhbWVwYWRzfX0sdC5wcm90b3R5cGUudGVzdD1mdW5jdGlvbigpe3ZhciB0PSExO2Zvcih2YXIgZSBpbiB0aGlzLl9jcml0aWNhbFRlc3RzKXRoaXMuX2NyaXRpY2FsVGVzdHNbZV0uY2FsbCh0aGlzKXx8KHRoaXMuZmFpbGVkVGVzdHMucHVzaChlKSxPdC5nZXRJbnN0YW5jZSgpLmVycm9yKFwiQ3JpdGljYWwgYnJvd3NlciBmZWF0dXJlIG1pc3NpbmcsIEV4Y2FsaWJ1ciByZXF1aXJlczpcIixlKSx0PSEwKTtpZih0KXJldHVybiExO2Zvcih2YXIgaSBpbiB0aGlzLl93YXJuaW5nVGVzdCl0aGlzLl93YXJuaW5nVGVzdFtpXSgpfHxPdC5nZXRJbnN0YW5jZSgpLndhcm4oXCJXYXJuaW5nIGJyb3dzZXIgZmVhdHVyZSBtaXNzaW5nLCBFeGNhbGlidXIgd2lsbCBoYXZlIHJlZHVjZWQgcGVyZm9ybWFuY2U6XCIsaSk7cmV0dXJuITB9LHR9KCksSmU9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMucGFyZW50PXQsdGhpcy5wYXJlbnQ9dHx8bnVsbCx0aGlzLmJvZHk9bnVsbCx0aGlzLmJvdW5kcz1uZXcgRHQsdGhpcy5sZWZ0PW51bGwsdGhpcy5yaWdodD1udWxsLHRoaXMuaGVpZ2h0PTB9cmV0dXJuIHQucHJvdG90eXBlLmlzTGVhZj1mdW5jdGlvbigpe3JldHVybiF0aGlzLmxlZnQmJiF0aGlzLnJpZ2h0fSx0fSgpLCRlPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt2b2lkIDA9PT10JiYodD1uZXcgRHQoLU51bWJlci5NQVhfVkFMVUUsLU51bWJlci5NQVhfVkFMVUUsTnVtYmVyLk1BWF9WQUxVRSxOdW1iZXIuTUFYX1ZBTFVFKSksdGhpcy53b3JsZEJvdW5kcz10LHRoaXMucm9vdD1udWxsLHRoaXMubm9kZXM9e319cmV0dXJuIHQucHJvdG90eXBlLl9pbnNlcnQ9ZnVuY3Rpb24odCl7aWYobnVsbD09PXRoaXMucm9vdClyZXR1cm4gdGhpcy5yb290PXQsdm9pZCh0aGlzLnJvb3QucGFyZW50PW51bGwpO2Zvcih2YXIgZT10LmJvdW5kcyxpPXRoaXMucm9vdDshaS5pc0xlYWYoKTspe3ZhciBuLG89aS5sZWZ0LHI9aS5yaWdodCxzPWkuYm91bmRzLmdldFBlcmltZXRlcigpLGE9aS5ib3VuZHMuY29tYmluZShlKS5nZXRQZXJpbWV0ZXIoKSxoPTIqYSxjPTIqKGEtcyksdT0wLGw9ZS5jb21iaW5lKG8uYm91bmRzKTtvLmlzTGVhZigpP3U9bC5nZXRQZXJpbWV0ZXIoKStjOihuPW8uYm91bmRzLmdldFBlcmltZXRlcigpLHU9bC5nZXRQZXJpbWV0ZXIoKS1uK2MpO3ZhciBwPTAsZD1lLmNvbWJpbmUoci5ib3VuZHMpO2lmKHIuaXNMZWFmKCk/cD1kLmdldFBlcmltZXRlcigpK2M6KG49ci5ib3VuZHMuZ2V0UGVyaW1ldGVyKCkscD1kLmdldFBlcmltZXRlcigpLW4rYyksaDx1JiZoPHApYnJlYWs7aT11PHA/bzpyfXZhciBmPWkucGFyZW50LF89bmV3IEplKGYpO18uYm91bmRzPWUuY29tYmluZShpLmJvdW5kcyksXy5oZWlnaHQ9aS5oZWlnaHQrMSxudWxsIT09Zj8oZi5sZWZ0PT09aT9mLmxlZnQ9XzpmLnJpZ2h0PV8sXy5sZWZ0PWksXy5yaWdodD10LGkucGFyZW50PV8sdC5wYXJlbnQ9Xyk6KF8ubGVmdD1pLF8ucmlnaHQ9dCxpLnBhcmVudD1fLHQucGFyZW50PV8sdGhpcy5yb290PV8pO2Zvcih2YXIgZz10LnBhcmVudDtnOyl7aWYoIShnPXRoaXMuX2JhbGFuY2UoZykpLmxlZnQpdGhyb3cgbmV3IEVycm9yKFwiUGFyZW50IG9mIGN1cnJlbnQgbGVhZiBjYW5ub3QgaGF2ZSBhIG51bGwgbGVmdCBjaGlsZFwiK2cpO2lmKCFnLnJpZ2h0KXRocm93IG5ldyBFcnJvcihcIlBhcmVudCBvZiBjdXJyZW50IGxlYWYgY2Fubm90IGhhdmUgYSBudWxsIHJpZ2h0IGNoaWxkXCIrZyk7Zy5oZWlnaHQ9MStNYXRoLm1heChnLmxlZnQuaGVpZ2h0LGcucmlnaHQuaGVpZ2h0KSxnLmJvdW5kcz1nLmxlZnQuYm91bmRzLmNvbWJpbmUoZy5yaWdodC5ib3VuZHMpLGc9Zy5wYXJlbnR9fSx0LnByb3RvdHlwZS5fcmVtb3ZlPWZ1bmN0aW9uKHQpe2lmKHQhPT10aGlzLnJvb3Qpe3ZhciBlLGk9dC5wYXJlbnQsbj1pLnBhcmVudDtpZihlPWkubGVmdD09PXQ/aS5yaWdodDppLmxlZnQsbil7bi5sZWZ0PT09aT9uLmxlZnQ9ZTpuLnJpZ2h0PWUsZS5wYXJlbnQ9bjtmb3IodmFyIG89bjtvOykobz10aGlzLl9iYWxhbmNlKG8pKS5ib3VuZHM9by5sZWZ0LmJvdW5kcy5jb21iaW5lKG8ucmlnaHQuYm91bmRzKSxvLmhlaWdodD0xK01hdGgubWF4KG8ubGVmdC5oZWlnaHQsby5yaWdodC5oZWlnaHQpLG89by5wYXJlbnR9ZWxzZSB0aGlzLnJvb3Q9ZSxlLnBhcmVudD1udWxsfWVsc2UgdGhpcy5yb290PW51bGx9LHQucHJvdG90eXBlLnRyYWNrQm9keT1mdW5jdGlvbih0KXt2YXIgZT1uZXcgSmU7ZS5ib2R5PXQsZS5ib3VuZHM9dC5nZXRCb3VuZHMoKSxlLmJvdW5kcy5sZWZ0LT0yLGUuYm91bmRzLnRvcC09MixlLmJvdW5kcy5yaWdodCs9MixlLmJvdW5kcy5ib3R0b20rPTIsdGhpcy5ub2Rlc1t0LmFjdG9yLmlkXT1lLHRoaXMuX2luc2VydChlKX0sdC5wcm90b3R5cGUudXBkYXRlQm9keT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLm5vZGVzW3QuYWN0b3IuaWRdO2lmKCFlKXJldHVybiExO3ZhciBpPXQuZ2V0Qm91bmRzKCk7aWYoIXRoaXMud29ybGRCb3VuZHMuY29udGFpbnMoaSkpcmV0dXJuIE90LmdldEluc3RhbmNlKCkud2FybihcIkFjdG9yIHdpdGggaWQgXCIrdC5hY3Rvci5pZCtcIiBpcyBvdXRzaWRlIHRoZSB3b3JsZCBib3VuZHMgYW5kIHdpbGwgbm8gbG9uZ2VyIGJlIHRyYWNrZWQgZm9yIHBoeXNpY3NcIiksdGhpcy51bnRyYWNrQm9keSh0KSwhMTtpZihlLmJvdW5kcy5jb250YWlucyhpKSlyZXR1cm4hMTt0aGlzLl9yZW1vdmUoZSksaS5sZWZ0LT1XLmJvdW5kc1BhZGRpbmcsaS50b3AtPVcuYm91bmRzUGFkZGluZyxpLnJpZ2h0Kz1XLmJvdW5kc1BhZGRpbmcsaS5ib3R0b20rPVcuYm91bmRzUGFkZGluZzt2YXIgbj10LnZlbC54KlcuZHluYW1pY1RyZWVWZWxvY2l0eU11bHRpcGx5ZXIsbz10LnZlbC55KlcuZHluYW1pY1RyZWVWZWxvY2l0eU11bHRpcGx5ZXI7cmV0dXJuIG48MD9pLmxlZnQrPW46aS5yaWdodCs9bixvPDA/aS50b3ArPW86aS5ib3R0b20rPW8sZS5ib3VuZHM9aSx0aGlzLl9pbnNlcnQoZSksITB9LHQucHJvdG90eXBlLnVudHJhY2tCb2R5PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMubm9kZXNbdC5hY3Rvci5pZF07ZSYmKHRoaXMuX3JlbW92ZShlKSx0aGlzLm5vZGVzW3QuYWN0b3IuaWRdPW51bGwsZGVsZXRlIHRoaXMubm9kZXNbdC5hY3Rvci5pZF0pfSx0LnByb3RvdHlwZS5fYmFsYW5jZT1mdW5jdGlvbih0KXtpZihudWxsPT09dCl0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgYmFsYW5jZSBhdCBudWxsIG5vZGVcIik7aWYodC5pc0xlYWYoKXx8dC5oZWlnaHQ8MilyZXR1cm4gdDt2YXIgZT10LmxlZnQsaT10LnJpZ2h0LG49dCxvPWUscj1pLHM9ZS5sZWZ0LGE9ZS5yaWdodCxoPWkubGVmdCxjPWkucmlnaHQsdT1yLmhlaWdodC1vLmhlaWdodDtpZih1PjEpcmV0dXJuIHIubGVmdD1uLHIucGFyZW50PW4ucGFyZW50LG4ucGFyZW50PXIsci5wYXJlbnQ/ci5wYXJlbnQubGVmdD09PW4/ci5wYXJlbnQubGVmdD1yOnIucGFyZW50LnJpZ2h0PXI6dGhpcy5yb290PXIsaC5oZWlnaHQ+Yy5oZWlnaHQ/KHIucmlnaHQ9aCxuLnJpZ2h0PWMsYy5wYXJlbnQ9bixuLmJvdW5kcz1vLmJvdW5kcy5jb21iaW5lKGMuYm91bmRzKSxyLmJvdW5kcz1uLmJvdW5kcy5jb21iaW5lKGguYm91bmRzKSxuLmhlaWdodD0xK01hdGgubWF4KG8uaGVpZ2h0LGMuaGVpZ2h0KSxyLmhlaWdodD0xK01hdGgubWF4KG4uaGVpZ2h0LGguaGVpZ2h0KSk6KHIucmlnaHQ9YyxuLnJpZ2h0PWgsaC5wYXJlbnQ9bixuLmJvdW5kcz1vLmJvdW5kcy5jb21iaW5lKGguYm91bmRzKSxyLmJvdW5kcz1uLmJvdW5kcy5jb21iaW5lKGMuYm91bmRzKSxuLmhlaWdodD0xK01hdGgubWF4KG8uaGVpZ2h0LGguaGVpZ2h0KSxyLmhlaWdodD0xK01hdGgubWF4KG4uaGVpZ2h0LGMuaGVpZ2h0KSkscjtpZih1PC0xKXtpZihvLmxlZnQ9bixvLnBhcmVudD1uLnBhcmVudCxuLnBhcmVudD1vLG8ucGFyZW50KWlmKG8ucGFyZW50LmxlZnQ9PT1uKW8ucGFyZW50LmxlZnQ9bztlbHNle2lmKG8ucGFyZW50LnJpZ2h0IT09bil0aHJvd1wiRXJyb3Igcm90YXRpbmcgRHluYW1pYyBUcmVlXCI7by5wYXJlbnQucmlnaHQ9b31lbHNlIHRoaXMucm9vdD1vO3JldHVybiBzLmhlaWdodD5hLmhlaWdodD8oby5yaWdodD1zLG4ubGVmdD1hLGEucGFyZW50PW4sbi5ib3VuZHM9ci5ib3VuZHMuY29tYmluZShhLmJvdW5kcyksby5ib3VuZHM9bi5ib3VuZHMuY29tYmluZShzLmJvdW5kcyksbi5oZWlnaHQ9MStNYXRoLm1heChyLmhlaWdodCxhLmhlaWdodCksby5oZWlnaHQ9MStNYXRoLm1heChuLmhlaWdodCxzLmhlaWdodCkpOihvLnJpZ2h0PWEsbi5sZWZ0PXMscy5wYXJlbnQ9bixuLmJvdW5kcz1yLmJvdW5kcy5jb21iaW5lKHMuYm91bmRzKSxvLmJvdW5kcz1uLmJvdW5kcy5jb21iaW5lKGEuYm91bmRzKSxuLmhlaWdodD0xK01hdGgubWF4KHIuaGVpZ2h0LHMuaGVpZ2h0KSxvLmhlaWdodD0xK01hdGgubWF4KG4uaGVpZ2h0LGEuaGVpZ2h0KSksb31yZXR1cm4gdH0sdC5wcm90b3R5cGUuZ2V0SGVpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIG51bGw9PT10aGlzLnJvb3Q/MDp0aGlzLnJvb3QuaGVpZ2h0fSx0LnByb3RvdHlwZS5xdWVyeT1mdW5jdGlvbih0LGUpe3ZhciBpPXQuZ2V0Qm91bmRzKCksbj1mdW5jdGlvbihvKXtpZihvJiZvLmJvdW5kcy5jb2xsaWRlcyhpKSl7aWYoIW8uaXNMZWFmKCl8fG8uYm9keT09PXQpcmV0dXJuIG4oby5sZWZ0KXx8bihvLnJpZ2h0KTtpZihlLmNhbGwodCxvLmJvZHkpKXJldHVybiEwfXJldHVybiExfTtuKHRoaXMucm9vdCl9LHQucHJvdG90eXBlLnJheUNhc3RRdWVyeT1mdW5jdGlvbih0LGUsaSl7dm9pZCAwPT09ZSYmKGU9MS8wKTt2YXIgbj1mdW5jdGlvbihvKXtpZihvJiZvLmJvdW5kcy5yYXlDYXN0KHQsZSkpe2lmKCFvLmlzTGVhZigpKXJldHVybiBuKG8ubGVmdCl8fG4oby5yaWdodCk7aWYoaS5jYWxsKHQsby5ib2R5KSlyZXR1cm4hMH1yZXR1cm4hMX07bih0aGlzLnJvb3QpfSx0LnByb3RvdHlwZS5nZXROb2Rlcz1mdW5jdGlvbigpe3ZhciB0PWZ1bmN0aW9uKGUpe3JldHVybiBlP1tlXS5jb25jYXQodChlLmxlZnQpLHQoZS5yaWdodCkpOltdfTtyZXR1cm4gdCh0aGlzLnJvb3QpfSx0LnByb3RvdHlwZS5kZWJ1Z0RyYXc9ZnVuY3Rpb24odCl7dmFyIGU9ZnVuY3Rpb24oaSl7aSYmKGkuaXNMZWFmKCk/KHQubGluZVdpZHRoPTEsdC5zdHJva2VTdHlsZT1cImdyZWVuXCIpOih0LmxpbmVXaWR0aD0xLHQuc3Ryb2tlU3R5bGU9XCJ3aGl0ZVwiKSxpLmJvdW5kcy5kZWJ1Z0RyYXcodCksaS5sZWZ0JiZlKGkubGVmdCksaS5yaWdodCYmZShpLnJpZ2h0KSl9O2UodGhpcy5yb290KX0sdH0oKSx0aT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLl9keW5hbWljQ29sbGlzaW9uVHJlZT1uZXcgJGUsdGhpcy5fY29sbGlzaW9uSGFzaD17fSx0aGlzLl9jb2xsaXNpb25QYWlyQ2FjaGU9W10sdGhpcy5fbGFzdEZyYW1lUGFpcnM9W10sdGhpcy5fbGFzdEZyYW1lUGFpcnNIYXNoPXt9fXJldHVybiB0LnByb3RvdHlwZS50cmFjaz1mdW5jdGlvbih0KXt0P3RoaXMuX2R5bmFtaWNDb2xsaXNpb25UcmVlLnRyYWNrQm9keSh0KTpPdC5nZXRJbnN0YW5jZSgpLndhcm4oXCJDYW5ub3QgdHJhY2sgbnVsbCBwaHlzaWNzIGJvZHlcIil9LHQucHJvdG90eXBlLnVudHJhY2s9ZnVuY3Rpb24odCl7dD90aGlzLl9keW5hbWljQ29sbGlzaW9uVHJlZS51bnRyYWNrQm9keSh0KTpPdC5nZXRJbnN0YW5jZSgpLndhcm4oXCJDYW5ub3QgdW50cmFjayBhIG51bGwgcGh5c2ljcyBib2R5XCIpfSx0LnByb3RvdHlwZS5fc2hvdWxkR2VuZXJhdGVDb2xsaXNpb25QYWlyPWZ1bmN0aW9uKHQsZSl7dmFyIGk9UGUuY2FsY3VsYXRlUGFpckhhc2godC5ib2R5LGUuYm9keSk7cmV0dXJuIXRoaXMuX2NvbGxpc2lvbkhhc2hbaV0mJlBlLmNhbkNvbGxpZGUodCxlKX0sdC5wcm90b3R5cGUuYnJvYWRwaGFzZT1mdW5jdGlvbih0LGUsaSl7dmFyIG49dGhpcyxvPWUvMWUzLHI9dC5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIXQuaXNLaWxsZWQoKSYmdC5jb2xsaXNpb25UeXBlIT09eGUuUHJldmVudENvbGxpc2lvbn0pO3RoaXMuX2NvbGxpc2lvblBhaXJDYWNoZT1bXSx0aGlzLl9jb2xsaXNpb25IYXNoPXt9O2Zvcih2YXIgcz0wLGE9ci5sZW5ndGg7czxhO3MrKyl1PXJbc10sdGhpcy5fZHluYW1pY0NvbGxpc2lvblRyZWUucXVlcnkodS5ib2R5LGZ1bmN0aW9uKHQpe2lmKG4uX3Nob3VsZEdlbmVyYXRlQ29sbGlzaW9uUGFpcih1LHQuYWN0b3IpKXt2YXIgZT1uZXcgUGUodS5ib2R5LHQpO24uX2NvbGxpc2lvbkhhc2hbZS5pZF09ITAsbi5fY29sbGlzaW9uUGFpckNhY2hlLnB1c2goZSl9cmV0dXJuITF9KTtpZihpJiYoaS5waHlzaWNzLnBhaXJzPXRoaXMuX2NvbGxpc2lvblBhaXJDYWNoZS5sZW5ndGgpLFcuY2hlY2tGb3JGYXN0Qm9kaWVzKWZvcih2YXIgaD0wLGM9cjtoPGMubGVuZ3RoO2grKyl7dmFyIHU7aWYoKHU9Y1toXSkuY29sbGlzaW9uVHlwZT09PXhlLkFjdGl2ZSl7dmFyIGw9dS52ZWwubWFnbml0dWRlKCkqbysuNSp1LmFjYy5tYWduaXR1ZGUoKSpvKm8scD1NYXRoLm1pbih1LmJvZHkuZ2V0Qm91bmRzKCkuZ2V0SGVpZ2h0KCksdS5ib2R5LmdldEJvdW5kcygpLmdldFdpZHRoKCkpO2lmKFcuZGlzYWJsZU1pbmltdW1TcGVlZEZvckZhc3RCb2R5fHxsPnAvMil7aSYmaS5waHlzaWNzLmZhc3RCb2RpZXMrKzt2YXIgZCxmPXUucG9zLnN1Yih1Lm9sZFBvcyksXz11LmJvZHkuY29sbGlzaW9uQXJlYS5nZXRDZW50ZXIoKSxnPXUuYm9keS5jb2xsaXNpb25BcmVhLmdldEZ1cnRoZXN0UG9pbnQodS52ZWwpLHk9Zy5zdWIoZiksdj1uZXcgUih5LHUudmVsKTt2LnBvcz12LnBvcy5hZGQodi5kaXIuc2NhbGUoLTIqVy5zdXJmYWNlRXBzaWxvbikpO3ZhciBtPW5ldyBrKDEvMCwxLzApO2lmKHRoaXMuX2R5bmFtaWNDb2xsaXNpb25UcmVlLnJheUNhc3RRdWVyeSh2LGwrMipXLnN1cmZhY2VFcHNpbG9uLGZ1bmN0aW9uKHQpe2lmKHUuYm9keSE9PXQmJnQuY29sbGlzaW9uQXJlYSl7dmFyIGU9dC5jb2xsaXNpb25BcmVhLnJheUNhc3QodixsKzEwKlcuc3VyZmFjZUVwc2lsb24pO2lmKGUpe3ZhciBpPWUuc3ViKHkpO2kubWFnbml0dWRlKCk8bS5tYWduaXR1ZGUoKSYmKG09aSxkPXQpfX1yZXR1cm4hMX0pLGQmJmsuaXNWYWxpZChtKSl7dmFyIGI9bmV3IFBlKHUuYm9keSxkKTt0aGlzLl9jb2xsaXNpb25IYXNoW2IuaWRdfHwodGhpcy5fY29sbGlzaW9uSGFzaFtiLmlkXT0hMCx0aGlzLl9jb2xsaXNpb25QYWlyQ2FjaGUucHVzaChiKSk7dmFyIHc9Xy5zdWIoZyk7dS5wb3M9eS5hZGQodykuYWRkKG0pLmFkZCh2LmRpci5zY2FsZSgyKlcuc3VyZmFjZUVwc2lsb24pKSx1LmJvZHkuY29sbGlzaW9uQXJlYS5yZWNhbGMoKSxpJiZpLnBoeXNpY3MuZmFzdEJvZHlDb2xsaXNpb25zKyt9fX19cmV0dXJuIHRoaXMuX2NvbGxpc2lvblBhaXJDYWNoZX0sdC5wcm90b3R5cGUubmFycm93cGhhc2U9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyl0W2ldLmNvbGxpZGUoKSxlJiZ0W2ldLmNvbGxpc2lvbiYmKGUucGh5c2ljcy5jb2xsaXNpb25zKyssZS5waHlzaWNzLmNvbGxpZGVyc0hhc2hbdFtpXS5pZF09dFtpXSk7cmV0dXJuIHQuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNvbGxpc2lvbn0pfSx0LnByb3RvdHlwZS5yZXNvbHZlPWZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIG49MCxvPXQ7bjxvLmxlbmd0aDtuKyspe3ZhciByPW9bbl07ci5yZXNvbHZlKGkpLHIuY29sbGlzaW9uJiYoci5ib2R5QS5hcHBseU10digpLHIuYm9keUIuYXBwbHlNdHYoKSxyLmJvZHlBLmFjdG9yLmludGVncmF0ZShlKlcuY29sbGlzaW9uU2hpZnQpLHIuYm9keUIuYWN0b3IuaW50ZWdyYXRlKGUqVy5jb2xsaXNpb25TaGlmdCkpfXJldHVybiB0LmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC5jYW5Db2xsaWRlfSl9LHQucHJvdG90eXBlLnJ1bkNvbGxpc2lvblN0YXJ0RW5kPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT17fSxpPTAsbj10O2k8bi5sZW5ndGg7aSsrKXtpZihlWyhoPW5baV0pLmlkXT1oLCF0aGlzLl9sYXN0RnJhbWVQYWlyc0hhc2hbaC5pZF0pe3ZhciBvPWguYm9keUEuYWN0b3Iscj1oLmJvZHlCLmFjdG9yO28uZW1pdChcImNvbGxpc2lvbnN0YXJ0XCIsbmV3IHB0KG8scixoKSksci5lbWl0KFwiY29sbGlzaW9uc3RhcnRcIixuZXcgcHQocixvLGgpKX19Zm9yKHZhciBzPTAsYT10aGlzLl9sYXN0RnJhbWVQYWlycztzPGEubGVuZ3RoO3MrKyl7dmFyIGg7aWYoIWVbKGg9YVtzXSkuaWRdKXtvPWguYm9keUEuYWN0b3Iscj1oLmJvZHlCLmFjdG9yO28uZW1pdChcImNvbGxpc2lvbmVuZFwiLG5ldyBkdChvLHIpKSxyLmVtaXQoXCJjb2xsaXNpb25lbmRcIixuZXcgZHQocixvKSl9fXRoaXMuX2xhc3RGcmFtZVBhaXJzPXQsdGhpcy5fbGFzdEZyYW1lUGFpcnNIYXNoPWV9LHQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxpPTAsbj10Lmxlbmd0aDtpPG47aSsrKXRoaXMuX2R5bmFtaWNDb2xsaXNpb25UcmVlLnVwZGF0ZUJvZHkodFtpXS5ib2R5KSYmZSsrO3JldHVybiBlfSx0LnByb3RvdHlwZS5kZWJ1Z0RyYXc9ZnVuY3Rpb24odCl7aWYoVy5icm9hZHBoYXNlRGVidWcmJnRoaXMuX2R5bmFtaWNDb2xsaXNpb25UcmVlLmRlYnVnRHJhdyh0KSxXLnNob3dDb250YWN0c3x8Vy5zaG93Q29sbGlzaW9uTm9ybWFscylmb3IodmFyIGU9MCxpPXRoaXMuX2NvbGxpc2lvblBhaXJDYWNoZTtlPGkubGVuZ3RoO2UrKyl7aVtlXS5kZWJ1Z0RyYXcodCl9fSx0fSgpLGVpPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLl9nZXRDb21wYXJhYmxlPXR9cmV0dXJuIHQucHJvdG90eXBlLmZpbmQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2ZpbmQodGhpcy5fcm9vdCx0KX0sdC5wcm90b3R5cGUuX2ZpbmQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gbnVsbCE9dCYmKHRoaXMuX2dldENvbXBhcmFibGUuY2FsbChlKT09PXQuZ2V0S2V5KCk/dC5nZXREYXRhKCkuaW5kZXhPZihlKT4tMTp0aGlzLl9nZXRDb21wYXJhYmxlLmNhbGwoZSk8dC5nZXRLZXkoKT90aGlzLl9maW5kKHQuZ2V0TGVmdCgpLGUpOnRoaXMuX2ZpbmQodC5nZXRSaWdodCgpLGUpKX0sdC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9nZXQodGhpcy5fcm9vdCx0KX0sdC5wcm90b3R5cGUuX2dldD1mdW5jdGlvbih0LGUpe3JldHVybiBudWxsPT10P1tdOmU9PT10LmdldEtleSgpP3QuZ2V0RGF0YSgpOmU8dC5nZXRLZXkoKT90aGlzLl9nZXQodC5nZXRMZWZ0KCksZSk6dGhpcy5fZ2V0KHQuZ2V0UmlnaHQoKSxlKX0sdC5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKHQpe3JldHVybiBudWxsPT10aGlzLl9yb290Pyh0aGlzLl9yb290PW5ldyBpaSh0aGlzLl9nZXRDb21wYXJhYmxlLmNhbGwodCksW3RdLG51bGwsbnVsbCksITApOnRoaXMuX2luc2VydCh0aGlzLl9yb290LHQpfSx0LnByb3RvdHlwZS5faW5zZXJ0PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIG51bGwhPXQmJih0aGlzLl9nZXRDb21wYXJhYmxlLmNhbGwoZSk9PT10LmdldEtleSgpPyEodC5nZXREYXRhKCkuaW5kZXhPZihlKT4tMSkmJih0LmdldERhdGEoKS5wdXNoKGUpLCEwKTp0aGlzLl9nZXRDb21wYXJhYmxlLmNhbGwoZSk8dC5nZXRLZXkoKT9udWxsPT10LmdldExlZnQoKT8odC5zZXRMZWZ0KG5ldyBpaSh0aGlzLl9nZXRDb21wYXJhYmxlLmNhbGwoZSksW2VdLG51bGwsbnVsbCkpLCEwKTp0aGlzLl9pbnNlcnQodC5nZXRMZWZ0KCksZSk6bnVsbD09dC5nZXRSaWdodCgpPyh0LnNldFJpZ2h0KG5ldyBpaSh0aGlzLl9nZXRDb21wYXJhYmxlLmNhbGwoZSksW2VdLG51bGwsbnVsbCkpLCEwKTp0aGlzLl9pbnNlcnQodC5nZXRSaWdodCgpLGUpKX0sdC5wcm90b3R5cGUucmVtb3ZlQnlDb21wYXJhYmxlPWZ1bmN0aW9uKHQpe3RoaXMuX3Jvb3Q9dGhpcy5fcmVtb3ZlKHRoaXMuX3Jvb3QsdCl9LHQucHJvdG90eXBlLl9yZW1vdmU9ZnVuY3Rpb24odCxlKXtpZihudWxsPT10KXJldHVybiBudWxsO2lmKHRoaXMuX2dldENvbXBhcmFibGUuY2FsbChlKSE9PXQuZ2V0S2V5KCkpcmV0dXJuIHRoaXMuX2dldENvbXBhcmFibGUuY2FsbChlKTx0LmdldEtleSgpPyh0LnNldExlZnQodGhpcy5fcmVtb3ZlKHQuZ2V0TGVmdCgpLGUpKSx0KToodC5zZXRSaWdodCh0aGlzLl9yZW1vdmUodC5nZXRSaWdodCgpLGUpKSx0KTt2YXIgaT10LmdldERhdGEoKS5pbmRleE9mKGUpO2lmKGk+LTEpe2lmKHQuZ2V0RGF0YSgpLnNwbGljZShpLDEpLDA9PT10LmdldERhdGEoKS5sZW5ndGgpe2lmKG51bGw9PXQuZ2V0TGVmdCgpJiZudWxsPT10LmdldFJpZ2h0KCkpcmV0dXJuIG51bGw7aWYobnVsbD09dC5nZXRMZWZ0KCkpcmV0dXJuIHQuZ2V0UmlnaHQoKTtpZihudWxsPT10LmdldFJpZ2h0KCkpcmV0dXJuIHQuZ2V0TGVmdCgpO3ZhciBuPXRoaXMuX2ZpbmRNaW5Ob2RlKHQuZ2V0UmlnaHQoKSk7cmV0dXJuIHQuc2V0S2V5KG4uZ2V0S2V5KCkpLHQuc2V0RGF0YShuLmdldERhdGEoKSksdC5zZXRSaWdodCh0aGlzLl9jbGVhbnVwKHQuZ2V0UmlnaHQoKSxuKSksdH1yZXR1cm4gdH1yZXR1cm4gbnVsbH0sdC5wcm90b3R5cGUuX2NsZWFudXA9ZnVuY3Rpb24odCxlKXt2YXIgaT1lLmdldEtleSgpO2lmKG51bGw9PXQpcmV0dXJuIG51bGw7aWYoaT09PXQuZ2V0S2V5KCkpe2lmKG51bGw9PXQuZ2V0TGVmdCgpJiZudWxsPT10LmdldFJpZ2h0KCkpcmV0dXJuIG51bGw7aWYobnVsbD09dC5nZXRMZWZ0KCkpcmV0dXJuIHQuZ2V0UmlnaHQoKTtpZihudWxsPT10LmdldFJpZ2h0KCkpcmV0dXJuIHQuZ2V0TGVmdCgpO3ZhciBuPXRoaXMuX2ZpbmRNaW5Ob2RlKHQuZ2V0UmlnaHQoKSk7cmV0dXJuIHQuc2V0S2V5KG4uZ2V0S2V5KCkpLHQuc2V0RGF0YShuLmdldERhdGEoKSksdC5zZXRSaWdodCh0aGlzLl9jbGVhbnVwKHQuZ2V0UmlnaHQoKSxuKSksdH1yZXR1cm4gdGhpcy5fZ2V0Q29tcGFyYWJsZS5jYWxsKGUpPHQuZ2V0S2V5KCk/KHQuc2V0TGVmdCh0aGlzLl9jbGVhbnVwKHQuZ2V0TGVmdCgpLGUpKSx0KToodC5zZXRSaWdodCh0aGlzLl9jbGVhbnVwKHQuZ2V0UmlnaHQoKSxlKSksdCl9LHQucHJvdG90eXBlLl9maW5kTWluTm9kZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9dDtudWxsIT1lLmdldExlZnQoKTspZT1lLmdldExlZnQoKTtyZXR1cm4gZX0sdC5wcm90b3R5cGUubGlzdD1mdW5jdGlvbigpe3ZhciB0PW5ldyBBcnJheTtyZXR1cm4gdGhpcy5fbGlzdCh0aGlzLl9yb290LHQpLHR9LHQucHJvdG90eXBlLl9saXN0PWZ1bmN0aW9uKHQsZSl7bnVsbCE9dCYmKHRoaXMuX2xpc3QodC5nZXRMZWZ0KCksZSksdC5nZXREYXRhKCkuZm9yRWFjaChmdW5jdGlvbih0KXtlLnB1c2godCl9KSx0aGlzLl9saXN0KHQuZ2V0UmlnaHQoKSxlKSl9LHR9KCksaWk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpLG4pe3RoaXMuX2tleT10LHRoaXMuX2RhdGE9ZSx0aGlzLl9sZWZ0PWksdGhpcy5fcmlnaHQ9bn1yZXR1cm4gdC5wcm90b3R5cGUuZ2V0S2V5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2tleX0sdC5wcm90b3R5cGUuc2V0S2V5PWZ1bmN0aW9uKHQpe3RoaXMuX2tleT10fSx0LnByb3RvdHlwZS5nZXREYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGF9LHQucHJvdG90eXBlLnNldERhdGE9ZnVuY3Rpb24odCl7dGhpcy5fZGF0YT10fSx0LnByb3RvdHlwZS5nZXRMZWZ0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2xlZnR9LHQucHJvdG90eXBlLnNldExlZnQ9ZnVuY3Rpb24odCl7dGhpcy5fbGVmdD10fSx0LnByb3RvdHlwZS5nZXRSaWdodD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9yaWdodH0sdC5wcm90b3R5cGUuc2V0UmlnaHQ9ZnVuY3Rpb24odCl7dGhpcy5fcmlnaHQ9dH0sdH0oKSxuaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5fa2V5PTAsdGhpcy5fa2V5PXR9cmV0dXJuIHQucHJvdG90eXBlLmdldFRoZUtleT1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9rZXl9LHQucHJvdG90eXBlLnNldEtleT1mdW5jdGlvbih0KXt0aGlzLl9rZXk9dH0sdH0oKSxvaT1mdW5jdGlvbigpe3ZhciB0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiBlKWUuaGFzT3duUHJvcGVydHkoaSkmJih0W2ldPWVbaV0pfTtyZXR1cm4gZnVuY3Rpb24oZSxpKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxpKSxlLnByb3RvdHlwZT1udWxsPT09aT9PYmplY3QuY3JlYXRlKGkpOihuLnByb3RvdHlwZT1pLnByb3RvdHlwZSxuZXcgbil9fSgpLHJpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpKXt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7KG4ubmFtZT1lLG4uc2NlbmU9aSxuLl9sb2dnZXI9T3QuZ2V0SW5zdGFuY2UoKSxuLl9tZW1iZXJzPVtdLG4uYWN0aW9ucz1uZXcgZ2UsbnVsbD09aSk/bi5fbG9nZ2VyLmVycm9yKFwiSW52YWxpZCBjb25zdHJ1Y3RvciBhcmd1bWVudHMgcGFzc2VkIHRvIEdyb3VwOiBcIixlLFwiLCBzY2VuZSBtdXN0IG5vdCBiZSBudWxsIVwiKTooaS5ncm91cHNbZV0mJm4uX2xvZ2dlci53YXJuKFwiR3JvdXAgd2l0aCBuYW1lXCIsZSxcImFscmVhZHkgZXhpc3RzLiBUaGlzIG5ldyBncm91cCB3aWxsIHJlcGxhY2UgaXQuXCIpLGkuZ3JvdXBzW2VdPW4pO3JldHVybiBufXJldHVybiBvaShlLHQpLGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgRGUmJih0PVtdLmNvbmNhdCh0KSk7Zm9yKHZhciBlPTAsaT10Lmxlbmd0aDtlPGk7ZSsrKS0xPT09dGhpcy5nZXRNZW1iZXJzKCkuaW5kZXhPZih0W2VdKSYmKHRoaXMuX21lbWJlcnMucHVzaCh0W2VdKSx0aGlzLnNjZW5lLmFkZCh0W2VdKSx0aGlzLmFjdGlvbnMuYWRkQWN0b3JUb0NvbnRleHQodFtlXSksdGhpcy5ldmVudERpc3BhdGNoZXIud2lyZSh0W2VdLmV2ZW50RGlzcGF0Y2hlcikpfSxlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fbWVtYmVycy5pbmRleE9mKHQpO2U+LTEmJih0aGlzLl9tZW1iZXJzLnNwbGljZShlLDEpLHRoaXMuYWN0aW9ucy5yZW1vdmVBY3RvckZyb21Db250ZXh0KHQpLHRoaXMuZXZlbnREaXNwYXRjaGVyLnVud2lyZSh0LmV2ZW50RGlzcGF0Y2hlcikpfSxlLnByb3RvdHlwZS5tb3ZlPWZ1bmN0aW9uKHQpe3ZhciBlPTAsaT10aGlzLmdldE1lbWJlcnMoKSxuPWkubGVuZ3RoO2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoJiZ0IGluc3RhbmNlb2Ygaylmb3IoO2U8bjtlKyspaVtlXS5wb3MueCs9dC54LGlbZV0ucG9zLnkrPXQueTtlbHNlIGlmKFwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMF0mJlwibnVtYmVyXCI9PXR5cGVvZiBhcmd1bWVudHNbMV0pZm9yKHZhciBvPWFyZ3VtZW50c1swXSxyPWFyZ3VtZW50c1sxXTtlPG47ZSsrKWlbZV0ucG9zLngrPW8saVtlXS5wb3MueSs9cjtlbHNlIHRoaXMuX2xvZ2dlci5lcnJvcihcIkludmFsaWQgYXJndW1lbnRzIHBhc3NlZCB0byBncm91cCBtb3ZlXCIsdGhpcy5uYW1lLFwiYXJnczpcIixhcmd1bWVudHMpfSxlLnByb3RvdHlwZS5yb3RhdGU9ZnVuY3Rpb24odCl7aWYoXCJudW1iZXJcIj09dHlwZW9mIHQpZm9yKHZhciBlPTAsaT10aGlzLmdldE1lbWJlcnMoKTtlPGkubGVuZ3RoO2UrKyl7aVtlXS5yb3RhdGlvbis9dH1lbHNlIHRoaXMuX2xvZ2dlci5lcnJvcihcIkludmFsaWQgYXJndW1lbnRzIHBhc3NlZCB0byBncm91cCByb3RhdGVcIix0aGlzLm5hbWUsXCJhcmdzOlwiLGFyZ3VtZW50cyl9LGUucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHQsZSl7dGhpcy5ldmVudERpc3BhdGNoZXIub24odCxlKX0sZS5wcm90b3R5cGUub2ZmPWZ1bmN0aW9uKHQsZSl7dGhpcy5ldmVudERpc3BhdGNoZXIub2ZmKHQsZSl9LGUucHJvdG90eXBlLmVtaXQ9ZnVuY3Rpb24odCxlKXt0aGlzLmV2ZW50RGlzcGF0Y2hlci5lbWl0KHQsZSl9LGUucHJvdG90eXBlLmNvbnRhaW5zPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmdldE1lbWJlcnMoKS5pbmRleE9mKHQpPi0xfSxlLnByb3RvdHlwZS5nZXRNZW1iZXJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21lbWJlcnN9LGUucHJvdG90eXBlLmdldFJhbmRvbU1lbWJlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9tZW1iZXJzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSp0aGlzLl9tZW1iZXJzLmxlbmd0aCldfSxlLnByb3RvdHlwZS5nZXRCb3VuZHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRNZW1iZXJzKCkubWFwKGZ1bmN0aW9uKHQpe3JldHVybiB0LmdldEJvdW5kcygpfSkucmVkdWNlKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHQuY29tYmluZShlKX0pfSxlfSh4dCksc2k9ZnVuY3Rpb24oKXt2YXIgdD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkgaW4gZSllLmhhc093blByb3BlcnR5KGkpJiYodFtpXT1lW2ldKX07cmV0dXJuIGZ1bmN0aW9uKGUsaSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsaSksZS5wcm90b3R5cGU9bnVsbD09PWk/T2JqZWN0LmNyZWF0ZShpKToobi5wcm90b3R5cGU9aS5wcm90b3R5cGUsbmV3IG4pfX0oKSxhaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5jYW1lcmE9dH1yZXR1cm4gdC5wcm90b3R5cGUubG9ja1RvQWN0b3I9ZnVuY3Rpb24odCl7dGhpcy5jYW1lcmEuYWRkU3RyYXRlZ3kobmV3IHBpKHQpKX0sdC5wcm90b3R5cGUubG9ja1RvQWN0b3JBeGlzPWZ1bmN0aW9uKHQsZSl7dGhpcy5jYW1lcmEuYWRkU3RyYXRlZ3kobmV3IGRpKHQsZSkpfSx0LnByb3RvdHlwZS5lbGFzdGljVG9BY3Rvcj1mdW5jdGlvbih0LGUsaSl7dGhpcy5jYW1lcmEuYWRkU3RyYXRlZ3kobmV3IGZpKHQsZSxpKSl9LHQucHJvdG90eXBlLnJhZGl1c0Fyb3VuZEFjdG9yPWZ1bmN0aW9uKHQsZSl7dGhpcy5jYW1lcmEuYWRkU3RyYXRlZ3kobmV3IF9pKHQsZSkpfSx0fSgpOyFmdW5jdGlvbih0KXt0W3QuWD0wXT1cIlhcIix0W3QuWT0xXT1cIllcIn0oamV8fChqZT17fSkpO3ZhciBoaSxjaSx1aSxsaSxwaT1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbih0KXt0aGlzLnRhcmdldD10LHRoaXMuYWN0aW9uPWZ1bmN0aW9uKHQsZSxpLG4pe3JldHVybiB0LmdldENlbnRlcigpfX19KCksZGk9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzO3RoaXMudGFyZ2V0PXQsdGhpcy5heGlzPWUsdGhpcy5hY3Rpb249ZnVuY3Rpb24odCxlLG4sbyl7dmFyIHI9dC5nZXRDZW50ZXIoKSxzPWUuZ2V0Rm9jdXMoKTtyZXR1cm4gaS5heGlzPT09amUuWD9uZXcgayhyLngscy55KTpuZXcgayhzLngsci55KX19fSgpLGZpPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQsZSxpKXt2YXIgbj10aGlzO3RoaXMudGFyZ2V0PXQsdGhpcy5jYW1lcmFFbGFzdGljaXR5PWUsdGhpcy5jYW1lcmFGcmljdGlvbj1pLHRoaXMuYWN0aW9uPWZ1bmN0aW9uKHQsZSxpLG8pe3ZhciByPXQuZ2V0Q2VudGVyKCkscz1lLmdldEZvY3VzKCksYT1uZXcgayhlLmR4LGUuZHkpLGg9ci5zdWIocykuc2NhbGUobi5jYW1lcmFFbGFzdGljaXR5KSxjPShhPWEuYWRkKGgpKS5zY2FsZSgtMSkuc2NhbGUobi5jYW1lcmFGcmljdGlvbik7cmV0dXJuIGE9YS5hZGQoYykscz1zLmFkZChhKX19fSgpLF9pPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKHQsZSl7dmFyIGk9dGhpczt0aGlzLnRhcmdldD10LHRoaXMucmFkaXVzPWUsdGhpcy5hY3Rpb249ZnVuY3Rpb24odCxlLG4sbyl7dmFyIHI9dC5nZXRDZW50ZXIoKSxzPWUuZ2V0Rm9jdXMoKSxhPXIuc3ViKHMpLGg9YS5tYWduaXR1ZGUoKTtpZihoPj1pLnJhZGl1cyl7dmFyIGM9aC1pLnJhZGl1cztyZXR1cm4gcy5hZGQoYS5ub3JtYWxpemUoKS5zY2FsZShjKSl9cmV0dXJuIHN9fX0oKSxnaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9bnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBlLl9jYW1lcmFTdHJhdGVnaWVzPVtdLGUuc3RyYXRlZ3k9bmV3IGFpKGUpLGUuej0xLGUuZHg9MCxlLmR5PTAsZS5kej0wLGUuYXg9MCxlLmF5PTAsZS5hej0wLGUucm90YXRpb249MCxlLnJ4PTAsZS5feD0wLGUuX3k9MCxlLl9jYW1lcmFNb3Zpbmc9ITEsZS5fY3VycmVudExlcnBUaW1lPTAsZS5fbGVycER1cmF0aW9uPTFlMyxlLl9sZXJwU3RhcnQ9bnVsbCxlLl9sZXJwRW5kPW51bGwsZS5faXNTaGFraW5nPSExLGUuX3NoYWtlTWFnbml0dWRlWD0wLGUuX3NoYWtlTWFnbml0dWRlWT0wLGUuX3NoYWtlRHVyYXRpb249MCxlLl9lbGFwc2VkU2hha2VUaW1lPTAsZS5feFNoYWtlPTAsZS5feVNoYWtlPTAsZS5faXNab29taW5nPSExLGUuX3pvb21TdGFydD0xLGUuX3pvb21FbmQ9MSxlLl9jdXJyZW50Wm9vbVRpbWU9MCxlLl96b29tRHVyYXRpb249MCxlLl96b29tRWFzaW5nPV9lLkVhc2VJbk91dEN1YmljLGUuX2Vhc2luZz1fZS5FYXNlSW5PdXRDdWJpYyxlLl9pc0luaXRpYWxpemVkPSExLGV9cmV0dXJuIHNpKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwieFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5feH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2ZvbGxvd3x8dGhpcy5fY2FtZXJhTW92aW5nfHwodGhpcy5feD10KX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ5XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl95fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZm9sbG93fHx0aGlzLl9jYW1lcmFNb3Zpbmd8fCh0aGlzLl95PXQpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInBvc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGsodGhpcy54LHRoaXMueSl9LHNldDpmdW5jdGlvbih0KXt0aGlzLng9dC54LHRoaXMueT10Lnl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidmVsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBuZXcgayh0aGlzLmR4LHRoaXMuZHkpfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5keD10LngsdGhpcy5keT10Lnl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuZ2V0Rm9jdXM9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGsodGhpcy54LHRoaXMueSl9LGUucHJvdG90eXBlLm1vdmU9ZnVuY3Rpb24odCxlLGkpe2lmKHZvaWQgMD09PWkmJihpPV9lLkVhc2VJbk91dEN1YmljKSxcImZ1bmN0aW9uXCIhPXR5cGVvZiBpKXRocm93XCJQbGVhc2Ugc3BlY2lmeSBhbiBFYXNpbmdGdW5jdGlvblwiO3JldHVybiB0aGlzLl9mb2xsb3c/KG5ldyBwKS5yZWplY3QodCk6KHRoaXMuX2xlcnBQcm9taXNlJiZ0aGlzLl9sZXJwUHJvbWlzZS5zdGF0ZSgpPT09Yy5QZW5kaW5nJiZ0aGlzLl9sZXJwUHJvbWlzZS5yZXNvbHZlKHQpLHRoaXMuX2xlcnBQcm9taXNlPW5ldyBwLHRoaXMuX2xlcnBTdGFydD10aGlzLmdldEZvY3VzKCkuY2xvbmUoKSx0aGlzLl9sZXJwRHVyYXRpb249ZSx0aGlzLl9sZXJwRW5kPXQsdGhpcy5fY3VycmVudExlcnBUaW1lPTAsdGhpcy5fY2FtZXJhTW92aW5nPSEwLHRoaXMuX2Vhc2luZz1pLHRoaXMuX2xlcnBQcm9taXNlKX0sZS5wcm90b3R5cGUuc2hha2U9ZnVuY3Rpb24odCxlLGkpe3RoaXMuX2lzU2hha2luZz0hMCx0aGlzLl9zaGFrZU1hZ25pdHVkZVg9dCx0aGlzLl9zaGFrZU1hZ25pdHVkZVk9ZSx0aGlzLl9zaGFrZUR1cmF0aW9uPWl9LGUucHJvdG90eXBlLnpvb209ZnVuY3Rpb24odCxlLGkpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0wKSx2b2lkIDA9PT1pJiYoaT1fZS5FYXNlSW5PdXRDdWJpYyksdGhpcy5fem9vbVByb21pc2U9bmV3IHAsZT8odGhpcy5faXNab29taW5nPSEwLHRoaXMuX3pvb21FYXNpbmc9aSx0aGlzLl9jdXJyZW50Wm9vbVRpbWU9MCx0aGlzLl96b29tRHVyYXRpb249ZSx0aGlzLl96b29tU3RhcnQ9dGhpcy56LHRoaXMuX3pvb21FbmQ9dCk6KHRoaXMuX2lzWm9vbWluZz0hMSx0aGlzLno9dCx0aGlzLl96b29tUHJvbWlzZS5yZXNvbHZlKCEwKSksdGhpcy5fem9vbVByb21pc2V9LGUucHJvdG90eXBlLmdldFpvb209ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy56fSxlLnByb3RvdHlwZS5hZGRTdHJhdGVneT1mdW5jdGlvbih0KXt0aGlzLl9jYW1lcmFTdHJhdGVnaWVzLnB1c2godCl9LGUucHJvdG90eXBlLnJlbW92ZVN0cmF0ZWd5PWZ1bmN0aW9uKHQpe0EodCx0aGlzLl9jYW1lcmFTdHJhdGVnaWVzKX0sZS5wcm90b3R5cGUuY2xlYXJBbGxTdHJhdGVnaWVzPWZ1bmN0aW9uKCl7dGhpcy5fY2FtZXJhU3RyYXRlZ2llcy5sZW5ndGg9MH0sZS5wcm90b3R5cGUuX3ByZXVwZGF0ZT1mdW5jdGlvbih0LGUpe3RoaXMuZW1pdChcInByZXVwZGF0ZVwiLG5ldyBKKHQsZSx0aGlzKSksdGhpcy5vblByZVVwZGF0ZSh0LGUpfSxlLnByb3RvdHlwZS5vblByZVVwZGF0ZT1mdW5jdGlvbih0LGUpe30sZS5wcm90b3R5cGUuX3Bvc3R1cGRhdGU9ZnVuY3Rpb24odCxlKXt0aGlzLmVtaXQoXCJwb3N0dXBkYXRlXCIsbmV3ICQodCxlLHRoaXMpKSx0aGlzLm9uUG9zdFVwZGF0ZSh0LGUpfSxlLnByb3RvdHlwZS5vblBvc3RVcGRhdGU9ZnVuY3Rpb24odCxlKXt9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImlzSW5pdGlhbGl6ZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2lzSW5pdGlhbGl6ZWR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2luaXRpYWxpemU9ZnVuY3Rpb24oZSl7dGhpcy5pc0luaXRpYWxpemVkfHwodGhpcy5vbkluaXRpYWxpemUoZSksdC5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMsXCJpbml0aWFsaXplXCIsbmV3IGZ0KGUsdGhpcykpLHRoaXMuX2lzSW5pdGlhbGl6ZWQ9ITApfSxlLnByb3RvdHlwZS5vbkluaXRpYWxpemU9ZnVuY3Rpb24odCl7fSxlLnByb3RvdHlwZS5vbj1mdW5jdGlvbihlLGkpe3QucHJvdG90eXBlLm9uLmNhbGwodGhpcyxlLGkpfSxlLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24oZSxpKXt0LnByb3RvdHlwZS5vZmYuY2FsbCh0aGlzLGUsaSl9LGUucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24oZSxpKXt0LnByb3RvdHlwZS5vbmNlLmNhbGwodGhpcyxlLGkpfSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9pbml0aWFsaXplKHQpLHRoaXMuX3ByZXVwZGF0ZSh0LGUpLHRoaXMuX3grPXRoaXMuZHgqZS8xZTMsdGhpcy5feSs9dGhpcy5keSplLzFlMyx0aGlzLnorPXRoaXMuZHoqZS8xZTMsdGhpcy5keCs9dGhpcy5heCplLzFlMyx0aGlzLmR5Kz10aGlzLmF5KmUvMWUzLHRoaXMuZHorPXRoaXMuYXoqZS8xZTMsdGhpcy5yb3RhdGlvbis9dGhpcy5yeCplLzFlMyx0aGlzLl9pc1pvb21pbmcpaWYodGhpcy5fY3VycmVudFpvb21UaW1lPHRoaXMuX3pvb21EdXJhdGlvbil7dmFyIGk9KDAsdGhpcy5fem9vbUVhc2luZykodGhpcy5fY3VycmVudFpvb21UaW1lLHRoaXMuX3pvb21TdGFydCx0aGlzLl96b29tRW5kLHRoaXMuX3pvb21EdXJhdGlvbik7dGhpcy56PWksdGhpcy5fY3VycmVudFpvb21UaW1lKz1lfWVsc2UgdGhpcy5faXNab29taW5nPSExLHRoaXMuej10aGlzLl96b29tRW5kLHRoaXMuX2N1cnJlbnRab29tVGltZT0wLHRoaXMuX3pvb21Qcm9taXNlLnJlc29sdmUoITApO2lmKHRoaXMuX2NhbWVyYU1vdmluZylpZih0aGlzLl9jdXJyZW50TGVycFRpbWU8dGhpcy5fbGVycER1cmF0aW9uKXt2YXIgbj1fZS5DcmVhdGVWZWN0b3JFYXNpbmdGdW5jdGlvbih0aGlzLl9lYXNpbmcpKHRoaXMuX2N1cnJlbnRMZXJwVGltZSx0aGlzLl9sZXJwU3RhcnQsdGhpcy5fbGVycEVuZCx0aGlzLl9sZXJwRHVyYXRpb24pO3RoaXMuX3g9bi54LHRoaXMuX3k9bi55LHRoaXMuX2N1cnJlbnRMZXJwVGltZSs9ZX1lbHNle3RoaXMuX3g9dGhpcy5fbGVycEVuZC54LHRoaXMuX3k9dGhpcy5fbGVycEVuZC55O3ZhciBvPXRoaXMuX2xlcnBFbmQuY2xvbmUoKTt0aGlzLl9sZXJwU3RhcnQ9bnVsbCx0aGlzLl9sZXJwRW5kPW51bGwsdGhpcy5fY3VycmVudExlcnBUaW1lPTAsdGhpcy5fY2FtZXJhTW92aW5nPSExLHRoaXMuX2xlcnBQcm9taXNlLnJlc29sdmUobyl9dGhpcy5faXNEb25lU2hha2luZygpPyh0aGlzLl9pc1NoYWtpbmc9ITEsdGhpcy5fZWxhcHNlZFNoYWtlVGltZT0wLHRoaXMuX3NoYWtlTWFnbml0dWRlWD0wLHRoaXMuX3NoYWtlTWFnbml0dWRlWT0wLHRoaXMuX3NoYWtlRHVyYXRpb249MCx0aGlzLl94U2hha2U9MCx0aGlzLl95U2hha2U9MCk6KHRoaXMuX2VsYXBzZWRTaGFrZVRpbWUrPWUsdGhpcy5feFNoYWtlPTErKE1hdGgucmFuZG9tKCkqdGhpcy5fc2hha2VNYWduaXR1ZGVYfDApLHRoaXMuX3lTaGFrZT0xKyhNYXRoLnJhbmRvbSgpKnRoaXMuX3NoYWtlTWFnbml0dWRlWXwwKSk7Zm9yKHZhciByPTAscz10aGlzLl9jYW1lcmFTdHJhdGVnaWVzO3I8cy5sZW5ndGg7cisrKXt2YXIgYT1zW3JdO3RoaXMucG9zPWEuYWN0aW9uLmNhbGwoYSxhLnRhcmdldCx0aGlzLHQsZSl9dGhpcy5fcG9zdHVwZGF0ZSh0LGUpfSxlLnByb3RvdHlwZS5kcmF3PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0Rm9jdXMoKSxpPXQuY2FudmFzLndpZHRoLG49dC5jYW52YXMuaGVpZ2h0LG89d2luZG93LmRldmljZVBpeGVsUmF0aW8scj10aGlzLmdldFpvb20oKSxzPWkvci9vLGE9bi9yL287dC5zY2FsZShyLHIpLHQudHJhbnNsYXRlKC1lLngrcy8yK3RoaXMuX3hTaGFrZSwtZS55K2EvMit0aGlzLl95U2hha2UpfSxlLnByb3RvdHlwZS5kZWJ1Z0RyYXc9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRGb2N1cygpO3QuZmlsbFN0eWxlPVwicmVkXCIsdC5zdHJva2VTdHlsZT1cIndoaXRlXCIsdC5saW5lV2lkdGg9Myx0LmJlZ2luUGF0aCgpLHQuYXJjKGUueCxlLnksMTUsMCwyKk1hdGguUEkpLHQuY2xvc2VQYXRoKCksdC5zdHJva2UoKSx0LmJlZ2luUGF0aCgpLHQuYXJjKGUueCxlLnksNSwwLDIqTWF0aC5QSSksdC5jbG9zZVBhdGgoKSx0LnN0cm9rZSgpfSxlLnByb3RvdHlwZS5faXNEb25lU2hha2luZz1mdW5jdGlvbigpe3JldHVybiF0aGlzLl9pc1NoYWtpbmd8fHRoaXMuX2VsYXBzZWRTaGFrZVRpbWU+PXRoaXMuX3NoYWtlRHVyYXRpb259LGV9KHh0KSx5aT1mdW5jdGlvbigpe3ZhciB0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiBlKWUuaGFzT3duUHJvcGVydHkoaSkmJih0W2ldPWVbaV0pfTtyZXR1cm4gZnVuY3Rpb24oZSxpKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxpKSxlLnByb3RvdHlwZT1udWxsPT09aT9PYmplY3QuY3JlYXRlKGkpOihuLnByb3RvdHlwZT1pLnByb3RvdHlwZSxuZXcgbil9fSgpOyFmdW5jdGlvbih0KXt0W3QuRW09MF09XCJFbVwiLHRbdC5SZW09MV09XCJSZW1cIix0W3QuUHg9Ml09XCJQeFwiLHRbdC5QdD0zXT1cIlB0XCIsdFt0LlBlcmNlbnQ9NF09XCJQZXJjZW50XCJ9KGhpfHwoaGk9e30pKSxmdW5jdGlvbih0KXt0W3QuTGVmdD0wXT1cIkxlZnRcIix0W3QuUmlnaHQ9MV09XCJSaWdodFwiLHRbdC5DZW50ZXI9Ml09XCJDZW50ZXJcIix0W3QuU3RhcnQ9M109XCJTdGFydFwiLHRbdC5FbmQ9NF09XCJFbmRcIn0oY2l8fChjaT17fSkpLGZ1bmN0aW9uKHQpe3RbdC5Ub3A9MF09XCJUb3BcIix0W3QuSGFuZ2luZz0xXT1cIkhhbmdpbmdcIix0W3QuTWlkZGxlPTJdPVwiTWlkZGxlXCIsdFt0LkFscGhhYmV0aWM9M109XCJBbHBoYWJldGljXCIsdFt0LklkZW9ncmFwaGljPTRdPVwiSWRlb2dyYXBoaWNcIix0W3QuQm90dG9tPTVdPVwiQm90dG9tXCJ9KHVpfHwodWk9e30pKSxmdW5jdGlvbih0KXt0W3QuTm9ybWFsPTBdPVwiTm9ybWFsXCIsdFt0Lkl0YWxpYz0xXT1cIkl0YWxpY1wiLHRbdC5PYmxpcXVlPTJdPVwiT2JsaXF1ZVwifShsaXx8KGxpPXt9KSk7dmFyIHZpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpLG4sbyxyKXtyZXR1cm4gdC5jYWxsKHRoaXMsZSxpLG4sbyxyKXx8dGhpc31yZXR1cm4geWkoZSx0KSxlfShWdChmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSxuLG8scil7dmFyIHM9dC5jYWxsKHRoaXMsZSYmXCJvYmplY3RcIj09dHlwZW9mIGU/e3g6ZS54LHk6ZS55fTp7eDppLHk6bn0pfHx0aGlzO3MuYm9sZD0hMSxzLmZvbnRTaXplPTEwLHMuZm9udFN0eWxlPWxpLk5vcm1hbCxzLmZvbnRVbml0PWhpLlB4LHMudGV4dEFsaWduPWNpLkxlZnQscy5iYXNlQWxpZ249dWkuQm90dG9tLHMubGV0dGVyU3BhY2luZz0wLHMuY2FzZUluc2Vuc2l0aXZlPSEwO3ZhciBhPVwiXCI7cmV0dXJuIGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlPyhvPWUuZm9udEZhbWlseSxyPWUuc3ByaXRlRm9udCxhPWUudGV4dCk6YT1lLHMudGV4dD1hfHxcIlwiLHMuY29sb3I9UHQuQmxhY2suY2xvbmUoKSxzLnNwcml0ZUZvbnQ9cixzLmNvbGxpc2lvblR5cGU9eGUuUHJldmVudENvbGxpc2lvbixzLmZvbnRGYW1pbHk9b3x8XCJzYW5zLXNlcmlmXCIscy5fdGV4dFNoYWRvd09uPSExLHMuX3NoYWRvd09mZnNldFg9MCxzLl9zaGFkb3dPZmZzZXRZPTAsc31yZXR1cm4geWkoZSx0KSxlLnByb3RvdHlwZS5nZXRUZXh0V2lkdGg9ZnVuY3Rpb24odCl7dmFyIGU9dC5mb250O3QuZm9udD10aGlzLl9mb250U3RyaW5nO3ZhciBpPXQubWVhc3VyZVRleHQodGhpcy50ZXh0KS53aWR0aDtyZXR1cm4gdC5mb250PWUsaX0sZS5wcm90b3R5cGUuX2xvb2t1cEZvbnRVbml0PWZ1bmN0aW9uKHQpe3N3aXRjaCh0KXtjYXNlIGhpLkVtOnJldHVyblwiZW1cIjtjYXNlIGhpLlJlbTpyZXR1cm5cInJlbVwiO2Nhc2UgaGkuUHQ6cmV0dXJuXCJwdFwiO2Nhc2UgaGkuUHg6cmV0dXJuXCJweFwiO2Nhc2UgaGkuUGVyY2VudDpyZXR1cm5cIiVcIjtkZWZhdWx0OnJldHVyblwicHhcIn19LGUucHJvdG90eXBlLl9sb29rdXBUZXh0QWxpZ249ZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2UgY2kuTGVmdDpyZXR1cm5cImxlZnRcIjtjYXNlIGNpLlJpZ2h0OnJldHVyblwicmlnaHRcIjtjYXNlIGNpLkNlbnRlcjpyZXR1cm5cImNlbnRlclwiO2Nhc2UgY2kuRW5kOnJldHVyblwiZW5kXCI7Y2FzZSBjaS5TdGFydDpkZWZhdWx0OnJldHVyblwic3RhcnRcIn19LGUucHJvdG90eXBlLl9sb29rdXBCYXNlQWxpZ249ZnVuY3Rpb24odCl7c3dpdGNoKHQpe2Nhc2UgdWkuQWxwaGFiZXRpYzpyZXR1cm5cImFscGhhYmV0aWNcIjtjYXNlIHVpLkJvdHRvbTpyZXR1cm5cImJvdHRvbVwiO2Nhc2UgdWkuSGFuZ2luZzpyZXR1cm5cImhhbmdpblwiO2Nhc2UgdWkuSWRlb2dyYXBoaWM6cmV0dXJuXCJpZGVvZ3JhcGhpY1wiO2Nhc2UgdWkuTWlkZGxlOnJldHVyblwibWlkZGxlXCI7Y2FzZSB1aS5Ub3A6cmV0dXJuXCJ0b3BcIjtkZWZhdWx0OnJldHVyblwiYWxwaGFiZXRpY1wifX0sZS5wcm90b3R5cGUuX2xvb2t1cEZvbnRTdHlsZT1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmJvbGQ/XCIgYm9sZFwiOlwiXCI7c3dpdGNoKHQpe2Nhc2UgbGkuSXRhbGljOnJldHVyblwiaXRhbGljXCIrZTtjYXNlIGxpLk5vcm1hbDpyZXR1cm5cIm5vcm1hbFwiK2U7Y2FzZSBsaS5PYmxpcXVlOnJldHVyblwib2JsaXF1ZVwiK2U7ZGVmYXVsdDpyZXR1cm5cIm5vcm1hbFwiK2V9fSxlLnByb3RvdHlwZS5zZXRUZXh0U2hhZG93PWZ1bmN0aW9uKHQsZSxpKXt0aGlzLnNwcml0ZUZvbnQuc2V0VGV4dFNoYWRvdyh0LGUsaSl9LGUucHJvdG90eXBlLnVzZVRleHRTaGFkb3c9ZnVuY3Rpb24odCl7dGhpcy5zcHJpdGVGb250LnVzZVRleHRTaGFkb3codCl9LGUucHJvdG90eXBlLmNsZWFyVGV4dFNoYWRvdz1mdW5jdGlvbigpe3RoaXMuX3RleHRTaGFkb3dPbj0hMSx0aGlzLl9zaGFkb3dPZmZzZXRYPTAsdGhpcy5fc2hhZG93T2Zmc2V0WT0wfSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oZSxpKXt0LnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzLGUsaSl9LGUucHJvdG90eXBlLmRyYXc9ZnVuY3Rpb24oZSxpKXtlLnNhdmUoKSxlLnRyYW5zbGF0ZSh0aGlzLnBvcy54LHRoaXMucG9zLnkpLGUuc2NhbGUodGhpcy5zY2FsZS54LHRoaXMuc2NhbGUueSksZS5yb3RhdGUodGhpcy5yb3RhdGlvbiksdGhpcy5fdGV4dFNoYWRvd09uJiYoZS5zYXZlKCksZS50cmFuc2xhdGUodGhpcy5fc2hhZG93T2Zmc2V0WCx0aGlzLl9zaGFkb3dPZmZzZXRZKSx0aGlzLl9mb250RHJhdyhlKSxlLnJlc3RvcmUoKSksdGhpcy5fZm9udERyYXcoZSksdC5wcm90b3R5cGUuZHJhdy5jYWxsKHRoaXMsZSxpKSxlLnJlc3RvcmUoKX0sZS5wcm90b3R5cGUuX2ZvbnREcmF3PWZ1bmN0aW9uKHQpe2lmKHRoaXMuc3ByaXRlRm9udCl0aGlzLnNwcml0ZUZvbnQuZHJhdyh0LHRoaXMudGV4dCwwLDAse2NvbG9yOnRoaXMuY29sb3IuY2xvbmUoKSxiYXNlQWxpZ246dGhpcy5iYXNlQWxpZ24sdGV4dEFsaWduOnRoaXMudGV4dEFsaWduLGZvbnRTaXplOnRoaXMuZm9udFNpemUsbGV0dGVyU3BhY2luZzp0aGlzLmxldHRlclNwYWNpbmcsb3BhY2l0eTp0aGlzLm9wYWNpdHl9KTtlbHNle3ZhciBlPXQudGV4dEFsaWduLGk9dC50ZXh0QmFzZWxpbmU7dC50ZXh0QWxpZ249dGhpcy5fbG9va3VwVGV4dEFsaWduKHRoaXMudGV4dEFsaWduKSx0LnRleHRCYXNlbGluZT10aGlzLl9sb29rdXBCYXNlQWxpZ24odGhpcy5iYXNlQWxpZ24pLHRoaXMuY29sb3ImJih0aGlzLmNvbG9yLmE9dGhpcy5vcGFjaXR5KSx0LmZpbGxTdHlsZT10aGlzLmNvbG9yLnRvU3RyaW5nKCksdC5mb250PXRoaXMuX2ZvbnRTdHJpbmcsdGhpcy5tYXhXaWR0aD90LmZpbGxUZXh0KHRoaXMudGV4dCwwLDAsdGhpcy5tYXhXaWR0aCk6dC5maWxsVGV4dCh0aGlzLnRleHQsMCwwKSx0LnRleHRBbGlnbj1lLHQudGV4dEJhc2VsaW5lPWl9fSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJfZm9udFN0cmluZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9va3VwRm9udFN0eWxlKHRoaXMuZm9udFN0eWxlKStcIiBcIit0aGlzLmZvbnRTaXplK3RoaXMuX2xvb2t1cEZvbnRVbml0KHRoaXMuZm9udFVuaXQpK1wiIFwiK3RoaXMuZm9udEZhbWlseX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5kZWJ1Z0RyYXc9ZnVuY3Rpb24oZSl7dC5wcm90b3R5cGUuZGVidWdEcmF3LmNhbGwodGhpcyxlKX0sZX0oRGUpKSksbWk9ZnVuY3Rpb24oKXt2YXIgdD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkgaW4gZSllLmhhc093blByb3BlcnR5KGkpJiYodFtpXT1lW2ldKX07cmV0dXJuIGZ1bmN0aW9uKGUsaSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsaSksZS5wcm90b3R5cGU9bnVsbD09PWk/T2JqZWN0LmNyZWF0ZShpKToobi5wcm90b3R5cGU9aS5wcm90b3R5cGUsbmV3IG4pfX0oKSxiaT17cG9zOmsuWmVyby5jbG9uZSgpLHdpZHRoOjEwLGhlaWdodDoxMCx2aXNpYmxlOiExLGFjdGlvbjpmdW5jdGlvbigpe30sZmlsdGVyOmZ1bmN0aW9uKCl7cmV0dXJuITB9LHJlcGVhdDotMX0sd2k9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgaT10LmNhbGwodGhpcyxlLnBvcy54LGUucG9zLnksZS53aWR0aCxlLmhlaWdodCl8fHRoaXM7cmV0dXJuIGkuYWN0aW9uPWZ1bmN0aW9uKCl7fSxpLmZpbHRlcj1mdW5jdGlvbigpe3JldHVybiEwfSxpLnJlcGVhdD0tMSxlPV8oe30sYmksZSksaS5maWx0ZXI9ZS5maWx0ZXJ8fGkuZmlsdGVyLGkucmVwZWF0PWUucmVwZWF0fHxpLnJlcGVhdCxpLmFjdGlvbj1lLmFjdGlvbnx8aS5hY3Rpb24sZS50YXJnZXQmJihpLnRhcmdldD1lLnRhcmdldCksaS52aXNpYmxlPWUudmlzaWJsZSxpLmNvbGxpc2lvblR5cGU9eGUuUGFzc2l2ZSxpLmV2ZW50RGlzcGF0Y2hlcj1uZXcgd3QoaSksaS5hY3Rpb25RdWV1ZT1uZXcgZmUoaSksaS5vbihcImNvbGxpc2lvbnN0YXJ0XCIsZnVuY3Rpb24odCl7aS5maWx0ZXIodC5vdGhlcikmJihpLmVtaXQoXCJlbnRlclwiLG5ldyBtdChpLHQub3RoZXIpKSxpLl9kaXNwYXRjaEFjdGlvbigpLDA9PT1pLnJlcGVhdCYmaS5raWxsKCkpfSksaS5vbihcImNvbGxpc2lvbmVuZFwiLGZ1bmN0aW9uKHQpe2kuZmlsdGVyKHQub3RoZXIpJiZpLmVtaXQoXCJleGl0XCIsbmV3IGJ0KGksdC5vdGhlcikpfSksaX1yZXR1cm4gbWkoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ0YXJnZXRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RhcmdldH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3RhcmdldD10LHRoaXMuZmlsdGVyPWZ1bmN0aW9uKGUpe3JldHVybiBlPT09dH19LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUuX2luaXRpYWxpemU9ZnVuY3Rpb24oZSl7dC5wcm90b3R5cGUuX2luaXRpYWxpemUuY2FsbCh0aGlzLGUpfSxlLnByb3RvdHlwZS5fZGlzcGF0Y2hBY3Rpb249ZnVuY3Rpb24oKXt0aGlzLmFjdGlvbi5jYWxsKHRoaXMpLHRoaXMucmVwZWF0LS19LGUucHJvdG90eXBlLmRlYnVnRHJhdz1mdW5jdGlvbihlKXt0LnByb3RvdHlwZS5kZWJ1Z0RyYXcuY2FsbCh0aGlzLGUpLGUuc2F2ZSgpLGUudHJhbnNsYXRlKHRoaXMucG9zLngsdGhpcy5wb3MueSk7dmFyIGk9dGhpcy5nZXRCb3VuZHMoKSxuPXRoaXMuZ2V0V29ybGRQb3MoKTtpLmxlZnQ9aS5sZWZ0LW4ueCxpLnJpZ2h0PWkucmlnaHQtbi54LGkudG9wPWkudG9wLW4ueSxpLmJvdHRvbT1pLmJvdHRvbS1uLnksZS5maWxsU3R5bGU9UHQuVmlvbGV0LnRvU3RyaW5nKCksZS5zdHJva2VTdHlsZT1QdC5WaW9sZXQudG9TdHJpbmcoKSxlLmZpbGxUZXh0KFwiVHJpZ2dlclwiLDEwLDEwKSxpLmRlYnVnRHJhdyhlKSxlLnJlc3RvcmUoKX0sZX0oRGUpO2Z1bmN0aW9uIHhpKHQpe3JldHVybiB0IGluc3RhbmNlb2YgQmV9dmFyIFBpLFNpPWZ1bmN0aW9uKCl7dmFyIHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShpKSYmKHRbaV09ZVtpXSl9O3JldHVybiBmdW5jdGlvbihlLGkpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLGkpLGUucHJvdG90eXBlPW51bGw9PT1pP09iamVjdC5jcmVhdGUoaSk6KG4ucHJvdG90eXBlPWkucHJvdG90eXBlLG5ldyBuKX19KCksQWk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlKXt2YXIgaT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGkuYWN0b3JzPVtdLGkudHJpZ2dlcnM9W10saS50aWxlTWFwcz1bXSxpLmdyb3Vwcz17fSxpLnVpQWN0b3JzPVtdLGkuX2lzSW5pdGlhbGl6ZWQ9ITEsaS5fc29ydGVkRHJhd2luZ1RyZWU9bmV3IGVpKERlLnByb3RvdHlwZS5nZXRaSW5kZXgpLGkuX2Jyb2FkcGhhc2U9bmV3IHRpLGkuX2tpbGxRdWV1ZT1bXSxpLl90cmlnZ2VyS2lsbFF1ZXVlPVtdLGkuX3RpbWVycz1bXSxpLl9jYW5jZWxRdWV1ZT1bXSxpLl9sb2dnZXI9T3QuZ2V0SW5zdGFuY2UoKSxpLmNhbWVyYT1uZXcgZ2ksZSYmKGkuY2FtZXJhLng9ZS5oYWxmRHJhd1dpZHRoLGkuY2FtZXJhLnk9ZS5oYWxmRHJhd0hlaWdodCksaX1yZXR1cm4gU2koZSx0KSxlLnByb3RvdHlwZS5vbj1mdW5jdGlvbihlLGkpe3QucHJvdG90eXBlLm9uLmNhbGwodGhpcyxlLGkpfSxlLnByb3RvdHlwZS5vbmNlPWZ1bmN0aW9uKGUsaSl7dC5wcm90b3R5cGUub25jZS5jYWxsKHRoaXMsZSxpKX0sZS5wcm90b3R5cGUub2ZmPWZ1bmN0aW9uKGUsaSl7dC5wcm90b3R5cGUub2ZmLmNhbGwodGhpcyxlLGkpfSxlLnByb3RvdHlwZS5vbkluaXRpYWxpemU9ZnVuY3Rpb24odCl7fSxlLnByb3RvdHlwZS5vbkFjdGl2YXRlPWZ1bmN0aW9uKHQsZSl7fSxlLnByb3RvdHlwZS5vbkRlYWN0aXZhdGU9ZnVuY3Rpb24odCxlKXt9LGUucHJvdG90eXBlLm9uUHJlVXBkYXRlPWZ1bmN0aW9uKHQsZSl7fSxlLnByb3RvdHlwZS5vblBvc3RVcGRhdGU9ZnVuY3Rpb24odCxlKXt9LGUucHJvdG90eXBlLm9uUHJlRHJhdz1mdW5jdGlvbih0LGUpe30sZS5wcm90b3R5cGUub25Qb3N0RHJhdz1mdW5jdGlvbih0LGUpe30sZS5wcm90b3R5cGUuX2luaXRpYWxpemVDaGlsZHJlbj1mdW5jdGlvbigpe2Zvcih2YXIgdD0wLGU9dGhpcy5hY3RvcnM7dDxlLmxlbmd0aDt0Kyspe2VbdF0uX2luaXRpYWxpemUodGhpcy5lbmdpbmUpfX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaXNJbml0aWFsaXplZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNJbml0aWFsaXplZH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5faW5pdGlhbGl6ZT1mdW5jdGlvbih0KXt0aGlzLmlzSW5pdGlhbGl6ZWR8fCh0aGlzLmNhbWVyYSYmKHRoaXMuY2FtZXJhLng9dC5oYWxmRHJhd1dpZHRoLHRoaXMuY2FtZXJhLnk9dC5oYWxmRHJhd0hlaWdodCksdGhpcy5faW5pdGlhbGl6ZUNoaWxkcmVuKCksdGhpcy5fbG9nZ2VyLmRlYnVnKFwiU2NlbmUub25Jbml0aWFsaXplXCIsdGhpcyx0KSx0aGlzLmV2ZW50RGlzcGF0Y2hlci5lbWl0KFwiaW5pdGlhbGl6ZVwiLG5ldyBmdCh0LHRoaXMpKSx0aGlzLm9uSW5pdGlhbGl6ZS5jYWxsKHRoaXMsdCksdGhpcy5faXNJbml0aWFsaXplZD0hMCl9LGUucHJvdG90eXBlLl9hY3RpdmF0ZT1mdW5jdGlvbih0LGUpe3RoaXMuX2xvZ2dlci5kZWJ1ZyhcIlNjZW5lLm9uQWN0aXZhdGVcIix0aGlzKSx0aGlzLm9uQWN0aXZhdGUodCxlKX0sZS5wcm90b3R5cGUuX2RlYWN0aXZhdGU9ZnVuY3Rpb24odCxlKXt0aGlzLl9sb2dnZXIuZGVidWcoXCJTY2VuZS5vbkRlY3RpdmF0ZVwiLHRoaXMpLHRoaXMub25EZWFjdGl2YXRlKHQsZSl9LGUucHJvdG90eXBlLl9wcmV1cGRhdGU9ZnVuY3Rpb24odCxlKXt0aGlzLmVtaXQoXCJwcmV1cGRhdGVcIixuZXcgSih0LGUsdGhpcykpLHRoaXMub25QcmVVcGRhdGUodCxlKX0sZS5wcm90b3R5cGUuX3Bvc3R1cGRhdGU9ZnVuY3Rpb24odCxlKXt0aGlzLmVtaXQoXCJwb3N0dXBkYXRlXCIsbmV3ICQodCxlLHRoaXMpKSx0aGlzLm9uUG9zdFVwZGF0ZSh0LGUpfSxlLnByb3RvdHlwZS5fcHJlZHJhdz1mdW5jdGlvbih0LGUpe3RoaXMuZW1pdChcInByZWRyYXdcIixuZXcgWSh0LGUsdGhpcykpLHRoaXMub25QcmVEcmF3KHQsZSl9LGUucHJvdG90eXBlLl9wb3N0ZHJhdz1mdW5jdGlvbih0LGUpe3RoaXMuZW1pdChcInBvc3RkcmF3XCIsbmV3IEsodCxlLHRoaXMpKSx0aGlzLm9uUG9zdERyYXcodCxlKX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKHQsZSl7dmFyIGksbjtmb3IodGhpcy5fcHJldXBkYXRlKHQsZSksaT0wLG49dGhpcy5fY2FuY2VsUXVldWUubGVuZ3RoO2k8bjtpKyspdGhpcy5yZW1vdmVUaW1lcih0aGlzLl9jYW5jZWxRdWV1ZVtpXSk7dGhpcy5fY2FuY2VsUXVldWUubGVuZ3RoPTA7Zm9yKHZhciBvPTAscj10aGlzLl90aW1lcnM7bzxyLmxlbmd0aDtvKyspe3Jbb10udXBkYXRlKGUpfWZvcihpPTAsbj10aGlzLnVpQWN0b3JzLmxlbmd0aDtpPG47aSsrKXRoaXMudWlBY3RvcnNbaV0udXBkYXRlKHQsZSk7Zm9yKGk9MCxuPXRoaXMudGlsZU1hcHMubGVuZ3RoO2k8bjtpKyspdGhpcy50aWxlTWFwc1tpXS51cGRhdGUodCxlKTtmb3IoaT0wLG49dGhpcy5hY3RvcnMubGVuZ3RoO2k8bjtpKyspdGhpcy5hY3RvcnNbaV0udXBkYXRlKHQsZSk7Zm9yKGk9MCxuPXRoaXMudHJpZ2dlcnMubGVuZ3RoO2k8bjtpKyspdGhpcy50cmlnZ2Vyc1tpXS51cGRhdGUodCxlKTtpZih0aGlzLl9jb2xsZWN0QWN0b3JTdGF0cyh0KSx0LmlucHV0LnBvaW50ZXJzLnByb3BhZ2F0ZSgpLHRoaXMuX2Jyb2FkcGhhc2UmJlcuZW5hYmxlZCl7dmFyIHM9RGF0ZS5ub3coKTt0aGlzLl9icm9hZHBoYXNlLnVwZGF0ZSh0aGlzLmFjdG9ycyxlKTtmb3IodmFyIGE9dGhpcy5fYnJvYWRwaGFzZS5icm9hZHBoYXNlKHRoaXMuYWN0b3JzLGUsdC5zdGF0cy5jdXJyRnJhbWUpLGg9RGF0ZS5ub3coKSxjPURhdGUubm93KCksdT1XLmNvbGxpc2lvblBhc3NlcyxsPWUvdTt1PjA7KWE9dGhpcy5fYnJvYWRwaGFzZS5uYXJyb3dwaGFzZShhLHQuc3RhdHMuY3VyckZyYW1lKSxhPXRoaXMuX2Jyb2FkcGhhc2UucmVzb2x2ZShhLGwsVy5jb2xsaXNpb25SZXNvbHV0aW9uU3RyYXRlZ3kpLHRoaXMuX2Jyb2FkcGhhc2UucnVuQ29sbGlzaW9uU3RhcnRFbmQoYSksdS0tO3ZhciBwPURhdGUubm93KCk7dC5zdGF0cy5jdXJyRnJhbWUucGh5c2ljcy5icm9hZHBoYXNlPWgtcyx0LnN0YXRzLmN1cnJGcmFtZS5waHlzaWNzLm5hcnJvd3BoYXNlPXAtY310LnN0YXRzLmN1cnJGcmFtZS5hY3RvcnMua2lsbGVkPXRoaXMuX2tpbGxRdWV1ZS5sZW5ndGgrdGhpcy5fdHJpZ2dlcktpbGxRdWV1ZS5sZW5ndGgsdGhpcy5fcHJvY2Vzc0tpbGxRdWV1ZSh0aGlzLl9raWxsUXVldWUsdGhpcy5hY3RvcnMpLHRoaXMuX3Byb2Nlc3NLaWxsUXVldWUodGhpcy5fdHJpZ2dlcktpbGxRdWV1ZSx0aGlzLnRyaWdnZXJzKSx0aGlzLmNhbWVyYSYmdGhpcy5jYW1lcmEudXBkYXRlKHQsZSksdGhpcy5fcG9zdHVwZGF0ZSh0LGUpfSxlLnByb3RvdHlwZS5fcHJvY2Vzc0tpbGxRdWV1ZT1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaSxuPTAsbz10O248by5sZW5ndGg7bisrKXt2YXIgcj1vW25dO3IuaXNLaWxsZWQoKSYmKGk9ZS5pbmRleE9mKHIpKT4tMSYmKHRoaXMuX3NvcnRlZERyYXdpbmdUcmVlLnJlbW92ZUJ5Q29tcGFyYWJsZShyKSxlLnNwbGljZShpLDEpKX10Lmxlbmd0aD0wfSxlLnByb3RvdHlwZS5kcmF3PWZ1bmN0aW9uKHQsZSl7dmFyIGksbjtmb3IodGhpcy5fcHJlZHJhdyh0LGUpLHQuc2F2ZSgpLHRoaXMuY2FtZXJhJiZ0aGlzLmNhbWVyYS5kcmF3KHQpLGk9MCxuPXRoaXMudGlsZU1hcHMubGVuZ3RoO2k8bjtpKyspdGhpcy50aWxlTWFwc1tpXS5kcmF3KHQsZSk7dmFyIG89dGhpcy5fc29ydGVkRHJhd2luZ1RyZWUubGlzdCgpO2ZvcihpPTAsbj1vLmxlbmd0aDtpPG47aSsrKW9baV0udmlzaWJsZSYmIW9baV0uaXNPZmZTY3JlZW4mJm9baV0uZHJhdyh0LGUpO2Zvcih0aGlzLmVuZ2luZSYmdGhpcy5lbmdpbmUuaXNEZWJ1ZyYmKHQuc3Ryb2tlU3R5bGU9XCJ5ZWxsb3dcIix0aGlzLmRlYnVnRHJhdyh0KSksdC5yZXN0b3JlKCksaT0wLG49dGhpcy51aUFjdG9ycy5sZW5ndGg7aTxuO2krKyl0aGlzLnVpQWN0b3JzW2ldLnZpc2libGUmJnRoaXMudWlBY3RvcnNbaV0uZHJhdyh0LGUpO2lmKHRoaXMuZW5naW5lJiZ0aGlzLmVuZ2luZS5pc0RlYnVnKWZvcihpPTAsbj10aGlzLnVpQWN0b3JzLmxlbmd0aDtpPG47aSsrKXRoaXMudWlBY3RvcnNbaV0uZGVidWdEcmF3KHQpO3RoaXMuX3Bvc3RkcmF3KHQsZSl9LGUucHJvdG90eXBlLmRlYnVnRHJhdz1mdW5jdGlvbih0KXt2YXIgZSxpO2Zvcih0aGlzLmVtaXQoXCJwcmVkZWJ1Z2RyYXdcIixuZXcgUSh0LHRoaXMpKSxlPTAsaT10aGlzLnRpbGVNYXBzLmxlbmd0aDtlPGk7ZSsrKXRoaXMudGlsZU1hcHNbZV0uZGVidWdEcmF3KHQpO2ZvcihlPTAsaT10aGlzLmFjdG9ycy5sZW5ndGg7ZTxpO2UrKyl0aGlzLmFjdG9yc1tlXS5kZWJ1Z0RyYXcodCk7Zm9yKGU9MCxpPXRoaXMudHJpZ2dlcnMubGVuZ3RoO2U8aTtlKyspdGhpcy50cmlnZ2Vyc1tlXS5kZWJ1Z0RyYXcodCk7dGhpcy5fYnJvYWRwaGFzZS5kZWJ1Z0RyYXcodCwyMCksdGhpcy5jYW1lcmEuZGVidWdEcmF3KHQpLHRoaXMuZW1pdChcInBvc3RkZWJ1Z2RyYXdcIixuZXcgWih0LHRoaXMpKX0sZS5wcm90b3R5cGUuY29udGFpbnM9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYWN0b3JzLmluZGV4T2YodCk+LTF9LGUucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt0IGluc3RhbmNlb2YgRGUmJnQudW5raWxsKCksdCBpbnN0YW5jZW9mIEJlP0UodGhpcy51aUFjdG9ycyx0KXx8dGhpcy5hZGRVSUFjdG9yKHQpOnQgaW5zdGFuY2VvZiBEZT9FKHRoaXMuYWN0b3JzLHQpfHx0aGlzLl9hZGRDaGlsZCh0KTp0IGluc3RhbmNlb2Yga2U/RSh0aGlzLl90aW1lcnMsdCl8fHRoaXMuYWRkVGltZXIodCk6dCBpbnN0YW5jZW9mIEZlJiYoRSh0aGlzLnRpbGVNYXBzLHQpfHx0aGlzLmFkZFRpbGVNYXAodCkpfSxlLnByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEJlP3RoaXMucmVtb3ZlVUlBY3Rvcih0KToodCBpbnN0YW5jZW9mIERlJiZ0aGlzLl9yZW1vdmVDaGlsZCh0KSx0IGluc3RhbmNlb2Yga2UmJnRoaXMucmVtb3ZlVGltZXIodCksdCBpbnN0YW5jZW9mIEZlJiZ0aGlzLnJlbW92ZVRpbGVNYXAodCkpfSxlLnByb3RvdHlwZS5hZGRVSUFjdG9yPWZ1bmN0aW9uKHQpe3RoaXMudWlBY3RvcnMucHVzaCh0KSx0LnNjZW5lPXRoaXN9LGUucHJvdG90eXBlLnJlbW92ZVVJQWN0b3I9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy51aUFjdG9ycy5pbmRleE9mKHQpO2U+LTEmJnRoaXMudWlBY3RvcnMuc3BsaWNlKGUsMSl9LGUucHJvdG90eXBlLl9hZGRDaGlsZD1mdW5jdGlvbih0KXt0aGlzLl9icm9hZHBoYXNlLnRyYWNrKHQuYm9keSksdC5zY2VuZT10aGlzLHQgaW5zdGFuY2VvZiB3aT90aGlzLnRyaWdnZXJzLnB1c2godCk6dGhpcy5hY3RvcnMucHVzaCh0KSx0aGlzLl9zb3J0ZWREcmF3aW5nVHJlZS5hZGQodCl9LGUucHJvdG90eXBlLmFkZFRpbGVNYXA9ZnVuY3Rpb24odCl7dGhpcy50aWxlTWFwcy5wdXNoKHQpfSxlLnByb3RvdHlwZS5yZW1vdmVUaWxlTWFwPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudGlsZU1hcHMuaW5kZXhPZih0KTtlPi0xJiZ0aGlzLnRpbGVNYXBzLnNwbGljZShlLDEpfSxlLnByb3RvdHlwZS5fcmVtb3ZlQ2hpbGQ9ZnVuY3Rpb24odCl7RSh0aGlzLmFjdG9ycyx0KSYmKHRoaXMuX2Jyb2FkcGhhc2UudW50cmFjayh0LmJvZHkpLHQgaW5zdGFuY2VvZiB3aT90aGlzLl90cmlnZ2VyS2lsbFF1ZXVlLnB1c2godCk6KHQuaXNLaWxsZWQoKXx8dC5raWxsKCksdGhpcy5fa2lsbFF1ZXVlLnB1c2godCkpLHQucGFyZW50PW51bGwpfSxlLnByb3RvdHlwZS5hZGRUaW1lcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdGltZXJzLnB1c2godCksdC5zY2VuZT10aGlzLHR9LGUucHJvdG90eXBlLnJlbW92ZVRpbWVyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX3RpbWVycy5pbmRleE9mKHQpO3JldHVybi0xIT09ZSYmdGhpcy5fdGltZXJzLnNwbGljZShlLDEpLHR9LGUucHJvdG90eXBlLmNhbmNlbFRpbWVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9jYW5jZWxRdWV1ZS5wdXNoKHQpLHR9LGUucHJvdG90eXBlLmlzVGltZXJBY3RpdmU9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX3RpbWVycy5pbmRleE9mKHQpPi0xJiYhdC5jb21wbGV0ZX0sZS5wcm90b3R5cGUuY3JlYXRlR3JvdXA9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyByaSh0LHRoaXMpfSxlLnByb3RvdHlwZS5nZXRHcm91cD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ncm91cHNbdF19LGUucHJvdG90eXBlLnJlbW92ZUdyb3VwPWZ1bmN0aW9uKHQpe1wic3RyaW5nXCI9PXR5cGVvZiB0P2RlbGV0ZSB0aGlzLmdyb3Vwc1t0XTp0IGluc3RhbmNlb2Ygcmk/ZGVsZXRlIHRoaXMuZ3JvdXBzW3QubmFtZV06dGhpcy5fbG9nZ2VyLmVycm9yKFwiSW52YWxpZCBhcmd1bWVudHMgdG8gcmVtb3ZlR3JvdXBcIix0KX0sZS5wcm90b3R5cGUuY2xlYW51cERyYXdUcmVlPWZ1bmN0aW9uKHQpe3RoaXMuX3NvcnRlZERyYXdpbmdUcmVlLnJlbW92ZUJ5Q29tcGFyYWJsZSh0KX0sZS5wcm90b3R5cGUudXBkYXRlRHJhd1RyZWU9ZnVuY3Rpb24odCl7dGhpcy5fc29ydGVkRHJhd2luZ1RyZWUuYWRkKHQpfSxlLnByb3RvdHlwZS5pc0FjdG9ySW5EcmF3VHJlZT1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fc29ydGVkRHJhd2luZ1RyZWUuZmluZCh0KX0sZS5wcm90b3R5cGUuaXNDdXJyZW50U2NlbmU9ZnVuY3Rpb24oKXtyZXR1cm4hIXRoaXMuZW5naW5lJiZ0aGlzLmVuZ2luZS5jdXJyZW50U2NlbmU9PT10aGlzfSxlLnByb3RvdHlwZS5fY29sbGVjdEFjdG9yU3RhdHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTAsaT10aGlzLnVpQWN0b3JzO2U8aS5sZW5ndGg7ZSsrKXtpW2VdO3Quc3RhdHMuY3VyckZyYW1lLmFjdG9ycy51aSsrfWZvcih2YXIgbj0wLG89dGhpcy5hY3RvcnM7bjxvLmxlbmd0aDtuKyspe3ZhciByPW9bbl07dC5zdGF0cy5jdXJyRnJhbWUuYWN0b3JzLmFsaXZlKys7Zm9yKHZhciBzPTAsYT1yLmNoaWxkcmVuO3M8YS5sZW5ndGg7cysrKXt4aShhW3NdKT90LnN0YXRzLmN1cnJGcmFtZS5hY3RvcnMudWkrKzp0LnN0YXRzLmN1cnJGcmFtZS5hY3RvcnMuYWxpdmUrK319fSxlfSh4dCksRWk9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXt0aGlzLnN0YXRzPXtjdXJyRnJhbWU6bmV3IENpLHByZXZGcmFtZTpuZXcgQ2l9fX0oKSxDaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLl9pZD0wLHRoaXMuX2RlbHRhPTAsdGhpcy5fZnBzPTAsdGhpcy5fYWN0b3JTdGF0cz17YWxpdmU6MCxraWxsZWQ6MCx1aTowLGdldCByZW1haW5pbmcoKXtyZXR1cm4gdGhpcy5hbGl2ZS10aGlzLmtpbGxlZH0sZ2V0IHRvdGFsKCl7cmV0dXJuIHRoaXMucmVtYWluaW5nK3RoaXMudWl9fSx0aGlzLl9kdXJhdGlvblN0YXRzPXt1cGRhdGU6MCxkcmF3OjAsZ2V0IHRvdGFsKCl7cmV0dXJuIHRoaXMudXBkYXRlK3RoaXMuZHJhd319LHRoaXMuX3BoeXNpY3NTdGF0cz1uZXcgVGl9cmV0dXJuIHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKHQpe3Q/KHRoaXMuaWQ9dC5pZCx0aGlzLmRlbHRhPXQuZGVsdGEsdGhpcy5mcHM9dC5mcHMsdGhpcy5hY3RvcnMuYWxpdmU9dC5hY3RvcnMuYWxpdmUsdGhpcy5hY3RvcnMua2lsbGVkPXQuYWN0b3JzLmtpbGxlZCx0aGlzLmFjdG9ycy51aT10LmFjdG9ycy51aSx0aGlzLmR1cmF0aW9uLnVwZGF0ZT10LmR1cmF0aW9uLnVwZGF0ZSx0aGlzLmR1cmF0aW9uLmRyYXc9dC5kdXJhdGlvbi5kcmF3LHRoaXMuX3BoeXNpY3NTdGF0cy5yZXNldCh0LnBoeXNpY3MpKToodGhpcy5pZD10aGlzLmRlbHRhPXRoaXMuZnBzPTAsdGhpcy5hY3RvcnMuYWxpdmU9dGhpcy5hY3RvcnMua2lsbGVkPXRoaXMuYWN0b3JzLnVpPTAsdGhpcy5kdXJhdGlvbi51cGRhdGU9dGhpcy5kdXJhdGlvbi5kcmF3PTAsdGhpcy5fcGh5c2ljc1N0YXRzLnJlc2V0KCkpfSx0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBlPW5ldyB0O3JldHVybiBlLnJlc2V0KHRoaXMpLGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImlkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pZH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2lkPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiZGVsdGFcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RlbHRhfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fZGVsdGE9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJmcHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Zwc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2Zwcz10fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImFjdG9yc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fYWN0b3JTdGF0c30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJkdXJhdGlvblwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZHVyYXRpb25TdGF0c30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJwaHlzaWNzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9waHlzaWNzU3RhdHN9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdH0oKSxUaT1mdW5jdGlvbigpe2Z1bmN0aW9uIHQoKXt0aGlzLl9wYWlycz0wLHRoaXMuX2NvbGxpc2lvbnM9MCx0aGlzLl9jb2xsaWRlcnNIYXNoPXt9LHRoaXMuX2Zhc3RCb2RpZXM9MCx0aGlzLl9mYXN0Qm9keUNvbGxpc2lvbnM9MCx0aGlzLl9icm9hZHBoYXNlPTAsdGhpcy5fbmFycm93cGhhc2U9MH1yZXR1cm4gdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24odCl7dD8odGhpcy5wYWlycz10LnBhaXJzLHRoaXMuY29sbGlzaW9ucz10LmNvbGxpc2lvbnMsdGhpcy5jb2xsaWRlcnNIYXNoPXQuY29sbGlkZXJzSGFzaCx0aGlzLmZhc3RCb2RpZXM9dC5mYXN0Qm9kaWVzLHRoaXMuZmFzdEJvZHlDb2xsaXNpb25zPXQuZmFzdEJvZHlDb2xsaXNpb25zLHRoaXMuYnJvYWRwaGFzZT10LmJyb2FkcGhhc2UsdGhpcy5uYXJyb3dwaGFzZT10Lm5hcnJvd3BoYXNlKToodGhpcy5wYWlycz10aGlzLmNvbGxpc2lvbnM9dGhpcy5mYXN0Qm9kaWVzPTAsdGhpcy5mYXN0Qm9keUNvbGxpc2lvbnM9dGhpcy5icm9hZHBoYXNlPXRoaXMubmFycm93cGhhc2U9MCx0aGlzLmNvbGxpZGVyc0hhc2g9e30pfSx0LnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3ZhciBlPW5ldyB0O3JldHVybiBlLnJlc2V0KHRoaXMpLGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInBhaXJzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWlyc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3BhaXJzPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiY29sbGlzaW9uc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fY29sbGlzaW9uc30sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2NvbGxpc2lvbnM9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJjb2xsaWRlcnNIYXNoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9jb2xsaWRlcnNIYXNofSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fY29sbGlkZXJzSGFzaD10fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImZhc3RCb2RpZXNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2Zhc3RCb2RpZXN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mYXN0Qm9kaWVzPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiZmFzdEJvZHlDb2xsaXNpb25zXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9mYXN0Qm9keUNvbGxpc2lvbnN9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9mYXN0Qm9keUNvbGxpc2lvbnM9dH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJicm9hZHBoYXNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9icm9hZHBoYXNlfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYnJvYWRwaGFzZT10fSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcIm5hcnJvd3BoYXNlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9uYXJyb3dwaGFzZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX25hcnJvd3BoYXNlPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdH0oKSxNaT1mdW5jdGlvbigpe3ZhciB0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiBlKWUuaGFzT3duUHJvcGVydHkoaSkmJih0W2ldPWVbaV0pfTtyZXR1cm4gZnVuY3Rpb24oZSxpKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxpKSxlLnByb3RvdHlwZT1udWxsPT09aT9PYmplY3QuY3JlYXRlKGkpOihuLnByb3RvdHlwZT1pLnByb3RvdHlwZSxuZXcgbil9fSgpOyFmdW5jdGlvbih0KXt0W3QuTnVtMT05N109XCJOdW0xXCIsdFt0Lk51bTI9OThdPVwiTnVtMlwiLHRbdC5OdW0zPTk5XT1cIk51bTNcIix0W3QuTnVtND0xMDBdPVwiTnVtNFwiLHRbdC5OdW01PTEwMV09XCJOdW01XCIsdFt0Lk51bTY9MTAyXT1cIk51bTZcIix0W3QuTnVtNz0xMDNdPVwiTnVtN1wiLHRbdC5OdW04PTEwNF09XCJOdW04XCIsdFt0Lk51bTk9MTA1XT1cIk51bTlcIix0W3QuTnVtMD05Nl09XCJOdW0wXCIsdFt0Lk51bWxvY2s9MTQ0XT1cIk51bWxvY2tcIix0W3QuU2VtaWNvbG9uPTE4Nl09XCJTZW1pY29sb25cIix0W3QuQT02NV09XCJBXCIsdFt0LkI9NjZdPVwiQlwiLHRbdC5DPTY3XT1cIkNcIix0W3QuRD02OF09XCJEXCIsdFt0LkU9NjldPVwiRVwiLHRbdC5GPTcwXT1cIkZcIix0W3QuRz03MV09XCJHXCIsdFt0Lkg9NzJdPVwiSFwiLHRbdC5JPTczXT1cIklcIix0W3QuSj03NF09XCJKXCIsdFt0Lks9NzVdPVwiS1wiLHRbdC5MPTc2XT1cIkxcIix0W3QuTT03N109XCJNXCIsdFt0Lk49NzhdPVwiTlwiLHRbdC5PPTc5XT1cIk9cIix0W3QuUD04MF09XCJQXCIsdFt0LlE9ODFdPVwiUVwiLHRbdC5SPTgyXT1cIlJcIix0W3QuUz04M109XCJTXCIsdFt0LlQ9ODRdPVwiVFwiLHRbdC5VPTg1XT1cIlVcIix0W3QuVj04Nl09XCJWXCIsdFt0Llc9ODddPVwiV1wiLHRbdC5YPTg4XT1cIlhcIix0W3QuWT04OV09XCJZXCIsdFt0Llo9OTBdPVwiWlwiLHRbdC5TaGlmdD0xNl09XCJTaGlmdFwiLHRbdC5BbHQ9MThdPVwiQWx0XCIsdFt0LlVwPTM4XT1cIlVwXCIsdFt0LkRvd249NDBdPVwiRG93blwiLHRbdC5MZWZ0PTM3XT1cIkxlZnRcIix0W3QuUmlnaHQ9MzldPVwiUmlnaHRcIix0W3QuU3BhY2U9MzJdPVwiU3BhY2VcIix0W3QuRXNjPTI3XT1cIkVzY1wifShQaXx8KFBpPXt9KSk7dmFyIERpLE9pLEJpLGtpLFJpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLmtleT1lLGl9cmV0dXJuIE1pKGUsdCksZX0oVSksRmk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe3ZhciBlPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gZS5fa2V5cz1bXSxlLl9rZXlzVXA9W10sZS5fa2V5c0Rvd249W10sZX1yZXR1cm4gTWkoZSx0KSxlLnByb3RvdHlwZS5vbj1mdW5jdGlvbihlLGkpe3QucHJvdG90eXBlLm9uLmNhbGwodGhpcyxlLGkpfSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXM7KHQ9dHx8d2luZG93KS5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLGZ1bmN0aW9uKCl7ZS5fa2V5cy5sZW5ndGg9MH0pLHQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsZnVuY3Rpb24odCl7dmFyIGk9ZS5fbm9ybWFsaXplS2V5Q29kZSh0LmtleUNvZGUpLG49ZS5fa2V5cy5pbmRleE9mKGkpO2UuX2tleXMuc3BsaWNlKG4sMSksZS5fa2V5c1VwLnB1c2goaSk7dmFyIG89bmV3IFJpKGkpO2UuZXZlbnREaXNwYXRjaGVyLmVtaXQoXCJ1cFwiLG8pLGUuZXZlbnREaXNwYXRjaGVyLmVtaXQoXCJyZWxlYXNlXCIsbyl9KSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsZnVuY3Rpb24odCl7dmFyIGk9ZS5fbm9ybWFsaXplS2V5Q29kZSh0LmtleUNvZGUpO2lmKC0xPT09ZS5fa2V5cy5pbmRleE9mKGkpKXtlLl9rZXlzLnB1c2goaSksZS5fa2V5c0Rvd24ucHVzaChpKTt2YXIgbj1uZXcgUmkoaSk7ZS5ldmVudERpc3BhdGNoZXIuZW1pdChcImRvd25cIixuKSxlLmV2ZW50RGlzcGF0Y2hlci5lbWl0KFwicHJlc3NcIixuKX19KX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5fa2V5c0Rvd24ubGVuZ3RoPTAsdGhpcy5fa2V5c1VwLmxlbmd0aD0wO2Zvcih2YXIgdD0wO3Q8dGhpcy5fa2V5cy5sZW5ndGg7dCsrKXRoaXMuZXZlbnREaXNwYXRjaGVyLmVtaXQoXCJob2xkXCIsbmV3IFJpKHRoaXMuX2tleXNbdF0pKX0sZS5wcm90b3R5cGUuZ2V0S2V5cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9rZXlzfSxlLnByb3RvdHlwZS53YXNQcmVzc2VkPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9rZXlzRG93bi5pbmRleE9mKHQpPi0xfSxlLnByb3RvdHlwZS5pc0hlbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2tleXMuaW5kZXhPZih0KT4tMX0sZS5wcm90b3R5cGUud2FzUmVsZWFzZWQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2tleXNVcC5pbmRleE9mKHQpPi0xfSxlLnByb3RvdHlwZS5fbm9ybWFsaXplS2V5Q29kZT1mdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZSA1OTpyZXR1cm4gUGkuU2VtaWNvbG9uO2RlZmF1bHQ6cmV0dXJuIHR9fSxlfSh4dCksSWk9ZnVuY3Rpb24oKXt2YXIgdD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkgaW4gZSllLmhhc093blByb3BlcnR5KGkpJiYodFtpXT1lW2ldKX07cmV0dXJuIGZ1bmN0aW9uKGUsaSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsaSksZS5wcm90b3R5cGU9bnVsbD09PWk/T2JqZWN0LmNyZWF0ZShpKToobi5wcm90b3R5cGU9aS5wcm90b3R5cGUsbmV3IG4pfX0oKTshZnVuY3Rpb24odCl7dFt0LlRvdWNoPTBdPVwiVG91Y2hcIix0W3QuTW91c2U9MV09XCJNb3VzZVwiLHRbdC5QZW49Ml09XCJQZW5cIix0W3QuVW5rbm93bj0zXT1cIlVua25vd25cIn0oRGl8fChEaT17fSkpLGZ1bmN0aW9uKHQpe3RbdC5MZWZ0PTBdPVwiTGVmdFwiLHRbdC5NaWRkbGU9MV09XCJNaWRkbGVcIix0W3QuUmlnaHQ9Ml09XCJSaWdodFwiLHRbdC5Vbmtub3duPTNdPVwiVW5rbm93blwifShPaXx8KE9pPXt9KSksZnVuY3Rpb24odCl7dFt0LlBpeGVsPTBdPVwiUGl4ZWxcIix0W3QuTGluZT0xXT1cIkxpbmVcIix0W3QuUGFnZT0yXT1cIlBhZ2VcIn0oQml8fChCaT17fSkpLGZ1bmN0aW9uKHQpe3RbdC5DYW52YXM9MF09XCJDYW52YXNcIix0W3QuRG9jdW1lbnQ9MV09XCJEb2N1bWVudFwifShraXx8KGtpPXt9KSk7dmFyIExpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpLG4sbyxyLHMpe3ZhciBhPXQuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gYS5jb29yZGluYXRlcz1lLGEucG9pbnRlcj1pLGEuaW5kZXg9bixhLnBvaW50ZXJUeXBlPW8sYS5idXR0b249cixhLmV2PXMsYX1yZXR1cm4gSWkoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ3b3JsZFBvc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb29yZGluYXRlcy53b3JsZFBvcy5jbG9uZSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInBhZ2VQb3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29vcmRpbmF0ZXMucGFnZVBvcy5jbG9uZSgpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInNjcmVlblBvc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jb29yZGluYXRlcy5zY3JlZW5Qb3MuY2xvbmUoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJwb3NcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29vcmRpbmF0ZXMud29ybGRQb3MuY2xvbmUoKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5sYXlQYXRoPWZ1bmN0aW9uKHQpe2lmKHRoaXMucG9pbnRlci5pc0FjdG9yVW5kZXJQb2ludGVyKHQpKXt2YXIgZT10LmdldEFuY2VzdG9ycygpO3RoaXMuX3BhdGg9ZS5sZW5ndGg+dGhpcy5fcGF0aC5sZW5ndGg/ZTp0aGlzLl9wYXRofX0sZX0oVSksSGk9ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuX3BvaW50ZXJFdmVudFR5cGU9dH1yZXR1cm4gdC5wcm90b3R5cGUuY3JlYXRlPWZ1bmN0aW9uKHQsZSxpLG4sbyxyKXtyZXR1cm4gbmV3IHRoaXMuX3BvaW50ZXJFdmVudFR5cGUodCxlLGksbixvLHIpfSx0fSgpLHppPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXtyZXR1cm4gbnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBJaShlLHQpLGV9KExpKSxXaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9bnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBlLl9uYW1lPVwicG9pbnRlcnVwXCIsZX1yZXR1cm4gSWkoZSx0KSxlLnByb3RvdHlwZS5fb25BY3Rpb25FbmQ9ZnVuY3Rpb24odCl7dGhpcy5wb2ludGVyLmlzRHJhZ0VuZCYmdC5jYXB0dXJlUG9pbnRlci5jYXB0dXJlRHJhZ0V2ZW50cyYmdC5ldmVudERpc3BhdGNoZXIuZW1pdChcInBvaW50ZXJkcmFnZW5kXCIsdGhpcyl9LGV9KExpKSxqaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9bnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBlLl9uYW1lPVwicG9pbnRlcmRvd25cIixlfXJldHVybiBJaShlLHQpLGUucHJvdG90eXBlLl9vbkFjdGlvbkVuZD1mdW5jdGlvbih0KXt0aGlzLnBvaW50ZXIuaXNEcmFnU3RhcnQmJnQuY2FwdHVyZVBvaW50ZXIuY2FwdHVyZURyYWdFdmVudHMmJnQuZXZlbnREaXNwYXRjaGVyLmVtaXQoXCJwb2ludGVyZHJhZ3N0YXJ0XCIsdGhpcyl9LGV9KExpKSxVaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9bnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBlLl9uYW1lPVwicG9pbnRlcm1vdmVcIixlfXJldHVybiBJaShlLHQpLGUucHJvdG90eXBlLnByb3BhZ2F0ZT1mdW5jdGlvbigpe3ZhciB0PXRoaXM7dGhpcy5ldmVudFBhdGgubGVuZ3RoPyh0aGlzLmFjdGlvbigpLHRoaXMuYnViYmxlcyYmdGhpcy5wcm9wYWdhdGUoKSk6dGhpcy5wb2ludGVyLmhhc0FjdG9yc1VuZGVyUG9pbnRlciYmdGhpcy5wb2ludGVyLmdldEFjdG9yc1VuZGVyUG9pbnRlcigpLmZvckVhY2goZnVuY3Rpb24oZSl7dC5wb2ludGVyLmlzQWN0b3JVbmRlclBvaW50ZXIoZSl8fHQuX29uQWN0b3JMZWF2ZShlKX0pfSxlLnByb3RvdHlwZS5sYXlQYXRoPWZ1bmN0aW9uKHQpe2lmKHRoaXMucG9pbnRlci5pc0RyYWdnaW5nKXQ9dGhpcy5wb2ludGVyLmRyYWdUYXJnZXR8fHQ7ZWxzZSBpZighdGhpcy5wb2ludGVyLmlzQWN0b3JVbmRlclBvaW50ZXIodCkpcmV0dXJuO3ZhciBlPXQuZ2V0QW5jZXN0b3JzKCk7dGhpcy5fcGF0aD1lLmxlbmd0aD50aGlzLl9wYXRoLmxlbmd0aD9lOnRoaXMuX3BhdGh9LGUucHJvdG90eXBlLl9vbkFjdGlvblN0YXJ0PWZ1bmN0aW9uKHQpe3QuY2FwdHVyZVBvaW50ZXIuY2FwdHVyZU1vdmVFdmVudHMmJih0aGlzLnBvaW50ZXIuaXNBY3RvclVuZGVyUG9pbnRlcih0KSYmIXRoaXMucG9pbnRlci5oYXNBY3RvclVuZGVyUG9pbnRlckluTGlzdCh0KSYmdGhpcy5fb25BY3RvckVudGVyKHQpLHRoaXMucG9pbnRlci5pc0RyYWdnaW5nJiZ0LmNhcHR1cmVQb2ludGVyLmNhcHR1cmVEcmFnRXZlbnRzJiZ0LmV2ZW50RGlzcGF0Y2hlci5lbWl0KFwicG9pbnRlcmRyYWdtb3ZlXCIsdGhpcykpfSxlLnByb3RvdHlwZS5fb25BY3RvckVudGVyPWZ1bmN0aW9uKHQpe3ZhciBlPUdpKFwiZW50ZXJcIix0aGlzLmNvb3JkaW5hdGVzLHRoaXMucG9pbnRlcix0aGlzLmluZGV4LHRoaXMucG9pbnRlclR5cGUsdGhpcy5idXR0b24sdGhpcy5ldik7ZS5sYXlQYXRoKHQpLGUucHJvcGFnYXRlKCksdGhpcy5wb2ludGVyLmFkZEFjdG9yVW5kZXJQb2ludGVyKHQpLHRoaXMucG9pbnRlci5pc0RyYWdnaW5nJiYodGhpcy5wb2ludGVyLmRyYWdUYXJnZXQ9dCl9LGUucHJvdG90eXBlLl9vbkFjdG9yTGVhdmU9ZnVuY3Rpb24odCl7dmFyIGU9R2koXCJsZWF2ZVwiLHRoaXMuY29vcmRpbmF0ZXMsdGhpcy5wb2ludGVyLHRoaXMuaW5kZXgsdGhpcy5wb2ludGVyVHlwZSx0aGlzLmJ1dHRvbix0aGlzLmV2KTtlLmxheVBhdGgodCksZS5wcm9wYWdhdGUoKSx0aGlzLnBvaW50ZXIucmVtb3ZlQWN0b3JVbmRlclBvaW50ZXIodCl9LGV9KExpKSxOaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9bnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBlLl9uYW1lPVwicG9pbnRlcmVudGVyXCIsZX1yZXR1cm4gSWkoZSx0KSxlLnByb3RvdHlwZS5fb25BY3Rpb25TdGFydD1mdW5jdGlvbih0KXt0LmNhcHR1cmVQb2ludGVyLmNhcHR1cmVNb3ZlRXZlbnRzfSxlLnByb3RvdHlwZS5fb25BY3Rpb25FbmQ9ZnVuY3Rpb24odCl7dGhpcy5wb2ludGVyLmlzRHJhZ2dpbmcmJnQuY2FwdHVyZVBvaW50ZXIuY2FwdHVyZURyYWdFdmVudHMmJnQuZXZlbnREaXNwYXRjaGVyLmVtaXQoXCJwb2ludGVyZHJhZ2VudGVyXCIsdGhpcyl9LGV9KExpKSxxaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9bnVsbCE9PXQmJnQuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBlLl9uYW1lPVwicG9pbnRlcmxlYXZlXCIsZX1yZXR1cm4gSWkoZSx0KSxlLnByb3RvdHlwZS5sYXlQYXRoPWZ1bmN0aW9uKHQpe3ZhciBlPXQuZ2V0QW5jZXN0b3JzKCk7dGhpcy5fcGF0aD1lLmxlbmd0aD50aGlzLl9wYXRoLmxlbmd0aD9lOnRoaXMuX3BhdGh9LGUucHJvdG90eXBlLl9vbkFjdGlvblN0YXJ0PWZ1bmN0aW9uKHQpe3QuY2FwdHVyZVBvaW50ZXIuY2FwdHVyZU1vdmVFdmVudHN9LGUucHJvdG90eXBlLl9vbkFjdGlvbkVuZD1mdW5jdGlvbih0KXt0aGlzLnBvaW50ZXIuaXNEcmFnZ2luZyYmdC5jYXB0dXJlUG9pbnRlci5jYXB0dXJlRHJhZ0V2ZW50cyYmdC5ldmVudERpc3BhdGNoZXIuZW1pdChcInBvaW50ZXJkcmFnbGVhdmVcIix0aGlzKX0sZX0oTGkpLFhpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT1udWxsIT09dCYmdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIGUuX25hbWU9XCJwb2ludGVyY2FuY2VsXCIsZX1yZXR1cm4gSWkoZSx0KSxlfShMaSksVmk9ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGksbixvLHIscyxhLGgsYyx1LGwscCl7dmFyIGQ9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBkLng9ZSxkLnk9aSxkLnBhZ2VYPW4sZC5wYWdlWT1vLGQuc2NyZWVuWD1yLGQuc2NyZWVuWT1zLGQuaW5kZXg9YSxkLmRlbHRhWD1oLGQuZGVsdGFZPWMsZC5kZWx0YVo9dSxkLmRlbHRhTW9kZT1sLGQuZXY9cCxkfXJldHVybiBJaShlLHQpLGV9KFUpO2Z1bmN0aW9uIEdpKHQsZSxpLG4sbyxyLHMpe3ZhciBhO3N3aXRjaCh0KXtjYXNlXCJ1cFwiOmE9bmV3IEhpKFdpKTticmVhaztjYXNlXCJkb3duXCI6YT1uZXcgSGkoamkpO2JyZWFrO2Nhc2VcIm1vdmVcIjphPW5ldyBIaShVaSk7YnJlYWs7Y2FzZVwiY2FuY2VsXCI6YT1uZXcgSGkoWGkpO2JyZWFrO2Nhc2VcImVudGVyXCI6YT1uZXcgSGkoTmkpO2JyZWFrO2Nhc2VcImxlYXZlXCI6YT1uZXcgSGkocWkpfXJldHVybiBhLmNyZWF0ZShlLGksbixvLHIscyl9dmFyIFlpLEtpLFFpPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLl9wb2ludGVyRG93bj1bXSxpLl9wb2ludGVyVXA9W10saS5fcG9pbnRlck1vdmU9W10saS5fcG9pbnRlckNhbmNlbD1bXSxpLl93aGVlbD1bXSxpLl9wb2ludGVycz1bXSxpLl9hY3RpdmVQb2ludGVycz1bXSxpLl9lbmdpbmU9ZSxpLl9wb2ludGVycy5wdXNoKG5ldyBaaSksaS5fYWN0aXZlUG9pbnRlcnM9Wy0xXSxpLnByaW1hcnk9aS5fcG9pbnRlcnNbMF0saX1yZXR1cm4gSWkoZSx0KSxlLnByb3RvdHlwZS5vbj1mdW5jdGlvbihlLGkpe3QucHJvdG90eXBlLm9uLmNhbGwodGhpcyxlLGkpfSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKHQpeyh0PXR8fHRoaXMuX2VuZ2luZS5jYW52YXMpLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5faGFuZGxlVG91Y2hFdmVudChcImRvd25cIix0aGlzLl9wb2ludGVyRG93bikpLHQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsdGhpcy5faGFuZGxlVG91Y2hFdmVudChcInVwXCIsdGhpcy5fcG9pbnRlclVwKSksdC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2htb3ZlXCIsdGhpcy5faGFuZGxlVG91Y2hFdmVudChcIm1vdmVcIix0aGlzLl9wb2ludGVyTW92ZSkpLHQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoY2FuY2VsXCIsdGhpcy5faGFuZGxlVG91Y2hFdmVudChcImNhbmNlbFwiLHRoaXMuX3BvaW50ZXJDYW5jZWwpKSx3aW5kb3cuUG9pbnRlckV2ZW50Pyh0aGlzLl9lbmdpbmUuY2FudmFzLnN0eWxlLnRvdWNoQWN0aW9uPVwibm9uZVwiLHQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJkb3duXCIsdGhpcy5faGFuZGxlUG9pbnRlckV2ZW50KFwiZG93blwiLHRoaXMuX3BvaW50ZXJEb3duKSksdC5hZGRFdmVudExpc3RlbmVyKFwicG9pbnRlcnVwXCIsdGhpcy5faGFuZGxlUG9pbnRlckV2ZW50KFwidXBcIix0aGlzLl9wb2ludGVyVXApKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJwb2ludGVybW92ZVwiLHRoaXMuX2hhbmRsZVBvaW50ZXJFdmVudChcIm1vdmVcIix0aGlzLl9wb2ludGVyTW92ZSkpLHQuYWRkRXZlbnRMaXN0ZW5lcihcInBvaW50ZXJjYW5jZWxcIix0aGlzLl9oYW5kbGVQb2ludGVyRXZlbnQoXCJjYW5jZWxcIix0aGlzLl9wb2ludGVyQ2FuY2VsKSkpOndpbmRvdy5NU1BvaW50ZXJFdmVudD8odGhpcy5fZW5naW5lLmNhbnZhcy5zdHlsZS5tc1RvdWNoQWN0aW9uPVwibm9uZVwiLHQuYWRkRXZlbnRMaXN0ZW5lcihcIk1TUG9pbnRlckRvd25cIix0aGlzLl9oYW5kbGVQb2ludGVyRXZlbnQoXCJkb3duXCIsdGhpcy5fcG9pbnRlckRvd24pKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJNU1BvaW50ZXJVcFwiLHRoaXMuX2hhbmRsZVBvaW50ZXJFdmVudChcInVwXCIsdGhpcy5fcG9pbnRlclVwKSksdC5hZGRFdmVudExpc3RlbmVyKFwiTVNQb2ludGVyTW92ZVwiLHRoaXMuX2hhbmRsZVBvaW50ZXJFdmVudChcIm1vdmVcIix0aGlzLl9wb2ludGVyTW92ZSkpLHQuYWRkRXZlbnRMaXN0ZW5lcihcIk1TUG9pbnRlckNhbmNlbFwiLHRoaXMuX2hhbmRsZVBvaW50ZXJFdmVudChcImNhbmNlbFwiLHRoaXMuX3BvaW50ZXJDYW5jZWwpKSk6KHQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLHRoaXMuX2hhbmRsZU1vdXNlRXZlbnQoXCJkb3duXCIsdGhpcy5fcG9pbnRlckRvd24pKSx0LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsdGhpcy5faGFuZGxlTW91c2VFdmVudChcInVwXCIsdGhpcy5fcG9pbnRlclVwKSksdC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsdGhpcy5faGFuZGxlTW91c2VFdmVudChcIm1vdmVcIix0aGlzLl9wb2ludGVyTW92ZSkpKSxcIm9ud2hlZWxcImluIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik/dC5hZGRFdmVudExpc3RlbmVyKFwid2hlZWxcIix0aGlzLl9oYW5kbGVXaGVlbEV2ZW50KFwid2hlZWxcIix0aGlzLl93aGVlbCkpOnZvaWQgMCE9PWRvY3VtZW50Lm9ubW91c2V3aGVlbD90LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXdoZWVsXCIsdGhpcy5faGFuZGxlV2hlZWxFdmVudChcIndoZWVsXCIsdGhpcy5fd2hlZWwpKTp0LmFkZEV2ZW50TGlzdGVuZXIoXCJNb3pNb3VzZVBpeGVsU2Nyb2xsXCIsdGhpcy5faGFuZGxlV2hlZWxFdmVudChcIndoZWVsXCIsdGhpcy5fd2hlZWwpKX0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7dGhpcy5fcG9pbnRlclVwLmxlbmd0aD0wLHRoaXMuX3BvaW50ZXJEb3duLmxlbmd0aD0wLHRoaXMuX3BvaW50ZXJNb3ZlLmxlbmd0aD0wLHRoaXMuX3BvaW50ZXJDYW5jZWwubGVuZ3RoPTAsdGhpcy5fd2hlZWwubGVuZ3RoPTA7Zm9yKHZhciB0PTA7dDx0aGlzLl9wb2ludGVycy5sZW5ndGg7dCsrKXRoaXMuX3BvaW50ZXJzW3RdLnVwZGF0ZSgpfSxlLnByb3RvdHlwZS5hdD1mdW5jdGlvbih0KXtpZih0Pj10aGlzLl9wb2ludGVycy5sZW5ndGgpZm9yKHZhciBlPXRoaXMuX3BvaW50ZXJzLmxlbmd0aC0xLGk9dDtlPGk7ZSsrKXRoaXMuX3BvaW50ZXJzLnB1c2gobmV3IFppKSx0aGlzLl9hY3RpdmVQb2ludGVycy5wdXNoKC0xKTtyZXR1cm4gdGhpcy5fcG9pbnRlcnNbdF19LGUucHJvdG90eXBlLmNvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3BvaW50ZXJzLmxlbmd0aH0sZS5wcm90b3R5cGUucHJvcGFnYXRlPWZ1bmN0aW9uKCl7dGhpcy5fcHJvcGFnYXRlUG9pbnRlckV2ZW50KHRoaXMuX3BvaW50ZXJEb3duKSx0aGlzLl9wcm9wYWdhdGVQb2ludGVyRXZlbnQodGhpcy5fcG9pbnRlclVwKSx0aGlzLl9wcm9wYWdhdGVQb2ludGVyRXZlbnQodGhpcy5fcG9pbnRlck1vdmUpLHRoaXMuX3Byb3BhZ2F0ZVBvaW50ZXJFdmVudCh0aGlzLl9wb2ludGVyQ2FuY2VsKSx0aGlzLl9wcm9wYWdhdGVXaGVlbEV2ZW50KFwicG9pbnRlcndoZWVsXCIsdGhpcy5fd2hlZWwpfSxlLnByb3RvdHlwZS5yZXZpc2VQb2ludGVyRXZlbnRzUGF0aHM9ZnVuY3Rpb24odCl7dGhpcy5fcmV2aXNlUG9pbnRlckV2ZW50UGF0aCh0LHRoaXMuX3BvaW50ZXJEb3duKSx0aGlzLl9yZXZpc2VQb2ludGVyRXZlbnRQYXRoKHQsdGhpcy5fcG9pbnRlclVwKSx0aGlzLl9yZXZpc2VQb2ludGVyRXZlbnRQYXRoKHQsdGhpcy5fcG9pbnRlck1vdmUpLHRoaXMuX3JldmlzZVBvaW50ZXJFdmVudFBhdGgodCx0aGlzLl9wb2ludGVyQ2FuY2VsKSx0aGlzLl92YWxpZGF0ZVdoZWVsRXZlbnRQYXRoKHRoaXMuX3doZWVsLHQpfSxlLnByb3RvdHlwZS5fcHJvcGFnYXRlUG9pbnRlckV2ZW50PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT10Lmxlbmd0aCxpPTA7aTxlO2krKyl0W2ldLnByb3BhZ2F0ZSgpfSxlLnByb3RvdHlwZS5fcmV2aXNlUG9pbnRlckV2ZW50UGF0aD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgaT1lLmxlbmd0aCxuPTA7bjxpO24rKyl7ZVtuXS5sYXlQYXRoKHQpfX0sZS5wcm90b3R5cGUuX3ZhbGlkYXRlV2hlZWxFdmVudFBhdGg9ZnVuY3Rpb24odCxlKXtmb3IodmFyIGk9MDtpPHQubGVuZ3RoO2krKyl7dmFyIG49dFtpXSxvPSF4aShlKTtlLmNvbnRhaW5zKG4ueCxuLnksbykmJm4ubGF5UGF0aChlKX19LGUucHJvdG90eXBlLl9wcm9wYWdhdGVXaGVlbEV2ZW50PWZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpLG49ZS5sZW5ndGgsbz0wO288bjtvKyspc3dpdGNoKGk9ZVtvXSx0KXtjYXNlXCJwb2ludGVyd2hlZWxcIjp0aGlzLl9wcm9wYWdhdGVXaGVlbFBvaW50ZXJFdmVudChpKX19LGUucHJvdG90eXBlLl9wcm9wYWdhdGVXaGVlbFBvaW50ZXJFdmVudD1mdW5jdGlvbih0KXt0LmV2ZW50UGF0aC5sZW5ndGgmJih0LmV2ZW50UGF0aC5wb3AoKS5ldmVudERpc3BhdGNoZXIuZW1pdChcInBvaW50ZXJ3aGVlbFwiLHQpLHQuYnViYmxlcyYmdGhpcy5fcHJvcGFnYXRlV2hlZWxQb2ludGVyRXZlbnQodCkpfSxlLnByb3RvdHlwZS5faGFuZGxlTW91c2VFdmVudD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKG4pe24ucHJldmVudERlZmF1bHQoKTt2YXIgbz1pLmF0KDApLHI9TC5mcm9tUGFnZVBvc2l0aW9uKG4ucGFnZVgsbi5wYWdlWSxpLl9lbmdpbmUpLHM9R2kodCxyLG8sMCxEaS5Nb3VzZSxuLmJ1dHRvbixuKTtlLnB1c2gocyksby5ldmVudERpc3BhdGNoZXIuZW1pdCh0LHMpfX0sZS5wcm90b3R5cGUuX2hhbmRsZVRvdWNoRXZlbnQ9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzO3JldHVybiBmdW5jdGlvbihuKXtuLnByZXZlbnREZWZhdWx0KCk7Zm9yKHZhciBvPTAscj1uLmNoYW5nZWRUb3VjaGVzLmxlbmd0aDtvPHI7bysrKXt2YXIgcz1pLl9wb2ludGVycy5sZW5ndGg+MT9pLl9nZXRQb2ludGVySW5kZXgobi5jaGFuZ2VkVG91Y2hlc1tvXS5pZGVudGlmaWVyKTowO2lmKC0xIT09cyl7dmFyIGE9aS5hdChzKSxoPUwuZnJvbVBhZ2VQb3NpdGlvbihuLmNoYW5nZWRUb3VjaGVzW29dLnBhZ2VYLG4uY2hhbmdlZFRvdWNoZXNbb10ucGFnZVksaS5fZW5naW5lKSxjPUdpKHQsaCxhLHMsRGkuVG91Y2gsT2kuVW5rbm93bixuKTtlLnB1c2goYyksYS5ldmVudERpc3BhdGNoZXIuZW1pdCh0LGMpLGkuX3BvaW50ZXJzLmxlbmd0aD4xJiYoXCJ1cFwiPT09dD9pLl9hY3RpdmVQb2ludGVyc1tzXT0tMTpcImRvd25cIj09PXQmJihpLl9hY3RpdmVQb2ludGVyc1tzXT1uLmNoYW5nZWRUb3VjaGVzW29dLmlkZW50aWZpZXIpKX19fX0sZS5wcm90b3R5cGUuX2hhbmRsZVBvaW50ZXJFdmVudD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXM7cmV0dXJuIGZ1bmN0aW9uKG4pe24ucHJldmVudERlZmF1bHQoKTt2YXIgbz1pLl9wb2ludGVycy5sZW5ndGg+MT9pLl9nZXRQb2ludGVySW5kZXgobi5wb2ludGVySWQpOjA7aWYoLTEhPT1vKXt2YXIgcj1pLmF0KG8pLHM9TC5mcm9tUGFnZVBvc2l0aW9uKG4ucGFnZVgsbi5wYWdlWSxpLl9lbmdpbmUpLGE9R2kodCxzLHIsbyxpLl9zdHJpbmdUb1BvaW50ZXJUeXBlKG4ucG9pbnRlclR5cGUpLG4uYnV0dG9uLG4pO2UucHVzaChhKSxyLmV2ZW50RGlzcGF0Y2hlci5lbWl0KHQsYSksaS5fcG9pbnRlcnMubGVuZ3RoPjEmJihcInVwXCI9PT10P2kuX2FjdGl2ZVBvaW50ZXJzW29dPS0xOlwiZG93blwiPT09dCYmKGkuX2FjdGl2ZVBvaW50ZXJzW29dPW4ucG9pbnRlcklkKSl9fX0sZS5wcm90b3R5cGUuX2hhbmRsZVdoZWVsRXZlbnQ9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzO3JldHVybiBmdW5jdGlvbihuKXsoaS5fZW5naW5lLnBhZ2VTY3JvbGxQcmV2ZW50aW9uTW9kZT09PW5uLkFsbHx8aS5fZW5naW5lLnBhZ2VTY3JvbGxQcmV2ZW50aW9uTW9kZT09PW5uLkNhbnZhcyYmbi50YXJnZXQ9PT1pLl9lbmdpbmUuY2FudmFzKSYmbi5wcmV2ZW50RGVmYXVsdCgpO3ZhciBvPW4ucGFnZVgtUChpLl9lbmdpbmUuY2FudmFzKS54LHI9bi5wYWdlWS1QKGkuX2VuZ2luZS5jYW52YXMpLnkscz1pLl9lbmdpbmUuc2NyZWVuVG9Xb3JsZENvb3JkaW5hdGVzKG5ldyBrKG8scikpLGE9bi5kZWx0YVh8fC0uMDI1Km4ud2hlZWxEZWx0YVh8fDAsaD1uLmRlbHRhWXx8LS4wMjUqbi53aGVlbERlbHRhWXx8LS4wMjUqbi53aGVlbERlbHRhfHxuLmRldGFpbHx8MCxjPW4uZGVsdGFafHwwLHU9QmkuUGl4ZWw7bi5kZWx0YU1vZGUmJigxPT09bi5kZWx0YU1vZGU/dT1CaS5MaW5lOjI9PT1uLmRlbHRhTW9kZSYmKHU9QmkuUGFnZSkpO3ZhciBsPW5ldyBWaShzLngscy55LG4ucGFnZVgsbi5wYWdlWSxvLHIsMCxhLGgsYyx1LG4pO2UucHVzaChsKSxpLmF0KDApLmV2ZW50RGlzcGF0Y2hlci5lbWl0KHQsbCl9fSxlLnByb3RvdHlwZS5fZ2V0UG9pbnRlckluZGV4PWZ1bmN0aW9uKHQpe3ZhciBlO2lmKChlPXRoaXMuX2FjdGl2ZVBvaW50ZXJzLmluZGV4T2YodCkpPi0xKXJldHVybiBlO2Zvcih2YXIgaT0wO2k8dGhpcy5fYWN0aXZlUG9pbnRlcnMubGVuZ3RoO2krKylpZigtMT09PXRoaXMuX2FjdGl2ZVBvaW50ZXJzW2ldKXJldHVybiBpO3JldHVybi0xfSxlLnByb3RvdHlwZS5fc3RyaW5nVG9Qb2ludGVyVHlwZT1mdW5jdGlvbih0KXtzd2l0Y2godCl7Y2FzZVwidG91Y2hcIjpyZXR1cm4gRGkuVG91Y2g7Y2FzZVwibW91c2VcIjpyZXR1cm4gRGkuTW91c2U7Y2FzZVwicGVuXCI6cmV0dXJuIERpLlBlbjtkZWZhdWx0OnJldHVybiBEaS5Vbmtub3dufX0sZX0oeHQpLFppPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoKXt2YXIgZT10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIGUuX2lzRG93bj0hMSxlLl93YXNEb3duPSExLGUuX2FjdG9yc1VuZGVyUG9pbnRlcj17bGVuZ3RoOjB9LGUubGFzdFBhZ2VQb3M9bnVsbCxlLmxhc3RTY3JlZW5Qb3M9bnVsbCxlLmxhc3RXb3JsZFBvcz1udWxsLGUuZHJhZ1RhcmdldD1udWxsLGUub24oXCJtb3ZlXCIsZS5fb25Qb2ludGVyTW92ZSksZS5vbihcImRvd25cIixlLl9vblBvaW50ZXJEb3duKSxlLm9uKFwidXBcIixlLl9vblBvaW50ZXJVcCksZX1yZXR1cm4gSWkoZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpc0RyYWdnaW5nXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0Rvd259LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaXNEcmFnU3RhcnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMuX3dhc0Rvd24mJnRoaXMuX2lzRG93bn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpc0RyYWdFbmRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dhc0Rvd24mJiF0aGlzLl9pc0Rvd259LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiaGFzQWN0b3JzVW5kZXJQb2ludGVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiEhdGhpcy5fYWN0b3JzVW5kZXJQb2ludGVyLmxlbmd0aH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXt0aGlzLl93YXNEb3duJiYhdGhpcy5faXNEb3duP3RoaXMuX3dhc0Rvd249ITE6IXRoaXMuX3dhc0Rvd24mJnRoaXMuX2lzRG93biYmKHRoaXMuX3dhc0Rvd249ITApfSxlLnByb3RvdHlwZS5hZGRBY3RvclVuZGVyUG9pbnRlcj1mdW5jdGlvbih0KXt0aGlzLmhhc0FjdG9yVW5kZXJQb2ludGVySW5MaXN0KHQpfHwodGhpcy5fYWN0b3JzVW5kZXJQb2ludGVyW3QuaWRdPXQsdGhpcy5fYWN0b3JzVW5kZXJQb2ludGVyLmxlbmd0aCs9MSl9LGUucHJvdG90eXBlLnJlbW92ZUFjdG9yVW5kZXJQb2ludGVyPWZ1bmN0aW9uKHQpe3RoaXMuaGFzQWN0b3JVbmRlclBvaW50ZXJJbkxpc3QodCkmJihkZWxldGUgdGhpcy5fYWN0b3JzVW5kZXJQb2ludGVyW3QuaWRdLHRoaXMuX2FjdG9yc1VuZGVyUG9pbnRlci5sZW5ndGgtPTEpfSxlLnByb3RvdHlwZS5nZXRBY3RvcnNVbmRlclBvaW50ZXI9ZnVuY3Rpb24oKXt2YXIgdD1bXTtmb3IodmFyIGUgaW4gdGhpcy5fYWN0b3JzVW5kZXJQb2ludGVyKWlmKFwibGVuZ3RoXCIhPT1lKXt2YXIgaT10aGlzLl9hY3RvcnNVbmRlclBvaW50ZXJbZV07dC5wdXNoKGkpfXJldHVybiB0fSxlLnByb3RvdHlwZS5pc0FjdG9yVW5kZXJQb2ludGVyPWZ1bmN0aW9uKHQpe3JldHVybiEhdGhpcy5sYXN0V29ybGRQb3MmJnQuY29udGFpbnModGhpcy5sYXN0V29ybGRQb3MueCx0aGlzLmxhc3RXb3JsZFBvcy55LCF4aSh0KSl9LGUucHJvdG90eXBlLmhhc0FjdG9yVW5kZXJQb2ludGVySW5MaXN0PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLl9hY3RvcnNVbmRlclBvaW50ZXIuaGFzT3duUHJvcGVydHkodC5pZC50b1N0cmluZygpKX0sZS5wcm90b3R5cGUuX29uUG9pbnRlck1vdmU9ZnVuY3Rpb24odCl7dGhpcy5sYXN0UGFnZVBvcz1uZXcgayh0LnBhZ2VQb3MueCx0LnBhZ2VQb3MueSksdGhpcy5sYXN0U2NyZWVuUG9zPW5ldyBrKHQuc2NyZWVuUG9zLngsdC5zY3JlZW5Qb3MueSksdGhpcy5sYXN0V29ybGRQb3M9bmV3IGsodC53b3JsZFBvcy54LHQud29ybGRQb3MueSl9LGUucHJvdG90eXBlLl9vblBvaW50ZXJEb3duPWZ1bmN0aW9uKHQpe3RoaXMubGFzdFBhZ2VQb3M9bmV3IGsodC5wYWdlUG9zLngsdC5wYWdlUG9zLnkpLHRoaXMubGFzdFNjcmVlblBvcz1uZXcgayh0LnNjcmVlblBvcy54LHQuc2NyZWVuUG9zLnkpLHRoaXMubGFzdFdvcmxkUG9zPW5ldyBrKHQud29ybGRQb3MueCx0LndvcmxkUG9zLnkpLHRoaXMuX2lzRG93bj0hMH0sZS5wcm90b3R5cGUuX29uUG9pbnRlclVwPWZ1bmN0aW9uKCl7dGhpcy5faXNEb3duPSExLHRoaXMuZHJhZ1RhcmdldD1udWxsfSxlfSh4dCksSmk9ZnVuY3Rpb24oKXt2YXIgdD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkgaW4gZSllLmhhc093blByb3BlcnR5KGkpJiYodFtpXT1lW2ldKX07cmV0dXJuIGZ1bmN0aW9uKGUsaSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsaSksZS5wcm90b3R5cGU9bnVsbD09PWk/T2JqZWN0LmNyZWF0ZShpKToobi5wcm90b3R5cGU9aS5wcm90b3R5cGUsbmV3IG4pfX0oKSwkaT1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGU9dC5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBlLmVuYWJsZWQ9ITEsZS5zdXBwb3J0ZWQ9ISFuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMsZS5fZ2FtZVBhZFRpbWVTdGFtcHM9WzAsMCwwLDBdLGUuX29sZFBhZHM9W10sZS5fcGFkcz1bXSxlLl9pbml0U3VjY2Vzcz0hMSxlLl9uYXZpZ2F0b3I9bmF2aWdhdG9yLGUuX21pbmltdW1Db25maWd1cmF0aW9uPW51bGwsZX1yZXR1cm4gSmkoZSx0KSxlLnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKCl7dGhpcy5zdXBwb3J0ZWQmJih0aGlzLl9pbml0U3VjY2Vzc3x8KHRoaXMuX29sZFBhZHM9dGhpcy5fY2xvbmVQYWRzKHRoaXMuX25hdmlnYXRvci5nZXRHYW1lcGFkcygpKSx0aGlzLl9vbGRQYWRzLmxlbmd0aCYmdGhpcy5fb2xkUGFkc1swXSYmKHRoaXMuX2luaXRTdWNjZXNzPSEwKSkpfSxlLnByb3RvdHlwZS5zZXRNaW5pbXVtR2FtZXBhZENvbmZpZ3VyYXRpb249ZnVuY3Rpb24odCl7dGhpcy5fZW5hYmxlQW5kVXBkYXRlKCksdGhpcy5fbWluaW11bUNvbmZpZ3VyYXRpb249dH0sZS5wcm90b3R5cGUuX2VuYWJsZUFuZFVwZGF0ZT1mdW5jdGlvbigpe3RoaXMuZW5hYmxlZHx8KHRoaXMuZW5hYmxlZD0hMCx0aGlzLnVwZGF0ZSgpKX0sZS5wcm90b3R5cGUuX2lzR2FtZXBhZFZhbGlkPWZ1bmN0aW9uKHQpe2lmKCF0aGlzLl9taW5pbXVtQ29uZmlndXJhdGlvbilyZXR1cm4hMDtpZighdClyZXR1cm4hMTt2YXIgZT10LmF4ZXMuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB2b2lkIDAhPT10eXBlb2YgdH0pLmxlbmd0aCxpPXQuYnV0dG9ucy5maWx0ZXIoZnVuY3Rpb24odCl7cmV0dXJuIHZvaWQgMCE9PXR5cGVvZiB0fSkubGVuZ3RoO3JldHVybiBlPj10aGlzLl9taW5pbXVtQ29uZmlndXJhdGlvbi5heGlzJiZpPj10aGlzLl9taW5pbXVtQ29uZmlndXJhdGlvbi5idXR0b25zJiZ0LmNvbm5lY3RlZH0sZS5wcm90b3R5cGUub249ZnVuY3Rpb24oZSxpKXt0aGlzLl9lbmFibGVBbmRVcGRhdGUoKSx0LnByb3RvdHlwZS5vbi5jYWxsKHRoaXMsZSxpKX0sZS5wcm90b3R5cGUub2ZmPWZ1bmN0aW9uKGUsaSl7dGhpcy5fZW5hYmxlQW5kVXBkYXRlKCksdC5wcm90b3R5cGUub2ZmLmNhbGwodGhpcyxlLGkpfSxlLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oKXtpZih0aGlzLmVuYWJsZWQmJnRoaXMuc3VwcG9ydGVkKXt0aGlzLmluaXQoKTtmb3IodmFyIHQ9dGhpcy5fbmF2aWdhdG9yLmdldEdhbWVwYWRzKCksZT0wO2U8dC5sZW5ndGg7ZSsrKWlmKHRbZV0pe2lmKCF0aGlzLmF0KGUpLmNvbm5lY3RlZCYmdGhpcy5faXNHYW1lcGFkVmFsaWQodFtlXSkmJnRoaXMuZXZlbnREaXNwYXRjaGVyLmVtaXQoXCJjb25uZWN0XCIsbmV3IGl0KGUsdGhpcy5hdChlKSkpLHRoaXMuYXQoZSkuY29ubmVjdGVkPSEwLCF0W2VdLnRpbWVzdGFtcHx8dFtlXS50aW1lc3RhbXAhPT10aGlzLl9nYW1lUGFkVGltZVN0YW1wc1tlXSl7dmFyIGksbixvLHIscztmb3IoaSBpbiB0aGlzLl9nYW1lUGFkVGltZVN0YW1wc1tlXT10W2VdLnRpbWVzdGFtcCx0aGlzLmF0KGUpLm5hdmlnYXRvckdhbWVwYWQ9dFtlXSxZaSlcIm51bWJlclwiPT10eXBlb2Yobj1ZaVtpXSkmJnRbZV0uYnV0dG9uc1tuXSYmKHM9dFtlXS5idXR0b25zW25dLnZhbHVlKSE9PXRoaXMuX29sZFBhZHNbZV0uZ2V0QnV0dG9uKG4pJiYodFtlXS5idXR0b25zW25dLnByZXNzZWQ/KHRoaXMuYXQoZSkudXBkYXRlQnV0dG9uKG4scyksdGhpcy5hdChlKS5ldmVudERpc3BhdGNoZXIuZW1pdChcImJ1dHRvblwiLG5ldyBvdChuLHMsdGhpcy5hdChlKSkpKTp0aGlzLmF0KGUpLnVwZGF0ZUJ1dHRvbihuLDApKTtmb3IobyBpbiBLaSlcIm51bWJlclwiPT10eXBlb2Yocj1LaVtvXSkmJihzPXRbZV0uYXhlc1tyXSkhPT10aGlzLl9vbGRQYWRzW2VdLmdldEF4ZXMocikmJih0aGlzLmF0KGUpLnVwZGF0ZUF4ZXMocixzKSx0aGlzLmF0KGUpLmV2ZW50RGlzcGF0Y2hlci5lbWl0KFwiYXhpc1wiLG5ldyBydChyLHMsdGhpcy5hdChlKSkpKTt0aGlzLl9vbGRQYWRzW2VdPXRoaXMuX2Nsb25lUGFkKHRbZV0pfX1lbHNle3ZhciBhPXRoaXMuYXQoZSk7YS5jb25uZWN0ZWQmJnRoaXMuZXZlbnREaXNwYXRjaGVyLmVtaXQoXCJkaXNjb25uZWN0XCIsbmV3IG50KGUsYSkpLGEuY29ubmVjdGVkPSExfX19LGUucHJvdG90eXBlLmF0PWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2VuYWJsZUFuZFVwZGF0ZSgpLHQ+PXRoaXMuX3BhZHMubGVuZ3RoKWZvcih2YXIgZT10aGlzLl9wYWRzLmxlbmd0aC0xLGk9dDtlPGk7ZSsrKXRoaXMuX3BhZHMucHVzaChuZXcgdG4pLHRoaXMuX29sZFBhZHMucHVzaChuZXcgdG4pO3JldHVybiB0aGlzLl9wYWRzW3RdfSxlLnByb3RvdHlwZS5nZXRWYWxpZEdhbWVwYWRzPWZ1bmN0aW9uKCl7dGhpcy5fZW5hYmxlQW5kVXBkYXRlKCk7Zm9yKHZhciB0PVtdLGU9MDtlPHRoaXMuX3BhZHMubGVuZ3RoO2UrKyl0aGlzLl9pc0dhbWVwYWRWYWxpZCh0aGlzLmF0KGUpLm5hdmlnYXRvckdhbWVwYWQpJiZ0aGlzLmF0KGUpLmNvbm5lY3RlZCYmdC5wdXNoKHRoaXMuYXQoZSkpO3JldHVybiB0fSxlLnByb3RvdHlwZS5jb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9wYWRzLmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4gdC5jb25uZWN0ZWR9KS5sZW5ndGh9LGUucHJvdG90eXBlLl9jbG9uZVBhZHM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLGk9MCxuPXQubGVuZ3RoO2k8bjtpKyspZS5wdXNoKHRoaXMuX2Nsb25lUGFkKHRbaV0pKTtyZXR1cm4gZX0sZS5wcm90b3R5cGUuX2Nsb25lUGFkPWZ1bmN0aW9uKHQpe3ZhciBlLGksbj1uZXcgdG47aWYoIXQpcmV0dXJuIG47Zm9yKGU9MCxpPXQuYnV0dG9ucy5sZW5ndGg7ZTxpO2UrKyl0LmJ1dHRvbnNbZV0mJm4udXBkYXRlQnV0dG9uKGUsdC5idXR0b25zW2VdLnZhbHVlKTtmb3IoZT0wLGk9dC5heGVzLmxlbmd0aDtlPGk7ZSsrKW4udXBkYXRlQXhlcyhlLHQuYXhlc1tlXSk7cmV0dXJuIG59LGUuTWluQXhpc01vdmVUaHJlc2hvbGQ9LjA1LGV9KHh0KSx0bj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKCl7dmFyIGUsaT10LmNhbGwodGhpcyl8fHRoaXM7Zm9yKGkuY29ubmVjdGVkPSExLGkuX2J1dHRvbnM9bmV3IEFycmF5KDE2KSxpLl9heGVzPW5ldyBBcnJheSg0KSxlPTA7ZTxpLl9idXR0b25zLmxlbmd0aDtlKyspaS5fYnV0dG9uc1tlXT0wO2ZvcihlPTA7ZTxpLl9heGVzLmxlbmd0aDtlKyspaS5fYXhlc1tlXT0wO3JldHVybiBpfXJldHVybiBKaShlLHQpLGUucHJvdG90eXBlLmlzQnV0dG9uUHJlc3NlZD1mdW5jdGlvbih0LGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0xKSx0aGlzLl9idXR0b25zW3RdPj1lfSxlLnByb3RvdHlwZS5nZXRCdXR0b249ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuX2J1dHRvbnNbdF19LGUucHJvdG90eXBlLmdldEF4ZXM9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fYXhlc1t0XTtyZXR1cm4gTWF0aC5hYnMoZSk8JGkuTWluQXhpc01vdmVUaHJlc2hvbGQ/MDplfSxlLnByb3RvdHlwZS51cGRhdGVCdXR0b249ZnVuY3Rpb24odCxlKXt0aGlzLl9idXR0b25zW3RdPWV9LGUucHJvdG90eXBlLnVwZGF0ZUF4ZXM9ZnVuY3Rpb24odCxlKXt0aGlzLl9heGVzW3RdPWV9LGV9KHh0KTshZnVuY3Rpb24odCl7dFt0LkZhY2UxPTBdPVwiRmFjZTFcIix0W3QuRmFjZTI9MV09XCJGYWNlMlwiLHRbdC5GYWNlMz0yXT1cIkZhY2UzXCIsdFt0LkZhY2U0PTNdPVwiRmFjZTRcIix0W3QuTGVmdEJ1bXBlcj00XT1cIkxlZnRCdW1wZXJcIix0W3QuUmlnaHRCdW1wZXI9NV09XCJSaWdodEJ1bXBlclwiLHRbdC5MZWZ0VHJpZ2dlcj02XT1cIkxlZnRUcmlnZ2VyXCIsdFt0LlJpZ2h0VHJpZ2dlcj03XT1cIlJpZ2h0VHJpZ2dlclwiLHRbdC5TZWxlY3Q9OF09XCJTZWxlY3RcIix0W3QuU3RhcnQ9OV09XCJTdGFydFwiLHRbdC5MZWZ0U3RpY2s9MTBdPVwiTGVmdFN0aWNrXCIsdFt0LlJpZ2h0U3RpY2s9MTFdPVwiUmlnaHRTdGlja1wiLHRbdC5EcGFkVXA9MTJdPVwiRHBhZFVwXCIsdFt0LkRwYWREb3duPTEzXT1cIkRwYWREb3duXCIsdFt0LkRwYWRMZWZ0PTE0XT1cIkRwYWRMZWZ0XCIsdFt0LkRwYWRSaWdodD0xNV09XCJEcGFkUmlnaHRcIn0oWWl8fChZaT17fSkpLGZ1bmN0aW9uKHQpe3RbdC5MZWZ0U3RpY2tYPTBdPVwiTGVmdFN0aWNrWFwiLHRbdC5MZWZ0U3RpY2tZPTFdPVwiTGVmdFN0aWNrWVwiLHRbdC5SaWdodFN0aWNrWD0yXT1cIlJpZ2h0U3RpY2tYXCIsdFt0LlJpZ2h0U3RpY2tZPTNdPVwiUmlnaHRTdGlja1lcIn0oS2l8fChLaT17fSkpO3ZhciBlbixubixvbj1mdW5jdGlvbigpe3ZhciB0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiBlKWUuaGFzT3duUHJvcGVydHkoaSkmJih0W2ldPWVbaV0pfTtyZXR1cm4gZnVuY3Rpb24oZSxpKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxpKSxlLnByb3RvdHlwZT1udWxsPT09aT9PYmplY3QuY3JlYXRlKGkpOihuLnByb3RvdHlwZT1pLnByb3RvdHlwZSxuZXcgbil9fSgpOyFmdW5jdGlvbih0KXt0W3QuRnVsbFNjcmVlbj0wXT1cIkZ1bGxTY3JlZW5cIix0W3QuQ29udGFpbmVyPTFdPVwiQ29udGFpbmVyXCIsdFt0LkZpeGVkPTJdPVwiRml4ZWRcIix0W3QuUG9zaXRpb249M109XCJQb3NpdGlvblwifShlbnx8KGVuPXt9KSksZnVuY3Rpb24odCl7dFt0Lk5vbmU9MF09XCJOb25lXCIsdFt0LkNhbnZhcz0xXT1cIkNhbnZhc1wiLHRbdC5BbGw9Ml09XCJBbGxcIn0obm58fChubj17fSkpO3ZhciBybixzbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGkpe3ZhciBuPXQuY2FsbCh0aGlzKXx8dGhpcztuLl9oYXNTdGFydGVkPSExLG4uZGVidWc9bmV3IEVpLG4ucG9zdFByb2Nlc3NvcnM9W10sbi5zY2VuZXM9e30sbi5fYW5pbWF0aW9ucz1bXSxuLmlzRnVsbHNjcmVlbj0hMSxuLmRpc3BsYXlNb2RlPWVuLkZ1bGxTY3JlZW4sbi5fc3VwcHJlc3NIaURQSVNjYWxpbmc9ITEsbi5fc3VwcHJlc3NQbGF5QnV0dG9uPSExLG4ucGF1c2VBdWRpb1doZW5IaWRkZW49ITAsbi5pc0RlYnVnPSExLG4uZGVidWdDb2xvcj1uZXcgUHQoMjU1LDI1NSwyNTUpLG4ub25GYXRhbEV4Y2VwdGlvbj1mdW5jdGlvbih0KXtPdC5nZXRJbnN0YW5jZSgpLmZhdGFsKHQpfSxuLl9pc1Ntb290aGluZ0VuYWJsZWQ9ITAsbi5fdGltZXNjYWxlPTEsbi5faXNMb2FkaW5nPSExLG4uX2lzSW5pdGlhbGl6ZWQ9ITEsaT1fKHt9LGUuX0RlZmF1bHRFbmdpbmVPcHRpb25zLGkpO3ZhciBvPW5ldyBaZTtpZighaS5zdXBwcmVzc01pbmltdW1Ccm93c2VyRmVhdHVyZURldGVjdGlvbiYmIShuLl9jb21wYXRpYmxlPW8udGVzdCgpKSl7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpZihyLmlubmVyVGV4dD1cIlNvcnJ5LCB5b3VyIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBhbGwgdGhlIGZlYXR1cmVzIG5lZWRlZCBmb3IgRXhjYWxpYnVyXCIsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyKSxvLmZhaWxlZFRlc3RzLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtlLmlubmVyVGV4dD1cIkJyb3dzZXIgZmVhdHVyZSBtaXNzaW5nIFwiK3QsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlKX0pLGkuY2FudmFzRWxlbWVudElkKXt2YXIgcz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpLmNhbnZhc0VsZW1lbnRJZCk7cyYmcy5wYXJlbnRFbGVtZW50LnJlbW92ZUNoaWxkKHMpfXJldHVybiBufXJldHVybiBuLl9jb21wYXRpYmxlPSEwLGNvbnNvbGUubG9nJiYhaS5zdXBwcmVzc0NvbnNvbGVCb290TWVzc2FnZSYmKGNvbnNvbGUubG9nKFwiJWNQb3dlcmVkIGJ5IEV4Y2FsaWJ1ci5qcyAodlwiK0huK1wiKVwiLFwiYmFja2dyb3VuZDogIzE3NkJBQTsgY29sb3I6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA1cHg7IHBhZGRpbmc6IDE1cHg7IGZvbnQtc2l6ZTogMS41ZW07IGxpbmUtaGVpZ2h0OiA4MHB4O1wiKSxjb25zb2xlLmxvZyhcIlxcbiAgICAgIC98IF9fX19fX19fX19fX19fX19cXG5PfD09PXwqID5fX19fX19fX19fX19fX19fPlxcbiAgICAgIFxcXFx8XCIpLGNvbnNvbGUubG9nKFwiVmlzaXRcIixcImh0dHA6Ly9leGNhbGlidXJqcy5jb21cIixcImZvciBtb3JlIGluZm9ybWF0aW9uXCIpKSxpLnN1cHByZXNzUGxheUJ1dHRvbiYmKG4uX3N1cHByZXNzUGxheUJ1dHRvbj0hMCksbi5fbG9nZ2VyPU90LmdldEluc3RhbmNlKCksbi5fbG9nZ2VyLmRlZmF1bHRMZXZlbD09PXouRGVidWcmJm8ubG9nQnJvd3NlckZlYXR1cmVzKCksbi5fbG9nZ2VyLmRlYnVnKFwiQnVpbGRpbmcgZW5naW5lLi4uXCIpLG4uY2FudmFzRWxlbWVudElkPWkuY2FudmFzRWxlbWVudElkLGkuY2FudmFzRWxlbWVudElkPyhuLl9sb2dnZXIuZGVidWcoXCJVc2luZyBDYW52YXMgZWxlbWVudCBzcGVjaWZpZWQ6IFwiK2kuY2FudmFzRWxlbWVudElkKSxuLmNhbnZhcz1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChpLmNhbnZhc0VsZW1lbnRJZCkpOihuLl9sb2dnZXIuZGVidWcoXCJVc2luZyBnZW5lcmF0ZWQgY2FudmFzIGVsZW1lbnRcIiksbi5jYW52YXM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSksaS53aWR0aCYmaS5oZWlnaHQ/KHZvaWQgMD09PWkuZGlzcGxheU1vZGUmJihuLmRpc3BsYXlNb2RlPWVuLkZpeGVkKSxuLl9sb2dnZXIuZGVidWcoXCJFbmdpbmUgdmlld3BvcnQgaXMgc2l6ZSBcIitpLndpZHRoK1wiIHggXCIraS5oZWlnaHQpLG4uY2FudmFzLndpZHRoPWkud2lkdGgsbi5jYW52YXMuaGVpZ2h0PWkuaGVpZ2h0KTppLmRpc3BsYXlNb2RlfHwobi5fbG9nZ2VyLmRlYnVnKFwiRW5naW5lIHZpZXdwb3J0IGlzIGZ1bGxzY3JlZW5cIiksbi5kaXNwbGF5TW9kZT1lbi5GdWxsU2NyZWVuKSxpLmJhY2tncm91bmRDb2xvciYmKG4uYmFja2dyb3VuZENvbG9yPWkuYmFja2dyb3VuZENvbG9yLmNsb25lKCkpLG4uX2xvYWRlcj1uZXcgWWUsbi5faW5pdGlhbGl6ZShpKSxuLnJvb3RTY2VuZT1uLmN1cnJlbnRTY2VuZT1uZXcgQWkobiksbi5hZGRTY2VuZShcInJvb3RcIixuLnJvb3RTY2VuZSksbi5nb1RvU2NlbmUoXCJyb290XCIpLG59cmV0dXJuIG9uKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiY2FudmFzV2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FudmFzLndpZHRofSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImhhbGZDYW52YXNXaWR0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5jYW52YXMud2lkdGgvMn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJjYW52YXNIZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2FudmFzLmhlaWdodH0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJoYWxmQ2FudmFzSGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmNhbnZhcy5oZWlnaHQvMn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJkcmF3V2lkdGhcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudFNjZW5lJiZ0aGlzLmN1cnJlbnRTY2VuZS5jYW1lcmE/dGhpcy5jYW52YXNXaWR0aC90aGlzLmN1cnJlbnRTY2VuZS5jYW1lcmEuZ2V0Wm9vbSgpL3RoaXMucGl4ZWxSYXRpbzp0aGlzLmNhbnZhc1dpZHRoL3RoaXMucGl4ZWxSYXRpb30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJoYWxmRHJhd1dpZHRoXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRyYXdXaWR0aC8yfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImRyYXdIZWlnaHRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3VycmVudFNjZW5lJiZ0aGlzLmN1cnJlbnRTY2VuZS5jYW1lcmE/dGhpcy5jYW52YXNIZWlnaHQvdGhpcy5jdXJyZW50U2NlbmUuY2FtZXJhLmdldFpvb20oKS90aGlzLnBpeGVsUmF0aW86dGhpcy5jYW52YXNIZWlnaHQvdGhpcy5waXhlbFJhdGlvfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImhhbGZEcmF3SGVpZ2h0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRyYXdIZWlnaHQvMn0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpc0hpRHBpXCIse2dldDpmdW5jdGlvbigpe3JldHVybiAxIT09dGhpcy5waXhlbFJhdGlvfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInN0YXRzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLmRlYnVnLnN0YXRzfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInBpeGVsUmF0aW9cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N1cHByZXNzSGlEUElTY2FsaW5nPzE6d2luZG93LmRldmljZVBpeGVsUmF0aW88MT8xOndpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfHwxfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLm9uPWZ1bmN0aW9uKGUsaSl7dC5wcm90b3R5cGUub24uY2FsbCh0aGlzLGUsaSl9LGUucHJvdG90eXBlLm9uY2U9ZnVuY3Rpb24oZSxpKXt0LnByb3RvdHlwZS5vbmNlLmNhbGwodGhpcyxlLGkpfSxlLnByb3RvdHlwZS5vZmY9ZnVuY3Rpb24oZSxpKXt0LnByb3RvdHlwZS5vZmYuY2FsbCh0aGlzLGUsaSl9LGUucHJvdG90eXBlLmdldFdvcmxkQm91bmRzPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zY3JlZW5Ub1dvcmxkQ29vcmRpbmF0ZXMoay5aZXJvKS54LGU9dGhpcy5zY3JlZW5Ub1dvcmxkQ29vcmRpbmF0ZXMoay5aZXJvKS55LGk9dCt0aGlzLmRyYXdXaWR0aCxuPWUrdGhpcy5kcmF3SGVpZ2h0O3JldHVybiBuZXcgRHQodCxlLGksbil9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcInRpbWVzY2FsZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdGltZXNjYWxlfSxzZXQ6ZnVuY3Rpb24odCl7dDw9MD9PdC5nZXRJbnN0YW5jZSgpLmVycm9yKFwiQ2Fubm90IHNldCBlbmdpbmUudGltZXNjYWxlIHRvIGEgdmFsdWUgb2YgMCBvciBsZXNzIHRoYW4gMC5cIik6dGhpcy5fdGltZXNjYWxlPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUucGxheUFuaW1hdGlvbj1mdW5jdGlvbih0LGUsaSl7dGhpcy5fYW5pbWF0aW9ucy5wdXNoKG5ldyBhbih0LGUsaSkpfSxlLnByb3RvdHlwZS5hZGRUaWxlTWFwPWZ1bmN0aW9uKHQpe3RoaXMuY3VycmVudFNjZW5lLmFkZFRpbGVNYXAodCl9LGUucHJvdG90eXBlLnJlbW92ZVRpbGVNYXA9ZnVuY3Rpb24odCl7dGhpcy5jdXJyZW50U2NlbmUucmVtb3ZlVGlsZU1hcCh0KX0sZS5wcm90b3R5cGUuYWRkVGltZXI9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuY3VycmVudFNjZW5lLmFkZFRpbWVyKHQpfSxlLnByb3RvdHlwZS5yZW1vdmVUaW1lcj1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5jdXJyZW50U2NlbmUucmVtb3ZlVGltZXIodCl9LGUucHJvdG90eXBlLmFkZFNjZW5lPWZ1bmN0aW9uKHQsZSl7dGhpcy5zY2VuZXNbdF0mJnRoaXMuX2xvZ2dlci53YXJuKFwiU2NlbmVcIix0LFwiYWxyZWFkeSBleGlzdHMgb3ZlcndyaXRpbmdcIiksdGhpcy5zY2VuZXNbdF09ZSxlLmVuZ2luZT10aGlzfSxlLnByb3RvdHlwZS5yZW1vdmVTY2VuZT1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgQWkpZm9yKHZhciBlIGluIHRoaXMuc2NlbmVzKXRoaXMuc2NlbmVzLmhhc093blByb3BlcnR5KGUpJiZ0aGlzLnNjZW5lc1tlXT09PXQmJmRlbGV0ZSB0aGlzLnNjZW5lc1tlXTtcInN0cmluZ1wiPT10eXBlb2YgdCYmZGVsZXRlIHRoaXMuc2NlbmVzW3RdfSxlLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7dCBpbnN0YW5jZW9mIEJlP3RoaXMuY3VycmVudFNjZW5lLmFkZFVJQWN0b3IodCk6KHQgaW5zdGFuY2VvZiBEZSYmdGhpcy5fYWRkQ2hpbGQodCksdCBpbnN0YW5jZW9mIGtlJiZ0aGlzLmFkZFRpbWVyKHQpLHQgaW5zdGFuY2VvZiBGZSYmdGhpcy5hZGRUaWxlTWFwKHQpLDI9PT1hcmd1bWVudHMubGVuZ3RoJiZ0aGlzLmFkZFNjZW5lKGFyZ3VtZW50c1swXSxhcmd1bWVudHNbMV0pKX0sZS5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKHQpe3QgaW5zdGFuY2VvZiBCZT90aGlzLmN1cnJlbnRTY2VuZS5yZW1vdmVVSUFjdG9yKHQpOih0IGluc3RhbmNlb2YgRGUmJnRoaXMuX3JlbW92ZUNoaWxkKHQpLHQgaW5zdGFuY2VvZiBrZSYmdGhpcy5yZW1vdmVUaW1lcih0KSx0IGluc3RhbmNlb2YgRmUmJnRoaXMucmVtb3ZlVGlsZU1hcCh0KSx0IGluc3RhbmNlb2YgQWkmJnRoaXMucmVtb3ZlU2NlbmUodCksXCJzdHJpbmdcIj09dHlwZW9mIHQmJnRoaXMucmVtb3ZlU2NlbmUodCkpfSxlLnByb3RvdHlwZS5fYWRkQ2hpbGQ9ZnVuY3Rpb24odCl7dGhpcy5jdXJyZW50U2NlbmUuYWRkKHQpfSxlLnByb3RvdHlwZS5fcmVtb3ZlQ2hpbGQ9ZnVuY3Rpb24odCl7dGhpcy5jdXJyZW50U2NlbmUucmVtb3ZlKHQpfSxlLnByb3RvdHlwZS5nb1RvU2NlbmU9ZnVuY3Rpb24odCl7aWYodGhpcy5zY2VuZXNbdF0pe3ZhciBlPXRoaXMuY3VycmVudFNjZW5lLGk9dGhpcy5zY2VuZXNbdF07dGhpcy5fbG9nZ2VyLmRlYnVnKFwiR29pbmcgdG8gc2NlbmU6XCIsdCksdGhpcy5jdXJyZW50U2NlbmUuaXNJbml0aWFsaXplZCYmKHRoaXMuY3VycmVudFNjZW5lLl9kZWFjdGl2YXRlLmNhbGwodGhpcy5jdXJyZW50U2NlbmUsW2UsaV0pLHRoaXMuY3VycmVudFNjZW5lLmV2ZW50RGlzcGF0Y2hlci5lbWl0KFwiZGVhY3RpdmF0ZVwiLG5ldyBndChpLHRoaXMuY3VycmVudFNjZW5lKSkpLHRoaXMuY3VycmVudFNjZW5lPWksdGhpcy5jdXJyZW50U2NlbmUuX2luaXRpYWxpemUodGhpcyksdGhpcy5jdXJyZW50U2NlbmUuX2FjdGl2YXRlLmNhbGwodGhpcy5jdXJyZW50U2NlbmUsW2UsaV0pLHRoaXMuY3VycmVudFNjZW5lLmV2ZW50RGlzcGF0Y2hlci5lbWl0KFwiYWN0aXZhdGVcIixuZXcgX3QoZSx0aGlzLmN1cnJlbnRTY2VuZSkpfWVsc2UgdGhpcy5fbG9nZ2VyLmVycm9yKFwiU2NlbmVcIix0LFwiZG9lcyBub3QgZXhpc3QhXCIpfSxlLnByb3RvdHlwZS5zY3JlZW5Ub1dvcmxkQ29vcmRpbmF0ZXM9ZnVuY3Rpb24odCl7dmFyIGU9dC54LGk9dC55O2lmKGU9ZS90aGlzLmNhbnZhcy5jbGllbnRXaWR0aCp0aGlzLmRyYXdXaWR0aCxpPWkvdGhpcy5jYW52YXMuY2xpZW50SGVpZ2h0KnRoaXMuZHJhd0hlaWdodCxlLT10aGlzLmhhbGZEcmF3V2lkdGgsaS09dGhpcy5oYWxmRHJhd0hlaWdodCx0aGlzLmN1cnJlbnRTY2VuZSYmdGhpcy5jdXJyZW50U2NlbmUuY2FtZXJhKXt2YXIgbj10aGlzLmN1cnJlbnRTY2VuZS5jYW1lcmEuZ2V0Rm9jdXMoKTtlKz1uLngsaSs9bi55fXJldHVybiBuZXcgayhNYXRoLmZsb29yKGUpLE1hdGguZmxvb3IoaSkpfSxlLnByb3RvdHlwZS53b3JsZFRvU2NyZWVuQ29vcmRpbmF0ZXM9ZnVuY3Rpb24odCl7dmFyIGU9dC54LGk9dC55O2lmKHRoaXMuY3VycmVudFNjZW5lJiZ0aGlzLmN1cnJlbnRTY2VuZS5jYW1lcmEpe3ZhciBuPXRoaXMuY3VycmVudFNjZW5lLmNhbWVyYS5nZXRGb2N1cygpO2UtPW4ueCxpLT1uLnl9cmV0dXJuIGUrPXRoaXMuaGFsZkRyYXdXaWR0aCxpKz10aGlzLmhhbGZEcmF3SGVpZ2h0LGU9ZSp0aGlzLmNhbnZhcy5jbGllbnRXaWR0aC90aGlzLmRyYXdXaWR0aCxpPWkqdGhpcy5jYW52YXMuY2xpZW50SGVpZ2h0L3RoaXMuZHJhd0hlaWdodCxuZXcgayhNYXRoLmZsb29yKGUpLE1hdGguZmxvb3IoaSkpfSxlLnByb3RvdHlwZS5fc2V0SGVpZ2h0QnlEaXNwbGF5TW9kZT1mdW5jdGlvbih0KXt0aGlzLmRpc3BsYXlNb2RlPT09ZW4uQ29udGFpbmVyJiYodGhpcy5jYW52YXMud2lkdGg9dC5jbGllbnRXaWR0aCx0aGlzLmNhbnZhcy5oZWlnaHQ9dC5jbGllbnRIZWlnaHQpLHRoaXMuZGlzcGxheU1vZGU9PT1lbi5GdWxsU2NyZWVuJiYoZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW49XCIwcHhcIixkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93PVwiaGlkZGVuXCIsdGhpcy5jYW52YXMud2lkdGg9dC5pbm5lcldpZHRoLHRoaXMuY2FudmFzLmhlaWdodD10LmlubmVySGVpZ2h0KX0sZS5wcm90b3R5cGUuX2luaXRpYWxpemU9ZnVuY3Rpb24odCl7dmFyIGUsaSxuPXRoaXM7aWYodC5kaXNwbGF5TW9kZSYmKHRoaXMuZGlzcGxheU1vZGU9dC5kaXNwbGF5TW9kZSksdGhpcy5kaXNwbGF5TW9kZT09PWVuLkZ1bGxTY3JlZW58fHRoaXMuZGlzcGxheU1vZGU9PT1lbi5Db250YWluZXIpe3ZhciBvPXRoaXMuZGlzcGxheU1vZGU9PT1lbi5Db250YWluZXI/dGhpcy5jYW52YXMucGFyZW50RWxlbWVudHx8ZG9jdW1lbnQuYm9keTp3aW5kb3c7dGhpcy5fc2V0SGVpZ2h0QnlEaXNwbGF5TW9kZShvKSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLGZ1bmN0aW9uKCl7bi5fbG9nZ2VyLmRlYnVnKFwiVmlldyBwb3J0IHJlc2l6ZWRcIiksbi5fc2V0SGVpZ2h0QnlEaXNwbGF5TW9kZShvKSxuLl9sb2dnZXIuaW5mbyhcInBhcmVudC5jbGllbnRIZWlnaHQgXCIrby5jbGllbnRIZWlnaHQpLG4uc2V0QW50aWFsaWFzaW5nKG4uX2lzU21vb3RoaW5nRW5hYmxlZCl9KX1lbHNlIHRoaXMuZGlzcGxheU1vZGU9PT1lbi5Qb3NpdGlvbiYmdGhpcy5faW50aWFsaXplRGlzcGxheU1vZGVQb3NpdGlvbih0KTt0aGlzLmlucHV0PXtrZXlib2FyZDpuZXcgRmkscG9pbnRlcnM6bmV3IFFpKHRoaXMpLGdhbWVwYWRzOm5ldyAkaX0sdGhpcy5pbnB1dC5rZXlib2FyZC5pbml0KCksdGhpcy5pbnB1dC5wb2ludGVycy5pbml0KHQmJnQucG9pbnRlclNjb3BlPT09a2kuRG9jdW1lbnQ/ZG9jdW1lbnQ6dGhpcy5jYW52YXMpLHRoaXMuaW5wdXQuZ2FtZXBhZHMuaW5pdCgpLHRoaXMucGFnZVNjcm9sbFByZXZlbnRpb25Nb2RlPXQuc2Nyb2xsUHJldmVudGlvbk1vZGUsdm9pZCAwIT09ZG9jdW1lbnQuaGlkZGVuPyhlPVwiaGlkZGVuXCIsaT1cInZpc2liaWxpdHljaGFuZ2VcIik6XCJtc0hpZGRlblwiaW4gZG9jdW1lbnQ/KGU9XCJtc0hpZGRlblwiLGk9XCJtc3Zpc2liaWxpdHljaGFuZ2VcIik6XCJ3ZWJraXRIaWRkZW5cImluIGRvY3VtZW50JiYoZT1cIndlYmtpdEhpZGRlblwiLGk9XCJ3ZWJraXR2aXNpYmlsaXR5Y2hhbmdlXCIpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoaSxmdW5jdGlvbigpe2RvY3VtZW50W2VdPyhuLmV2ZW50RGlzcGF0Y2hlci5lbWl0KFwiaGlkZGVuXCIsbmV3IGN0KG4pKSxuLl9sb2dnZXIuZGVidWcoXCJXaW5kb3cgaGlkZGVuXCIpKToobi5ldmVudERpc3BhdGNoZXIuZW1pdChcInZpc2libGVcIixuZXcgaHQobikpLG4uX2xvZ2dlci5kZWJ1ZyhcIldpbmRvdyB2aXNpYmxlXCIpKX0pLHRoaXMuY3R4PXRoaXMuY2FudmFzLmdldENvbnRleHQoXCIyZFwiKSx0aGlzLl9zdXBwcmVzc0hpRFBJU2NhbGluZz0hIXQuc3VwcHJlc3NIaURQSVNjYWxpbmcsdC5zdXBwcmVzc0hpRFBJU2NhbGluZ3x8dGhpcy5faW5pdGlhbGl6ZUhpRHBpKCksdGhpcy5jYW52YXNFbGVtZW50SWR8fGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5jYW52YXMpfSxlLnByb3RvdHlwZS5vbkluaXRpYWxpemU9ZnVuY3Rpb24odCl7fSxlLnByb3RvdHlwZS5faW50aWFsaXplRGlzcGxheU1vZGVQb3NpdGlvbj1mdW5jdGlvbih0KXtpZighdC5wb3NpdGlvbil0aHJvdyBuZXcgRXJyb3IoXCJEaXNwbGF5TW9kZSBvZiBQb3NpdGlvbiB3YXMgc2VsZWN0ZWQgYnV0IG5vIHBvc2l0aW9uIG9wdGlvbiB3YXMgZ2l2ZW5cIik7aWYodGhpcy5jYW52YXMuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIsdGhpcy5jYW52YXMuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLFwic3RyaW5nXCI9PXR5cGVvZiB0LnBvc2l0aW9uKXt2YXIgZT10LnBvc2l0aW9uLnNwbGl0KFwiIFwiKTtzd2l0Y2goZVswXSl7Y2FzZVwidG9wXCI6dGhpcy5jYW52YXMuc3R5bGUudG9wPVwiMHB4XCI7YnJlYWs7Y2FzZVwiYm90dG9tXCI6dGhpcy5jYW52YXMuc3R5bGUuYm90dG9tPVwiMHB4XCI7YnJlYWs7Y2FzZVwibWlkZGxlXCI6dGhpcy5jYW52YXMuc3R5bGUudG9wPVwiNTAlXCI7dmFyIGk9LXRoaXMuaGFsZkRyYXdIZWlnaHQ7dGhpcy5jYW52YXMuc3R5bGUubWFyZ2luVG9wPWkudG9TdHJpbmcoKTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIkludmFsaWQgUG9zaXRpb24gR2l2ZW5cIil9aWYoZVsxXSlzd2l0Y2goZVsxXSl7Y2FzZVwibGVmdFwiOnRoaXMuY2FudmFzLnN0eWxlLmxlZnQ9XCIwcHhcIjticmVhaztjYXNlXCJyaWdodFwiOnRoaXMuY2FudmFzLnN0eWxlLnJpZ2h0PVwiMHB4XCI7YnJlYWs7Y2FzZVwiY2VudGVyXCI6dGhpcy5jYW52YXMuc3R5bGUubGVmdD1cIjUwJVwiO3ZhciBuPS10aGlzLmhhbGZEcmF3V2lkdGg7dGhpcy5jYW52YXMuc3R5bGUubWFyZ2luTGVmdD1uLnRvU3RyaW5nKCk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIFBvc2l0aW9uIEdpdmVuXCIpfX1lbHNlIHQucG9zaXRpb24udG9wJiYoXCJudW1iZXJcIj09dHlwZW9mIHQucG9zaXRpb24udG9wP3RoaXMuY2FudmFzLnN0eWxlLnRvcD10LnBvc2l0aW9uLnRvcC50b1N0cmluZygpK1wicHhcIjp0aGlzLmNhbnZhcy5zdHlsZS50b3A9dC5wb3NpdGlvbi50b3ApLHQucG9zaXRpb24ucmlnaHQmJihcIm51bWJlclwiPT10eXBlb2YgdC5wb3NpdGlvbi5yaWdodD90aGlzLmNhbnZhcy5zdHlsZS5yaWdodD10LnBvc2l0aW9uLnJpZ2h0LnRvU3RyaW5nKCkrXCJweFwiOnRoaXMuY2FudmFzLnN0eWxlLnJpZ2h0PXQucG9zaXRpb24ucmlnaHQpLHQucG9zaXRpb24uYm90dG9tJiYoXCJudW1iZXJcIj09dHlwZW9mIHQucG9zaXRpb24uYm90dG9tP3RoaXMuY2FudmFzLnN0eWxlLmJvdHRvbT10LnBvc2l0aW9uLmJvdHRvbS50b1N0cmluZygpK1wicHhcIjp0aGlzLmNhbnZhcy5zdHlsZS5ib3R0b209dC5wb3NpdGlvbi5ib3R0b20pLHQucG9zaXRpb24ubGVmdCYmKFwibnVtYmVyXCI9PXR5cGVvZiB0LnBvc2l0aW9uLmxlZnQ/dGhpcy5jYW52YXMuc3R5bGUubGVmdD10LnBvc2l0aW9uLmxlZnQudG9TdHJpbmcoKStcInB4XCI6dGhpcy5jYW52YXMuc3R5bGUubGVmdD10LnBvc2l0aW9uLmxlZnQpfSxlLnByb3RvdHlwZS5faW5pdGlhbGl6ZUhpRHBpPWZ1bmN0aW9uKCl7aWYodGhpcy5pc0hpRHBpKXt2YXIgdD10aGlzLmNhbnZhcy53aWR0aCxlPXRoaXMuY2FudmFzLmhlaWdodDt0aGlzLmNhbnZhcy53aWR0aD10KnRoaXMucGl4ZWxSYXRpbyx0aGlzLmNhbnZhcy5oZWlnaHQ9ZSp0aGlzLnBpeGVsUmF0aW8sdGhpcy5jYW52YXMuc3R5bGUud2lkdGg9dCtcInB4XCIsdGhpcy5jYW52YXMuc3R5bGUuaGVpZ2h0PWUrXCJweFwiLHRoaXMuX2xvZ2dlci53YXJuKFwiSGkgRFBJIHNjcmVlbiBkZXRlY3RlZCwgcmVzZXR0aW5nIGNhbnZhcyByZXNvbHV0aW9uIGZyb20gXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgXCIrdCtcInhcIitlK1wiIHRvIFwiK3RoaXMuY2FudmFzLndpZHRoK1wieFwiK3RoaXMuY2FudmFzLmhlaWdodCtcIiBcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjc3Mgc2l6ZSB3aWxsIHJlbWFpbiBcIit0K1wieFwiK2UpLHRoaXMuY3R4LnNjYWxlKHRoaXMucGl4ZWxSYXRpbyx0aGlzLnBpeGVsUmF0aW8pLHRoaXMuX2xvZ2dlci53YXJuKFwiQ2FudmFzIGRyYXdpbmcgY29udGV4dCB3YXMgc2NhbGVkIGJ5IFwiK3RoaXMucGl4ZWxSYXRpbyl9fSxlLnByb3RvdHlwZS5zZXRBbnRpYWxpYXNpbmc9ZnVuY3Rpb24odCl7dGhpcy5faXNTbW9vdGhpbmdFbmFibGVkPXQ7dmFyIGU9dGhpcy5jdHg7ZS5pbWFnZVNtb290aGluZ0VuYWJsZWQ9dDtmb3IodmFyIGk9MCxuPVtcIndlYmtpdEltYWdlU21vb3RoaW5nRW5hYmxlZFwiLFwibW96SW1hZ2VTbW9vdGhpbmdFbmFibGVkXCIsXCJtc0ltYWdlU21vb3RoaW5nRW5hYmxlZFwiXTtpPG4ubGVuZ3RoO2krKyl7dmFyIG89bltpXTtvIGluIGUmJihlW29dPXQpfX0sZS5wcm90b3R5cGUuZ2V0QW50aWFsaWFzaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZHx8dGhpcy5jdHgud2Via2l0SW1hZ2VTbW9vdGhpbmdFbmFibGVkfHx0aGlzLmN0eC5tb3pJbWFnZVNtb290aGluZ0VuYWJsZWR8fHRoaXMuY3R4Lm1zSW1hZ2VTbW9vdGhpbmdFbmFibGVkfSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJpc0luaXRpYWxpemVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc0luaXRpYWxpemVkfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLl9vdmVycmlkZUluaXRpYWxpemU9ZnVuY3Rpb24oZSl7dGhpcy5pc0luaXRpYWxpemVkfHwodGhpcy5vbkluaXRpYWxpemUoZSksdC5wcm90b3R5cGUuZW1pdC5jYWxsKHRoaXMsXCJpbml0aWFsaXplXCIsbmV3IGZ0KGUsdGhpcykpLHRoaXMuX2lzSW5pdGlhbGl6ZWQ9ITApfSxlLnByb3RvdHlwZS5fdXBkYXRlPWZ1bmN0aW9uKHQpe2lmKHRoaXMuX2lzTG9hZGluZylyZXR1cm4gdGhpcy5fbG9hZGVyLnVwZGF0ZSh0aGlzLHQpLHRoaXMuaW5wdXQua2V5Ym9hcmQudXBkYXRlKCksdGhpcy5pbnB1dC5wb2ludGVycy51cGRhdGUoKSx2b2lkIHRoaXMuaW5wdXQuZ2FtZXBhZHMudXBkYXRlKCk7dGhpcy5fb3ZlcnJpZGVJbml0aWFsaXplKHRoaXMpLHRoaXMuX3ByZXVwZGF0ZSh0KSx0aGlzLmN1cnJlbnRTY2VuZS51cGRhdGUodGhpcyx0KSx0aGlzLl9hbmltYXRpb25zPXRoaXMuX2FuaW1hdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiF0LmFuaW1hdGlvbi5pc0RvbmUoKX0pLHRoaXMuaW5wdXQua2V5Ym9hcmQudXBkYXRlKCksdGhpcy5pbnB1dC5wb2ludGVycy51cGRhdGUoKSx0aGlzLmlucHV0LmdhbWVwYWRzLnVwZGF0ZSgpLHRoaXMuX3Bvc3R1cGRhdGUodCl9LGUucHJvdG90eXBlLl9wcmV1cGRhdGU9ZnVuY3Rpb24odCl7dGhpcy5lbWl0KFwicHJldXBkYXRlXCIsbmV3IEoodGhpcyx0LHRoaXMpKSx0aGlzLm9uUHJlVXBkYXRlKHRoaXMsdCl9LGUucHJvdG90eXBlLm9uUHJlVXBkYXRlPWZ1bmN0aW9uKHQsZSl7fSxlLnByb3RvdHlwZS5fcG9zdHVwZGF0ZT1mdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJwb3N0dXBkYXRlXCIsbmV3ICQodGhpcyx0LHRoaXMpKSx0aGlzLm9uUG9zdFVwZGF0ZSh0aGlzLHQpfSxlLnByb3RvdHlwZS5vblBvc3RVcGRhdGU9ZnVuY3Rpb24odCxlKXt9LGUucHJvdG90eXBlLl9kcmF3PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuY3R4O2lmKHRoaXMuX3ByZWRyYXcoZSx0KSx0aGlzLl9pc0xvYWRpbmcpdGhpcy5fbG9hZGVyLmRyYXcoZSx0KTtlbHNle2UuY2xlYXJSZWN0KDAsMCx0aGlzLmNhbnZhc1dpZHRoLHRoaXMuY2FudmFzSGVpZ2h0KSxlLmZpbGxTdHlsZT10aGlzLmJhY2tncm91bmRDb2xvci50b1N0cmluZygpLGUuZmlsbFJlY3QoMCwwLHRoaXMuY2FudmFzV2lkdGgsdGhpcy5jYW52YXNIZWlnaHQpLHRoaXMuY3VycmVudFNjZW5lLmRyYXcodGhpcy5jdHgsdCk7Zm9yKHZhciBpPTAsbj10aGlzLl9hbmltYXRpb25zLmxlbmd0aDtpPG47aSsrKXRoaXMuX2FuaW1hdGlvbnNbaV0uYW5pbWF0aW9uLmRyYXcoZSx0aGlzLl9hbmltYXRpb25zW2ldLngsdGhpcy5fYW5pbWF0aW9uc1tpXS55KTtpZih0aGlzLmlzRGVidWcpe3RoaXMuY3R4LmZvbnQ9XCJDb25zb2xhc1wiLHRoaXMuY3R4LmZpbGxTdHlsZT10aGlzLmRlYnVnQ29sb3IudG9TdHJpbmcoKTtmb3IodmFyIG89dGhpcy5pbnB1dC5rZXlib2FyZC5nZXRLZXlzKCkscj0wO3I8by5sZW5ndGg7cisrKXRoaXMuY3R4LmZpbGxUZXh0KG9bcl0udG9TdHJpbmcoKStcIiA6IFwiKyhQaVtvW3JdXT9QaVtvW3JdXTpcIk5vdCBNYXBwZWRcIiksMTAwLDEwKnIrMTApO3RoaXMuY3R4LmZpbGxUZXh0KFwiRlBTOlwiK3RoaXMuc3RhdHMuY3VyckZyYW1lLmZwcy50b0ZpeGVkKDIpLnRvU3RyaW5nKCksMTAsMTApfWZvcih2YXIgcz0wO3M8dGhpcy5wb3N0UHJvY2Vzc29ycy5sZW5ndGg7cysrKXRoaXMucG9zdFByb2Nlc3NvcnNbc10ucHJvY2Vzcyh0aGlzLmN0eC5nZXRJbWFnZURhdGEoMCwwLHRoaXMuY2FudmFzV2lkdGgsdGhpcy5jYW52YXNIZWlnaHQpLHRoaXMuY3R4KTt0aGlzLl9wb3N0ZHJhdyhlLHQpfX0sZS5wcm90b3R5cGUuX3ByZWRyYXc9ZnVuY3Rpb24odCxlKXt0aGlzLmVtaXQoXCJwcmVkcmF3XCIsbmV3IFkodCxlLHRoaXMpKSx0aGlzLm9uUHJlRHJhdyh0LGUpfSxlLnByb3RvdHlwZS5vblByZURyYXc9ZnVuY3Rpb24odCxlKXt9LGUucHJvdG90eXBlLl9wb3N0ZHJhdz1mdW5jdGlvbih0LGUpe3RoaXMuZW1pdChcInBvc3RkcmF3XCIsbmV3IEsodCxlLHRoaXMpKSx0aGlzLm9uUG9zdERyYXcodCxlKX0sZS5wcm90b3R5cGUub25Qb3N0RHJhdz1mdW5jdGlvbih0LGUpe30sZS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24odCl7dmFyIGksbj10aGlzO3JldHVybiB0aGlzLl9jb21wYXRpYmxlPyh0Pyh0aGlzLl9sb2FkZXI9dCx0aGlzLl9sb2FkZXIuc3VwcHJlc3NQbGF5QnV0dG9uPXRoaXMuX3N1cHByZXNzUGxheUJ1dHRvbix0aGlzLl9sb2FkZXIud2lyZUVuZ2luZSh0aGlzKSxpPXRoaXMubG9hZCh0aGlzLl9sb2FkZXIpKTppPXAucmVzb2x2ZSgpLGkudGhlbihmdW5jdGlvbigpe24uZW1pdChcInN0YXJ0XCIsbmV3IFYobikpfSksdGhpcy5faGFzU3RhcnRlZHx8KHRoaXMuX2hhc1N0YXJ0ZWQ9ITAsdGhpcy5fbG9nZ2VyLmRlYnVnKFwiU3RhcnRpbmcgZ2FtZS4uLlwiKSxlLmNyZWF0ZU1haW5Mb29wKHRoaXMsd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSxEYXRlLm5vdykoKSx0aGlzLl9sb2dnZXIuZGVidWcoXCJHYW1lIHN0YXJ0ZWRcIikpLGkpOihuZXcgcCkucmVqZWN0KFwiRXhjYWxpYnVyIGlzIGluY29tcGF0aWJsZSB3aXRoIHlvdXIgYnJvd3NlclwiKX0sZS5jcmVhdGVNYWluTG9vcD1mdW5jdGlvbih0LGUsaSl7dmFyIG49aSgpO3JldHVybiBmdW5jdGlvbiBvKCl7aWYodC5faGFzU3RhcnRlZCl0cnl7dC5fcmVxdWVzdElkPWUobyksdC5lbWl0KFwicHJlZnJhbWVcIixuZXcgdHQodCx0LnN0YXRzLnByZXZGcmFtZSkpO3ZhciByPWkoKSxzPU1hdGguZmxvb3Ioci1uKXx8MTtzPjIwMCYmKHM9MSk7dmFyIGE9cyp0LnRpbWVzY2FsZSxoPXQuc3RhdHMucHJldkZyYW1lLmlkKzE7dC5zdGF0cy5wcmV2RnJhbWUucmVzZXQodC5zdGF0cy5jdXJyRnJhbWUpLHQuc3RhdHMuY3VyckZyYW1lLnJlc2V0KCksdC5zdGF0cy5jdXJyRnJhbWUuaWQ9aCx0LnN0YXRzLmN1cnJGcmFtZS5kZWx0YT1hLHQuc3RhdHMuY3VyckZyYW1lLmZwcz0xLyhhLzFlMyk7dmFyIGM9aSgpO3QuX3VwZGF0ZShhKTt2YXIgdT1pKCk7dC5fZHJhdyhhKTt2YXIgbD1pKCk7dC5zdGF0cy5jdXJyRnJhbWUuZHVyYXRpb24udXBkYXRlPXUtYyx0LnN0YXRzLmN1cnJGcmFtZS5kdXJhdGlvbi5kcmF3PWwtdSxuPXIsdC5lbWl0KFwicG9zdGZyYW1lXCIsbmV3IGV0KHQsdC5zdGF0cy5jdXJyRnJhbWUpKX1jYXRjaChlKXt3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodC5fcmVxdWVzdElkKSx0LnN0b3AoKSx0Lm9uRmF0YWxFeGNlcHRpb24oZSl9fX0sZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuX2hhc1N0YXJ0ZWQmJih0aGlzLmVtaXQoXCJzdG9wXCIsbmV3IEcodGhpcykpLHRoaXMuX2hhc1N0YXJ0ZWQ9ITEsdGhpcy5fbG9nZ2VyLmRlYnVnKFwiR2FtZSBzdG9wcGVkXCIpKX0sZS5wcm90b3R5cGUuaXNQYXVzZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5faGFzU3RhcnRlZH0sZS5wcm90b3R5cGUuc2NyZWVuc2hvdD1mdW5jdGlvbigpe3ZhciB0PW5ldyBJbWFnZSxlPXRoaXMuY2FudmFzLnRvRGF0YVVSTChcImltYWdlL3BuZ1wiKTtyZXR1cm4gdC5zcmM9ZSx0fSxlLnByb3RvdHlwZS5sb2FkPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsaT1uZXcgcDtyZXR1cm4gdGhpcy5faXNMb2FkaW5nPSEwLHQubG9hZCgpLnRoZW4oZnVuY3Rpb24oKXtlLl9zdXBwcmVzc1BsYXlCdXR0b24/c2V0VGltZW91dChmdW5jdGlvbigpe2UuX2lzTG9hZGluZz0hMSxpLnJlc29sdmUoKX0sNTAwKTooZS5faXNMb2FkaW5nPSExLGkucmVzb2x2ZSgpKX0pLGl9LGUuX0RlZmF1bHRFbmdpbmVPcHRpb25zPXt3aWR0aDowLGhlaWdodDowLGNhbnZhc0VsZW1lbnRJZDpcIlwiLHBvaW50ZXJTY29wZTpraS5Eb2N1bWVudCxzdXBwcmVzc0NvbnNvbGVCb290TWVzc2FnZTpudWxsLHN1cHByZXNzTWluaW11bUJyb3dzZXJGZWF0dXJlRGV0ZWN0aW9uOm51bGwsc3VwcHJlc3NIaURQSVNjYWxpbmc6bnVsbCxzdXBwcmVzc1BsYXlCdXR0b246bnVsbCxzY3JvbGxQcmV2ZW50aW9uTW9kZTpubi5DYW52YXMsYmFja2dyb3VuZENvbG9yOlB0LmZyb21IZXgoXCIjMjE4NWQwXCIpfSxlfSh4dCksYW49ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24odCxlLGkpe3RoaXMuYW5pbWF0aW9uPXQsdGhpcy54PWUsdGhpcy55PWl9fSgpLGhuPWZ1bmN0aW9uKCl7dmFyIHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShpKSYmKHRbaV09ZVtpXSl9O3JldHVybiBmdW5jdGlvbihlLGkpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLGkpLGUucHJvdG90eXBlPW51bGw9PT1pP09iamVjdC5jcmVhdGUoaSk6KG4ucHJvdG90eXBlPWkucHJvdG90eXBlLG5ldyBuKX19KCksY249ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZvaWQgMD09PWkmJihpPVwiTWVkaWFFdmVudFwiKTt2YXIgbj10LmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIG4udGFyZ2V0PWUsbi5fbmFtZT1pLG59cmV0dXJuIGhuKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiYnViYmxlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMX0sc2V0OmZ1bmN0aW9uKHQpe30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJfcGF0aFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbH0sc2V0OmZ1bmN0aW9uKHQpe30sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxlLnByb3RvdHlwZS5zdG9wUHJvcGFnYXRpb249ZnVuY3Rpb24oKXt9LGUucHJvdG90eXBlLmFjdGlvbj1mdW5jdGlvbigpe30sZS5wcm90b3R5cGUucHJvcGFnYXRlPWZ1bmN0aW9uKCl7fSxlLnByb3RvdHlwZS5sYXlQYXRoPWZ1bmN0aW9uKHQpe30sZX0oVSksdW49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGkpe3ZhciBuPXQuY2FsbCh0aGlzLGUsXCJOYXRpdmVTb3VuZEV2ZW50XCIpfHx0aGlzO3JldHVybiBuLnRyYWNrPWksbn1yZXR1cm4gaG4oZSx0KSxlfShjbiksbG49ZnVuY3Rpb24oKXt2YXIgdD1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24odCxlKXt0Ll9fcHJvdG9fXz1lfXx8ZnVuY3Rpb24odCxlKXtmb3IodmFyIGkgaW4gZSllLmhhc093blByb3BlcnR5KGkpJiYodFtpXT1lW2ldKX07cmV0dXJuIGZ1bmN0aW9uKGUsaSl7ZnVuY3Rpb24gbigpe3RoaXMuY29uc3RydWN0b3I9ZX10KGUsaSksZS5wcm90b3R5cGU9bnVsbD09PWk/T2JqZWN0LmNyZWF0ZShpKToobi5wcm90b3R5cGU9aS5wcm90b3R5cGUsbmV3IG4pfX0oKTshZnVuY3Rpb24odCl7dFt0LkNpcmNsZT0wXT1cIkNpcmNsZVwiLHRbdC5SZWN0YW5nbGU9MV09XCJSZWN0YW5nbGVcIn0ocm58fChybj17fSkpO3ZhciBwbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSxuLG8scixzLGEsaCxjLHUpe3JldHVybiB0LmNhbGwodGhpcyxlLGksbixvLHIscyxhLGgsYyx1KXx8dGhpc31yZXR1cm4gbG4oZSx0KSxlfShWdChmdW5jdGlvbigpe2Z1bmN0aW9uIHQodCxlLGksbixvLHIscyxhLGgsYyl7dGhpcy5wb3NpdGlvbj1uZXcgaygwLDApLHRoaXMudmVsb2NpdHk9bmV3IGsoMCwwKSx0aGlzLmFjY2VsZXJhdGlvbj1uZXcgaygwLDApLHRoaXMucGFydGljbGVSb3RhdGlvbmFsVmVsb2NpdHk9MCx0aGlzLmN1cnJlbnRSb3RhdGlvbj0wLHRoaXMuZm9jdXM9bnVsbCx0aGlzLmZvY3VzQWNjZWw9MCx0aGlzLm9wYWNpdHk9MSx0aGlzLmJlZ2luQ29sb3I9UHQuV2hpdGUuY2xvbmUoKSx0aGlzLmVuZENvbG9yPVB0LldoaXRlLmNsb25lKCksdGhpcy5saWZlPTMwMCx0aGlzLmZhZGVGbGFnPSExLHRoaXMuX3JSYXRlPTEsdGhpcy5fZ1JhdGU9MSx0aGlzLl9iUmF0ZT0xLHRoaXMuX2FSYXRlPTAsdGhpcy5fY3VycmVudENvbG9yPVB0LldoaXRlLmNsb25lKCksdGhpcy5lbWl0dGVyPW51bGwsdGhpcy5wYXJ0aWNsZVNpemU9NSx0aGlzLnBhcnRpY2xlU3ByaXRlPW51bGwsdGhpcy5zaXplUmF0ZT0wLHRoaXMuZWxhcHNlZE11bHRpcGxpZXI9MDt2YXIgdT10O2lmKHUmJiEodCBpbnN0YW5jZW9mIGRuKSl7dmFyIGw9dDt1PWwuZW1pdHRlcixlPWwubGlmZSxpPWwub3BhY2l0eSxvPWwuZW5kQ29sb3Isbj1sLmJlZ2luQ29sb3Iscj1sLnBvc2l0aW9uLHM9bC52ZWxvY2l0eSxhPWwuYWNjZWxlcmF0aW9uLGg9bC5zdGFydFNpemUsYz1sLmVuZFNpemV9dGhpcy5lbWl0dGVyPXUsdGhpcy5saWZlPWV8fHRoaXMubGlmZSx0aGlzLm9wYWNpdHk9aXx8dGhpcy5vcGFjaXR5LHRoaXMuZW5kQ29sb3I9b3x8dGhpcy5lbmRDb2xvci5jbG9uZSgpLHRoaXMuYmVnaW5Db2xvcj1ufHx0aGlzLmJlZ2luQ29sb3IuY2xvbmUoKSx0aGlzLl9jdXJyZW50Q29sb3I9dGhpcy5iZWdpbkNvbG9yLmNsb25lKCksdGhpcy5wb3NpdGlvbj1yfHx0aGlzLnBvc2l0aW9uLHRoaXMudmVsb2NpdHk9c3x8dGhpcy52ZWxvY2l0eSx0aGlzLmFjY2VsZXJhdGlvbj1hfHx0aGlzLmFjY2VsZXJhdGlvbix0aGlzLl9yUmF0ZT0odGhpcy5lbmRDb2xvci5yLXRoaXMuYmVnaW5Db2xvci5yKS90aGlzLmxpZmUsdGhpcy5fZ1JhdGU9KHRoaXMuZW5kQ29sb3IuZy10aGlzLmJlZ2luQ29sb3IuZykvdGhpcy5saWZlLHRoaXMuX2JSYXRlPSh0aGlzLmVuZENvbG9yLmItdGhpcy5iZWdpbkNvbG9yLmIpL3RoaXMubGlmZSx0aGlzLl9hUmF0ZT10aGlzLm9wYWNpdHkvdGhpcy5saWZlLHRoaXMuc3RhcnRTaXplPWh8fDAsdGhpcy5lbmRTaXplPWN8fDAsdGhpcy5lbmRTaXplPjAmJnRoaXMuc3RhcnRTaXplPjAmJih0aGlzLnNpemVSYXRlPSh0aGlzLmVuZFNpemUtdGhpcy5zdGFydFNpemUpL3RoaXMubGlmZSx0aGlzLnBhcnRpY2xlU2l6ZT10aGlzLnN0YXJ0U2l6ZSl9cmV0dXJuIHQucHJvdG90eXBlLmtpbGw9ZnVuY3Rpb24oKXt0aGlzLmVtaXR0ZXIucmVtb3ZlUGFydGljbGUodGhpcyl9LHQucHJvdG90eXBlLnVwZGF0ZT1mdW5jdGlvbih0KXtpZih0aGlzLmxpZmU9dGhpcy5saWZlLXQsdGhpcy5lbGFwc2VkTXVsdGlwbGllcj10aGlzLmVsYXBzZWRNdWx0aXBsaWVyK3QsdGhpcy5saWZlPDAmJnRoaXMua2lsbCgpLHRoaXMuZmFkZUZsYWcmJih0aGlzLm9wYWNpdHk9eSh0aGlzLl9hUmF0ZSp0aGlzLmxpZmUsMWUtNCwxKSksdGhpcy5zdGFydFNpemU+MCYmdGhpcy5lbmRTaXplPjAmJih0aGlzLnBhcnRpY2xlU2l6ZT15KHRoaXMuc2l6ZVJhdGUqdCt0aGlzLnBhcnRpY2xlU2l6ZSxNYXRoLm1pbih0aGlzLnN0YXJ0U2l6ZSx0aGlzLmVuZFNpemUpLE1hdGgubWF4KHRoaXMuc3RhcnRTaXplLHRoaXMuZW5kU2l6ZSkpKSx0aGlzLl9jdXJyZW50Q29sb3Iucj15KHRoaXMuX2N1cnJlbnRDb2xvci5yK3RoaXMuX3JSYXRlKnQsMCwyNTUpLHRoaXMuX2N1cnJlbnRDb2xvci5nPXkodGhpcy5fY3VycmVudENvbG9yLmcrdGhpcy5fZ1JhdGUqdCwwLDI1NSksdGhpcy5fY3VycmVudENvbG9yLmI9eSh0aGlzLl9jdXJyZW50Q29sb3IuYit0aGlzLl9iUmF0ZSp0LDAsMjU1KSx0aGlzLl9jdXJyZW50Q29sb3IuYT15KHRoaXMub3BhY2l0eSwxZS00LDEpLHRoaXMuZm9jdXMpe3ZhciBlPXRoaXMuZm9jdXMuc3ViKHRoaXMucG9zaXRpb24pLm5vcm1hbGl6ZSgpLnNjYWxlKHRoaXMuZm9jdXNBY2NlbCkuc2NhbGUodC8xZTMpO3RoaXMudmVsb2NpdHk9dGhpcy52ZWxvY2l0eS5hZGQoZSl9ZWxzZSB0aGlzLnZlbG9jaXR5PXRoaXMudmVsb2NpdHkuYWRkKHRoaXMuYWNjZWxlcmF0aW9uLnNjYWxlKHQvMWUzKSk7dGhpcy5wb3NpdGlvbj10aGlzLnBvc2l0aW9uLmFkZCh0aGlzLnZlbG9jaXR5LnNjYWxlKHQvMWUzKSksdGhpcy5wYXJ0aWNsZVJvdGF0aW9uYWxWZWxvY2l0eSYmKHRoaXMuY3VycmVudFJvdGF0aW9uPSh0aGlzLmN1cnJlbnRSb3RhdGlvbit0aGlzLnBhcnRpY2xlUm90YXRpb25hbFZlbG9jaXR5KnQvMWUzKSUoMipNYXRoLlBJKSl9LHQucHJvdG90eXBlLmRyYXc9ZnVuY3Rpb24odCl7aWYodGhpcy5wYXJ0aWNsZVNwcml0ZSlyZXR1cm4gdGhpcy5wYXJ0aWNsZVNwcml0ZS5yb3RhdGlvbj10aGlzLmN1cnJlbnRSb3RhdGlvbix0aGlzLnBhcnRpY2xlU3ByaXRlLnNjYWxlLnNldFRvKHRoaXMucGFydGljbGVTaXplLHRoaXMucGFydGljbGVTaXplKSx2b2lkIHRoaXMucGFydGljbGVTcHJpdGUuZHJhdyh0LHRoaXMucG9zaXRpb24ueCx0aGlzLnBvc2l0aW9uLnkpO3RoaXMuX2N1cnJlbnRDb2xvci5hPXkodGhpcy5vcGFjaXR5LDFlLTQsMSksdC5maWxsU3R5bGU9dGhpcy5fY3VycmVudENvbG9yLnRvU3RyaW5nKCksdC5iZWdpblBhdGgoKSx0LmFyYyh0aGlzLnBvc2l0aW9uLngsdGhpcy5wb3NpdGlvbi55LHRoaXMucGFydGljbGVTaXplLDAsMipNYXRoLlBJKSx0LmZpbGwoKSx0LmNsb3NlUGF0aCgpfSx0fSgpKSksZG49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGksbixvKXtyZXR1cm4gdC5jYWxsKHRoaXMsZSxpLG4sbyl8fHRoaXN9cmV0dXJuIGxuKGUsdCksZX0oVnQoZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGksbixvKXt2YXIgcj10LmNhbGwodGhpcyxcIm51bWJlclwiPT10eXBlb2YgZT97eDplLHk6aSx3aWR0aDpuLGhlaWdodDpvfTplKXx8dGhpcztyLm51bVBhcnRpY2xlcz0wLHIuaXNFbWl0dGluZz0hMCxyLnBhcnRpY2xlcz1udWxsLHIuZGVhZFBhcnRpY2xlcz1udWxsLHIubWluVmVsPTAsci5tYXhWZWw9MCxyLmFjY2VsZXJhdGlvbj1uZXcgaygwLDApLHIubWluQW5nbGU9MCxyLm1heEFuZ2xlPTAsci5lbWl0UmF0ZT0xLHIucGFydGljbGVMaWZlPTJlMyxyLm9wYWNpdHk9MSxyLmZhZGVGbGFnPSExLHIuZm9jdXM9bnVsbCxyLmZvY3VzQWNjZWw9MSxyLnN0YXJ0U2l6ZT1udWxsLHIuZW5kU2l6ZT1udWxsLHIubWluU2l6ZT01LHIubWF4U2l6ZT01LHIuYmVnaW5Db2xvcj1QdC5XaGl0ZS5jbG9uZSgpLHIuZW5kQ29sb3I9UHQuV2hpdGUuY2xvbmUoKSxyLnBhcnRpY2xlU3ByaXRlPW51bGwsci5lbWl0dGVyVHlwZT1ybi5SZWN0YW5nbGUsci5yYWRpdXM9MCxyLnBhcnRpY2xlUm90YXRpb25hbFZlbG9jaXR5PTAsci5yYW5kb21Sb3RhdGlvbj0hMSxyLl9wYXJ0aWNsZXNUb0VtaXQ9MCxyLmNvbGxpc2lvblR5cGU9eGUuUHJldmVudENvbGxpc2lvbixyLnBhcnRpY2xlcz1uZXcgQixyLmRlYWRQYXJ0aWNsZXM9bmV3IEIsci5yYW5kb209bmV3IGQ7Zm9yKHZhciBzPTA7czxyLnRyYWl0cy5sZW5ndGg7cysrKXIudHJhaXRzW3NdaW5zdGFuY2VvZiBFZSYmci50cmFpdHMuc3BsaWNlKHMsMSk7cmV0dXJuIHJ9cmV0dXJuIGxuKGUsdCksZS5wcm90b3R5cGUucmVtb3ZlUGFydGljbGU9ZnVuY3Rpb24odCl7dGhpcy5kZWFkUGFydGljbGVzLnB1c2godCl9LGUucHJvdG90eXBlLmVtaXRQYXJ0aWNsZXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0O2UrKyl0aGlzLnBhcnRpY2xlcy5wdXNoKHRoaXMuX2NyZWF0ZVBhcnRpY2xlKCkpfSxlLnByb3RvdHlwZS5jbGVhclBhcnRpY2xlcz1mdW5jdGlvbigpe3RoaXMucGFydGljbGVzLmNsZWFyKCl9LGUucHJvdG90eXBlLl9jcmVhdGVQYXJ0aWNsZT1mdW5jdGlvbigpe3ZhciB0PTAsZT0wLGk9dih0aGlzLm1pbkFuZ2xlLHRoaXMubWF4QW5nbGUsdGhpcy5yYW5kb20pLG49dih0aGlzLm1pblZlbCx0aGlzLm1heFZlbCx0aGlzLnJhbmRvbSksbz10aGlzLnN0YXJ0U2l6ZXx8dih0aGlzLm1pblNpemUsdGhpcy5tYXhTaXplLHRoaXMucmFuZG9tKSxyPW4qTWF0aC5jb3MoaSkscz1uKk1hdGguc2luKGkpO2lmKHRoaXMuZW1pdHRlclR5cGU9PT1ybi5SZWN0YW5nbGUpdD12KHRoaXMucG9zLngsdGhpcy5wb3MueCt0aGlzLmdldFdpZHRoKCksdGhpcy5yYW5kb20pLGU9dih0aGlzLnBvcy55LHRoaXMucG9zLnkrdGhpcy5nZXRIZWlnaHQoKSx0aGlzLnJhbmRvbSk7ZWxzZSBpZih0aGlzLmVtaXR0ZXJUeXBlPT09cm4uQ2lyY2xlKXt2YXIgYT12KDAsdGhpcy5yYWRpdXMsdGhpcy5yYW5kb20pO3Q9YSpNYXRoLmNvcyhpKSt0aGlzLnBvcy54LGU9YSpNYXRoLnNpbihpKSt0aGlzLnBvcy55fXZhciBoPW5ldyBwbih0aGlzLHRoaXMucGFydGljbGVMaWZlLHRoaXMub3BhY2l0eSx0aGlzLmJlZ2luQ29sb3IsdGhpcy5lbmRDb2xvcixuZXcgayh0LGUpLG5ldyBrKHIscyksdGhpcy5hY2NlbGVyYXRpb24sdGhpcy5zdGFydFNpemUsdGhpcy5lbmRTaXplKTtyZXR1cm4gaC5mYWRlRmxhZz10aGlzLmZhZGVGbGFnLGgucGFydGljbGVTaXplPW8sdGhpcy5wYXJ0aWNsZVNwcml0ZSYmKGgucGFydGljbGVTcHJpdGU9dGhpcy5wYXJ0aWNsZVNwcml0ZSksaC5wYXJ0aWNsZVJvdGF0aW9uYWxWZWxvY2l0eT10aGlzLnBhcnRpY2xlUm90YXRpb25hbFZlbG9jaXR5LHRoaXMucmFuZG9tUm90YXRpb24mJihoLmN1cnJlbnRSb3RhdGlvbj12KDAsMipNYXRoLlBJLHRoaXMucmFuZG9tKSksdGhpcy5mb2N1cyYmKGguZm9jdXM9dGhpcy5mb2N1cy5hZGQobmV3IGsodGhpcy5wb3MueCx0aGlzLnBvcy55KSksaC5mb2N1c0FjY2VsPXRoaXMuZm9jdXNBY2NlbCksaH0sZS5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKGUsaSl7dmFyIG49dGhpczt0LnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzLGUsaSksdGhpcy5pc0VtaXR0aW5nJiYodGhpcy5fcGFydGljbGVzVG9FbWl0Kz10aGlzLmVtaXRSYXRlKihpLzFlMyksdGhpcy5fcGFydGljbGVzVG9FbWl0PjEmJih0aGlzLmVtaXRQYXJ0aWNsZXMoTWF0aC5mbG9vcih0aGlzLl9wYXJ0aWNsZXNUb0VtaXQpKSx0aGlzLl9wYXJ0aWNsZXNUb0VtaXQ9dGhpcy5fcGFydGljbGVzVG9FbWl0LU1hdGguZmxvb3IodGhpcy5fcGFydGljbGVzVG9FbWl0KSkpLHRoaXMucGFydGljbGVzLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIHQudXBkYXRlKGkpfSksdGhpcy5kZWFkUGFydGljbGVzLmZvckVhY2goZnVuY3Rpb24odCl7cmV0dXJuIG4ucGFydGljbGVzLnJlbW92ZUVsZW1lbnQodCl9KSx0aGlzLmRlYWRQYXJ0aWNsZXMuY2xlYXIoKX0sZS5wcm90b3R5cGUuZHJhdz1mdW5jdGlvbih0KXt0aGlzLnBhcnRpY2xlcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRyYXcodCl9KX0sZS5wcm90b3R5cGUuZGVidWdEcmF3PWZ1bmN0aW9uKGUpe3QucHJvdG90eXBlLmRlYnVnRHJhdy5jYWxsKHRoaXMsZSksZS5maWxsU3R5bGU9UHQuQmxhY2sudG9TdHJpbmcoKSxlLmZpbGxUZXh0KFwiUGFydGljbGVzOiBcIit0aGlzLnBhcnRpY2xlcy5jb3VudCgpLHRoaXMucG9zLngsdGhpcy5wb3MueSsyMCksdGhpcy5mb2N1cyYmKGUuZmlsbFJlY3QodGhpcy5mb2N1cy54K3RoaXMucG9zLngsdGhpcy5mb2N1cy55K3RoaXMucG9zLnksMywzKSx5ZShlLFB0LlllbGxvdyx0aGlzLmZvY3VzLngrdGhpcy5wb3MueCx0aGlzLmZvY3VzLnkrdGhpcy5wb3MueSx0LnByb3RvdHlwZS5nZXRDZW50ZXIuY2FsbCh0aGlzKS54LHQucHJvdG90eXBlLmdldENlbnRlci5jYWxsKHRoaXMpLnkpLGUuZmlsbFRleHQoXCJGb2N1c1wiLHRoaXMuZm9jdXMueCt0aGlzLnBvcy54LHRoaXMuZm9jdXMueSt0aGlzLnBvcy55KSl9LGV9KERlKSkpLGZuPXtBY3Rpb25zOnJ9LF9uPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe3RoaXMuX2xhc3RGcmFtZVBhaXJzPVtdLHRoaXMuX2xhc3RGcmFtZVBhaXJzSGFzaD17fX1yZXR1cm4gdC5wcm90b3R5cGUudHJhY2s9ZnVuY3Rpb24oKXt9LHQucHJvdG90eXBlLnVudHJhY2s9ZnVuY3Rpb24oKXt9LHQucHJvdG90eXBlLmJyb2FkcGhhc2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLGksbj10LmZpbHRlcihmdW5jdGlvbih0KXtyZXR1cm4hdC5pc0tpbGxlZCgpJiZ0LmNvbGxpc2lvblR5cGUhPT14ZS5QcmV2ZW50Q29sbGlzaW9ufSksbz1bXSxyPTAscz1uLmxlbmd0aDtyPHM7cisrKXtlPW5bcl07Zm9yKHZhciBhPXIrMTthPHM7YSsrKXt2YXIgaDtpZihpPW5bYV0saD1lLmNvbGxpZGVzKGkpKXt2YXIgYz1uZXcgUGUoZS5ib2R5LGkuYm9keSk7Yy5jb2xsaXNpb249bmV3IEF0KGUuY29sbGlzaW9uQXJlYSxpLmNvbGxpc2lvbkFyZWEsaCxlLnBvcyxoKSxvLnNvbWUoZnVuY3Rpb24odCl7cmV0dXJuIHQuaWQ9PT1jLmlkfSl8fG8ucHVzaChjKX19fXJldHVybiBvfSx0LnByb3RvdHlwZS5uYXJyb3dwaGFzZT1mdW5jdGlvbih0KXtyZXR1cm4gdH0sdC5wcm90b3R5cGUucnVuQ29sbGlzaW9uU3RhcnRFbmQ9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPXt9LGk9MCxuPXQ7aTxuLmxlbmd0aDtpKyspe2lmKGVbKGg9bltpXSkuaWRdPWgsIXRoaXMuX2xhc3RGcmFtZVBhaXJzSGFzaFtoLmlkXSl7dmFyIG89aC5ib2R5QS5hY3RvcixyPWguYm9keUIuYWN0b3I7by5lbWl0KFwiY29sbGlzaW9uc3RhcnRcIixuZXcgcHQobyxyLGgpKSxyLmVtaXQoXCJjb2xsaXNpb25zdGFydFwiLG5ldyBwdChyLG8saCkpfX1mb3IodmFyIHM9MCxhPXRoaXMuX2xhc3RGcmFtZVBhaXJzO3M8YS5sZW5ndGg7cysrKXt2YXIgaDtpZighZVsoaD1hW3NdKS5pZF0pe289aC5ib2R5QS5hY3RvcixyPWguYm9keUIuYWN0b3I7by5lbWl0KFwiY29sbGlzaW9uZW5kXCIsbmV3IGR0KG8scikpLHIuZW1pdChcImNvbGxpc2lvbmVuZFwiLG5ldyBkdChyLG8pKX19dGhpcy5fbGFzdEZyYW1lUGFpcnM9dCx0aGlzLl9sYXN0RnJhbWVQYWlyc0hhc2g9ZX0sdC5wcm90b3R5cGUucmVzb2x2ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MCxpPXQ7ZTxpLmxlbmd0aDtlKyspe2lbZV0ucmVzb2x2ZShXLmNvbGxpc2lvblJlc29sdXRpb25TdHJhdGVneSl9cmV0dXJuIHQuZmlsdGVyKGZ1bmN0aW9uKHQpe3JldHVybiB0LmNhbkNvbGxpZGV9KX0sdC5wcm90b3R5cGUudXBkYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIDB9LHQucHJvdG90eXBlLmRlYnVnRHJhdz1mdW5jdGlvbigpe30sdH0oKSxnbj1mdW5jdGlvbigpe3ZhciB0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiBlKWUuaGFzT3duUHJvcGVydHkoaSkmJih0W2ldPWVbaV0pfTtyZXR1cm4gZnVuY3Rpb24oZSxpKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxpKSxlLnByb3RvdHlwZT1udWxsPT09aT9PYmplY3QuY3JlYXRlKGkpOihuLnByb3RvdHlwZT1pLnByb3RvdHlwZSxuZXcgbil9fSgpLHluPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSxpLG4sbyl7cmV0dXJuIHQuY2FsbCh0aGlzLGUsaSxuLG8pfHx0aGlzfXJldHVybiBnbihlLHQpLGV9KFZ0KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsaSxuKXt0aGlzLnNwcml0ZXM9W10sdGhpcy5jdXJyZW50RnJhbWU9MCx0aGlzLl9vbGRUaW1lPURhdGUubm93KCksdGhpcy5hbmNob3I9bmV3IGsoMCwwKSx0aGlzLnJvdGF0aW9uPTAsdGhpcy5zY2FsZT1uZXcgaygxLDEpLHRoaXMubG9vcD0hMCx0aGlzLmZyZWV6ZUZyYW1lPS0xLHRoaXMuZmxpcFZlcnRpY2FsPSExLHRoaXMuZmxpcEhvcml6b250YWw9ITEsdGhpcy5kcmF3V2lkdGg9MCx0aGlzLmRyYXdIZWlnaHQ9MCx0aGlzLndpZHRoPTAsdGhpcy5oZWlnaHQ9MDt2YXIgbz10O2lmKHQmJiEodCBpbnN0YW5jZW9mIHNuKSl7dmFyIHI9dDtvPXIuZW5naW5lLGU9ci5zcHJpdGVzLGk9ci5zcGVlZCxuPXIubG9vcH10aGlzLnNwcml0ZXM9ZSx0aGlzLnNwZWVkPWksdGhpcy5fZW5naW5lPW8sbnVsbCE9biYmKHRoaXMubG9vcD1uKSxlJiZlWzBdJiYodGhpcy5kcmF3SGVpZ2h0PWVbMF0/ZVswXS5kcmF3SGVpZ2h0OjAsdGhpcy5kcmF3V2lkdGg9ZVswXT9lWzBdLmRyYXdXaWR0aDowLHRoaXMud2lkdGg9ZVswXT9lWzBdLndpZHRoOjAsdGhpcy5oZWlnaHQ9ZVswXT9lWzBdLmhlaWdodDowLHRoaXMuZnJlZXplRnJhbWU9ZS5sZW5ndGgtMSl9cmV0dXJuIHQucHJvdG90eXBlLm9wYWNpdHk9ZnVuY3Rpb24odCl7dGhpcy5hZGRFZmZlY3QobmV3IEh0KHQpKX0sdC5wcm90b3R5cGUuZ3JheXNjYWxlPWZ1bmN0aW9uKCl7dGhpcy5hZGRFZmZlY3QobmV3IEl0KX0sdC5wcm90b3R5cGUuaW52ZXJ0PWZ1bmN0aW9uKCl7dGhpcy5hZGRFZmZlY3QobmV3IEx0KX0sdC5wcm90b3R5cGUuZmlsbD1mdW5jdGlvbih0KXt0aGlzLmFkZEVmZmVjdChuZXcgcXQodCkpfSx0LnByb3RvdHlwZS5jb2xvcml6ZT1mdW5jdGlvbih0KXt0aGlzLmFkZEVmZmVjdChuZXcgenQodCkpfSx0LnByb3RvdHlwZS5saWdodGVuPWZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PS4xKSx0aGlzLmFkZEVmZmVjdChuZXcgV3QodCkpfSx0LnByb3RvdHlwZS5kYXJrZW49ZnVuY3Rpb24odCl7dm9pZCAwPT09dCYmKHQ9LjEpLHRoaXMuYWRkRWZmZWN0KG5ldyBqdCh0KSl9LHQucHJvdG90eXBlLnNhdHVyYXRlPWZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PS4xKSx0aGlzLmFkZEVmZmVjdChuZXcgVXQodCkpfSx0LnByb3RvdHlwZS5kZXNhdHVyYXRlPWZ1bmN0aW9uKHQpe3ZvaWQgMD09PXQmJih0PS4xKSx0aGlzLmFkZEVmZmVjdChuZXcgTnQodCkpfSx0LnByb3RvdHlwZS5hZGRFZmZlY3Q9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuc3ByaXRlcyl0aGlzLnNwcml0ZXNbZV0uYWRkRWZmZWN0KHQpfSx0LnByb3RvdHlwZS5yZW1vdmVFZmZlY3Q9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuc3ByaXRlcyl0aGlzLnNwcml0ZXNbZV0ucmVtb3ZlRWZmZWN0KHQpfSx0LnByb3RvdHlwZS5jbGVhckVmZmVjdHM9ZnVuY3Rpb24oKXtmb3IodmFyIHQgaW4gdGhpcy5zcHJpdGVzKXRoaXMuc3ByaXRlc1t0XS5jbGVhckVmZmVjdHMoKX0sdC5wcm90b3R5cGUuX3NldEFuY2hvcj1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5zcHJpdGVzKXRoaXMuc3ByaXRlc1tlXS5hbmNob3Iuc2V0VG8odC54LHQueSl9LHQucHJvdG90eXBlLl9zZXRSb3RhdGlvbj1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5zcHJpdGVzKXRoaXMuc3ByaXRlc1tlXS5yb3RhdGlvbj10fSx0LnByb3RvdHlwZS5fc2V0U2NhbGU9ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuc3ByaXRlcyl0aGlzLnNwcml0ZXNbZV0uc2NhbGU9dH0sdC5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmN1cnJlbnRGcmFtZT0wfSx0LnByb3RvdHlwZS5pc0RvbmU9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5sb29wJiZ0aGlzLmN1cnJlbnRGcmFtZT49dGhpcy5zcHJpdGVzLmxlbmd0aH0sdC5wcm90b3R5cGUudGljaz1mdW5jdGlvbigpe3ZhciB0PURhdGUubm93KCk7dC10aGlzLl9vbGRUaW1lPnRoaXMuc3BlZWQmJih0aGlzLmN1cnJlbnRGcmFtZT10aGlzLmxvb3A/KHRoaXMuY3VycmVudEZyYW1lKzEpJXRoaXMuc3ByaXRlcy5sZW5ndGg6dGhpcy5jdXJyZW50RnJhbWUrMSx0aGlzLl9vbGRUaW1lPXQpfSx0LnByb3RvdHlwZS5fdXBkYXRlVmFsdWVzPWZ1bmN0aW9uKCl7dGhpcy5fc2V0QW5jaG9yKHRoaXMuYW5jaG9yKSx0aGlzLl9zZXRSb3RhdGlvbih0aGlzLnJvdGF0aW9uKSx0aGlzLl9zZXRTY2FsZSh0aGlzLnNjYWxlKX0sdC5wcm90b3R5cGUuc2tpcD1mdW5jdGlvbih0KXt0aGlzLmN1cnJlbnRGcmFtZT0odGhpcy5jdXJyZW50RnJhbWUrdCkldGhpcy5zcHJpdGVzLmxlbmd0aH0sdC5wcm90b3R5cGUuZHJhdz1mdW5jdGlvbih0LGUsaSl7dmFyIG47dGhpcy50aWNrKCksdGhpcy5fdXBkYXRlVmFsdWVzKCksdGhpcy5jdXJyZW50RnJhbWU8dGhpcy5zcHJpdGVzLmxlbmd0aCYmKG49dGhpcy5zcHJpdGVzW3RoaXMuY3VycmVudEZyYW1lXSx0aGlzLmZsaXBWZXJ0aWNhbCYmKG4uZmxpcFZlcnRpY2FsPXRoaXMuZmxpcFZlcnRpY2FsKSx0aGlzLmZsaXBIb3Jpem9udGFsJiYobi5mbGlwSG9yaXpvbnRhbD10aGlzLmZsaXBIb3Jpem9udGFsKSxuLmRyYXcodCxlLGkpKSwtMSE9PXRoaXMuZnJlZXplRnJhbWUmJnRoaXMuY3VycmVudEZyYW1lPj10aGlzLnNwcml0ZXMubGVuZ3RoJiYobj10aGlzLnNwcml0ZXNbeSh0aGlzLmZyZWV6ZUZyYW1lLDAsdGhpcy5zcHJpdGVzLmxlbmd0aC0xKV0pLmRyYXcodCxlLGkpLG4mJih0aGlzLmRyYXdXaWR0aD1uLmRyYXdXaWR0aCx0aGlzLmRyYXdIZWlnaHQ9bi5kcmF3SGVpZ2h0KX0sdC5wcm90b3R5cGUucGxheT1mdW5jdGlvbih0LGUpe3RoaXMucmVzZXQoKSx0aGlzLl9lbmdpbmUucGxheUFuaW1hdGlvbih0aGlzLHQsZSl9LHR9KCkpKSx2bj1mdW5jdGlvbigpe2Z1bmN0aW9uIHQodCl7dGhpcy5saW5lV2lkdGg9NSx0aGlzLmZpbGxlZD0hMSx0aGlzLl9wb2ludHM9W10sdGhpcy5hbmNob3I9bmV3IGsoMCwwKSx0aGlzLnJvdGF0aW9uPTAsdGhpcy5zY2FsZT1uZXcgaygxLDEpLHRoaXMuX3BvaW50cz10O3ZhciBlPXRoaXMuX3BvaW50cy5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5taW4odCxlLngpfSwwKSxpPXRoaXMuX3BvaW50cy5yZWR1Y2UoZnVuY3Rpb24odCxlKXtyZXR1cm4gTWF0aC5tYXgodCxlLngpfSwwKTt0aGlzLmRyYXdXaWR0aD1pLWU7dmFyIG49dGhpcy5fcG9pbnRzLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLm1pbih0LGUueSl9LDApLG89dGhpcy5fcG9pbnRzLnJlZHVjZShmdW5jdGlvbih0LGUpe3JldHVybiBNYXRoLm1heCh0LGUueSl9LDApO3RoaXMuZHJhd0hlaWdodD1vLW4sdGhpcy5oZWlnaHQ9dGhpcy5kcmF3SGVpZ2h0LHRoaXMud2lkdGg9dGhpcy5kcmF3V2lkdGh9cmV0dXJuIHQucHJvdG90eXBlLmFkZEVmZmVjdD1mdW5jdGlvbigpe30sdC5wcm90b3R5cGUucmVtb3ZlRWZmZWN0PWZ1bmN0aW9uKCl7fSx0LnByb3RvdHlwZS5jbGVhckVmZmVjdHM9ZnVuY3Rpb24oKXt9LHQucHJvdG90eXBlLnJlc2V0PWZ1bmN0aW9uKCl7fSx0LnByb3RvdHlwZS5kcmF3PWZ1bmN0aW9uKHQsZSxpKXt0LnNhdmUoKSx0LnRyYW5zbGF0ZShlK3RoaXMuYW5jaG9yLngsaSt0aGlzLmFuY2hvci55KSx0LnNjYWxlKHRoaXMuc2NhbGUueCx0aGlzLnNjYWxlLnkpLHQucm90YXRlKHRoaXMucm90YXRpb24pLHQuYmVnaW5QYXRoKCksdC5saW5lV2lkdGg9dGhpcy5saW5lV2lkdGg7dmFyIG49dGhpcy5fcG9pbnRzWzBdO3QubW92ZVRvKG4ueCxuLnkpO2Zvcih2YXIgbz0wLHI9dGhpcy5fcG9pbnRzLmxlbmd0aDtvPHI7bysrKXQubGluZVRvKHRoaXMuX3BvaW50c1tvXS54LHRoaXMuX3BvaW50c1tvXS55KTt0LmxpbmVUbyhuLngsbi55KSx0LmNsb3NlUGF0aCgpLHRoaXMuZmlsbGVkJiYodC5maWxsU3R5bGU9dGhpcy5maWxsQ29sb3IudG9TdHJpbmcoKSx0LmZpbGwoKSksdC5zdHJva2VTdHlsZT10aGlzLmxpbmVDb2xvci50b1N0cmluZygpLHRoaXMuZmxpcEhvcml6b250YWwmJih0LnRyYW5zbGF0ZSh0aGlzLmRyYXdXaWR0aCwwKSx0LnNjYWxlKC0xLDEpKSx0aGlzLmZsaXBWZXJ0aWNhbCYmKHQudHJhbnNsYXRlKDAsdGhpcy5kcmF3SGVpZ2h0KSx0LnNjYWxlKDEsLTEpKSx0LnN0cm9rZSgpLHQucmVzdG9yZSgpfSx0fSgpLG1uPWZ1bmN0aW9uKCl7dmFyIHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShpKSYmKHRbaV09ZVtpXSl9O3JldHVybiBmdW5jdGlvbihlLGkpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLGkpLGUucHJvdG90eXBlPW51bGw9PT1pP09iamVjdC5jcmVhdGUoaSk6KG4ucHJvdG90eXBlPWkucHJvdG90eXBlLG5ldyBuKX19KCksYm49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZShlLGksbixvLHIpe3JldHVybiB0LmNhbGwodGhpcyxlLGksbixvLHIpfHx0aGlzfXJldHVybiBtbihlLHQpLGV9KFZ0KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0LGUsaSxuLG8pe3RoaXMuc3ByaXRlcz1bXSx0aGlzLmltYWdlPW51bGwsdGhpcy5jb2x1bW5zPTAsdGhpcy5yb3dzPTAsdGhpcy5zcFdpZHRoPTAsdGhpcy5zcEhlaWdodD0wO3ZhciByPSExO2lmKHQgaW5zdGFuY2VvZiBBcnJheT90aGlzLnNwcml0ZXM9dDooIXR8fHQgaW5zdGFuY2VvZiBadD8odGhpcy5pbWFnZT10LHRoaXMuY29sdW1ucz1lLHRoaXMucm93cz1pLHRoaXMuc3BXaWR0aD1uLHRoaXMuc3BIZWlnaHQ9byk6KHRoaXMuY29sdW1ucz10LmNvbHVtbnMsdGhpcy5yb3dzPXQucm93cyx0aGlzLnNwV2lkdGg9dC5zcFdpZHRoLHRoaXMuc3BIZWlnaHQ9dC5zcEhlaWdodCx0aGlzLmltYWdlPXQuaW1hZ2UpLHRoaXMuc3ByaXRlcz1uZXcgQXJyYXkodGhpcy5jb2x1bW5zKnRoaXMucm93cykscj0hMCkscil7dmFyIHM9MCxhPTA7Zm9yKHM9MDtzPHRoaXMucm93cztzKyspZm9yKGE9MDthPHRoaXMuY29sdW1uczthKyspdGhpcy5zcHJpdGVzW2Ercyp0aGlzLmNvbHVtbnNdPW5ldyBLdCh0aGlzLmltYWdlLGEqdGhpcy5zcFdpZHRoLHMqdGhpcy5zcEhlaWdodCx0aGlzLnNwV2lkdGgsdGhpcy5zcEhlaWdodCl9fXJldHVybiB0LnByb3RvdHlwZS5nZXRBbmltYXRpb25CeUluZGljZXM9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPXRoaXMsbz1lLm1hcChmdW5jdGlvbih0KXtyZXR1cm4gbi5zcHJpdGVzW3RdfSk7cmV0dXJuIG89by5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2xvbmUoKX0pLG5ldyB5bih0LG8saSl9LHQucHJvdG90eXBlLmdldEFuaW1hdGlvbkJldHdlZW49ZnVuY3Rpb24odCxlLGksbil7dmFyIG89dGhpcy5zcHJpdGVzLnNsaWNlKGUsaSk7cmV0dXJuIG89by5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2xvbmUoKX0pLG5ldyB5bih0LG8sbil9LHQucHJvdG90eXBlLmdldEFuaW1hdGlvbkZvckFsbD1mdW5jdGlvbih0LGUpe3ZhciBpPXRoaXMuc3ByaXRlcy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuIHQuY2xvbmUoKX0pO3JldHVybiBuZXcgeW4odCxpLGUpfSx0LnByb3RvdHlwZS5nZXRTcHJpdGU9ZnVuY3Rpb24odCl7aWYodD49MCYmdDx0aGlzLnNwcml0ZXMubGVuZ3RoKXJldHVybiB0aGlzLnNwcml0ZXNbdF07dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBpbmRleDogXCIrdCl9LHQucHJvdG90eXBlLmdldEFuaW1hdGlvbkJ5Q29vcmRzPWZ1bmN0aW9uKHQsZSxpKXtmb3IodmFyIG49MCxvPTAscj1uZXcgQXJyYXkoZS5sZW5ndGgpLHM9MDtzPGUubGVuZ3RoO3MrKyl7dmFyIGE9ZVtzXTthLmltYWdlPWEuaW1hZ2V8fHRoaXMuaW1hZ2Usbj1NYXRoLm1heChuLGEuZHJhd1dpZHRoKSxvPU1hdGgubWF4KG8sYS5kcmF3SGVpZ2h0KSxyW3NdPW5ldyBLdChhKX12YXIgaD1uZXcgeW4odCxyLGkpO3JldHVybiBoLmRyYXdXaWR0aD1uLGguZHJhd0hlaWdodD1vLGh9LHR9KCkpKSx3bj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSxuLG8scixzLGEpe3JldHVybiB0LmNhbGwodGhpcyxlLGksbixvLHIscyxhKXx8dGhpc31yZXR1cm4gbW4oZSx0KSxlfShWdChmdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUsaSxuLG8scixzLGEpe3ZhciBoPXQuY2FsbCh0aGlzLGUgaW5zdGFuY2VvZiBadD97aW1hZ2U6ZSxzcFdpZHRoOnMsc3BIZWlnaHQ6YSxyb3dzOnIsY29sdW1uczpvfTplKXx8dGhpcztyZXR1cm4gaC5fY3VycmVudENvbG9yPVB0LkJsYWNrLmNsb25lKCksaC5fY3VycmVudE9wYWNpdHk9MSxoLl9zcHJpdGVzPXt9LGguX3RleHRTaGFkb3dPbj0hMSxoLl90ZXh0U2hhZG93RGlydHk9ITAsaC5fdGV4dFNoYWRvd0NvbG9yPVB0LkJsYWNrLmNsb25lKCksaC5fdGV4dFNoYWRvd1Nwcml0ZXM9e30saC5fc2hhZG93T2Zmc2V0WD01LGguX3NoYWRvd09mZnNldFk9NSwhZXx8ZSBpbnN0YW5jZW9mIFp0fHwoaT1lLmFscGhhYmV0LG49ZS5jYXNlSW5zZW5zaXRpdmUpLGguX2FscGhhYmV0PWksaC5fY2FzZUluc2Vuc2l0aXZlPW4saC5fc3ByaXRlcz1oLmdldFRleHRTcHJpdGVzKCksaH1yZXR1cm4gbW4oZSx0KSxlLnByb3RvdHlwZS5nZXRUZXh0U3ByaXRlcz1mdW5jdGlvbigpe2Zvcih2YXIgdD17fSxlPTA7ZTx0aGlzLl9hbHBoYWJldC5sZW5ndGg7ZSsrKXt2YXIgaT10aGlzLl9hbHBoYWJldFtlXTt0aGlzLl9jYXNlSW5zZW5zaXRpdmUmJihpPWkudG9Mb3dlckNhc2UoKSksdFtpXT10aGlzLnNwcml0ZXNbZV0uY2xvbmUoKX1yZXR1cm4gdH0sZS5wcm90b3R5cGUuc2V0VGV4dFNoYWRvdz1mdW5jdGlvbih0LGUsaSl7Zm9yKHZhciBuIGluIHRoaXMuX3RleHRTaGFkb3dPbj0hMCx0aGlzLl9zaGFkb3dPZmZzZXRYPXQsdGhpcy5fc2hhZG93T2Zmc2V0WT1lLHRoaXMuX3RleHRTaGFkb3dDb2xvcj1pLmNsb25lKCksdGhpcy5fdGV4dFNoYWRvd0RpcnR5PSEwLHRoaXMuX3Nwcml0ZXMpdGhpcy5fdGV4dFNoYWRvd1Nwcml0ZXNbbl09dGhpcy5fc3ByaXRlc1tuXS5jbG9uZSgpfSxlLnByb3RvdHlwZS51c2VUZXh0U2hhZG93PWZ1bmN0aW9uKHQpe3RoaXMuX3RleHRTaGFkb3dPbj10LHQmJnRoaXMuc2V0VGV4dFNoYWRvdyg1LDUsdGhpcy5fdGV4dFNoYWRvd0NvbG9yKX0sZS5wcm90b3R5cGUuZHJhdz1mdW5jdGlvbih0LGUsaSxuLG8pe2lmKG89dGhpcy5fcGFyc2VPcHRpb25zKG8pLHRoaXMuX2N1cnJlbnRDb2xvci50b1N0cmluZygpIT09by5jb2xvci50b1N0cmluZygpfHx0aGlzLl9jdXJyZW50T3BhY2l0eSE9PW8ub3BhY2l0eSlmb3IodmFyIHIgaW4gdGhpcy5fY3VycmVudE9wYWNpdHk9by5vcGFjaXR5LHRoaXMuX2N1cnJlbnRDb2xvcj1vLmNvbG9yLHRoaXMuX3Nwcml0ZXMpdGhpcy5fc3ByaXRlc1tyXS5jbGVhckVmZmVjdHMoKSx0aGlzLl9zcHJpdGVzW3JdLmZpbGwoby5jb2xvciksdGhpcy5fc3ByaXRlc1tyXS5vcGFjaXR5KG8ub3BhY2l0eSk7aWYodGhpcy5fdGV4dFNoYWRvd09uJiZ0aGlzLl90ZXh0U2hhZG93RGlydHkmJnRoaXMuX3RleHRTaGFkb3dDb2xvcil7Zm9yKHZhciBzIGluIHRoaXMuX3RleHRTaGFkb3dTcHJpdGVzKXRoaXMuX3RleHRTaGFkb3dTcHJpdGVzW3NdLmNsZWFyRWZmZWN0cygpLHRoaXMuX3RleHRTaGFkb3dTcHJpdGVzW3NdLmFkZEVmZmVjdChuZXcgcXQodGhpcy5fdGV4dFNoYWRvd0NvbG9yLmNsb25lKCkpKTt0aGlzLl90ZXh0U2hhZG93RGlydHk9ITF9dmFyIGE9dGhpcy5zcHJpdGVzWzBdLGg9YS5kcmF3SGVpZ2h0LGM9by5mb250U2l6ZS9oLHU9ZS5sZW5ndGgqYS5kcmF3V2lkdGgqYytlLmxlbmd0aCpvLmxldHRlclNwYWNpbmcsbD1pO28udGV4dEFsaWduPT09Y2kuTGVmdHx8by50ZXh0QWxpZ249PT1jaS5TdGFydD9sPWk6by50ZXh0QWxpZ249PT1jaS5SaWdodHx8by50ZXh0QWxpZ249PT1jaS5FbmQ/bD1pLXU6by50ZXh0QWxpZ249PT1jaS5DZW50ZXImJihsPWktdS8yKTt2YXIgcD1uLWgqYztvLmJhc2VBbGlnbj09PXVpLlRvcHx8by5iYXNlQWxpZ249PT11aS5IYW5naW5nP3A9bjpvLmJhc2VBbGlnbj09PXVpLklkZW9ncmFwaGljfHxvLmJhc2VBbGlnbj09PXVpLkJvdHRvbXx8by5iYXNlQWxpZ249PT11aS5BbHBoYWJldGljP3A9bi1oKmM6by5iYXNlQWxpZ249PT11aS5NaWRkbGUmJihwPW4taCpjLzIpO2Zvcih2YXIgZD0wO2Q8ZS5sZW5ndGg7ZCsrKXt2YXIgZj1lW2RdO3RoaXMuX2Nhc2VJbnNlbnNpdGl2ZSYmKGY9Zi50b0xvd2VyQ2FzZSgpKTt0cnl7dGhpcy5fdGV4dFNoYWRvd09uJiYodGhpcy5fdGV4dFNoYWRvd1Nwcml0ZXNbZl0uc2NhbGUueD1jLHRoaXMuX3RleHRTaGFkb3dTcHJpdGVzW2ZdLnNjYWxlLnk9Yyx0aGlzLl90ZXh0U2hhZG93U3ByaXRlc1tmXS5kcmF3KHQsbCt0aGlzLl9zaGFkb3dPZmZzZXRYLHArdGhpcy5fc2hhZG93T2Zmc2V0WSkpO3ZhciBfPXRoaXMuX3Nwcml0ZXNbZl07Xy5zY2FsZS54PWMsXy5zY2FsZS55PWMsXy5kcmF3KHQsbCxwKSxsKz1fLmRyYXdXaWR0aCtvLmxldHRlclNwYWNpbmd9Y2F0Y2godCl7T3QuZ2V0SW5zdGFuY2UoKS5lcnJvcihcIlNwcml0ZUZvbnQgRXJyb3IgZHJhd2luZyBjaGFyIFwiK2YpfX19LGUucHJvdG90eXBlLl9wYXJzZU9wdGlvbnM9ZnVuY3Rpb24odCl7cmV0dXJue2ZvbnRTaXplOnQuZm9udFNpemV8fDEwLGxldHRlclNwYWNpbmc6dC5sZXR0ZXJTcGFjaW5nfHwwLGNvbG9yOnQuY29sb3J8fFB0LkJsYWNrLmNsb25lKCksdGV4dEFsaWduOnZvaWQgMD09PXR5cGVvZiB0LnRleHRBbGlnbj9jaS5MZWZ0OnQudGV4dEFsaWduLGJhc2VBbGlnbjp2b2lkIDA9PT10eXBlb2YgdC5iYXNlQWxpZ24/dWkuQm90dG9tOnQuYmFzZUFsaWduLG1heFdpZHRoOnQubWF4V2lkdGh8fC0xLG9wYWNpdHk6dC5vcGFjaXR5fHwwfX0sZX0oYm4pKSkseG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnR5cGU9e2FueTpcIlwiLGJsb2I6XCJibG9iXCIsanNvbjpcImpzb25cIix0ZXh0OlwidGV4dFwiLGRvY3VtZW50OlwiZG9jdW1lbnRcIixhcnJheWJ1ZmZlcjpcImFycmF5YnVmZmVyXCJ9LHR9KCk7ZnVuY3Rpb24gUG4odCxlLGkpe3JldHVybiBlK3QqKGktZSl9ZnVuY3Rpb24gU24odCl7cmV0dXJuIHQqdCp0Kih0Kig2KnQtMTUpKzEwKX12YXIgQW4sRW49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQpe3RoaXMuX3Blcm09WzE1MSwxNjAsMTM3LDkxLDkwLDE1LDEzMSwxMywyMDEsOTUsOTYsNTMsMTk0LDIzMyw3LDIyNSwxNDAsMzYsMTAzLDMwLDY5LDE0Miw4LDk5LDM3LDI0MCwyMSwxMCwyMywxOTAsNiwxNDgsMjQ3LDEyMCwyMzQsNzUsMCwyNiwxOTcsNjIsOTQsMjUyLDIxOSwyMDMsMTE3LDM1LDExLDMyLDU3LDE3NywzMyw4OCwyMzcsMTQ5LDU2LDg3LDE3NCwyMCwxMjUsMTM2LDE3MSwxNjgsNjgsMTc1LDc0LDE2NSw3MSwxMzQsMTM5LDQ4LDI3LDE2Niw3NywxNDYsMTU4LDIzMSw4MywxMTEsMjI5LDEyMiw2MCwyMTEsMTMzLDIzMCwyMjAsMTA1LDkyLDQxLDU1LDQ2LDI0NSw0MCwyNDQsMTAyLDE0Myw1NCw2NSwyNSw2MywxNjEsMSwyMTYsODAsNzMsMjA5LDc2LDEzMiwxODcsMjA4LDg5LDE4LDE2OSwyMDAsMTk2LDEzNSwxMzAsMTE2LDE4OCwxNTksODYsMTY0LDEwMCwxMDksMTk4LDE3MywxODYsMyw2NCw1MiwyMTcsMjI2LDI1MCwxMjQsMTIzLDUsMjAyLDM4LDE0NywxMTgsMTI2LDI1NSw4Miw4NSwyMTIsMjA3LDIwNiw1OSwyMjcsNDcsMTYsNTgsMTcsMTgyLDE4OSwyOCw0MiwyMjMsMTgzLDE3MCwyMTMsMTE5LDI0OCwxNTIsMiw0NCwxNTQsMTYzLDcwLDIyMSwxNTMsMTAxLDE1NSwxNjcsNDMsMTcyLDksMTI5LDIyLDM5LDI1MywxOSw5OCwxMDgsMTEwLDc5LDExMywyMjQsMjMyLDE3OCwxODUsMTEyLDEwNCwyMTgsMjQ2LDk3LDIyOCwyNTEsMzQsMjQyLDE5MywyMzgsMjEwLDE0NCwxMiwxOTEsMTc5LDE2MiwyNDEsODEsNTEsMTQ1LDIzNSwyNDksMTQsMjM5LDEwNyw0OSwxOTIsMjE0LDMxLDE4MSwxOTksMTA2LDE1NywxODQsODQsMjA0LDE3NiwxMTUsMTIxLDUwLDQ1LDEyNyw0LDE1MCwyNTQsMTM4LDIzNiwyMDUsOTMsMjIyLDExNCw2NywyOSwyNCw3MiwyNDMsMTQxLDEyOCwxOTUsNzgsNjYsMjE1LDYxLDE1NiwxODBdLHRoaXMuX3A9bmV3IFVpbnQ4QXJyYXkoNTEyKSx0aGlzLl9kZWZhdWx0UGVybGluT3B0aW9ucz17b2N0YXZlczoxLGZyZXF1ZW5jeToxLGFtcGxpdHVkZToxLHBlcnNpc3RhbmNlOi41fSx0PV8oe30sdGhpcy5fZGVmYXVsdFBlcmxpbk9wdGlvbnMsdCksdGhpcy5wZXJzaXN0YW5jZT10LnBlcnNpc3RhbmNlLHRoaXMuYW1wbGl0dWRlPXQuYW1wbGl0dWRlLHRoaXMuZnJlcXVlbmN5PXQuZnJlcXVlbmN5LHRoaXMub2N0YXZlcz10Lm9jdGF2ZXMsdC5zZWVkP3RoaXMuX3JhbmRvbT1uZXcgZCh0LnNlZWQpOnRoaXMuX3JhbmRvbT1uZXcgZCx0aGlzLl9wZXJtPXRoaXMuX3JhbmRvbS5zaHVmZmxlKHRoaXMuX3Blcm0pO2Zvcih2YXIgZT0wO2U8NTEyO2UrKyl0aGlzLl9wW2VdPTI1NSZ0aGlzLl9wZXJtW2UlMjU2XX1yZXR1cm4gdC5wcm90b3R5cGUubm9pc2U9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9dGhpcy5hbXBsaXR1ZGUsZT10aGlzLmZyZXF1ZW5jeSxpPTAsbj0wLG89MDtvPHRoaXMub2N0YXZlcztvKyspe3N3aXRjaChhcmd1bWVudHMubGVuZ3RoKXtjYXNlIDE6aSs9dGhpcy5fbm9pc2UxZChhcmd1bWVudHNbMF0qZSkqdDticmVhaztjYXNlIDI6aSs9dGhpcy5fbm9pc2UyZChhcmd1bWVudHNbMF0qZSxhcmd1bWVudHNbMV0qZSkqdDticmVhaztjYXNlIDM6aSs9dGhpcy5fbm9pc2UzZChhcmd1bWVudHNbMF0qZSxhcmd1bWVudHNbMV0qZSxhcmd1bWVudHNbMl0qZSkqdDticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcihcIkludmFsaWQgYXJndW1lbnRzIGZvciBwZXJsaW4gbm9pc2VcIil9bis9dCx0Kj10aGlzLnBlcnNpc3RhbmNlLGUqPTJ9cmV0dXJuIGkvbn0sdC5wcm90b3R5cGUuc2VxdWVuY2U9ZnVuY3Rpb24odCxlKXtlfHwoZT0xL3QpO2Zvcih2YXIgaT1uZXcgQXJyYXkodCksbj0wO248dDtuKyspaVtuXT10aGlzLm5vaXNlKG4qZSk7cmV0dXJuIGl9LHQucHJvdG90eXBlLmdyaWQ9ZnVuY3Rpb24odCxlLGkpe2l8fChpPTEvTWF0aC5taW4odCxlKSk7Zm9yKHZhciBuPW5ldyBBcnJheSh0KmUpLG89MDtvPGU7bysrKWZvcih2YXIgcj0wO3I8dDtyKyspbltyK28qdF09dGhpcy5ub2lzZShyKmksbyppKTtyZXR1cm4gbn0sdC5wcm90b3R5cGUuX2dyYWRpZW50M2Q9ZnVuY3Rpb24odCxlLGksbil7dmFyIG89MTUmdCxyPW88OD9lOmkscz1vPDQ/aToxMj09PW98fDE0PT09bz9lOm47cmV0dXJuKDA9PSgxJm8pP3I6LXIpKygwPT0oMiZvKT9zOi1zKX0sdC5wcm90b3R5cGUuX2dyYWRpZW50MmQ9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPTA9PSgxJnQpP2U6aTtyZXR1cm4gMD09KDImdCk/LW46bn0sdC5wcm90b3R5cGUuX2dyYWRpZW50MWQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gMD09KDEmdCk/LWU6ZX0sdC5wcm90b3R5cGUuX25vaXNlMWQ9ZnVuY3Rpb24odCl7dmFyIGU9MjU1Jk1hdGguZmxvb3IodCk7cmV0dXJuKFBuKFNuKHQtPU1hdGguZmxvb3IodCkpLHRoaXMuX2dyYWRpZW50MWQodGhpcy5fcFtlXSx0KSx0aGlzLl9ncmFkaWVudDFkKHRoaXMuX3BbZSsxXSx0LTEpKSsxKS8yfSx0LnByb3RvdHlwZS5fbm9pc2UyZD1mdW5jdGlvbih0LGUpe3ZhciBpPTI1NSZNYXRoLmZsb29yKHQpLG49MjU1Jk1hdGguZmxvb3IoZSk7dC09TWF0aC5mbG9vcih0KSxlLT1NYXRoLmZsb29yKGUpO3ZhciBvPVNuKHQpLHI9U24oZSkscz10aGlzLl9wW2ldK24sYT10aGlzLl9wW2krMV0rbjtyZXR1cm4oUG4ocixQbihvLHRoaXMuX2dyYWRpZW50MmQodGhpcy5fcFtzXSx0LGUpLHRoaXMuX2dyYWRpZW50MmQodGhpcy5fcFthXSx0LTEsZSkpLFBuKG8sdGhpcy5fZ3JhZGllbnQyZCh0aGlzLl9wW3MrMV0sdCxlLTEpLHRoaXMuX2dyYWRpZW50MmQodGhpcy5fcFthKzFdLHQtMSxlLTEpKSkrMSkvMn0sdC5wcm90b3R5cGUuX25vaXNlM2Q9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPTI1NSZNYXRoLmZsb29yKHQpLG89MjU1Jk1hdGguZmxvb3IoZSkscj0yNTUmTWF0aC5mbG9vcihpKTt0LT1NYXRoLmZsb29yKHQpLGUtPU1hdGguZmxvb3IoZSksaS09TWF0aC5mbG9vcihpKTt2YXIgcz1Tbih0KSxhPVNuKGUpLGg9U24oaSksYz10aGlzLl9wW25dK28sdT10aGlzLl9wW24rMV0rbyxsPXRoaXMuX3BbY10rcixwPXRoaXMuX3BbdV0rcixkPXRoaXMuX3BbYysxXStyLGY9dGhpcy5fcFt1KzFdK3I7cmV0dXJuKFBuKGgsUG4oYSxQbihzLHRoaXMuX2dyYWRpZW50M2QodGhpcy5fcFtsXSx0LGUsaSksdGhpcy5fZ3JhZGllbnQzZCh0aGlzLl9wW3BdLHQtMSxlLGkpKSxQbihzLHRoaXMuX2dyYWRpZW50M2QodGhpcy5fcFtkXSx0LGUtMSxpKSx0aGlzLl9ncmFkaWVudDNkKHRoaXMuX3BbZl0sdC0xLGUtMSxpKSkpLFBuKGEsUG4ocyx0aGlzLl9ncmFkaWVudDNkKHRoaXMuX3BbbCsxXSx0LGUsaS0xKSx0aGlzLl9ncmFkaWVudDNkKHRoaXMuX3BbcCsxXSx0LTEsZSxpLTEpKSxQbihzLHRoaXMuX2dyYWRpZW50M2QodGhpcy5fcFtkKzFdLHQsZS0xLGktMSksdGhpcy5fZ3JhZGllbnQzZCh0aGlzLl9wW2YrMV0sdC0xLGUtMSxpLTEpKSkpKzEpLzJ9LHR9KCksQ249ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSl7dGhpcy5nZW5lcmF0b3I9dCx0aGlzLmNvbG9yRmNuPWUsZXx8KHRoaXMuY29sb3JGY249ZnVuY3Rpb24odCl7cmV0dXJuIHQ8MTI1P1B0LkJsYWNrOlB0LldoaXRlfSl9cmV0dXJuIHQucHJvdG90eXBlLmltYWdlPWZ1bmN0aW9uKHQsZSl7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKSxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7bi53aWR0aD10LG4uaGVpZ2h0PWU7dmFyIG89bi5nZXRDb250ZXh0KFwiMmRcIik7cmV0dXJuIHRoaXMuZHJhdyhvLDAsMCx0LGUpLGkuc3JjPW4udG9EYXRhVVJMKCksaX0sdC5wcm90b3R5cGUuZHJhdz1mdW5jdGlvbih0LGUsaSxuLG8pe2Zvcih2YXIgcj10aGlzLmdlbmVyYXRvci5ncmlkKG4sbykscz10LmdldEltYWdlRGF0YShlLGksbixvKSxhPTA7YTxvO2ErKylmb3IodmFyIGg9MDtoPG47aCsrKXt2YXIgYz1yW2grbiphXSx1PTI1NSZNYXRoLmZsb29yKDI1NSpjKSxsPTQqKGgrYSpzLndpZHRoKSxwPXRoaXMuY29sb3JGY24odSk7cy5kYXRhW2xdPXAucixzLmRhdGFbbCsxXT1wLmcscy5kYXRhW2wrMl09cC5iLHMuZGF0YVtsKzNdPU1hdGguZmxvb3IoMjU1KnAuYSl9dC5wdXRJbWFnZURhdGEocyxlLGkpfSx0fSgpOyFmdW5jdGlvbih0KXt0W3QuUHJvdGFub3BlPTBdPVwiUHJvdGFub3BlXCIsdFt0LkRldXRlcmFub3BlPTFdPVwiRGV1dGVyYW5vcGVcIix0W3QuVHJpdGFub3BlPTJdPVwiVHJpdGFub3BlXCJ9KEFufHwoQW49e30pKTt2YXIgVG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KHQsZSxpKXt2b2lkIDA9PT1lJiYoZT0hMSksdm9pZCAwPT09aSYmKGk9QW4uUHJvdGFub3BlKSx0aGlzLmVuZ2luZT10LHRoaXMuc2ltdWxhdGU9ZSx0aGlzLmNvbG9yTW9kZT1pLHRoaXMuX3ZlcnRleFNoYWRlcj1cImF0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIHZlYzIgYV90ZXhDb29yZDt1bmlmb3JtIHZlYzIgdV9yZXNvbHV0aW9uO3ZhcnlpbmcgdmVjMiB2X3RleENvb3JkO3ZvaWQgbWFpbigpIHt2ZWMyIHplcm9Ub09uZSA9IGFfcG9zaXRpb24gLyB1X3Jlc29sdXRpb247dmVjMiB6ZXJvVG9Ud28gPSB6ZXJvVG9PbmUgKiAyLjA7dmVjMiBjbGlwU3BhY2UgPSB6ZXJvVG9Ud28gLSAxLjA7Z2xfUG9zaXRpb24gPSB2ZWM0KGNsaXBTcGFjZSAqIHZlYzIoMSwgLTEpLCAwLCAxKTt2X3RleENvb3JkID0gYV90ZXhDb29yZDt9XCIsdGhpcy5fZnJhZ21lbnRTaGFkZXI9XCJwcmVjaXNpb24gbWVkaXVtcCBmbG9hdDt1bmlmb3JtIHNhbXBsZXIyRCB1X2ltYWdlO3ZhcnlpbmcgdmVjMiB2X3RleENvb3JkO3ZvaWQgbWFpbigpIHt2ZWM0IG8gPSAgdGV4dHVyZTJEKHVfaW1hZ2UsIHZfdGV4Q29vcmQpO2Zsb2F0IEwgPSAoMTcuODgyNCAqIG8ucikgKyAoNDMuNTE2MSAqIG8uZykgKyAoNC4xMTkzNSAqIG8uYik7ZmxvYXQgTSA9ICgzLjQ1NTY1ICogby5yKSArICgyNy4xNTU0ICogby5nKSArICgzLjg2NzE0ICogby5iKTtmbG9hdCBTID0gKDAuMDI5OTU2NiAqIG8ucikgKyAoMC4xODQzMDkgKiBvLmcpICsgKDEuNDY3MDkgKiBvLmIpOy8vTU9ERSBDT0RFLy92ZWM0IGVycm9yO2Vycm9yLnIgPSAoMC4wODA5NDQ0NDc5ICogbCkgKyAoLTAuMTMwNTA0NDA5ICogbSkgKyAoMC4xMTY3MjEwNjYgKiBzKTtlcnJvci5nID0gKC0wLjAxMDI0ODUzMzUgKiBsKSArICgwLjA1NDAxOTMyNjYgKiBtKSArICgtMC4xMTM2MTQ3MDggKiBzKTtlcnJvci5iID0gKC0wLjAwMDM2NTI5NjkzOCAqIGwpICsgKC0wLjAwNDEyMTYxNDY5ICogbSkgKyAoMC42OTM1MTE0MDUgKiBzKTtlcnJvci5hID0gMS4wO3ZlYzQgZGlmZiA9IG8gLSBlcnJvcjt2ZWM0IGNvcnJlY3Rpb247Y29ycmVjdGlvbi5yID0gMC4wO2NvcnJlY3Rpb24uZyA9ICAoZGlmZi5yICogMC43KSArIChkaWZmLmcgKiAxLjApO2NvcnJlY3Rpb24uYiA9ICAoZGlmZi5yICogMC43KSArIChkaWZmLmIgKiAxLjApO2NvcnJlY3Rpb24gPSBvICsgY29ycmVjdGlvbjtjb3JyZWN0aW9uLmEgPSBvLmE7Ly9TSU1VTEFURS8vfVwiLHRoaXMuX2ludGVybmFsQ2FudmFzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIiksdGhpcy5faW50ZXJuYWxDYW52YXMud2lkdGg9dC5kcmF3V2lkdGgsdGhpcy5faW50ZXJuYWxDYW52YXMuaGVpZ2h0PXQuZHJhd0hlaWdodCx0aGlzLl9nbD10aGlzLl9pbnRlcm5hbENhbnZhcy5nZXRDb250ZXh0KFwid2ViZ2xcIix7cHJlc2VydmVEcmF3aW5nQnVmZmVyOiEwfSksdGhpcy5fcHJvZ3JhbT10aGlzLl9nbC5jcmVhdGVQcm9ncmFtKCk7dmFyIG49dGhpcy5fZ2V0U2hhZGVyKFwiRnJhZ21lbnRcIix0aGlzLl9nZXRGcmFnbWVudFNoYWRlckJ5TW9kZShpKSksbz10aGlzLl9nZXRTaGFkZXIoXCJWZXJ0ZXhcIix0aGlzLl92ZXJ0ZXhTaGFkZXIpO3RoaXMuX2dsLmF0dGFjaFNoYWRlcih0aGlzLl9wcm9ncmFtLG8pLHRoaXMuX2dsLmF0dGFjaFNoYWRlcih0aGlzLl9wcm9ncmFtLG4pLHRoaXMuX2dsLmxpbmtQcm9ncmFtKHRoaXMuX3Byb2dyYW0pLHRoaXMuX2dsLmdldFByb2dyYW1QYXJhbWV0ZXIodGhpcy5fcHJvZ3JhbSx0aGlzLl9nbC5MSU5LX1NUQVRVUyl8fE90LmdldEluc3RhbmNlKCkuZXJyb3IoXCJVbmFibGUgdG8gbGluayBzaGFkZXIgcHJvZ3JhbSFcIiksdGhpcy5fZ2wudXNlUHJvZ3JhbSh0aGlzLl9wcm9ncmFtKX1yZXR1cm4gdC5wcm90b3R5cGUuX2dldEZyYWdtZW50U2hhZGVyQnlNb2RlPWZ1bmN0aW9uKHQpe3ZhciBlPVwiXCI7cmV0dXJuIHQ9PT1Bbi5Qcm90YW5vcGU/ZT1cImZsb2F0IGwgPSAwLjAgKiBMICsgMi4wMjM0NCAqIE0gKyAtMi41MjU4MSAqIFM7ZmxvYXQgbSA9IDAuMCAqIEwgKyAxLjAgKiBNICsgMC4wICogUztmbG9hdCBzID0gMC4wICogTCArIDAuMCAqIE0gKyAxLjAgKiBTO1wiOnQ9PT1Bbi5EZXV0ZXJhbm9wZT9lPVwiZmxvYXQgbCA9IDEuMCAqIEwgKyAwLjAgKiBNICsgMC4wICogUztmbG9hdCBtID0gMC40OTQyMDcgKiBMICsgMC4wICogTSArIDEuMjQ4MjcgKiBTO2Zsb2F0IHMgPSAwLjAgKiBMICsgMC4wICogTSArIDEuMCAqIFM7XCI6dD09PUFuLlRyaXRhbm9wZSYmKGU9XCJmbG9hdCBsID0gMS4wICogTCArIDAuMCAqIE0gKyAwLjAgKiBTO2Zsb2F0IG0gPSAwLjAgKiBMICsgMS4wICogTSArIDAuMCAqIFM7ZmxvYXQgcyA9IC0wLjM5NTkxMyAqIEwgKyAwLjgwMTEwOSAqIE0gKyAwLjAgKiBTO1wiKSx0aGlzLnNpbXVsYXRlP3RoaXMuX2ZyYWdtZW50U2hhZGVyPXRoaXMuX2ZyYWdtZW50U2hhZGVyLnJlcGxhY2UoXCIvL1NJTVVMQVRFLy9cIixcImdsX0ZyYWdDb2xvciA9IGVycm9yLnJnYmE7XCIpOnRoaXMuX2ZyYWdtZW50U2hhZGVyPXRoaXMuX2ZyYWdtZW50U2hhZGVyLnJlcGxhY2UoXCIvL1NJTVVMQVRFLy9cIixcImdsX0ZyYWdDb2xvciA9IGNvcnJlY3Rpb24ucmdiYTtcIiksdGhpcy5fZnJhZ21lbnRTaGFkZXIucmVwbGFjZShcIi8vTU9ERSBDT0RFLy9cIixlKX0sdC5wcm90b3R5cGUuX3NldFJlY3RhbmdsZT1mdW5jdGlvbih0LGUsaSxuKXt2YXIgbz10LHI9dCtpLHM9ZSxhPWUrbjt0aGlzLl9nbC5idWZmZXJEYXRhKHRoaXMuX2dsLkFSUkFZX0JVRkZFUixuZXcgRmxvYXQzMkFycmF5KFtvLHMscixzLG8sYSxvLGEscixzLHIsYV0pLHRoaXMuX2dsLlNUQVRJQ19EUkFXKX0sdC5wcm90b3R5cGUuX2dldFNoYWRlcj1mdW5jdGlvbih0LGUpe3ZhciBpO3JldHVyblwiRnJhZ21lbnRcIj09PXQ/aT10aGlzLl9nbC5jcmVhdGVTaGFkZXIodGhpcy5fZ2wuRlJBR01FTlRfU0hBREVSKTpcIlZlcnRleFwiPT09dD9pPXRoaXMuX2dsLmNyZWF0ZVNoYWRlcih0aGlzLl9nbC5WRVJURVhfU0hBREVSKTpPdC5nZXRJbnN0YW5jZSgpLmVycm9yKFwiRXJyb3IgdW5rbm93biBzaGFkZXIgdHlwZVwiLHQpLHRoaXMuX2dsLnNoYWRlclNvdXJjZShpLGUpLHRoaXMuX2dsLmNvbXBpbGVTaGFkZXIoaSksdGhpcy5fZ2wuZ2V0U2hhZGVyUGFyYW1ldGVyKGksdGhpcy5fZ2wuQ09NUElMRV9TVEFUVVMpP2k6KE90LmdldEluc3RhbmNlKCkuZXJyb3IoXCJVbmFibGUgdG8gY29tcGlsZSBzaGFkZXIhXCIsdGhpcy5fZ2wuZ2V0U2hhZGVySW5mb0xvZyhpKSksbnVsbCl9LHQucHJvdG90eXBlLnByb2Nlc3M9ZnVuY3Rpb24odCxlKXt2YXIgaT10aGlzLl9nbC5nZXRBdHRyaWJMb2NhdGlvbih0aGlzLl9wcm9ncmFtLFwiYV9wb3NpdGlvblwiKSxuPXRoaXMuX2dsLmdldEF0dHJpYkxvY2F0aW9uKHRoaXMuX3Byb2dyYW0sXCJhX3RleENvb3JkXCIpLG89dGhpcy5fZ2wuY3JlYXRlQnVmZmVyKCk7dGhpcy5fZ2wuYmluZEJ1ZmZlcih0aGlzLl9nbC5BUlJBWV9CVUZGRVIsbyksdGhpcy5fZ2wuYnVmZmVyRGF0YSh0aGlzLl9nbC5BUlJBWV9CVUZGRVIsbmV3IEZsb2F0MzJBcnJheShbMCwwLDEsMCwwLDEsMCwxLDEsMCwxLDFdKSx0aGlzLl9nbC5TVEFUSUNfRFJBVyksdGhpcy5fZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkobiksdGhpcy5fZ2wudmVydGV4QXR0cmliUG9pbnRlcihuLDIsdGhpcy5fZ2wuRkxPQVQsITEsMCwwKTt2YXIgcj10aGlzLl9nbC5jcmVhdGVUZXh0dXJlKCk7dGhpcy5fZ2wuYmluZFRleHR1cmUodGhpcy5fZ2wuVEVYVFVSRV8yRCxyKSx0aGlzLl9nbC50ZXhQYXJhbWV0ZXJpKHRoaXMuX2dsLlRFWFRVUkVfMkQsdGhpcy5fZ2wuVEVYVFVSRV9XUkFQX1MsdGhpcy5fZ2wuQ0xBTVBfVE9fRURHRSksdGhpcy5fZ2wudGV4UGFyYW1ldGVyaSh0aGlzLl9nbC5URVhUVVJFXzJELHRoaXMuX2dsLlRFWFRVUkVfV1JBUF9ULHRoaXMuX2dsLkNMQU1QX1RPX0VER0UpLHRoaXMuX2dsLnRleFBhcmFtZXRlcmkodGhpcy5fZ2wuVEVYVFVSRV8yRCx0aGlzLl9nbC5URVhUVVJFX01JTl9GSUxURVIsdGhpcy5fZ2wuTkVBUkVTVCksdGhpcy5fZ2wudGV4UGFyYW1ldGVyaSh0aGlzLl9nbC5URVhUVVJFXzJELHRoaXMuX2dsLlRFWFRVUkVfTUFHX0ZJTFRFUix0aGlzLl9nbC5ORUFSRVNUKSx0aGlzLl9nbC5waXhlbFN0b3JlaSh0aGlzLl9nbC5VTlBBQ0tfRkxJUF9ZX1dFQkdMLDEpLHRoaXMuX2dsLnRleEltYWdlMkQodGhpcy5fZ2wuVEVYVFVSRV8yRCwwLHRoaXMuX2dsLlJHQkEsdGhpcy5fZ2wuUkdCQSx0aGlzLl9nbC5VTlNJR05FRF9CWVRFLHQpO3ZhciBzPXRoaXMuX2dsLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLl9wcm9ncmFtLFwidV9yZXNvbHV0aW9uXCIpO3RoaXMuX2dsLnVuaWZvcm0yZihzLHRoaXMuX2ludGVybmFsQ2FudmFzLndpZHRoLHRoaXMuX2ludGVybmFsQ2FudmFzLmhlaWdodCk7dmFyIGE9dGhpcy5fZ2wuY3JlYXRlQnVmZmVyKCk7dGhpcy5fZ2wuYmluZEJ1ZmZlcih0aGlzLl9nbC5BUlJBWV9CVUZGRVIsYSksdGhpcy5fZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoaSksdGhpcy5fZ2wudmVydGV4QXR0cmliUG9pbnRlcihpLDIsdGhpcy5fZ2wuRkxPQVQsITEsMCwwKSx0aGlzLl9zZXRSZWN0YW5nbGUoMCwwLHQud2lkdGgsdC5oZWlnaHQpLHRoaXMuX2dsLmRyYXdBcnJheXModGhpcy5fZ2wuVFJJQU5HTEVTLDAsNik7dmFyIGg9bmV3IFVpbnQ4QXJyYXkodC53aWR0aCp0LmhlaWdodCo0KTt0aGlzLl9nbC5yZWFkUGl4ZWxzKDAsMCx0LndpZHRoLHQuaGVpZ2h0LHRoaXMuX2dsLlJHQkEsdGhpcy5fZ2wuVU5TSUdORURfQllURSxoKSx0LmRhdGEuc2V0KGgpLGUucHV0SW1hZ2VEYXRhKHQsMCwwKX0sdH0oKSxNbj1mdW5jdGlvbigpe3ZhciB0PU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbih0LGUpe3QuX19wcm90b19fPWV9fHxmdW5jdGlvbih0LGUpe2Zvcih2YXIgaSBpbiBlKWUuaGFzT3duUHJvcGVydHkoaSkmJih0W2ldPWVbaV0pfTtyZXR1cm4gZnVuY3Rpb24oZSxpKXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfXQoZSxpKSxlLnByb3RvdHlwZT1udWxsPT09aT9PYmplY3QuY3JlYXRlKGkpOihuLnByb3RvdHlwZT1pLnByb3RvdHlwZSxuZXcgbil9fSgpLERuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCgpe31yZXR1cm4gdC5jcmVhdGU9ZnVuY3Rpb24odCl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIHQ/bmV3IEJuKHQpOnQgaW5zdGFuY2VvZiBBdWRpb0J1ZmZlcj9uZXcga24odCk6bmV3IE9uKHQpfSx0fSgpLE9uPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gdCh0KXt0aGlzLl9zcmM9dCx0aGlzLl92b2x1bWU9MSx0aGlzLl9sb29wPSExLHRoaXMuX2lzUGxheWluZz0hMSx0aGlzLl9pc1BhdXNlZD0hMX1yZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwibG9vcFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fbG9vcH0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX2xvb3A9dCx0aGlzLl9pbnN0YW5jZSYmKHRoaXMuX2luc3RhbmNlLmxvb3A9dCx0aGlzLl93aXJlVXBPbkVuZGVkKCkpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInZvbHVtZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdm9sdW1lfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fdm9sdW1lPXkodCwwLDEpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmlzUGxheWluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl9pc1BsYXlpbmd9LHQucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7dGhpcy5faXNQbGF5aW5nJiYodGhpcy5faXNQYXVzZWQ9ITAsdGhpcy5faXNQbGF5aW5nPSExKX0sdC5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe3RoaXMuX2lzUGxheWluZyYmKHRoaXMuX2lzUGxheWluZz0hMSx0aGlzLl9pc1BhdXNlZD0hMSl9LHQucHJvdG90eXBlLnBsYXk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faXNQYXVzZWQmJnRoaXMuX3Jlc3VtZVBsYXlCYWNrKCksdGhpcy5faXNQbGF5aW5nfHx0aGlzLl9zdGFydFBsYXlCYWNrKCksdGhpcy5fcGxheWluZ1Byb21pc2V9LHQucHJvdG90eXBlLl9zdGFydFBsYXlCYWNrPWZ1bmN0aW9uKCl7dGhpcy5faXNQbGF5aW5nPSEwLHRoaXMuX2lzUGF1c2VkPSExLHRoaXMuX3BsYXlpbmdQcm9taXNlPW5ldyBwfSx0LnByb3RvdHlwZS5fcmVzdW1lUGxheUJhY2s9ZnVuY3Rpb24oKXt0aGlzLl9pc1BhdXNlZCYmKHRoaXMuX2lzUGF1c2VkPSExLHRoaXMuX2lzUGxheWluZz0hMCl9LHQucHJvdG90eXBlLl93aXJlVXBPbkVuZGVkPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpczt0aGlzLmxvb3B8fCh0aGlzLl9pbnN0YW5jZS5vbmVuZGVkPWZ1bmN0aW9uKCl7cmV0dXJuIHQuX2hhbmRsZU9uRW5kZWQoKX0pfSx0LnByb3RvdHlwZS5faGFuZGxlT25FbmRlZD1mdW5jdGlvbigpe30sdH0oKSxCbj1mdW5jdGlvbih0KXtmdW5jdGlvbiBlKGUpe3ZhciBpPXQuY2FsbCh0aGlzLGUpfHx0aGlzO3JldHVybiBpLl9pbnN0YW5jZT1uZXcgQXVkaW8oZSksaX1yZXR1cm4gTW4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ2b2x1bWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZvbHVtZX0sc2V0OmZ1bmN0aW9uKHQpe3Q9eSh0LDAsMSksdGhpcy5fdm9sdW1lPXQsdGhpcy5faW5zdGFuY2Uudm9sdW1lPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksZS5wcm90b3R5cGUucGF1c2U9ZnVuY3Rpb24oKXt0aGlzLl9pc1BsYXlpbmcmJih0aGlzLl9pbnN0YW5jZS5wYXVzZSgpLHRoaXMuX2lzUGF1c2VkPSEwLHRoaXMuX2lzUGxheWluZz0hMSl9LGUucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5zdG9wLmNhbGwodGhpcyksdGhpcy5faW5zdGFuY2UucGF1c2UoKSx0aGlzLl9pbnN0YW5jZS5jdXJyZW50VGltZT0wLHRoaXMuX2hhbmRsZU9uRW5kZWQoKX0sZS5wcm90b3R5cGUuX3N0YXJ0UGxheUJhY2s9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5fc3RhcnRQbGF5QmFjay5jYWxsKHRoaXMpLHRoaXMuX2luc3RhbmNlLmxvYWQoKSx0aGlzLl9pbnN0YW5jZS5sb29wPXRoaXMubG9vcCx0aGlzLl9pbnN0YW5jZS5wbGF5KCksdGhpcy5fd2lyZVVwT25FbmRlZCgpfSxlLnByb3RvdHlwZS5fcmVzdW1lUGxheUJhY2s9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5fcmVzdW1lUGxheUJhY2suY2FsbCh0aGlzKSx0aGlzLl9pbnN0YW5jZS5wbGF5KCksdGhpcy5fd2lyZVVwT25FbmRlZCgpfSxlLnByb3RvdHlwZS5faGFuZGxlT25FbmRlZD1mdW5jdGlvbigpe3RoaXMuX2lzUGxheWluZz0hMSx0aGlzLl9pc1BhdXNlZD0hMSx0aGlzLl9wbGF5aW5nUHJvbWlzZS5yZXNvbHZlKCEwKX0sZX0oT24pLGtuPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGUoZSl7dmFyIGk9dC5jYWxsKHRoaXMsZSl8fHRoaXM7cmV0dXJuIGkuX2F1ZGlvQ29udGV4dD1IZS5jcmVhdGUoKSxpLl92b2x1bWVOb2RlPWkuX2F1ZGlvQ29udGV4dC5jcmVhdGVHYWluKCksaS5fY3VycmVudE9mZnNldD0wLGkuX2NyZWF0ZU5ld0J1ZmZlclNvdXJjZSgpLGl9cmV0dXJuIE1uKGUsdCksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwidm9sdW1lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl92b2x1bWV9LHNldDpmdW5jdGlvbih0KXt0PXkodCwwLDEpLHRoaXMuX3ZvbHVtZT10LHRoaXMuX3ZvbHVtZU5vZGUuZ2Fpbi5zZXRUYXJnZXRBdFRpbWU/dGhpcy5fdm9sdW1lTm9kZS5nYWluLnNldFRhcmdldEF0VGltZSh0LHRoaXMuX2F1ZGlvQ29udGV4dC5jdXJyZW50VGltZSwuMSk6dGhpcy5fdm9sdW1lTm9kZS5nYWluLnZhbHVlPXR9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUucHJvdG90eXBlLFwiX3BsYXliYWNrUmF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5faW5zdGFuY2U/MS8odGhpcy5faW5zdGFuY2UucGxheWJhY2tSYXRlLnZhbHVlfHwxKTpudWxsfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLnBhdXNlPWZ1bmN0aW9uKCl7dC5wcm90b3R5cGUucGF1c2UuY2FsbCh0aGlzKSx0aGlzLl9pbnN0YW5jZS5zdG9wKDApLHRoaXMuX3NldFBhdXNlT2Zmc2V0KCl9LGUucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5zdG9wLmNhbGwodGhpcyksdGhpcy5fY3VycmVudE9mZnNldD0wLHRoaXMuX2luc3RhbmNlLnN0b3AoMCksdGhpcy5faW5zdGFuY2Uub25lbmRlZHx8dGhpcy5faGFuZGxlT25FbmRlZCgpfSxlLnByb3RvdHlwZS5fc3RhcnRQbGF5QmFjaz1mdW5jdGlvbigpe3QucHJvdG90eXBlLl9zdGFydFBsYXlCYWNrLmNhbGwodGhpcyksdGhpcy5faW5zdGFuY2V8fHRoaXMuX2NyZWF0ZU5ld0J1ZmZlclNvdXJjZSgpLHRoaXMuX3JlbWVtYmVyU3RhcnRUaW1lKCksdGhpcy5fdm9sdW1lTm9kZS5jb25uZWN0KHRoaXMuX2F1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbiksdGhpcy5faW5zdGFuY2Uuc3RhcnQoMCwwKSx0aGlzLl9jdXJyZW50T2Zmc2V0PTAsdGhpcy5fcGxheWluZ1Byb21pc2U9bmV3IHAsdGhpcy5fd2lyZVVwT25FbmRlZCgpfSxlLnByb3RvdHlwZS5fcmVzdW1lUGxheUJhY2s9ZnVuY3Rpb24oKXt0LnByb3RvdHlwZS5fcmVzdW1lUGxheUJhY2suY2FsbCh0aGlzKSx0aGlzLl9pbnN0YW5jZS5vbmVuZGVkPW51bGwsdGhpcy5fY3JlYXRlTmV3QnVmZmVyU291cmNlKCk7dmFyIGU9dGhpcy5fcGxheWJhY2tSYXRlKnRoaXMuX3NyYy5kdXJhdGlvbixpPXRoaXMuX2N1cnJlbnRPZmZzZXQlZTt0aGlzLl9yZW1lbWJlclN0YXJ0VGltZSgtMWUzKmkpLHRoaXMuX2luc3RhbmNlLnN0YXJ0KDAsaSksdGhpcy5fd2lyZVVwT25FbmRlZCgpfSxlLnByb3RvdHlwZS5faGFuZGxlT25FbmRlZD1mdW5jdGlvbigpe3RoaXMuX2lzUGF1c2VkfHwodGhpcy5faXNQbGF5aW5nPSExLHRoaXMuX3BsYXlpbmdQcm9taXNlLnJlc29sdmUoITApKX0sZS5wcm90b3R5cGUuX3JlbWVtYmVyU3RhcnRUaW1lPWZ1bmN0aW9uKHQpe3RoaXMuX3N0YXJ0VGltZT0obmV3IERhdGUpLmdldFRpbWUoKSsoMHx0KX0sZS5wcm90b3R5cGUuX3NldFBhdXNlT2Zmc2V0PWZ1bmN0aW9uKCl7dGhpcy5fY3VycmVudE9mZnNldD0oKG5ldyBEYXRlKS5nZXRUaW1lKCktdGhpcy5fc3RhcnRUaW1lKSp0aGlzLl9wbGF5YmFja1JhdGUvMWUzfSxlLnByb3RvdHlwZS5fY3JlYXRlTmV3QnVmZmVyU291cmNlPWZ1bmN0aW9uKCl7dGhpcy5faW5zdGFuY2U9dGhpcy5fYXVkaW9Db250ZXh0LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpLHRoaXMuX2luc3RhbmNlLmJ1ZmZlcj10aGlzLl9zcmMsdGhpcy5faW5zdGFuY2UubG9vcD10aGlzLmxvb3AsdGhpcy5faW5zdGFuY2UucGxheWJhY2tSYXRlLnNldFZhbHVlQXRUaW1lKDEsMCksdGhpcy5faW5zdGFuY2UuY29ubmVjdCh0aGlzLl92b2x1bWVOb2RlKX0sZX0oT24pO2Z1bmN0aW9uIFJuKHQpe3RyeXt2YXIgZT1uZXcgQXVkaW8saT10Lm1hdGNoKC8uKlxcLihbQS1aYS16MC05XSspJC8pWzFdO3JldHVybiEhZS5jYW5QbGF5VHlwZShcImF1ZGlvL1wiK2kpfWNhdGNoKHQpe3JldHVybiBPdC5nZXRJbnN0YW5jZSgpLndhcm4oXCJDYW5ub3QgZGV0ZXJtaW5lIGF1ZGlvIHN1cHBvcnQsIGFzc3VtaW5nIG5vIHN1cHBvcnQgZm9yIHRoZSBBdWRpbyBUYWdcIix0KSwhMX19dmFyIEZuPWZ1bmN0aW9uKCl7dmFyIHQ9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKHQsZSl7dC5fX3Byb3RvX189ZX18fGZ1bmN0aW9uKHQsZSl7Zm9yKHZhciBpIGluIGUpZS5oYXNPd25Qcm9wZXJ0eShpKSYmKHRbaV09ZVtpXSl9O3JldHVybiBmdW5jdGlvbihlLGkpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9dChlLGkpLGUucHJvdG90eXBlPW51bGw9PT1pP09iamVjdC5jcmVhdGUoaSk6KG4ucHJvdG90eXBlPWkucHJvdG90eXBlLG5ldyBuKX19KCksSW49ZnVuY3Rpb24odCl7ZnVuY3Rpb24gZSgpe2Zvcih2YXIgZT1bXSxpPTA7aTxhcmd1bWVudHMubGVuZ3RoO2krKyllW2ldPWFyZ3VtZW50c1tpXTt2YXIgbj10LmNhbGwodGhpcyxcIlwiLFwiXCIpfHx0aGlzO24uX2xvb3A9ITEsbi5fdm9sdW1lPTEsbi5faXNQYXVzZWQ9ITEsbi5fdHJhY2tzPVtdLG4uX3dhc1BsYXlpbmdPbkhpZGRlbj0hMSxuLl9wcm9jZXNzZWREYXRhPW5ldyBwLG4uX2F1ZGlvQ29udGV4dD1IZS5jcmVhdGUoKSxuLl9kZXRlY3RSZXNwb25zZVR5cGUoKTtmb3IodmFyIG89MCxyPWU7bzxyLmxlbmd0aDtvKyspe3ZhciBzPXJbb107aWYoUm4ocykpe24ucGF0aD1zO2JyZWFrfX1yZXR1cm4gbi5wYXRofHwobi5sb2dnZXIud2FybihcIlRoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IGFueSBvZiB0aGUgYXVkaW8gZmlsZXMgc3BlY2lmaWVkOlwiLGUuam9pbihcIiwgXCIpKSxuLmxvZ2dlci53YXJuKFwiQXR0ZW1wdGluZyB0byB1c2VcIixlWzBdKSxuLnBhdGg9ZVswXSksbn1yZXR1cm4gRm4oZSx0KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJsb29wXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9sb29wfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fbG9vcD10O2Zvcih2YXIgZT0wLGk9dGhpcy5fdHJhY2tzO2U8aS5sZW5ndGg7ZSsrKXtpW2VdLmxvb3A9dGhpcy5fbG9vcH10aGlzLmxvZ2dlci5kZWJ1ZyhcIlNldCBsb29wIGZvciBhbGwgaW5zdGFuY2VzIG9mIHNvdW5kXCIsdGhpcy5wYXRoLFwidG9cIix0aGlzLl9sb29wKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZS5wcm90b3R5cGUsXCJ2b2x1bWVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3ZvbHVtZX0sc2V0OmZ1bmN0aW9uKHQpe3RoaXMuX3ZvbHVtZT10O2Zvcih2YXIgZT0wLGk9dGhpcy5fdHJhY2tzO2U8aS5sZW5ndGg7ZSsrKXtpW2VdLnZvbHVtZT10aGlzLl92b2x1bWV9dGhpcy5lbWl0KFwidm9sdW1lY2hhbmdlXCIsbmV3IHVuKHRoaXMpKSx0aGlzLmxvZ2dlci5kZWJ1ZyhcIlNldCBsb29wIGZvciBhbGwgaW5zdGFuY2VzIG9mIHNvdW5kXCIsdGhpcy5wYXRoLFwidG9cIix0aGlzLl92b2x1bWUpfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLnByb3RvdHlwZSxcImluc3RhbmNlc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHJhY2tzfSxlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pLGUucHJvdG90eXBlLndpcmVFbmdpbmU9ZnVuY3Rpb24odCl7dmFyIGU9dGhpczt0JiYodGhpcy5fZW5naW5lPXQsdGhpcy5fZW5naW5lLm9uKFwiaGlkZGVuXCIsZnVuY3Rpb24oKXt0LnBhdXNlQXVkaW9XaGVuSGlkZGVuJiZlLmlzUGxheWluZygpJiYoZS5fd2FzUGxheWluZ09uSGlkZGVuPSEwLGUucGF1c2UoKSl9KSx0aGlzLl9lbmdpbmUub24oXCJ2aXNpYmxlXCIsZnVuY3Rpb24oKXt0LnBhdXNlQXVkaW9XaGVuSGlkZGVuJiZlLl93YXNQbGF5aW5nT25IaWRkZW4mJihlLnBsYXkoKSxlLl93YXNQbGF5aW5nT25IaWRkZW49ITEpfSkpfSxlLnByb3RvdHlwZS5pbnN0YW5jZUNvdW50PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3RyYWNrcy5sZW5ndGh9LGUucHJvdG90eXBlLmlzUGxheWluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLl90cmFja3Muc29tZShmdW5jdGlvbih0KXtyZXR1cm4gdC5pc1BsYXlpbmcoKX0pfSxlLnByb3RvdHlwZS5wbGF5PWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmlzTG9hZGVkKCk/KHRoaXMudm9sdW1lPXR8fHRoaXMudm9sdW1lLHRoaXMuX2lzUGF1c2VkP3RoaXMuX3Jlc3VtZVBsYXliYWNrKCk6dGhpcy5fc3RhcnRQbGF5YmFjaygpKToodGhpcy5sb2dnZXIud2FybihcIkNhbm5vdCBzdGFydCBwbGF5aW5nLiBSZXNvdXJjZVwiLHRoaXMucGF0aCxcImlzIG5vdCBsb2FkZWQgeWV0XCIpLHAucmVzb2x2ZSghMCkpfSxlLnByb3RvdHlwZS5wYXVzZT1mdW5jdGlvbigpe2lmKHRoaXMuaXNQbGF5aW5nKCkpe2Zvcih2YXIgdD0wLGU9dGhpcy5fdHJhY2tzO3Q8ZS5sZW5ndGg7dCsrKXtlW3RdLnBhdXNlKCl9dGhpcy5faXNQYXVzZWQ9ITAsdGhpcy5lbWl0KFwicGF1c2VcIixuZXcgdW4odGhpcykpLHRoaXMubG9nZ2VyLmRlYnVnKFwiUGF1c2VkIGFsbCBpbnN0YW5jZXMgb2Ygc291bmRcIix0aGlzLnBhdGgpfX0sZS5wcm90b3R5cGUuc3RvcD1mdW5jdGlvbigpe2lmKHRoaXMuaXNQbGF5aW5nKCkpe2Zvcih2YXIgdD0wLGU9dGhpcy5fdHJhY2tzO3Q8ZS5sZW5ndGg7dCsrKXtlW3RdLnN0b3AoKX10aGlzLmVtaXQoXCJzdG9wXCIsbmV3IHVuKHRoaXMpKSx0aGlzLl9pc1BhdXNlZD0hMSx0aGlzLl90cmFja3MubGVuZ3RoPTAsdGhpcy5sb2dnZXIuZGVidWcoXCJTdG9wcGVkIGFsbCBpbnN0YW5jZXMgb2Ygc291bmRcIix0aGlzLnBhdGgpfX0sZS5wcm90b3R5cGUuc2V0RGF0YT1mdW5jdGlvbih0KXt0aGlzLmVtaXQoXCJlbXB0aWVkXCIsbmV3IHVuKHRoaXMpKSx0aGlzLmRhdGE9dCx0aGlzLl9wcm9jZXNzZWREYXRhPW5ldyBwfSxlLnByb3RvdHlwZS5wcm9jZXNzRGF0YT1mdW5jdGlvbih0KXt2YXIgZT10aGlzO3JldHVybih0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/dGhpcy5fcHJvY2Vzc0FycmF5QnVmZmVyRGF0YSh0KTp0aGlzLl9wcm9jZXNzQmxvYkRhdGEodCkpLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIGUuX3NldFByb2Nlc3NlZERhdGEodCl9KX0sZS5wcm90b3R5cGUuZ2V0VHJhY2tJZD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5fdHJhY2tzLmluZGV4T2YodCl9LGUucHJvdG90eXBlLl9yZXN1bWVQbGF5YmFjaz1mdW5jdGlvbigpe2lmKHRoaXMuX2lzUGF1c2VkKXtmb3IodmFyIHQ9W10sZT0wLGk9dGhpcy5fdHJhY2tzO2U8aS5sZW5ndGg7ZSsrKXt2YXIgbj1pW2VdO3QucHVzaChuLnBsYXkoKSl9cmV0dXJuIHRoaXMuX2lzUGF1c2VkPSExLHRoaXMuZW1pdChcInJlc3VtZVwiLG5ldyB1bih0aGlzKSksdGhpcy5sb2dnZXIuZGVidWcoXCJSZXN1bWluZyBwYXVzZWQgaW5zdGFuY2VzIGZvciBzb3VuZFwiLHRoaXMucGF0aCx0aGlzLl90cmFja3MpLHAuam9pbih0KX1yZXR1cm4gcC5yZXNvbHZlKCEwKX0sZS5wcm90b3R5cGUuX3N0YXJ0UGxheWJhY2s9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLGU9dGhpcy5fY3JlYXRlTmV3VHJhY2soKSxpPW5ldyBwO3JldHVybiBlLnRoZW4oZnVuY3Rpb24oZSl7ZS5wbGF5KCkudGhlbihmdW5jdGlvbihuKXtyZXR1cm4gdC5lbWl0KFwicGxheWJhY2tlbmRcIixuZXcgdW4odCxlKSksdC5fdHJhY2tzLnNwbGljZSh0LmdldFRyYWNrSWQoZSksMSksaS5yZXNvbHZlKG4pLG59KSx0LmVtaXQoXCJwbGF5YmFja3N0YXJ0XCIsbmV3IHVuKHQsZSkpLHQubG9nZ2VyLmRlYnVnKFwiUGxheWluZyBuZXcgaW5zdGFuY2UgZm9yIHNvdW5kXCIsdC5wYXRoKX0pLGl9LGUucHJvdG90eXBlLl9wcm9jZXNzQXJyYXlCdWZmZXJEYXRhPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMsaT1uZXcgcDtyZXR1cm4gdGhpcy5fYXVkaW9Db250ZXh0LmRlY29kZUF1ZGlvRGF0YSh0LGZ1bmN0aW9uKHQpe2kucmVzb2x2ZSh0KX0sZnVuY3Rpb24oKXtlLmxvZ2dlci5lcnJvcihcIlVuYWJsZSB0byBkZWNvZGUgIHRoaXMgYnJvd3NlciBtYXkgbm90IGZ1bGx5IHN1cHBvcnQgdGhpcyBmb3JtYXQsIG9yIHRoZSBmaWxlIG1heSBiZSBjb3JydXB0LCBpZiB0aGlzIGlzIGFuIG1wMyB0cnkgcmVtb3ZpbmcgaWQzIHRhZ3MgYW5kIGFsYnVtIGFydCBmcm9tIHRoZSBmaWxlLlwiKSxpLnJlc29sdmUodm9pZCAwKX0pLGl9LGUucHJvdG90eXBlLl9wcm9jZXNzQmxvYkRhdGE9ZnVuY3Rpb24oZSl7cmV0dXJuKG5ldyBwKS5yZXNvbHZlKHQucHJvdG90eXBlLnByb2Nlc3NEYXRhLmNhbGwodGhpcyxlKSl9LGUucHJvdG90eXBlLl9zZXRQcm9jZXNzZWREYXRhPWZ1bmN0aW9uKHQpe3RoaXMuX3Byb2Nlc3NlZERhdGEucmVzb2x2ZSh0KX0sZS5wcm90b3R5cGUuX2NyZWF0ZU5ld1RyYWNrPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxlPW5ldyBwO3JldHVybiAwIT09dGhpcy5fcHJvY2Vzc2VkRGF0YS5zdGF0ZSgpJiZ0aGlzLnByb2Nlc3NEYXRhKHRoaXMuZGF0YSksdGhpcy5fcHJvY2Vzc2VkRGF0YS50aGVuKGZ1bmN0aW9uKGkpe3JldHVybiBlLnJlc29sdmUodC5fZ2V0VHJhY2tJbnN0YW5jZShpKSksaX0sZnVuY3Rpb24oZSl7dC5sb2dnZXIuZXJyb3IoZSxcIkNhbm5vdCBjcmVhdGUgQXVkaW9JbnN0YW5jZSBkdWUgdG8gd3JvbmcgcHJvY2Vzc2VkIGRhdGEuXCIpfSksZX0sZS5wcm90b3R5cGUuX2dldFRyYWNrSW5zdGFuY2U9ZnVuY3Rpb24odCl7dmFyIGU9RG4uY3JlYXRlKHQpO3JldHVybiBlLmxvb3A9dGhpcy5sb29wLGUudm9sdW1lPXRoaXMudm9sdW1lLHRoaXMuX3RyYWNrcy5wdXNoKGUpLGV9LGUucHJvdG90eXBlLl9kZXRlY3RSZXNwb25zZVR5cGU9ZnVuY3Rpb24oKXt3aW5kb3cuQXVkaW9Db250ZXh0P3RoaXMucmVzcG9uc2VUeXBlPXhuLnR5cGUuYXJyYXlidWZmZXI6dGhpcy5yZXNwb25zZVR5cGU9eG4udHlwZS5ibG9ifSxlfShGdCksTG49ZnVuY3Rpb24oKXtmdW5jdGlvbiB0KCl7fXJldHVybiB0LnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkvMWUzLG89dC5hY2MuY2xvbmUoKTt0LmNvbGxpc2lvblR5cGU9PT14ZS5BY3RpdmUmJm8uYWRkRXF1YWwoVy5hY2MpLHQub2xkVmVsPXQudmVsLHQudmVsLmFkZEVxdWFsKG8uc2NhbGUobikpLHQucG9zLmFkZEVxdWFsKHQudmVsLnNjYWxlKG4pKS5hZGRFcXVhbChvLnNjYWxlKC41Km4qbikpLHQucngrPXQudG9ycXVlKigxL3QubW9pKSpuLHQucm90YXRpb24rPXQucngqbix0LnNjYWxlLngrPXQuc3gqaS8xZTMsdC5zY2FsZS55Kz10LnN5KmkvMWUzfSx0fSgpO2kuZChlLFwiRVhfVkVSU0lPTlwiLGZ1bmN0aW9uKCl7cmV0dXJuIEhufSksaS5kKGUsXCJEaXNwbGF5TW9kZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIGVufSksaS5kKGUsXCJTY3JvbGxQcmV2ZW50aW9uTW9kZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIG5ufSksaS5kKGUsXCJFbmdpbmVcIixmdW5jdGlvbigpe3JldHVybiBzbn0pLGkuZChlLFwiQWN0b3JcIixmdW5jdGlvbigpe3JldHVybiBEZX0pLGkuZChlLFwiQ29sbGlzaW9uVHlwZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHhlfSksaS5kKGUsXCJWZWN0b3JcIixmdW5jdGlvbigpe3JldHVybiBrfSksaS5kKGUsXCJSYXlcIixmdW5jdGlvbigpe3JldHVybiBSfSksaS5kKGUsXCJMaW5lXCIsZnVuY3Rpb24oKXtyZXR1cm4gRn0pLGkuZChlLFwiUHJvamVjdGlvblwiLGZ1bmN0aW9uKCl7cmV0dXJuIEl9KSxpLmQoZSxcIkdsb2JhbENvb3JkaW5hdGVzXCIsZnVuY3Rpb24oKXtyZXR1cm4gTH0pLGkuZChlLFwiU3RyYXRlZ3lDb250YWluZXJcIixmdW5jdGlvbigpe3JldHVybiBhaX0pLGkuZChlLFwiQXhpc1wiLGZ1bmN0aW9uKCl7cmV0dXJuIGplfSksaS5kKGUsXCJMb2NrQ2FtZXJhVG9BY3RvclN0cmF0ZWd5XCIsZnVuY3Rpb24oKXtyZXR1cm4gcGl9KSxpLmQoZSxcIkxvY2tDYW1lcmFUb0FjdG9yQXhpc1N0cmF0ZWd5XCIsZnVuY3Rpb24oKXtyZXR1cm4gZGl9KSxpLmQoZSxcIkVsYXN0aWNUb0FjdG9yU3RyYXRlZ3lcIixmdW5jdGlvbigpe3JldHVybiBmaX0pLGkuZChlLFwiUmFkaXVzQXJvdW5kQWN0b3JTdHJhdGVneVwiLGZ1bmN0aW9uKCl7cmV0dXJuIF9pfSksaS5kKGUsXCJCYXNlQ2FtZXJhXCIsZnVuY3Rpb24oKXtyZXR1cm4gZ2l9KSxpLmQoZSxcIkNsYXNzXCIsZnVuY3Rpb24oKXtyZXR1cm4geHR9KSxpLmQoZSxcIkNvbmZpZ3VyYWJsZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIFZ0fSksaS5kKGUsXCJEZWJ1Z1wiLGZ1bmN0aW9uKCl7cmV0dXJuIEVpfSksaS5kKGUsXCJGcmFtZVN0YXRzXCIsZnVuY3Rpb24oKXtyZXR1cm4gQ2l9KSxpLmQoZSxcIlBoeXNpY3NTdGF0c1wiLGZ1bmN0aW9uKCl7cmV0dXJuIFRpfSksaS5kKGUsXCJFdmVudERpc3BhdGNoZXJcIixmdW5jdGlvbigpe3JldHVybiB3dH0pLGkuZChlLFwiTWVkaWFFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGNufSksaS5kKGUsXCJOYXRpdmVTb3VuZEV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gdW59KSxpLmQoZSxcIkdhbWVFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIFV9KSxpLmQoZSxcIktpbGxFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIE59KSxpLmQoZSxcIlByZUtpbGxFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHF9KSxpLmQoZSxcIlBvc3RLaWxsRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBYfSksaS5kKGUsXCJHYW1lU3RhcnRFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIFZ9KSxpLmQoZSxcIkdhbWVTdG9wRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBHfSksaS5kKGUsXCJQcmVEcmF3RXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBZfSksaS5kKGUsXCJQb3N0RHJhd0V2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gS30pLGkuZChlLFwiUHJlRGVidWdEcmF3RXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBRfSksaS5kKGUsXCJQb3N0RGVidWdEcmF3RXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBafSksaS5kKGUsXCJQcmVVcGRhdGVFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIEp9KSxpLmQoZSxcIlBvc3RVcGRhdGVFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuICR9KSxpLmQoZSxcIlByZUZyYW1lRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiB0dH0pLGkuZChlLFwiUG9zdEZyYW1lRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBldH0pLGkuZChlLFwiR2FtZXBhZENvbm5lY3RFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGl0fSksaS5kKGUsXCJHYW1lcGFkRGlzY29ubmVjdEV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gbnR9KSxpLmQoZSxcIkdhbWVwYWRCdXR0b25FdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIG90fSksaS5kKGUsXCJHYW1lcGFkQXhpc0V2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gcnR9KSxpLmQoZSxcIlN1YnNjcmliZUV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gc3R9KSxpLmQoZSxcIlVuc3Vic2NyaWJlRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBhdH0pLGkuZChlLFwiVmlzaWJsZUV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gaHR9KSxpLmQoZSxcIkhpZGRlbkV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gY3R9KSxpLmQoZSxcIlByZUNvbGxpc2lvbkV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gdXR9KSxpLmQoZSxcIlBvc3RDb2xsaXNpb25FdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGx0fSksaS5kKGUsXCJDb2xsaXNpb25TdGFydEV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gcHR9KSxpLmQoZSxcIkNvbGxpc2lvbkVuZEV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gZHR9KSxpLmQoZSxcIkluaXRpYWxpemVFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ0fSksaS5kKGUsXCJBY3RpdmF0ZUV2ZW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gX3R9KSxpLmQoZSxcIkRlYWN0aXZhdGVFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGd0fSksaS5kKGUsXCJFeGl0Vmlld1BvcnRFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHl0fSksaS5kKGUsXCJFbnRlclZpZXdQb3J0RXZlbnRcIixmdW5jdGlvbigpe3JldHVybiB2dH0pLGkuZChlLFwiRW50ZXJUcmlnZ2VyRXZlbnRcIixmdW5jdGlvbigpe3JldHVybiBtdH0pLGkuZChlLFwiRXhpdFRyaWdnZXJFdmVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGJ0fSksaS5kKGUsXCJHcm91cFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHJpfSksaS5kKGUsXCJMYWJlbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHZpfSksaS5kKGUsXCJGb250U3R5bGVcIixmdW5jdGlvbigpe3JldHVybiBsaX0pLGkuZChlLFwiRm9udFVuaXRcIixmdW5jdGlvbigpe3JldHVybiBoaX0pLGkuZChlLFwiVGV4dEFsaWduXCIsZnVuY3Rpb24oKXtyZXR1cm4gY2l9KSxpLmQoZSxcIkJhc2VBbGlnblwiLGZ1bmN0aW9uKCl7cmV0dXJuIHVpfSksaS5kKGUsXCJMb2FkZXJcIixmdW5jdGlvbigpe3JldHVybiBZZX0pLGkuZChlLFwiUGF1c2VBZnRlckxvYWRlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIEtlfSksaS5kKGUsXCJQYXJ0aWNsZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHBufSksaS5kKGUsXCJQYXJ0aWNsZUVtaXR0ZXJcIixmdW5jdGlvbigpe3JldHVybiBkbn0pLGkuZChlLFwiRW1pdHRlclR5cGVcIixmdW5jdGlvbigpe3JldHVybiBybn0pLGkuZChlLFwiQ29sbGlzaW9uUmVzb2x1dGlvblN0cmF0ZWd5XCIsZnVuY3Rpb24oKXtyZXR1cm4gTX0pLGkuZChlLFwiQnJvYWRwaGFzZVN0cmF0ZWd5XCIsZnVuY3Rpb24oKXtyZXR1cm4gRH0pLGkuZChlLFwiSW50ZWdyYXRvclwiLGZ1bmN0aW9uKCl7cmV0dXJuIE99KSxpLmQoZSxcIlBoeXNpY3NcIixmdW5jdGlvbigpe3JldHVybiBXfSksaS5kKGUsXCJQcm9taXNlU3RhdGVcIixmdW5jdGlvbigpe3JldHVybiBjfSksaS5kKGUsXCJQcm9taXNlXCIsZnVuY3Rpb24oKXtyZXR1cm4gcH0pLGkuZChlLFwiU2NlbmVcIixmdW5jdGlvbigpe3JldHVybiBBaX0pLGkuZChlLFwiVGlsZU1hcFwiLGZ1bmN0aW9uKCl7cmV0dXJuIEZlfSksaS5kKGUsXCJDZWxsXCIsZnVuY3Rpb24oKXtyZXR1cm4gTGV9KSxpLmQoZSxcIlRpbGVTcHJpdGVcIixmdW5jdGlvbigpe3JldHVybiBJZX0pLGkuZChlLFwiVGltZXJcIixmdW5jdGlvbigpe3JldHVybiBrZX0pLGkuZChlLFwiVHJpZ2dlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIHdpfSksaS5kKGUsXCJVSUFjdG9yXCIsZnVuY3Rpb24oKXtyZXR1cm4gQmV9KSxpLmQoZSxcIkFjdGlvbnNcIixmdW5jdGlvbigpe3JldHVybiByfSksaS5kKGUsXCJJbnRlcm5hbFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZufSksaS5kKGUsXCJBY3Rpb25Db250ZXh0XCIsZnVuY3Rpb24oKXtyZXR1cm4gZ2V9KSxpLmQoZSxcIlJvdGF0aW9uVHlwZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIEd0fSksaS5kKGUsXCJCb2R5XCIsZnVuY3Rpb24oKXtyZXR1cm4gU2V9KSxpLmQoZSxcIkJvdW5kaW5nQm94XCIsZnVuY3Rpb24oKXtyZXR1cm4gRHR9KSxpLmQoZSxcIkNpcmNsZUFyZWFcIixmdW5jdGlvbigpe3JldHVybiBDdH0pLGkuZChlLFwiQ29sbGlzaW9uQ29udGFjdFwiLGZ1bmN0aW9uKCl7cmV0dXJuIEF0fSksaS5kKGUsXCJDb2xsaXNpb25KdW1wVGFibGVcIixmdW5jdGlvbigpe3JldHVybiBFdH0pLGkuZChlLFwiVHJlZU5vZGVcIixmdW5jdGlvbigpe3JldHVybiBKZX0pLGkuZChlLFwiRHluYW1pY1RyZWVcIixmdW5jdGlvbigpe3JldHVybiAkZX0pLGkuZChlLFwiRHluYW1pY1RyZWVDb2xsaXNpb25Ccm9hZHBoYXNlXCIsZnVuY3Rpb24oKXtyZXR1cm4gdGl9KSxpLmQoZSxcIkVkZ2VBcmVhXCIsZnVuY3Rpb24oKXtyZXR1cm4gVHR9KSxpLmQoZSxcIk5haXZlQ29sbGlzaW9uQnJvYWRwaGFzZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIF9ufSksaS5kKGUsXCJQYWlyXCIsZnVuY3Rpb24oKXtyZXR1cm4gUGV9KSxpLmQoZSxcIlBvbHlnb25BcmVhXCIsZnVuY3Rpb24oKXtyZXR1cm4gTXR9KSxpLmQoZSxcIlNpZGVcIixmdW5jdGlvbigpe3JldHVybiBsfSksaS5kKGUsXCJBbmltYXRpb25cIixmdW5jdGlvbigpe3JldHVybiB5bn0pLGkuZChlLFwiU3ByaXRlXCIsZnVuY3Rpb24oKXtyZXR1cm4gS3R9KSxpLmQoZSxcIlNwcml0ZVNoZWV0XCIsZnVuY3Rpb24oKXtyZXR1cm4gYm59KSxpLmQoZSxcIlNwcml0ZUZvbnRcIixmdW5jdGlvbigpe3JldHVybiB3bn0pLGkuZChlLFwiRWZmZWN0c1wiLGZ1bmN0aW9uKCl7cmV0dXJuIG99KSxpLmQoZSxcIkNvbG9yXCIsZnVuY3Rpb24oKXtyZXR1cm4gUHR9KSxpLmQoZSxcIlBvbHlnb25cIixmdW5jdGlvbigpe3JldHVybiB2bn0pLGkuZChlLFwiRXhSZXNwb25zZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHhufSksaS5kKGUsXCJQZXJsaW5HZW5lcmF0b3JcIixmdW5jdGlvbigpe3JldHVybiBFbn0pLGkuZChlLFwiUGVybGluRHJhd2VyMkRcIixmdW5jdGlvbigpe3JldHVybiBDbn0pLGkuZChlLFwiUmFuZG9tXCIsZnVuY3Rpb24oKXtyZXR1cm4gZH0pLGkuZChlLFwiQ29sb3JCbGluZG5lc3NcIixmdW5jdGlvbigpe3JldHVybiBBbn0pLGkuZChlLFwiQ29sb3JCbGluZENvcnJlY3RvclwiLGZ1bmN0aW9uKCl7cmV0dXJuIFRufSksaS5kKGUsXCJSZXNvdXJjZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIEZ0fSksaS5kKGUsXCJUZXh0dXJlXCIsZnVuY3Rpb24oKXtyZXR1cm4gWnR9KSxpLmQoZSxcIlNvdW5kXCIsZnVuY3Rpb24oKXtyZXR1cm4gSW59KSxpLmQoZSxcIkF1ZGlvQ29udGV4dEZhY3RvcnlcIixmdW5jdGlvbigpe3JldHVybiBIZX0pLGkuZChlLFwiQXVkaW9JbnN0YW5jZUZhY3RvcnlcIixmdW5jdGlvbigpe3JldHVybiBEbn0pLGkuZChlLFwiQXVkaW9JbnN0YW5jZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIE9ufSksaS5kKGUsXCJBdWRpb1RhZ0luc3RhbmNlXCIsZnVuY3Rpb24oKXtyZXR1cm4gQm59KSxpLmQoZSxcIldlYkF1ZGlvSW5zdGFuY2VcIixmdW5jdGlvbigpe3JldHVybiBrbn0pLGkuZChlLFwiRXZlbnRzXCIsZnVuY3Rpb24oKXtyZXR1cm4gbn0pLGkuZChlLFwiSW5wdXRcIixmdW5jdGlvbigpe3JldHVybiBhfSksaS5kKGUsXCJUcmFpdHNcIixmdW5jdGlvbigpe3JldHVybiBofSksaS5kKGUsXCJVdGlsXCIsZnVuY3Rpb24oKXtyZXR1cm4gdX0pLGkuZChlLFwib2Jzb2xldGVcIixmdW5jdGlvbigpe3JldHVybiBXZX0pLGkuZChlLFwiRGV0ZWN0b3JcIixmdW5jdGlvbigpe3JldHVybiBaZX0pLGkuZChlLFwiQ3VsbGluZ0JveFwiLGZ1bmN0aW9uKCl7cmV0dXJuIEFlfSksaS5kKGUsXCJFYXNpbmdGdW5jdGlvbnNcIixmdW5jdGlvbigpe3JldHVybiBfZX0pLGkuZChlLFwiTG9nTGV2ZWxcIixmdW5jdGlvbigpe3JldHVybiB6fSksaS5kKGUsXCJMb2dnZXJcIixmdW5jdGlvbigpe3JldHVybiBPdH0pLGkuZChlLFwiQ29uc29sZUFwcGVuZGVyXCIsZnVuY3Rpb24oKXtyZXR1cm4gQnR9KSxpLmQoZSxcIlNjcmVlbkFwcGVuZGVyXCIsZnVuY3Rpb24oKXtyZXR1cm4ga3R9KSxpLmQoZSxcIlNvcnRlZExpc3RcIixmdW5jdGlvbigpe3JldHVybiBlaX0pLGkuZChlLFwiQmluYXJ5VHJlZU5vZGVcIixmdW5jdGlvbigpe3JldHVybiBpaX0pLGkuZChlLFwiTW9ja2VkRWxlbWVudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIG5pfSk7dmFyIEhuPVwiMC4xOS4xXCJ9LGZ1bmN0aW9uKHQsZSl7dC5leHBvcnRzPWZ1bmN0aW9uKHQpe3ZhciBlPVtdO3JldHVybiBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKGUpe3ZhciBpPWZ1bmN0aW9uKHQsZSl7dmFyIGk9dFsxXXx8XCJcIixuPXRbM107aWYoIW4pcmV0dXJuIGk7aWYoZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgYnRvYSl7dmFyIG89KHM9bixcIi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxcIitidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShzKSkpKStcIiAqL1wiKSxyPW4uc291cmNlcy5tYXAoZnVuY3Rpb24odCl7cmV0dXJuXCIvKiMgc291cmNlVVJMPVwiK24uc291cmNlUm9vdCt0K1wiICovXCJ9KTtyZXR1cm5baV0uY29uY2F0KHIpLmNvbmNhdChbb10pLmpvaW4oXCJcXG5cIil9dmFyIHM7cmV0dXJuW2ldLmpvaW4oXCJcXG5cIil9KGUsdCk7cmV0dXJuIGVbMl0/XCJAbWVkaWEgXCIrZVsyXStcIntcIitpK1wifVwiOml9KS5qb2luKFwiXCIpfSxlLmk9ZnVuY3Rpb24odCxpKXtcInN0cmluZ1wiPT10eXBlb2YgdCYmKHQ9W1tudWxsLHQsXCJcIl1dKTtmb3IodmFyIG49e30sbz0wO288dGhpcy5sZW5ndGg7bysrKXt2YXIgcj10aGlzW29dWzBdO1wibnVtYmVyXCI9PXR5cGVvZiByJiYobltyXT0hMCl9Zm9yKG89MDtvPHQubGVuZ3RoO28rKyl7dmFyIHM9dFtvXTtcIm51bWJlclwiPT10eXBlb2Ygc1swXSYmbltzWzBdXXx8KGkmJiFzWzJdP3NbMl09aTppJiYoc1syXT1cIihcIitzWzJdK1wiKSBhbmQgKFwiK2krXCIpXCIpLGUucHVzaChzKSl9fSxlfX0sZnVuY3Rpb24odCxlLGkpeyh0LmV4cG9ydHM9aSgxKSghMSkpLnB1c2goW3QuaSxcIi8qIEJ1dHRvbnMgc3R5bGVzIHN0YXJ0ICovXFxuXFxuYnV0dG9uI2V4Y2FsaWJ1ci1wbGF5IHtcXG4gIGRpc3BsYXk6IGlubGluZS1ibG9jaztcXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gIGJvcmRlci1yYWRpdXM6IDZweDtcXG4gIGJvcmRlcjogbm9uZTtcXG4gIC8qYm9yZGVyOiAzcHggc29saWQ7XFxuICAgIGJvcmRlci1jb2xvcjogd2hpdGU7XFxuICAgIGJveC1zaGFkb3c6IDAgMCAxMHB4ICNjY2M7Ki9cXG4gIHBhZGRpbmc6IDFyZW0gMS41cmVtIDFyZW0gNHJlbTtcXG4gIG1hcmdpbjogMDtcXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcXG4gIGJhY2tncm91bmQ6ICMwMGIyMzM7XFxuICBjb2xvcjogI2ZmZmZmZjtcXG4gIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xcbiAgZm9udC1zaXplOiAycmVtO1xcbiAgbGluZS1oZWlnaHQ6IDE7XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxuICB0ZXh0LWFsaWduOiBjZW50ZXI7XFxuICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kIDI1MG1zIGVhc2UtaW4tb3V0LCB0cmFuc2Zvcm0gMTUwbXMgZWFzZTtcXG4gIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcXG4gIC1tb3otYXBwZWFyYW5jZTogbm9uZTtcXG5cXG4gIC13ZWJraXQtYW5pbWF0aW9uOiBleGNhbGlidXItYnV0dG9uLWZhZGVpbiAyMDBtczsgLyogU2FmYXJpLCBDaHJvbWUgYW5kIE9wZXJhID4gMTIuMSAqL1xcbiAgLW1vei1hbmltYXRpb246IGV4Y2FsaWJ1ci1idXR0b24tZmFkZWluIDIwMG1zOyAvKiBGaXJlZm94IDwgMTYgKi9cXG4gIC1tcy1hbmltYXRpb246IGV4Y2FsaWJ1ci1idXR0b24tZmFkZWluIDIwMG1zOyAvKiBJbnRlcm5ldCBFeHBsb3JlciAqL1xcbiAgLW8tYW5pbWF0aW9uOiBleGNhbGlidXItYnV0dG9uLWZhZGVpbiAyMDBtczsgLyogT3BlcmEgPCAxMi4xICovXFxuICBhbmltYXRpb246IGV4Y2FsaWJ1ci1idXR0b24tZmFkZWluIDIwMG1zO1xcbn1cXG5cXG4vKlxcbmJ1dHRvbiNleGNhbGlidXItcGxheSB7XFxuICBkaXNwbGF5OiBub25lO1xcbn0qL1xcblxcbmJ1dHRvbiNleGNhbGlidXItcGxheTphZnRlciB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBjb250ZW50OiAnJztcXG4gIGJvcmRlcjogOHB4IHNvbGlkO1xcbiAgYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudCB0cmFuc3BhcmVudCB0cmFuc3BhcmVudCB3aGl0ZTtcXG4gIGxlZnQ6IDM1cHg7XFxuICB0b3A6IDI0cHg7XFxuICB3aWR0aDogMDtcXG4gIGhlaWdodDogMDtcXG59XFxuXFxuYnV0dG9uI2V4Y2FsaWJ1ci1wbGF5OmJlZm9yZSB7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBjb250ZW50OiAnJztcXG4gIGJvcmRlcjogM3B4IHNvbGlkO1xcbiAgbGVmdDogMTlweDtcXG4gIHRvcDogMTRweDtcXG4gIGJvcmRlci1yYWRpdXM6IDIwcHg7XFxuICB3aWR0aDogMzBweDtcXG4gIGhlaWdodDogMzBweDtcXG59XFxuXFxuYnV0dG9uI2V4Y2FsaWJ1ci1wbGF5OmhvdmVyLFxcbmJ1dHRvbiNleGNhbGlidXItcGxheTpmb2N1cyB7XFxuICBiYWNrZ3JvdW5kOiAjMDA5ODJjO1xcbn1cXG5cXG5idXR0b24jZXhjYWxpYnVyLXBsYXk6Zm9jdXMge1xcbiAgb3V0bGluZTogMXB4IHNvbGlkICNmZmY7XFxuICBvdXRsaW5lLW9mZnNldDogLTRweDtcXG59XFxuXFxuYnV0dG9uI2V4Y2FsaWJ1ci1wbGF5OmFjdGl2ZSB7XFxuICB0cmFuc2Zvcm06IHNjYWxlKDAuOTkpO1xcbn1cXG5cXG5Aa2V5ZnJhbWVzIGV4Y2FsaWJ1ci1idXR0b24tZmFkZWluIHtcXG4gIGZyb20ge1xcbiAgICBvcGFjaXR5OiAwO1xcbiAgfVxcbiAgdG8ge1xcbiAgICBvcGFjaXR5OiAxO1xcbiAgfVxcbn1cXG5cXG4vKiBGaXJlZm94IDwgMTYgKi9cXG5ALW1vei1rZXlmcmFtZXMgZXhjYWxpYnVyLWJ1dHRvbi1mYWRlaW4ge1xcbiAgZnJvbSB7XFxuICAgIG9wYWNpdHk6IDA7XFxuICB9XFxuICB0byB7XFxuICAgIG9wYWNpdHk6IDE7XFxuICB9XFxufVxcblxcbi8qIFNhZmFyaSwgQ2hyb21lIGFuZCBPcGVyYSA+IDEyLjEgKi9cXG5ALXdlYmtpdC1rZXlmcmFtZXMgZXhjYWxpYnVyLWJ1dHRvbi1mYWRlaW4ge1xcbiAgZnJvbSB7XFxuICAgIG9wYWNpdHk6IDA7XFxuICB9XFxuICB0byB7XFxuICAgIG9wYWNpdHk6IDE7XFxuICB9XFxufVxcblxcbi8qIEludGVybmV0IEV4cGxvcmVyICovXFxuQC1tcy1rZXlmcmFtZXMgZXhjYWxpYnVyLWJ1dHRvbi1mYWRlaW4ge1xcbiAgZnJvbSB7XFxuICAgIG9wYWNpdHk6IDA7XFxuICB9XFxuICB0byB7XFxuICAgIG9wYWNpdHk6IDE7XFxuICB9XFxufVxcblxcbi8qIE9wZXJhIDwgMTIuMSAqL1xcbkAtby1rZXlmcmFtZXMgZXhjYWxpYnVyLWJ1dHRvbi1mYWRlaW4ge1xcbiAgZnJvbSB7XFxuICAgIG9wYWNpdHk6IDA7XFxuICB9XFxuICB0byB7XFxuICAgIG9wYWNpdHk6IDE7XFxuICB9XFxufVxcblwiLFwiXCJdKX0sZnVuY3Rpb24odCxlLGkpe3ZhciBuPWkoMik7dC5leHBvcnRzPVwic3RyaW5nXCI9PXR5cGVvZiBuP246bi50b1N0cmluZygpfSxmdW5jdGlvbih0LGUpe3QuZXhwb3J0cz1cImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBZFFBQUFCMkNBWUFBQUJ4aEdJOUFBQUFDWEJJV1hNQUFBc1NBQUFMRWdIUzNYNzhBQUFLblVsRVFWUjQydTNkUDJ3alN4MEg4TjhoSklvbklSbUpqc3EwU0JSK0JRMWRjcUtoZTBsRDc3U3ZTd3BLa0pLR1B1bHBrdGZSSU1VZEVxS0lxVjU3cnBBb2tNNGRiU2l5cTdPTlBUUDd4MzlpZno3U0ZibkVucDN4ZXI0N083dXpIMTVmWHdNQTZPWUhtZ0FBQkNvQUNGUUFFS2dBZ0VBRkFJRUtBQUlWQUFRcUFDQlFBVUNnQW9CQUJRQ0JDZ0FJVkFBUXFBQWdVQUZBb0FJQUFoVUFCQ29BQ0ZRQUVLZ0FnRUNGTGJtT2lOZUZmMlBiQXl6NjhQcjZxaFVnYlJ3UjkydisvendpSnJZSE1FS0ZNbWNOLy8vVXRnY1FxRkJrMVBELzk3VTlReDhWQ0ZTZ3U0RW1BSUVLQUFJVkFBUXFBQ0JRNFoyNWpvalA4ZVgrMFd0TkFnSVZhT1krSW01aitlS2gyNGg0MWpRZ1VJRXlaN0Y1TmFQVTd3Q0JDaXdZZC93OWNPQitxQWxnSjNLTExvdzBFVjE5ODgwM1JXdkpmdmZkZHgrMGxoRXFIS3U1SmdBalZDQnZsaG1GempRUlhVZWtIejkrVFA3OXk4dUxSak5DaFhmdm9lUHZBWUVLeE50ajFlNDIvTzVKb0lKQUJjcmRSTVJWTE0rWDNrVEVwYWFCOTg4Y0t1eldnOUVvYlRXZE14ME9seTh1TjRkcWhBb0FScWduYU4zYXJIZnF1N095SDhJdEtMVkIvUCtDRWZNVEh5R1BZM25weDFtOHpXR0RFZW9CZlVrL3hkdGk1N2RyL3IxV3YyKzZFUG93M3RaNXJSZFM3MnMxbmV1Rjk3eHZXZCtYVEgwL1YrVU10dERXcWJJL3IybnJ4ZnAranYydVNqU083UytPWHkvQS8zbE4rOXhYNVQ1SHhFVVBaWjB0ZkI3MSt3NTdlSi9IRnUreitqa3YxdTkyWVg5ZmJJL0hoWDNKQTlycDVNUHI2NnRXYUc5VWZVR2JySEl6aTdjTFV5WUZmL3RwVGFkeTAzRUVlTDhtVUo2aTdNS1lOdldOcXI0UGUyanJhZFhPNjBMcnZQQXoyUFE1UlBYNjg0YWg4ZHhEKzJ6YW50bkNnVmlwU1ZWK20vdGdCOVcyRERxMlN4L3ZNOTV3Y0hoWmhXVkptOHlydjU4Y1NnZlRkYzcwKysrL1gvcjUyMisvdFVLU0VlcEJxbytvbTRaTFBlck1qVXd1Tm5RQ3R4MUdXSnRlZTFGd2RENXVXZDg2eExzOFVhVnQyYU5FTzEvc2FaL1o1cllNVzR6cTZ2MzRyR1Y5QmczcTJlWjlTa2VObTlxd3lVaDMwT1BJSFlGS3g1RkcwM0M3em5TT3FZQnErcVcvenBRM2FuSDAzN1ROSGx1RzZmMFdQc1BoSHZhYjRRRnR5N29nT2V1eERZY055Mi96dTIyMTRXTllXeG1CdXJOTzhiR245N3BOQk9POHh5Lzl1Q29yWlo0STJyNEM3YUpnTzdaVjlpRTQ5RG02TnZPV3grcFdFOUNVcTN6YmRUcDlkb3ozOFRiWHR6cUg5UlQ1Q3lXZTQyMk9hWm9aR2VaQ2FicmhQUVk5SGp3c2pwVHZDZzRZdGxFMitUYS9qMmJ6bjhmcXJEcWdtKzZ5VUhPbUF2V1VqQXRHaGJOWXZzQmtuRG5xSDFRaGM3Vm14SGdlYi9OYnVkQTVqL1VYbFl3aWYycDZsdWhBYzl0ZXUxbnBpSEtuRHM4aWY2dENtN0pMWDNOS3BndHRYZTlydWM5bUhNZDdhODNpd2R4RjV2dDh0dXRBUmFDZWtsUm5OSzlDOFduTkY3Z2VKUTRUNFhHM0poU25WZGlsUXJHK3lPbnJsVkhmc0VHWXpoTkJuN0x1NnRTNytISmFmSlE0RU1pTmxOcVdYWjlXUHZWZ25WWUhHNU0xQnlEWGtUNmxlWDJFZ1RxSnR5dDQ1eXY3UzJxTzNzRVpqWmhETFhlUitZS2RKMFpkazhRb2N2SDlONzMyS3JOdHErRlovenpJSEFCY0pyWXBkK1h2MTRsT2Q1YXA3NlNncmR1Vy9WVFExcWNRcHFuYmd1NGlmWnZVTU5wZDlYdW9abXZDdFBhUTJZL0JDSFZMZ2JySlRlUlBEZFZmNnBmTUtEVTJmT2tIbVZGRmZYcjNNc291THNuTnZWNWtSb2U1K3M0MzFQZXVvS1BxV25hdXJZL1pQQkVlcXdjZU40bDk2aXdPNkg3TWpxNHk3VkdQVk5lMTBWYVpNelZDUFZXcEkvWjZGWmJjdjVmTXFHQ1UrZExmRkd6ajU4alA4K2JDZEpDbzd5ektUd2RPRjBidTlVZzdWNGMreXo3RkpmWWVHb3lzVXNzMEhzc0lkVlp3WUxEdWpNcWxFU29DZFR0R3NadGJIbkpCZU5kRFNKU3MwalRLZE1KTjFITlg1NFd2N2J2c1U5TmtWSlZhMTNkWCsvd3VBclYwWC9sNVJIeW8vbG5mRjRHNnA2RHJTMGtIZHRYaHkzNVRHRXJEUFlaVW4yV2ZXcURPby9sVnFkTUQyTy9oS0poRDdTL29kdWt5bXE5czAyUU40RUVQUi96YmFPdW1aYytyMTV6SzFacXpubDlqc2ZpZW1UTTFRbVYzSFV1VGtlZGxnOUhJUXpSYlVEOTNkZkMrMnRwajJmSUhFSDIrUnFDQ1FIMTNnWnE3aFdYVE5wVnUxOU9CMWZjOW5RMEFLT0tVYjVsVTBQMWtEeU9uZW9XazBsT1o5Y0lQMHg3cXU4KzJCaENvUjJ3WXUxK2U3RG1hWHpCU3N1NXZhWDFuZTJ6cnBtVVBUbXhmN1BNMURtNHkvdkM3bnk3TmlmNyt6LzlabXRNMFozcGFuUEx0UG1yYTlmMTZiY0swRHBibndrNDNWZC9SSHR1NnpmTlFUeTFRQnkzYXFHMmc5blZteG1sK0JPb0p5VDNOcFdtbjl4aGZGbnU0YnZEYSs0NEJYaHFxZmRmM3VVRjkreXo3N0FUMzFZdWUybWplY1lRNjJOTGZna0E5Z2hIcUxORWhOZW00SDFjNnZkeUR4aGYvYnB6NW00Y29XL2MzOXdpNlZIMmJQdEhsY2FWOWN2WHRzK3p4Q2U2clRlcWMybmRMN3VHZDkzUXdNOWJGY0F6TW9aWjdTZ1RCYld4K2FzdWk2MWgvaXExK1JtanFkYm5RWFEzVDFETlE2M1YvVTl1Y3FtL3BNelBiMXJlUHNrLzFpVE9qZ3ZhdFI0VzNMYzhVTEI3OHBFTHlybkFmZVRjajFOVTUwOS84Nm1mSjMzLzgrTWYwMGEwNVV5UFVFdzdVVkNlV0cvV05FaUV4eUhSTXQ1bHRXMzBpelVQazE4eXR0N2xOZmM4aS8vRHZ0dlh0byt5U0E1QmpsanNMVUY4bFBrcU1QRXRXMUpvbURzaUdCWjlCeWI0TkF2VUlUU045R3V3c0lqNnQ2VVRPcWs3akpSRWttenFsaTh4SXM5NnVkU08yMHNYMEgxdlc5MklMOWUxYTlyZ3FWeWY5MWdiUHNUeTlVRDluOWxPa1Q4aytSZmtGUjVQTU5xeE9jZFNmMzJQQnZnM3ZpbE8remR4RStva3g5V20wcGgzNlhZc1JaQ3BNRjk5M0dPazVxdnFCM0RjdDZqdnNzYjY3S3Z1VU5KM2ZydzkyYmhyOC9TVFNGMEpkUlBNTHBVQ2duc2dvOVM3NlBaMjQ2WkZrMXdXdks1bTN2Vm9ZdlcxU3o3bk45MWpmWGJRMVpRYzdUVzZIZWFvT2FseXBHLzgvcC9yUDFhTkFjNlpIelNuZmRxUFVQaGR5MlBRdzZOejlnU1ZodWhpcXVlVUhSM3V1N3k3SzNyZERYNHU0NlpyUGJVYTBJRkJaMHNlS1EzWFFUUnQydm0zVy9hMkRiTkt5cysrcnZtM2VwNit5MXgyVWRQM2JXVTlsenJhNDdVMUdtbGN0WC9zUTIzdCthT2xCeUxUaC80TkFQYUNSeHRjZE81SExTSi82dk50Q3dHeDY3VlBtUGJ2V2QxcTlmcktIdHA0a0FxUkoySFI5ajc2MkpmWDNiWi8vZWxQdGoxM1BQRHgxK0Q1dHFrL1hpNk5POFNIejdNbUgxOWRYcmRCTmZWRlA2VDJQVDFVSE5pdDg3L3Q0bTUrYVJIK25RQmR2cXloWkRLSkxmWnM4aDdYUHNxZFYyWk9WK3RhbktCOGFsbjBkeXhkQVhiVjRqNGd2dDRvTU9yYlA2dmJVNzNOVzdUTWxiZFRuUHJXcGZxWGZoOUhLWjl2a2U3S3VUZVpSTnRYUlNlNisxRlYvL2NlL2xuNWVYZnNYZ2NxWHpyNis5MjYxTTNtb09vYTdFNm52VFpUZnk3aU5zbWZiN2tqZmdYR3N2eGUwdmloc0V0czlIVHF1UHB0MXExdnRhaHUyVHFBaVVBRUVLajB6aHdvQVJxZ0F1L09uWC80NDJXSCs5eGMvV3ZyNThyZS9UcjdmNDEvK1pzUnFoQW9BQ0ZRQUVLZ0FjSGpNb1FKc2tKc3ovZXFycjVaK3Z2cjd2NWZtUUZldkFsNWx6dFFJRlFBUXFBQWdVQUhnSUpsREJkaGdkUTQxTjJlS0VTb0FJRkFCUUtBQ3dGRXdod29BUnFnQUlGQUJRS0FDQUFJVkFBUXFBQWhVQUJDb0FJQkFCUUNCQ2dBQ0ZRQUVLZ0FnVUFGQW9BS0FRQVVBZ1FvQUNGUUFFS2dBSUZBQlFLQUNBQUlWQUFRcUFBaFVBQkNvQUlCQUJRQ0JDZ0FDRlFBUXFBQWdVQUZBb0FLQVFBVUFsdndQY0ZEbnMxRHNINHNBQUFBQVNVVk9SSzVDWUlJPVwifV0pfSk7XHJcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWV4Y2FsaWJ1ci5taW4uanMubWFwIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/excalibur/dist/excalibur.min.js\n");

/***/ }),

/***/ "./src/game.ts":
/*!*********************!*\
  !*** ./src/game.ts ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar excalibur_1 = __webpack_require__(/*! excalibur */ \"./node_modules/excalibur/dist/excalibur.min.js\");\nvar player_1 = __webpack_require__(/*! ./player */ \"./src/player.ts\");\nvar levels_1 = __webpack_require__(/*! ./levels */ \"./src/levels.ts\");\nvar resources_1 = __webpack_require__(/*! ./resources */ \"./src/resources.ts\");\nvar Game = /** @class */ (function (_super) {\n    __extends(Game, _super);\n    function Game() {\n        var _this = _super.call(this) || this;\n        _this.initializeRooms();\n        return _this;\n    }\n    Game.prototype.onStart = function () {\n        this.player = new player_1.default();\n        this.rooms = levels_1.default.getInstance();\n        var a = resources_1.default.getInstance().getTiledResource(\"map\");\n        console.log(a);\n        console.log(a.getTileMap());\n        this.add(this.player);\n        this.currentScene.camera.strategy.lockToActor(this.player);\n    };\n    Game.prototype.loadAll = function (resources) {\n        for (var _i = 0, resources_2 = resources; _i < resources_2.length; _i++) {\n            var resource = resources_2[_i];\n            this.load(resource);\n        }\n    };\n    Game.prototype.startWithLoader = function () {\n        var _this = this;\n        this.start(resources_1.default.getInstance().getLoader()).then(function () { return _this.onStart(); });\n    };\n    Game.prototype.initializeRooms = function () {\n        this.rooms = new levels_1.default();\n    };\n    return Game;\n}(excalibur_1.Engine));\nexports.default = Game;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL1VzZXJzL21vb25ibGFkZS93b3Jrc3BhY2Uvd2ViL2dhbWUvc3JjL2dhbWUudHM/NTkwYSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBQSx5R0FBc0Q7QUFDdEQsc0VBQThCO0FBQzlCLHNFQUE4QjtBQUM5QiwrRUFBb0M7QUFDcEM7SUFBbUIsd0JBQU07SUFHckI7UUFBQSxZQUNJLGlCQUFPLFNBRVY7UUFERyxLQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7O0lBQzNCLENBQUM7SUFFRCxzQkFBTyxHQUFQO1FBQ0ksSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLGdCQUFNLEVBQUUsQ0FBQztRQUMzQixJQUFJLENBQUMsS0FBSyxHQUFHLGdCQUFNLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDbEMsSUFBSSxDQUFDLEdBQUUsbUJBQVMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN2RCxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ2YsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDM0IsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdEIsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDL0QsQ0FBQztJQUVELHNCQUFPLEdBQVAsVUFBUSxTQUFzQjtRQUMxQixLQUFxQixVQUFTLEVBQVQsdUJBQVMsRUFBVCx1QkFBUyxFQUFULElBQVMsRUFBRTtZQUEzQixJQUFJLFFBQVE7WUFDYixJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3ZCO0lBQ0wsQ0FBQztJQUVELDhCQUFlLEdBQWY7UUFBQSxpQkFFQztRQURHLElBQUksQ0FBQyxLQUFLLENBQUMsbUJBQVMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFJLFlBQUksQ0FBQyxPQUFPLEVBQUUsRUFBZCxDQUFjLENBQUMsQ0FBQztJQUM3RSxDQUFDO0lBRUQsOEJBQWUsR0FBZjtRQUNJLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxnQkFBTSxFQUFFLENBQUM7SUFDOUIsQ0FBQztJQUVMLFdBQUM7QUFBRCxDQUFDLENBaENrQixrQkFBTSxHQWdDeEI7QUFFRCxrQkFBZSxJQUFJLENBQUMiLCJmaWxlIjoiLi9zcmMvZ2FtZS50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVuZ2luZSwgTG9hZGVyLCBJTG9hZGFibGUgfSBmcm9tICdleGNhbGlidXInO1xuaW1wb3J0IFBsYXllciBmcm9tICcuL3BsYXllcic7XG5pbXBvcnQgTGV2ZWxzIGZyb20gJy4vbGV2ZWxzJztcbmltcG9ydCBSZXNvdXJjZXMgZnJvbSAnLi9yZXNvdXJjZXMnO1xuY2xhc3MgR2FtZSBleHRlbmRzIEVuZ2luZXtcbiAgICBwbGF5ZXI6IFBsYXllcjtcbiAgICByb29tczogTGV2ZWxzO1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVSb29tcygpO1xuICAgIH1cbiAgICBcbiAgICBvblN0YXJ0KCkge1xuICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXIoKTtcbiAgICAgICAgdGhpcy5yb29tcyA9IExldmVscy5nZXRJbnN0YW5jZSgpO1xuICAgICAgICBsZXQgYT0gUmVzb3VyY2VzLmdldEluc3RhbmNlKCkuZ2V0VGlsZWRSZXNvdXJjZShcIm1hcFwiKTtcbiAgICAgICAgY29uc29sZS5sb2coYSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGEuZ2V0VGlsZU1hcCgpKVxuICAgICAgICB0aGlzLmFkZCh0aGlzLnBsYXllcik7XG4gICAgICAgIHRoaXMuY3VycmVudFNjZW5lLmNhbWVyYS5zdHJhdGVneS5sb2NrVG9BY3Rvcih0aGlzLnBsYXllcik7XG4gICAgfVxuICAgIFxuICAgIGxvYWRBbGwocmVzb3VyY2VzOiBJTG9hZGFibGVbXSkge1xuICAgICAgICBmb3IgKGxldCByZXNvdXJjZSBvZiByZXNvdXJjZXMpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZChyZXNvdXJjZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgc3RhcnRXaXRoTG9hZGVyKCl7XG4gICAgICAgIHRoaXMuc3RhcnQoUmVzb3VyY2VzLmdldEluc3RhbmNlKCkuZ2V0TG9hZGVyKCkpLnRoZW4oKCk9PnRoaXMub25TdGFydCgpKTtcbiAgICB9XG4gICAgXG4gICAgaW5pdGlhbGl6ZVJvb21zKCkge1xuICAgICAgICB0aGlzLnJvb21zID0gbmV3IExldmVscygpO1xuICAgIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBHYW1lOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game.ts\n");

/***/ }),

/***/ "./src/index.ts":
/*!**********************!*\
  !*** ./src/index.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar game_1 = __webpack_require__(/*! ./game */ \"./src/game.ts\");\nvar game = new game_1.default();\ngame.startWithLoader();\n// game.start();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL1VzZXJzL21vb25ibGFkZS93b3Jrc3BhY2Uvd2ViL2dhbWUvc3JjL2luZGV4LnRzP2JkN2EiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxnRUFBMEI7QUFFMUIsSUFBSSxJQUFJLEdBQUcsSUFBSSxjQUFJLEVBQUUsQ0FBQztBQUN0QixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7QUFDdkIsZ0JBQWdCIiwiZmlsZSI6Ii4vc3JjL2luZGV4LnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEdhbWUgZnJvbSAnLi9nYW1lJztcblxubGV0IGdhbWUgPSBuZXcgR2FtZSgpO1xuZ2FtZS5zdGFydFdpdGhMb2FkZXIoKTtcbi8vIGdhbWUuc3RhcnQoKTsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/index.ts\n");

/***/ }),

/***/ "./src/level.ts":
/*!**********************!*\
  !*** ./src/level.ts ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar excalibur_1 = __webpack_require__(/*! excalibur */ \"./node_modules/excalibur/dist/excalibur.min.js\");\nvar Level = /** @class */ (function (_super) {\n    __extends(Level, _super);\n    function Level(room) {\n        var _this = _super.call(this) || this;\n        _this.name = room.name;\n        return _this;\n    }\n    return Level;\n}(excalibur_1.Scene));\nexports.default = Level;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL1VzZXJzL21vb25ibGFkZS93b3Jrc3BhY2Uvd2ViL2dhbWUvc3JjL2xldmVsLnRzPzJiZjUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQUEseUdBQWtDO0FBQ2xDO0lBQW9CLHlCQUFLO0lBSXJCLGVBQVksSUFBUztRQUFyQixZQUNJLGlCQUFPLFNBRVY7UUFERyxLQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7O0lBQzFCLENBQUM7SUFFTCxZQUFDO0FBQUQsQ0FBQyxDQVRtQixpQkFBSyxHQVN4QjtBQUVELGtCQUFlLEtBQUssQ0FBQyIsImZpbGUiOiIuL3NyYy9sZXZlbC50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNjZW5lIH0gZnJvbSAnZXhjYWxpYnVyJztcbmNsYXNzIExldmVsIGV4dGVuZHMgU2NlbmUge1xuICAgIHVwOiBMZXZlbDtcbiAgICBkb3duOiBMZXZlbDtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgY29uc3RydWN0b3Iocm9vbTogYW55KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMubmFtZSA9IHJvb20ubmFtZTtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgTGV2ZWw7Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/level.ts\n");

/***/ }),

/***/ "./src/levels.ts":
/*!***********************!*\
  !*** ./src/levels.ts ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar level_1 = __webpack_require__(/*! ./level */ \"./src/level.ts\");\nvar levels = __webpack_require__(/*! ./resources/levels.json */ \"./src/resources/levels.json\");\nvar Levels = /** @class */ (function () {\n    function Levels() {\n        this.levels = {};\n        for (var key in levels) {\n            this.levels[key] = new level_1.default(levels[key]);\n        }\n    }\n    Levels.getInstance = function () {\n        if (Levels.instance == null)\n            Levels.instance = new Levels();\n        return Levels.instance;\n    };\n    Levels.instance = null;\n    return Levels;\n}());\nexports.default = Levels;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL1VzZXJzL21vb25ibGFkZS93b3Jrc3BhY2Uvd2ViL2dhbWUvc3JjL2xldmVscy50cz9jMDc1Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsbUVBQTRCO0FBQzVCLCtGQUFrRDtBQUVsRDtJQVNJO1FBUkEsV0FBTSxHQUFRLEVBQUUsQ0FBQztRQVNiLEtBQUssSUFBSSxHQUFHLElBQUksTUFBTSxFQUFFO1lBQ3BCLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxlQUFLLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7U0FDN0M7SUFDTCxDQUFDO0lBVk0sa0JBQVcsR0FBbEI7UUFDSSxJQUFJLE1BQU0sQ0FBQyxRQUFRLElBQUksSUFBSTtZQUN2QixNQUFNLENBQUMsUUFBUSxHQUFHLElBQUksTUFBTSxFQUFFLENBQUM7UUFDbkMsT0FBTyxNQUFNLENBQUMsUUFBUSxDQUFDO0lBQzNCLENBQUM7SUFMTSxlQUFRLEdBQVcsSUFBSSxDQUFDO0lBWW5DLGFBQUM7Q0FBQTtBQUVELGtCQUFlLE1BQU0sQ0FBQyIsImZpbGUiOiIuL3NyYy9sZXZlbHMudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTGV2ZWwgZnJvbSAnLi9sZXZlbCc7XG5pbXBvcnQgKiBhcyBsZXZlbHMgZnJvbSAnLi9yZXNvdXJjZXMvbGV2ZWxzLmpzb24nO1xuXG5jbGFzcyBMZXZlbHMge1xuICAgIGxldmVsczogYW55ID0ge307XG4gICAgc3RhdGljIGluc3RhbmNlOiBMZXZlbHMgPSBudWxsO1xuICAgIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcbiAgICAgICAgaWYgKExldmVscy5pbnN0YW5jZSA9PSBudWxsKVxuICAgICAgICAgICAgTGV2ZWxzLmluc3RhbmNlID0gbmV3IExldmVscygpO1xuICAgICAgICByZXR1cm4gTGV2ZWxzLmluc3RhbmNlO1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBmb3IgKGxldCBrZXkgaW4gbGV2ZWxzKSB7XG4gICAgICAgICAgICB0aGlzLmxldmVsc1trZXldID0gbmV3IExldmVsKGxldmVsc1trZXldKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTGV2ZWxzOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/levels.ts\n");

/***/ }),

/***/ "./src/player.ts":
/*!***********************!*\
  !*** ./src/player.ts ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar excalibur_1 = __webpack_require__(/*! excalibur */ \"./node_modules/excalibur/dist/excalibur.min.js\");\nvar resources_1 = __webpack_require__(/*! ./resources */ \"./src/resources.ts\");\nvar Player = /** @class */ (function (_super) {\n    __extends(Player, _super);\n    function Player() {\n        var _this = _super.call(this, 30, 30, 30, 30) || this;\n        _this.color = excalibur_1.Color.Red;\n        _this.speed = 500;\n        _this.keyboardSpeed = 1;\n        return _this;\n    }\n    Player.prototype.moveRight = function (coordinate) {\n        var _this = this;\n        this.setDrawing('walkRight');\n        return this.actions.moveTo(coordinate.x, this.pos.y, this.speed).asPromise().then(function () {\n            _this.setDrawing('idleRight');\n            return Promise.resolve();\n        });\n    };\n    Player.prototype.moveLeft = function (coordinate) {\n        var _this = this;\n        this.setDrawing('walkLeft');\n        return this.actions.moveTo(coordinate.x, this.pos.y, this.speed).asPromise().then(function () {\n            _this.setDrawing('idleLeft');\n            return Promise.resolve();\n        });\n    };\n    Player.prototype.moveUp = function (coordinate) {\n        var _this = this;\n        this.setDrawing('walkUp');\n        return this.actions.moveTo(this.pos.x, coordinate.y, this.speed).asPromise().then(function () {\n            _this.setDrawing('idleUp');\n            return Promise.resolve();\n        });\n    };\n    Player.prototype.moveDown = function (coordinate) {\n        var _this = this;\n        this.setDrawing('walkDown');\n        return this.actions.moveTo(this.pos.x, coordinate.y, this.speed).asPromise().then(function () {\n            _this.setDrawing('idleDown');\n            return Promise.resolve();\n        });\n    };\n    Player.prototype.moveTo = function (coordinate, pathFind) {\n        if (pathFind === void 0) { pathFind = true; }\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        // TODO: Path finding algorithm required to move around obstacles in the room\n                        this.actions.clearActions();\n                        if (!(this.pos.x < coordinate.x)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, this.moveRight(coordinate)];\n                    case 1:\n                        _a.sent();\n                        _a.label = 2;\n                    case 2:\n                        if (!(this.pos.x > coordinate.x)) return [3 /*break*/, 4];\n                        return [4 /*yield*/, this.moveLeft(coordinate)];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4:\n                        if (!(this.pos.y > coordinate.y)) return [3 /*break*/, 6];\n                        return [4 /*yield*/, this.moveUp(coordinate)];\n                    case 5:\n                        _a.sent();\n                        _a.label = 6;\n                    case 6:\n                        if (!(this.pos.y < coordinate.y)) return [3 /*break*/, 8];\n                        return [4 /*yield*/, this.moveDown(coordinate)];\n                    case 7:\n                        _a.sent();\n                        _a.label = 8;\n                    case 8: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Player.prototype.clicked = function (coordinate) {\n        this.moveTo(coordinate);\n    };\n    Player.prototype.update = function (engine, delta) {\n        _super.prototype.update.call(this, engine, delta);\n        if (engine.input.keyboard.isHeld(excalibur_1.Input.Keys.W) || engine.input.keyboard.isHeld(excalibur_1.Input.Keys.Up)) {\n            this.moveTo(new excalibur_1.Vector(this.pos.x, this.pos.y - this.keyboardSpeed), false);\n        }\n        if (engine.input.keyboard.isHeld(excalibur_1.Input.Keys.A) || engine.input.keyboard.isHeld(excalibur_1.Input.Keys.Left)) {\n            this.moveTo(new excalibur_1.Vector(this.pos.x - this.keyboardSpeed, this.pos.y), false);\n        }\n        if (engine.input.keyboard.isHeld(excalibur_1.Input.Keys.S) || engine.input.keyboard.isHeld(excalibur_1.Input.Keys.Down)) {\n            this.moveTo(new excalibur_1.Vector(this.pos.x, this.pos.y + this.keyboardSpeed), false);\n        }\n        if (engine.input.keyboard.isHeld(excalibur_1.Input.Keys.D) || engine.input.keyboard.isHeld(excalibur_1.Input.Keys.Right)) {\n            this.moveTo(new excalibur_1.Vector(this.pos.x + this.keyboardSpeed, this.pos.y), false);\n        }\n    };\n    Player.prototype.onInitialize = function (engine) {\n        var _this = this;\n        resources_1.default.getInstance().onInitialize(engine);\n        this.addDrawing('idleDown', resources_1.default.getInstance().getSprite('playerIdleDown'));\n        this.addDrawing('idleUp', resources_1.default.getInstance().getSprite('playerIdleUp'));\n        this.addDrawing('idleRight', resources_1.default.getInstance().getSprite('playerIdleRight'));\n        this.addDrawing('idleLeft', resources_1.default.getInstance().getSprite('playerIdleLeft'));\n        this.addDrawing('walkDown', resources_1.default.getInstance().getAnimation('playerWalkDown'));\n        this.addDrawing('walkUp', resources_1.default.getInstance().getAnimation('playerWalkUp'));\n        this.addDrawing('walkLeft', resources_1.default.getInstance().getAnimation('playerWalkLeft'));\n        this.addDrawing('walkRight', resources_1.default.getInstance().getAnimation('playerWalkRight'));\n        this.setDrawing('idleDown');\n        // respond to click events\n        engine.input.pointers.primary.on('down', function (event) {\n            _this.clicked(event.coordinates.worldPos);\n        });\n    };\n    return Player;\n}(excalibur_1.Actor));\nexports.default = Player;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL1VzZXJzL21vb25ibGFkZS93b3Jrc3BhY2Uvd2ViL2dhbWUvc3JjL3BsYXllci50cz84OWFhIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEseUdBQTZJO0FBQzdJLCtFQUFvQztBQUNwQztJQUFxQiwwQkFBSztJQU90QjtRQUFBLFlBQ0ksa0JBQU0sRUFBRSxFQUFDLEVBQUUsRUFBQyxFQUFFLEVBQUMsRUFBRSxDQUFDLFNBSXJCO1FBSEcsS0FBSSxDQUFDLEtBQUssR0FBRyxpQkFBSyxDQUFDLEdBQUcsQ0FBQztRQUN2QixLQUFJLENBQUMsS0FBSyxHQUFHLEdBQUcsQ0FBQztRQUNqQixLQUFJLENBQUMsYUFBYSxHQUFHLENBQUMsQ0FBQzs7SUFDM0IsQ0FBQztJQUVELDBCQUFTLEdBQVQsVUFBVSxVQUFrQjtRQUE1QixpQkFNQztRQUxHLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDN0IsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxJQUFJLENBQUM7WUFDOUUsS0FBSSxDQUFDLFVBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUM3QixPQUFPLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUM3QixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUM7SUFFRCx5QkFBUSxHQUFSLFVBQVMsVUFBa0I7UUFBM0IsaUJBTUM7UUFMRyxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzVCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENB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TSxDQUFDLElBQUksa0JBQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7U0FDL0U7UUFDRCxJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxpQkFBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsSUFBSSxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsaUJBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUU7WUFDN0YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLGtCQUFNLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLEtBQUssQ0FBQyxDQUFDO1NBQy9FO1FBQ0QsSUFBSSxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsaUJBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLGlCQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQzdGLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxrQkFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUMsRUFBRSxLQUFLLENBQUMsQ0FBQztTQUMvRTtRQUNELElBQUksTUFBTSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLGlCQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxpQkFBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUM5RixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksa0JBQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7U0FDL0U7SUFDTCxDQUFDO0lBRU0sNkJBQVksR0FBbkIsVUFBb0IsTUFBYztRQUFsQyxpQkFlQztRQWRHLG1CQUFTLENBQUMsV0FBVyxFQUFFLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzdDLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxFQUFFLG1CQUFTLENBQUMsV0FBVyxFQUFFLENBQUMsU0FBUyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQztRQUNqRixJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsRUFBRSxtQkFBUyxDQUFDLFdBQVcsRUFBRSxDQUFDLFNBQVMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO1FBQzdFLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFLG1CQUFTLENBQUMsV0FBVyxFQUFFLENBQUMsU0FBUyxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQztRQUNuRixJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsRUFBRSxtQkFBUyxDQUFDLFdBQVcsRUFBRSxDQUFDLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7UUFDakYsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLEVBQUUsbUJBQVMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO1FBQ3BGLElBQUksQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLG1CQUFTLENBQUMsV0FBVyxFQUFFLENBQUMsWUFBWSxDQUFDLGNBQWMsQ0FBQyxDQUFDLENBQUM7UUFDaEYsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLEVBQUUsbUJBQVMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDO1FBQ3BGLElBQUksQ0FBQyxVQUFVLENBQUMsV0FBVyxFQUFFLG1CQUFTLENBQUMsV0FBVyxFQUFFLENBQUMsWUFBWSxDQUFDLGlCQUFpQixDQUFDLENBQUMsQ0FBQztRQUN0RixJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzVCLDBCQUEwQjtRQUMxQixNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE1BQU0sRUFBRSxVQUFDLEtBQVM7WUFDL0MsS0FBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzdDLENBQUMsQ0FBQztJQUNOLENBQUM7SUFFTCxhQUFDO0FBQUQsQ0FBQyxDQXBHb0IsaUJBQUssR0FvR3pCO0FBRUQsa0JBQWUsTUFBTSxDQUFDIiwiZmlsZSI6Ii4vc3JjL3BsYXllci50cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFjdG9yLCBFbmdpbmUsIENvbG9yLCBUZXh0dXJlLCBTcHJpdGUsIFZlY3RvciwgU3ByaXRlU2hlZXQsIEFuaW1hdGlvbiwgQ29uc29sZUFwcGVuZGVyLCBFbnRlclRyaWdnZXJFdmVudCwgSW5wdXQgfSBmcm9tICdleGNhbGlidXInO1xuaW1wb3J0IFJlc291cmNlcyBmcm9tICcuL3Jlc291cmNlcyc7XG5jbGFzcyBQbGF5ZXIgZXh0ZW5kcyBBY3RvciB7XG4gICAgaGVhbHRoOiBudW1iZXI7XG4gICAgc3BlZWQ6IG51bWJlcjtcbiAgICAvLyBIb3cgbXVjaCB0cmF2ZWwgaW4gb25lIHVwZGF0ZVxuICAgIGtleWJvYXJkU3BlZWQ6IG51bWJlcjtcbiAgICBpZGxlU3ByaXRlOiBTcHJpdGU7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoMzAsMzAsMzAsMzApO1xuICAgICAgICB0aGlzLmNvbG9yID0gQ29sb3IuUmVkO1xuICAgICAgICB0aGlzLnNwZWVkID0gNTAwO1xuICAgICAgICB0aGlzLmtleWJvYXJkU3BlZWQgPSAxO1xuICAgIH1cblxuICAgIG1vdmVSaWdodChjb29yZGluYXRlOiBWZWN0b3IpIHtcbiAgICAgICAgdGhpcy5zZXREcmF3aW5nKCd3YWxrUmlnaHQnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aW9ucy5tb3ZlVG8oY29vcmRpbmF0ZS54LCB0aGlzLnBvcy55LCB0aGlzLnNwZWVkKS5hc1Byb21pc2UoKS50aGVuKCgpPT57XG4gICAgICAgICAgICB0aGlzLnNldERyYXdpbmcoJ2lkbGVSaWdodCcpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBtb3ZlTGVmdChjb29yZGluYXRlOiBWZWN0b3IpIHtcbiAgICAgICAgdGhpcy5zZXREcmF3aW5nKCd3YWxrTGVmdCcpO1xuICAgICAgICByZXR1cm4gdGhpcy5hY3Rpb25zLm1vdmVUbyhjb29yZGluYXRlLngsIHRoaXMucG9zLnksIHRoaXMuc3BlZWQpLmFzUHJvbWlzZSgpLnRoZW4oKCk9PntcbiAgICAgICAgICAgIHRoaXMuc2V0RHJhd2luZygnaWRsZUxlZnQnKTtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbW92ZVVwKGNvb3JkaW5hdGU6IFZlY3Rvcikge1xuICAgICAgICB0aGlzLnNldERyYXdpbmcoJ3dhbGtVcCcpO1xuICAgICAgICByZXR1cm4gdGhpcy5hY3Rpb25zLm1vdmVUbyh0aGlzLnBvcy54LCBjb29yZGluYXRlLnksIHRoaXMuc3BlZWQpLmFzUHJvbWlzZSgpLnRoZW4oKCk9PntcbiAgICAgICAgICAgIHRoaXMuc2V0RHJhd2luZygnaWRsZVVwJyk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG1vdmVEb3duKGNvb3JkaW5hdGU6IFZlY3Rvcikge1xuICAgICAgICB0aGlzLnNldERyYXdpbmcoJ3dhbGtEb3duJyk7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGlvbnMubW92ZVRvKHRoaXMucG9zLngsIGNvb3JkaW5hdGUueSwgdGhpcy5zcGVlZCkuYXNQcm9taXNlKCkudGhlbigoKT0+e1xuICAgICAgICAgICAgdGhpcy5zZXREcmF3aW5nKCdpZGxlRG93bicpO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBtb3ZlVG8oY29vcmRpbmF0ZTphbnksIHBhdGhGaW5kOmJvb2xlYW4gPSB0cnVlKSB7XG4gICAgICAgIC8vIFRPRE86IFBhdGggZmluZGluZyBhbGdvcml0aG0gcmVxdWlyZWQgdG8gbW92ZSBhcm91bmQgb2JzdGFjbGVzIGluIHRoZSByb29tXG4gICAgICAgIHRoaXMuYWN0aW9ucy5jbGVhckFjdGlvbnMoKTtcbiAgICAgICAgaWYgKHRoaXMucG9zLnggPCBjb29yZGluYXRlLngpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMubW92ZVJpZ2h0KGNvb3JkaW5hdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvcy54ID4gY29vcmRpbmF0ZS54KSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1vdmVMZWZ0KGNvb3JkaW5hdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvcy55ID4gY29vcmRpbmF0ZS55KSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLm1vdmVVcChjb29yZGluYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5wb3MueSA8IGNvb3JkaW5hdGUueSkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5tb3ZlRG93bihjb29yZGluYXRlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNsaWNrZWQoY29vcmRpbmF0ZTphbnkpIHtcbiAgICAgICAgdGhpcy5tb3ZlVG8oY29vcmRpbmF0ZSk7XG4gICAgfVxuXG4gICAgdXBkYXRlKGVuZ2luZTogRW5naW5lLCBkZWx0YTogbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyLnVwZGF0ZShlbmdpbmUsIGRlbHRhKTtcbiAgICAgICAgaWYgKGVuZ2luZS5pbnB1dC5rZXlib2FyZC5pc0hlbGQoSW5wdXQuS2V5cy5XKSB8fCBlbmdpbmUuaW5wdXQua2V5Ym9hcmQuaXNIZWxkKElucHV0LktleXMuVXApKSB7XG4gICAgICAgICAgICB0aGlzLm1vdmVUbyhuZXcgVmVjdG9yKHRoaXMucG9zLngsIHRoaXMucG9zLnkgLSB0aGlzLmtleWJvYXJkU3BlZWQpLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVuZ2luZS5pbnB1dC5rZXlib2FyZC5pc0hlbGQoSW5wdXQuS2V5cy5BKSB8fCBlbmdpbmUuaW5wdXQua2V5Ym9hcmQuaXNIZWxkKElucHV0LktleXMuTGVmdCkpIHtcbiAgICAgICAgICAgIHRoaXMubW92ZVRvKG5ldyBWZWN0b3IodGhpcy5wb3MueCAtIHRoaXMua2V5Ym9hcmRTcGVlZCwgdGhpcy5wb3MueSksIGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5naW5lLmlucHV0LmtleWJvYXJkLmlzSGVsZChJbnB1dC5LZXlzLlMpIHx8IGVuZ2luZS5pbnB1dC5rZXlib2FyZC5pc0hlbGQoSW5wdXQuS2V5cy5Eb3duKSkge1xuICAgICAgICAgICAgdGhpcy5tb3ZlVG8obmV3IFZlY3Rvcih0aGlzLnBvcy54LCB0aGlzLnBvcy55ICsgdGhpcy5rZXlib2FyZFNwZWVkKSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbmdpbmUuaW5wdXQua2V5Ym9hcmQuaXNIZWxkKElucHV0LktleXMuRCkgfHwgZW5naW5lLmlucHV0LmtleWJvYXJkLmlzSGVsZChJbnB1dC5LZXlzLlJpZ2h0KSkge1xuICAgICAgICAgICAgdGhpcy5tb3ZlVG8obmV3IFZlY3Rvcih0aGlzLnBvcy54ICsgdGhpcy5rZXlib2FyZFNwZWVkLCB0aGlzLnBvcy55KSwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIG9uSW5pdGlhbGl6ZShlbmdpbmU6IEVuZ2luZSkge1xuICAgICAgICBSZXNvdXJjZXMuZ2V0SW5zdGFuY2UoKS5vbkluaXRpYWxpemUoZW5naW5lKTtcbiAgICAgICAgdGhpcy5hZGREcmF3aW5nKCdpZGxlRG93bicsIFJlc291cmNlcy5nZXRJbnN0YW5jZSgpLmdldFNwcml0ZSgncGxheWVySWRsZURvd24nKSk7XG4gICAgICAgIHRoaXMuYWRkRHJhd2luZygnaWRsZVVwJywgUmVzb3VyY2VzLmdldEluc3RhbmNlKCkuZ2V0U3ByaXRlKCdwbGF5ZXJJZGxlVXAnKSk7XG4gICAgICAgIHRoaXMuYWRkRHJhd2luZygnaWRsZVJpZ2h0JywgUmVzb3VyY2VzLmdldEluc3RhbmNlKCkuZ2V0U3ByaXRlKCdwbGF5ZXJJZGxlUmlnaHQnKSk7XG4gICAgICAgIHRoaXMuYWRkRHJhd2luZygnaWRsZUxlZnQnLCBSZXNvdXJjZXMuZ2V0SW5zdGFuY2UoKS5nZXRTcHJpdGUoJ3BsYXllcklkbGVMZWZ0JykpO1xuICAgICAgICB0aGlzLmFkZERyYXdpbmcoJ3dhbGtEb3duJywgUmVzb3VyY2VzLmdldEluc3RhbmNlKCkuZ2V0QW5pbWF0aW9uKCdwbGF5ZXJXYWxrRG93bicpKTtcbiAgICAgICAgdGhpcy5hZGREcmF3aW5nKCd3YWxrVXAnLCBSZXNvdXJjZXMuZ2V0SW5zdGFuY2UoKS5nZXRBbmltYXRpb24oJ3BsYXllcldhbGtVcCcpKTtcbiAgICAgICAgdGhpcy5hZGREcmF3aW5nKCd3YWxrTGVmdCcsIFJlc291cmNlcy5nZXRJbnN0YW5jZSgpLmdldEFuaW1hdGlvbigncGxheWVyV2Fsa0xlZnQnKSk7XG4gICAgICAgIHRoaXMuYWRkRHJhd2luZygnd2Fsa1JpZ2h0JywgUmVzb3VyY2VzLmdldEluc3RhbmNlKCkuZ2V0QW5pbWF0aW9uKCdwbGF5ZXJXYWxrUmlnaHQnKSk7XG4gICAgICAgIHRoaXMuc2V0RHJhd2luZygnaWRsZURvd24nKTtcbiAgICAgICAgLy8gcmVzcG9uZCB0byBjbGljayBldmVudHNcbiAgICAgICAgZW5naW5lLmlucHV0LnBvaW50ZXJzLnByaW1hcnkub24oJ2Rvd24nLCAoZXZlbnQ6YW55KT0+e1xuICAgICAgICAgICAgdGhpcy5jbGlja2VkKGV2ZW50LmNvb3JkaW5hdGVzLndvcmxkUG9zKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgUGxheWVyOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/player.ts\n");

/***/ }),

/***/ "./src/resources.ts":
/*!**************************!*\
  !*** ./src/resources.ts ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar excalibur_1 = __webpack_require__(/*! excalibur */ \"./node_modules/excalibur/dist/excalibur.min.js\");\nvar excalibur_tiled_1 = __webpack_require__(/*! @excaliburjs/excalibur-tiled */ \"./node_modules/@excaliburjs/excalibur-tiled/dist/excalibur-tiled.js\");\nvar graphics = __webpack_require__(/*! ./resources/graphics.json */ \"./src/resources/graphics.json\");\nvar Resources = /** @class */ (function () {\n    function Resources() {\n        this.textures = {};\n        this.animations = {};\n        this.resources = {};\n        this.tiledResources = {};\n        this.sprites = {};\n        this.initialized = false;\n        this.frameSpeed = 100;\n        for (var key in graphics.textures) {\n            this.textures[key] = new excalibur_1.Texture(graphics.textures[key]);\n        }\n        for (var key in graphics.resources) {\n            var a = graphics.resources[key];\n            this.resources[key] = new excalibur_1.Resource(a[0], a[1]);\n        }\n        for (var key in graphics.tiledResources) {\n            var a = graphics.tiledResources[key];\n            this.tiledResources[key] = new excalibur_tiled_1.default(a);\n        }\n    }\n    Resources.prototype.getTextures = function () {\n        var _this = this;\n        return Object.keys(this.textures).map(function (key) { return _this.textures[key]; });\n    };\n    Resources.prototype.getTiledResource = function (key) {\n        return this.tiledResources[key];\n    };\n    Resources.prototype.getResources = function () {\n        var _this = this;\n        var resources = Object.keys(this.resources).map(function (key) { return _this.resources[key]; });\n        resources = resources.concat(this.getTextures());\n        resources = resources.concat(Object.keys(this.tiledResources).map(function (key) { return _this.tiledResources[key]; }));\n        // console.log(resources);\n        return resources;\n    };\n    Resources.prototype.getTexture = function (key) {\n        return this.textures[key];\n    };\n    Resources.prototype.initResources = function (engine) {\n        for (var key in graphics.animations) {\n            var a = graphics.animations[key];\n            this.animations[key] = new excalibur_1.SpriteSheet(this.getTexture(a[0]), a[1], a[2], a[3], a[4]).getAnimationForAll(engine, this.frameSpeed);\n        }\n        for (var key in graphics.sprites) {\n            var a = graphics.sprites[key];\n            this.sprites[key] = new excalibur_1.Sprite(this.getTexture(a[0]), a[1], a[2], a[3], a[4]);\n        }\n    };\n    Resources.prototype.onInitialize = function (engine) {\n        if (this.initialized)\n            return;\n        this.initResources(engine);\n        this.initialized = true;\n    };\n    Resources.prototype.getSprite = function (key) {\n        var sprite = this.sprites[key];\n        if (sprite) {\n            sprite.scale = new excalibur_1.Vector(3, 3);\n            return sprite;\n        }\n    };\n    Resources.prototype.getAnimation = function (key) {\n        var anim = this.animations[key];\n        if (anim) {\n            anim.scale = new excalibur_1.Vector(3, 3);\n            return anim;\n        }\n    };\n    Resources.getInstance = function () {\n        if (!Resources.instance)\n            Resources.instance = new Resources();\n        return Resources.instance;\n    };\n    Resources.prototype.getLoader = function () {\n        var loader = new excalibur_1.Loader();\n        for (var _i = 0, _a = this.getResources(); _i < _a.length; _i++) {\n            var resource = _a[_i];\n            loader.addResource(resource);\n        }\n        return loader;\n    };\n    Resources.instance = null;\n    return Resources;\n}());\nexports.default = Resources;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vc3JjL1VzZXJzL21vb25ibGFkZS93b3Jrc3BhY2Uvd2ViL2dhbWUvc3JjL3Jlc291cmNlcy50cz8zODBmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEseUdBQTBIO0FBQzFILHVKQUF5RDtBQUN6RCxxR0FBc0Q7QUFDdEQ7SUFVSTtRQVRBLGFBQVEsR0FBUSxFQUFFLENBQUM7UUFDbkIsZUFBVSxHQUFRLEVBQUUsQ0FBQztRQUNyQixjQUFTLEdBQVEsRUFBRSxDQUFDO1FBQ3BCLG1CQUFjLEdBQVEsRUFBRSxDQUFDO1FBQ3pCLFlBQU8sR0FBUSxFQUFFLENBQUM7UUFFbEIsZ0JBQVcsR0FBWSxLQUFLLENBQUM7UUFDN0IsZUFBVSxHQUFXLEdBQUcsQ0FBQztRQUdyQixLQUFLLElBQUksR0FBRyxJQUFJLFFBQVEsQ0FBQyxRQUFRLEVBQUU7WUFDL0IsSUFBSSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLG1CQUFPLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1NBQzVEO1FBRUQsS0FBSyxJQUFJLEdBQUcsSUFBSSxRQUFRLENBQUMsU0FBUyxFQUFFO1lBQ2hDLElBQUksQ0FBQyxHQUFHLFFBQVEsQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDaEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLG9CQUFRLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQ2xEO1FBRUQsS0FBSyxJQUFJLEdBQUcsSUFBSSxRQUFRLENBQUMsY0FBYyxFQUFFO1lBQ3JDLElBQUksQ0FBQyxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDckMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLHlCQUFhLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FD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LENBQUMsQ0FBQztZQUMvQixPQUFPLE1BQU0sQ0FBQztTQUNqQjtJQUNMLENBQUM7SUFFRCxnQ0FBWSxHQUFaLFVBQWEsR0FBVztRQUNwQixJQUFJLElBQUksR0FBYSxJQUFJLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQzFDLElBQUksSUFBSSxFQUFFO1lBQ04sSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLGtCQUFNLENBQUMsQ0FBQyxFQUFDLENBQUMsQ0FBQyxDQUFDO1lBQzdCLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7SUFDTCxDQUFDO0lBRU0scUJBQVcsR0FBbEI7UUFDSSxJQUFJLENBQUMsU0FBUyxDQUFDLFFBQVE7WUFDbkIsU0FBUyxDQUFDLFFBQVEsR0FBRyxJQUFJLFNBQVMsRUFBRSxDQUFDO1FBQ3pDLE9BQU8sU0FBUyxDQUFDLFFBQVE7SUFDN0IsQ0FBQztJQUVELDZCQUFTLEdBQVQ7UUFDSSxJQUFJLE1BQU0sR0FBVyxJQUFJLGtCQUFNLEVBQUUsQ0FBQztRQUNsQyxLQUFxQixVQUFtQixFQUFuQixTQUFJLENBQUMsWUFBWSxFQUFFLEVBQW5CLGNBQW1CLEVBQW5CLElBQW1CLEVBQUU7WUFBckMsSUFBSSxRQUFRO1lBQ2IsTUFBTSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsQ0FBQztTQUNoQztRQUNELE9BQU8sTUFBTSxDQUFDO0lBQ2xCLENBQUM7SUF4Rk0sa0JBQVEsR0FBYyxJQUFJLENBQUM7SUF5RnRDLGdCQUFDO0NBQUE7QUFFRCxrQkFBZSxTQUFTLENBQUMiLCJmaWxlIjoiLi9zcmMvcmVzb3VyY2VzLnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGV4dHVyZSwgSUxvYWRlciwgSUxvYWRhYmxlLCBMb2FkZXIsIEFuaW1hdGlvbiwgU3ByaXRlU2hlZXQsIEVuZ2luZSwgVmVjdG9yLCBTcHJpdGUsIFJlc291cmNlIH0gZnJvbSBcImV4Y2FsaWJ1clwiO1xuaW1wb3J0IFRpbGVkUmVzb3VyY2UgZnJvbSAnQGV4Y2FsaWJ1cmpzL2V4Y2FsaWJ1ci10aWxlZCc7XG5pbXBvcnQgKiBhcyBncmFwaGljcyBmcm9tICcuL3Jlc291cmNlcy9ncmFwaGljcy5qc29uJztcbmNsYXNzIFJlc291cmNlcyB7XG4gICAgdGV4dHVyZXM6IGFueSA9IHt9O1xuICAgIGFuaW1hdGlvbnM6IGFueSA9IHt9O1xuICAgIHJlc291cmNlczogYW55ID0ge307XG4gICAgdGlsZWRSZXNvdXJjZXM6IGFueSA9IHt9O1xuICAgIHNwcml0ZXM6IGFueSA9IHt9O1xuICAgIHN0YXRpYyBpbnN0YW5jZTogUmVzb3VyY2VzID0gbnVsbDtcbiAgICBpbml0aWFsaXplZDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGZyYW1lU3BlZWQ6IG51bWJlciA9IDEwMDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBmb3IgKGxldCBrZXkgaW4gZ3JhcGhpY3MudGV4dHVyZXMpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dHVyZXNba2V5XSA9IG5ldyBUZXh0dXJlKGdyYXBoaWNzLnRleHR1cmVzW2tleV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yIChsZXQga2V5IGluIGdyYXBoaWNzLnJlc291cmNlcykge1xuICAgICAgICAgICAgbGV0IGEgPSBncmFwaGljcy5yZXNvdXJjZXNba2V5XTtcbiAgICAgICAgICAgIHRoaXMucmVzb3VyY2VzW2tleV0gPSBuZXcgUmVzb3VyY2UoYVswXSwgYVsxXSk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gZ3JhcGhpY3MudGlsZWRSZXNvdXJjZXMpIHtcbiAgICAgICAgICAgIGxldCBhID0gZ3JhcGhpY3MudGlsZWRSZXNvdXJjZXNba2V5XTtcbiAgICAgICAgICAgIHRoaXMudGlsZWRSZXNvdXJjZXNba2V5XSA9IG5ldyBUaWxlZFJlc291cmNlKGEpO1xuICAgICAgICB9XG5cbiAgICB9XG4gICAgXG4gICAgZ2V0VGV4dHVyZXMoKTogVGV4dHVyZVtdIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKHRoaXMudGV4dHVyZXMpLm1hcChrZXk9PnRoaXMudGV4dHVyZXNba2V5XSk7XG4gICAgfVxuICAgIFxuICAgIGdldFRpbGVkUmVzb3VyY2Uoa2V5OiBzdHJpbmcpOiBUaWxlZFJlc291cmNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZWRSZXNvdXJjZXNba2V5XTtcbiAgICB9XG5cbiAgICBnZXRSZXNvdXJjZXMoKTogSUxvYWRhYmxlW10ge1xuICAgICAgICBsZXQgcmVzb3VyY2VzID0gT2JqZWN0LmtleXModGhpcy5yZXNvdXJjZXMpLm1hcChrZXk9PnRoaXMucmVzb3VyY2VzW2tleV0pO1xuICAgICAgICByZXNvdXJjZXMgPSByZXNvdXJjZXMuY29uY2F0KHRoaXMuZ2V0VGV4dHVyZXMoKSk7XG4gICAgICAgIHJlc291cmNlcyA9IHJlc291cmNlcy5jb25jYXQoT2JqZWN0LmtleXModGhpcy50aWxlZFJlc291cmNlcykubWFwKGtleT0+dGhpcy50aWxlZFJlc291cmNlc1trZXldKSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc291cmNlcyk7XG4gICAgICAgIHJldHVybiByZXNvdXJjZXM7XG4gICAgfVxuICAgIFxuICAgIGdldFRleHR1cmUoa2V5OiBzdHJpbmcpOiBUZXh0dXJlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dHVyZXNba2V5XTtcbiAgICB9XG4gICAgXG4gICAgaW5pdFJlc291cmNlcyhlbmdpbmU6IEVuZ2luZSkge1xuICAgICAgICBmb3IgKGxldCBrZXkgaW4gZ3JhcGhpY3MuYW5pbWF0aW9ucykge1xuICAgICAgICAgICAgbGV0IGEgPSBncmFwaGljcy5hbmltYXRpb25zW2tleV1cbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uc1trZXldID0gbmV3IFNwcml0ZVNoZWV0KHRoaXMuZ2V0VGV4dHVyZShhWzBdKSwgYVsxXSwgYVsyXSwgYVszXSwgYVs0XSkuZ2V0QW5pbWF0aW9uRm9yQWxsKGVuZ2luZSwgdGhpcy5mcmFtZVNwZWVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGtleSBpbiBncmFwaGljcy5zcHJpdGVzKSB7XG4gICAgICAgICAgICBsZXQgYSA9IGdyYXBoaWNzLnNwcml0ZXNba2V5XVxuICAgICAgICAgICAgdGhpcy5zcHJpdGVzW2tleV0gPSBuZXcgU3ByaXRlKHRoaXMuZ2V0VGV4dHVyZShhWzBdKSwgYVsxXSwgYVsyXSwgYVszXSwgYVs0XSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvbkluaXRpYWxpemUoZW5naW5lOiBFbmdpbmUpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5pdGlhbGl6ZWQpXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIHRoaXMuaW5pdFJlc291cmNlcyhlbmdpbmUpO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBnZXRTcHJpdGUoa2V5OiBzdHJpbmcpOiBTcHJpdGUge1xuICAgICAgICBsZXQgc3ByaXRlOlNwcml0ZSA9IHRoaXMuc3ByaXRlc1trZXldO1xuICAgICAgICBpZiAoc3ByaXRlKSB7XG4gICAgICAgICAgICBzcHJpdGUuc2NhbGUgPSBuZXcgVmVjdG9yKDMsMyk7XG4gICAgICAgICAgICByZXR1cm4gc3ByaXRlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0QW5pbWF0aW9uKGtleTogc3RyaW5nKTogQW5pbWF0aW9uIHtcbiAgICAgICAgbGV0IGFuaW06QW5pbWF0aW9uID0gdGhpcy5hbmltYXRpb25zW2tleV07XG4gICAgICAgIGlmIChhbmltKSB7XG4gICAgICAgICAgICBhbmltLnNjYWxlID0gbmV3IFZlY3RvcigzLDMpO1xuICAgICAgICAgICAgcmV0dXJuIGFuaW07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XG4gICAgICAgIGlmICghUmVzb3VyY2VzLmluc3RhbmNlKSBcbiAgICAgICAgICAgIFJlc291cmNlcy5pbnN0YW5jZSA9IG5ldyBSZXNvdXJjZXMoKTtcbiAgICAgICAgcmV0dXJuIFJlc291cmNlcy5pbnN0YW5jZVxuICAgIH1cblxuICAgIGdldExvYWRlcigpOiBMb2FkZXIge1xuICAgICAgICBsZXQgbG9hZGVyOiBMb2FkZXIgPSBuZXcgTG9hZGVyKCk7XG4gICAgICAgIGZvciAobGV0IHJlc291cmNlIG9mIHRoaXMuZ2V0UmVzb3VyY2VzKCkpIHtcbiAgICAgICAgICAgIGxvYWRlci5hZGRSZXNvdXJjZShyZXNvdXJjZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvYWRlcjtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFJlc291cmNlczsiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/resources.ts\n");

/***/ }),

/***/ "./src/resources/graphics.json":
/*!*************************************!*\
  !*** ./src/resources/graphics.json ***!
  \*************************************/
/*! exports provided: textures, animations, sprites, tiledResources, resources, default */
/***/ (function(module) {

eval("module.exports = {\"textures\":{\"playerWalkDown\":\"./src/resources/player/walk_down.png\",\"playerWalkUp\":\"./src/resources/player/walk_up.png\",\"playerWalkRight\":\"./src/resources/player/walk_right.png\",\"playerWalkLeft\":\"./src/resources/player/walk_left.png\"},\"animations\":{\"playerWalkDown\":[\"playerWalkDown\",3,1,14,21],\"playerWalkUp\":[\"playerWalkUp\",3,1,14,21],\"playerWalkRight\":[\"playerWalkRight\",3,1,14,21],\"playerWalkLeft\":[\"playerWalkLeft\",3,1,14,21]},\"sprites\":{\"playerIdleUp\":[\"playerWalkUp\",0,0,14,21],\"playerIdleDown\":[\"playerWalkDown\",0,0,14,21],\"playerIdleRight\":[\"playerWalkRight\",0,0,14,21],\"playerIdleLeft\":[\"playerWalkLeft\",0,0,14,21]},\"tiledResources\":{\"map\":\"./src/resources/map.json\"},\"resources\":{}};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiIuL3NyYy9yZXNvdXJjZXMvZ3JhcGhpY3MuanNvbi5qcyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/resources/graphics.json\n");

/***/ }),

/***/ "./src/resources/levels.json":
/*!***********************************!*\
  !*** ./src/resources/levels.json ***!
  \***********************************/
/*! exports provided: westRoom, default */
/***/ (function(module) {

eval("module.exports = {\"westRoom\":{\"name\":\"Level One\"}};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiIuL3NyYy9yZXNvdXJjZXMvbGV2ZWxzLmpzb24uanMiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/resources/levels.json\n");

/***/ })

/******/ });